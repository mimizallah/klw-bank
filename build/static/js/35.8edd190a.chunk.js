(this["webpackJsonpklw-bank"]=this["webpackJsonpklw-bank"]||[]).push([[35],{1323:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return _}));var i=n(4),r=n(12),a=n(92),s=n(88),u=n(89),o=n(132),c=n(195),h=Object(s.a)((function e(){Object(u.a)(this,e),this.code=null,this.description=null})),l=Object(s.a)((function e(t){Object(u.a)(this,e),this.error=new h,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}));function f(e){return new l(e)}var d=Object(s.a)((function e(t){Object(u.a)(this,e),this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}));function v(e){return new d(e)}var m,y=new Set;function p(e,t,n){var i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0;for(var u in y.clear(),n){var o=e.get(u);if(o){var h=n[u],l=b(o,h);if(l!==h&&s&&s.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:o,originalValue:h,sanitizedValue:l}}),y.add(o.name),o&&(r||o.editable)){var d=Object(c.C)(o,l);if(d)return f(Object(c.D)(d,o,l));t[o.name]=l}}}var v,m=Object(a.a)(null!==(i=null===e||void 0===e?void 0:e.requiredFields)&&void 0!==i?i:[]);try{for(m.s();!(v=m.n()).done;){var p=v.value;if(!y.has(p.name))return f('missing required field "'.concat(p.name,'"'))}}catch(_){m.e(_)}finally{m.f()}return null}function b(e,t){var n=t;return"string"==typeof t&&Object(c.v)(e)?n=parseFloat(t):null!=t&&Object(c.x)(e)&&"string"!=typeof t&&(n=String(t)),Object(c.A)(n)}function _(e,t){if(!e||!Object(o.l)(t))return e;if("rings"in e||"paths"in e){if(null==m)throw new TypeError("geometry engine not loaded");return m.simplify(t,e)}return e}function g(){return x.apply(this,arguments)}function x(){return(x=Object(r.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null==m,!e.t0){e.next=5;break}return e.next=4,Promise.all([n.e(7),n.e(28)]).then(n.bind(null,434));case 4:m=e.sent;case 5:return e.abrupt("return",m);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return O.apply(this,arguments)}function O(){return(O=Object(r.a)(Object(i.a)().mark((function e(t,n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!Object(o.l)(t)||"esriGeometryPolygon"!==n&&"esriGeometryPolyline"!==n,e.t0){e.next=4;break}return e.next=4,g();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},217:function(e,t,n){"use strict";n.d(t,"a",(function(){return X})),n.d(t,"b",(function(){return S}));var i=n(4),r=n(99),a=n(12),s=n(92),u=n(187),o=n(101),c=n(102),h=n(164),l=n(192),f=n(242),d=n(132),v=n(233),m=n(1),y=(n(119),n(129)),p=n(122),b=n(221);function _(e,t,n,i){return g.apply(this,arguments)}function g(){return(g=Object(a.a)(Object(i.a)().mark((function e(t,n,r,a){var s,u,o,c,h,l,f,d;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(b.c)(t),u=n[0].spatialReference,o=Object(m.a)(Object(m.a)({},a),{},{query:Object(m.a)(Object(m.a)({},s.query),{},{f:"json",sr:JSON.stringify(u),target:JSON.stringify({geometryType:Object(p.c)(n[0]),geometries:n}),cutter:JSON.stringify(r)})}),e.next=5,Object(y.default)(s.path+"/cut",o);case 5:return c=e.sent,h=c.data,l=h.cutIndexes,f=h.geometries,d=void 0===f?[]:f,e.abrupt("return",{cutIndexes:l,geometries:d.map((function(e){var t=Object(p.a)(e);return t.spatialReference=u,t}))});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=n(128),j=n(417);function O(e,t,n){return B.apply(this,arguments)}function B(){return(B=Object(a.a)(Object(i.a)().mark((function e(t,n,r){var a,s,u,o,c,h,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="string"==typeof t?Object(x.Q)(t):t,u=n[0].spatialReference,o=Object(p.c)(n[0]),c=Object(m.a)(Object(m.a)({},r),{},{query:Object(m.a)(Object(m.a)({},s.query),{},{f:"json",sr:null!==(a=u.wkid)&&void 0!==a?a:JSON.stringify(u),geometries:JSON.stringify(Object(j.b)(n))})}),e.next=6,Object(y.default)(s.path+"/simplify",c);case 6:return h=e.sent,l=h.data,e.abrupt("return",Object(j.a)(l.geometries,o,u));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=c.a.getLogger("esri.geometry.support.normalizeUtils");function k(e,t,n){if(t){var i=function(e,t){if(!(e instanceof l.a||e instanceof h.a)){var n="straightLineDensify: the input geometry is neither polyline nor polygon";throw I.error(n),new o.a(n)}var i,r=Object(f.b)(e),a=[],u=Object(s.a)(r);try{for(u.s();!(i=u.n()).done;){var c=i.value,d=[];a.push(d),d.push([c[0][0],c[0][1]]);for(var v=0;v<c.length-1;v++){var m=c[v][0],y=c[v][1],p=c[v+1][0],b=c[v+1][1],_=Math.sqrt((p-m)*(p-m)+(b-y)*(b-y)),g=(b-y)/_,x=(p-m)/_,j=_/t;if(j>1){for(var O=1;O<=j-1;O++){var B=O*t,k=x*B+m,w=g*B+y;d.push([k,w])}var M=(_+Math.floor(j-1)*t)/2,X=x*M+m,Y=g*M+y;d.push([X,Y])}d.push([p,b])}}}catch(S){u.e(S)}finally{u.f()}return function(e){return"polygon"===e.type}(e)?new h.a({rings:a,spatialReference:e.spatialReference}):new l.a({paths:a,spatialReference:e.spatialReference})}(e,1e6);e=Object(v.e)(i,!0)}return n&&(e=Object(f.d)(e,n)),e}function w(e,t,n){if(Array.isArray(e)){var i=e[0];if(i>t){var r=Object(f.c)(i,t);e[0]=i+r*(-2*t)}else if(i<n){var a=Object(f.c)(i,n);e[0]=i+a*(-2*n)}}else{var s=e.x;if(s>t){var u=Object(f.c)(s,t);e=e.clone().offset(u*(-2*t),0)}else if(s<n){var o=Object(f.c)(s,n);e=e.clone().offset(o*(-2*n),0)}}return e}function M(e,t){for(var n=-1,i=function(){for(var i=t.cutIndexes[r],a=t.geometries[r],u=Object(f.b)(a),o=function(e){var t=u[e];t.some((function(n){if(n[0]<180)return!0;for(var i=0,r=0;r<t.length;r++){var s=t[r][0];i=s>i?s:i}i=Number(i.toFixed(9));for(var u=-360*Object(f.c)(i,180),o=0;o<t.length;o++){var c=a.getPoint(e,o);a.setPoint(e,o,c.clone().offset(u,0))}return!0}))},c=0;c<u.length;c++)o(c);if(i===n){if(function(e){return"polygon"===e[0].type}(e)){var h,l=Object(s.a)(Object(f.b)(a));try{for(l.s();!(h=l.n()).done;){var d=h.value;e[i]=e[i].addRing(d)}}catch(p){l.e(p)}finally{l.f()}}else if(function(e){return"polyline"===e[0].type}(e)){var v,m=Object(s.a)(Object(f.b)(a));try{for(m.s();!(v=m.n()).done;){var y=v.value;e[i]=e[i].addPath(y)}}catch(p){m.e(p)}finally{m.f()}}}else n=i,e[i]=a},r=0;r<t.cutIndexes.length;r++)i();return e}function X(e,t,n){return Y.apply(this,arguments)}function Y(){return(Y=Object(a.a)(Object(i.a)().mark((function e(t,n,r){var a,o,c,m,y,p,b,g,x,j,B,Y,S,R,E,F,L,A,T,C,q,P,J,z,N,G,W,D,Z,H,U,V,Q,K,$,ee,te,ne,ie,re,ae;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)){e.next=2;break}return e.abrupt("return",X([t],n));case 2:n&&"string"!=typeof n&&I.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead"),o="string"==typeof n?n:null!==(a=null===n||void 0===n?void 0:n.url)&&void 0!==a?a:u.a.geometryServiceUrl,B=0,Y=[],S=[],R=Object(s.a)(t);try{for(R.s();!(E=R.n()).done;)null!=(F=E.value)?(c||(c=F.spatialReference,m=Object(d.e)(c),y=c.isWebMercator,g=y?102100:4326,p=f.a[g].maxX,b=f.a[g].minX,x=f.a[g].plus180Line,j=f.a[g].minus180Line),m?"mesh"===F.type?S.push(F):"point"===F.type?S.push(w(F.clone(),p,b)):"multipoint"===F.type?((L=F.clone()).points=L.points.map((function(e){return w(e,p,b)})),S.push(L)):"extent"===F.type?(A=F.clone()._normalize(!1,!1,m),S.push(A.rings?new h.a(A):A)):F.extent?(T=F.extent,C=Object(f.c)(T.xmin,b)*(2*p),q=0===C?F.clone():Object(f.d)(F.clone(),C),T.offset(C,0),T.intersects(x)&&T.xmax!==p?(B=T.xmax>B?T.xmax:B,q=k(q,y),Y.push(q),S.push("cut")):T.intersects(j)&&T.xmin!==b?(B=T.xmax*(2*p)>B?T.xmax*(2*p):B,q=k(q,y,360),Y.push(q),S.push("cut")):S.push(q)):S.push(F.clone()):S.push(F)):S.push(F)}catch(i){R.e(i)}finally{R.f()}for(P=Object(f.c)(B,p),J=-90,z=P,N=new l.a;P>0;)G=360*P-180,N.addPath([[G,J],[G,-1*J]]),J*=-1,P--;if(!(Y.length>0&&z>0)){e.next=29;break}return e.t0=M,e.t1=Y,e.next=16,_(o,Y,N,r);case 16:for(e.t2=e.sent,W=(0,e.t0)(e.t1,e.t2),D=[],Z=[],H=0;H<S.length;H++)"cut"!==(U=S[H])?Z.push(U):(V=W.shift(),null!=(Q=t[H])&&"polygon"===Q.type&&Q.rings&&Q.rings.length>1&&V.rings.length>=Q.rings.length?(D.push(V),Z.push("simplify")):Z.push(y?Object(v.b)(V):V));if(D.length){e.next=23;break}return e.abrupt("return",Z);case 23:return e.next=25,O(o,D,r);case 25:for(K=e.sent,$=[],ee=0;ee<Z.length;ee++)"simplify"!==(te=Z[ee])?$.push(te):$.push(y?Object(v.b)(K.shift()):K.shift());return e.abrupt("return",$);case 29:for(ne=[],ie=0;ie<S.length;ie++)"cut"!==(re=S[ie])?ne.push(re):(ae=Y.shift(),ne.push(!0===y?Object(v.b)(ae):ae));return e.abrupt("return",ne);case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){var n=Object(d.e)(t);if(n){var i=Object(r.a)(n.valid,2),a=i[0],s=i[1],u=s-a;if(e<a)for(;e<a;)e+=u;if(e>s)for(;e>s;)e-=u}return e}},242:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c}));var i=n(92),r=n(192),a=n(125),s=n(122),u={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new r.a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:a.a.WebMercator}),minus180Line:new r.a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:a.a.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new r.a({paths:[[[180,-180],[180,180]]],spatialReference:a.a.WGS84}),minus180Line:new r.a({paths:[[[-180,-180],[-180,180]]],spatialReference:a.a.WGS84})}};function o(e,t){return Math.ceil((e-t)/(2*t))}function c(e,t){var n,r=h(e),a=Object(i.a)(r);try{for(a.s();!(n=a.n()).done;){var s,u=n.value,o=Object(i.a)(u);try{for(o.s();!(s=o.n()).done;){s.value[0]+=t}}catch(c){o.e(c)}finally{o.f()}}}catch(c){a.e(c)}finally{a.f()}return e}function h(e){return Object(s.g)(e)?e.rings:e.paths}},597:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(90),r=n(91),a=n(92),s=n(89),u=n(88),o=n(98),c=n(111),h=n(440),l=n(670),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,n=arguments.length>1?arguments[1]:void 0;Object(s.a)(this,e),this._compareMinX=y,this._compareMinY=p,this._toBBox=function(e){return e},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&("function"==typeof n?this._toBBox=n:this._initFormat(n)),this.clear()}return Object(u.a)(e,[{key:"destroy",value:function(){this.clear(),I.prune(),k.prune(),w.prune(),M.prune()}},{key:"all",value:function(e){this._all(this._data,e)}},{key:"search",value:function(e,t){var n=this._data,i=this._toBBox;if(O(e,n))for(I.clear();n;){for(var r=0,a=n.children.length;r<a;r++){var s=n.children[r],u=n.leaf?i(s):s;O(e,u)&&(n.leaf?t(s):j(e,u)?this._all(s,t):I.push(s))}n=I.pop()}}},{key:"collides",value:function(e){var t=this._data,n=this._toBBox;if(!O(e,t))return!1;for(I.clear();t;){for(var i=0,r=t.children.length;i<r;i++){var a=t.children[i],s=t.leaf?n(a):a;if(O(e,s)){if(t.leaf||j(e,s))return!0;I.push(a)}}t=I.pop()}return!1}},{key:"load",value:function(e){if(!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var i=this._build(e.slice(0,e.length),0,e.length-1,0);if(this._data.children.length)if(this._data.height===i.height)this._splitRoot(this._data,i);else{if(this._data.height<i.height){var r=this._data;this._data=i,i=r}this._insert(i,this._data.height-i.height-1,!0)}else this._data=i;return this}},{key:"insert",value:function(e){return e&&this._insert(e,this._data.height-1),this}},{key:"clear",value:function(){return this._data=new Y([]),this}},{key:"remove",value:function(e){if(!e)return this;var t,n=this._data,i=null,r=0,a=!1,s=this._toBBox(e);for(w.clear(),M.clear();n||w.length>0;){var u;if(n||(n=Object(c.d)(w.pop()),i=w.data[w.length-1],r=null!==(u=M.pop())&&void 0!==u?u:0,a=!0),n.leaf&&-1!==(t=Object(o.g)(n.children,e,n.children.length,n.indexHint)))return n.children.splice(t,1),w.push(n),this._condense(w),this;a||n.leaf||!j(n,s)?i?(r++,n=i.children[r],a=!1):n=null:(w.push(n),M.push(r),r=0,i=n,n=n.children[0])}return this}},{key:"toJSON",value:function(){return this._data}},{key:"fromJSON",value:function(e){return this._data=e,this}},{key:"_all",value:function(e,t){var n=e;for(k.clear();n;){var i;if(!0===n.leaf){var r,s=Object(a.a)(n.children);try{for(s.s();!(r=s.n()).done;){t(r.value)}}catch(u){s.e(u)}finally{s.f()}}else k.pushArray(n.children);n=null!==(i=k.pop())&&void 0!==i?i:null}}},{key:"_build",value:function(e,t,n,i){var r=n-t+1,a=this._maxEntries;if(r<=a){var s=new Y(e.slice(t,n+1));return d(s,this._toBBox),s}i||(i=Math.ceil(Math.log(r)/Math.log(a)),a=Math.ceil(r/Math.pow(a,i-1)));var u=new S([]);u.height=i;var o=Math.ceil(r/a),c=o*Math.ceil(Math.sqrt(a));B(e,t,n,c,this._compareMinX);for(var h=t;h<=n;h+=c){var l=Math.min(h+c-1,n);B(e,h,l,o,this._compareMinY);for(var f=h;f<=l;f+=o){var v=Math.min(f+o-1,l);u.children.push(this._build(e,f,v,i-1))}}return d(u,this._toBBox),u}},{key:"_chooseSubtree",value:function(e,t,n,i){for(;i.push(t),!0!==t.leaf&&i.length-1!==n;){for(var r=void 0,a=1/0,s=1/0,u=0,o=t.children.length;u<o;u++){var c=t.children[u],h=b(c),l=g(e,c)-h;l<s?(s=l,a=h<a?h:a,r=c):l===s&&h<a&&(a=h,r=c)}t=r||t.children[0]}return t}},{key:"_insert",value:function(e,t,n){var i=this._toBBox,r=n?e:i(e);w.clear();var a=this._chooseSubtree(r,this._data,t,w);for(a.children.push(e),m(a,r);t>=0&&w.data[t].children.length>this._maxEntries;)this._split(w,t),t--;this._adjustParentBBoxes(r,w,t)}},{key:"_split",value:function(e,t){var n=e.data[t],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var a=this._chooseSplitIndex(n,r,i);if(a){var s=n.children.splice(a,n.children.length-a),u=n.leaf?new Y(s):new S(s);u.height=n.height,d(n,this._toBBox),d(u,this._toBBox),t?e.data[t-1].children.push(u):this._splitRoot(n,u)}else console.log("  Error: assertion failed at PooledRBush._split: no valid split index")}},{key:"_splitRoot",value:function(e,t){this._data=new S([e,t]),this._data.height=e.height+1,d(this._data,this._toBBox)}},{key:"_chooseSplitIndex",value:function(e,t,n){var i,r,a;i=r=1/0;for(var s=t;s<=n-t;s++){var u=v(e,0,s,this._toBBox),o=v(e,s,n,this._toBBox),c=x(u,o),h=b(u)+b(o);c<i?(i=c,a=s,r=h<r?h:r):c===i&&h<r&&(r=h,a=s)}return a}},{key:"_chooseSplitAxis",value:function(e,t,n){var i=e.leaf?this._compareMinX:y,r=e.leaf?this._compareMinY:p;this._allDistMargin(e,t,n,i)<this._allDistMargin(e,t,n,r)&&e.children.sort(i)}},{key:"_allDistMargin",value:function(e,t,n,i){e.children.sort(i);for(var r=this._toBBox,a=v(e,0,t,r),s=v(e,n-t,n,r),u=_(a)+_(s),o=t;o<n-t;o++){var c=e.children[o];m(a,e.leaf?r(c):c),u+=_(a)}for(var h=n-t-1;h>=t;h--){var l=e.children[h];m(s,e.leaf?r(l):l),u+=_(s)}return u}},{key:"_adjustParentBBoxes",value:function(e,t,n){for(var i=n;i>=0;i--)m(t.data[i],e)}},{key:"_condense",value:function(e){for(var t=e.length-1;t>=0;t--){var n=e.data[t];if(0===n.children.length)if(t>0){var i=e.data[t-1],r=i.children;r.splice(Object(o.g)(r,n,r.length,i.indexHint),1)}else this.clear();else d(n,this._toBBox)}}},{key:"_initFormat",value:function(e){var t=["return a"," - b",";"];this._compareMinX=new Function("a","b",t.join(e[0])),this._compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}]),e}();function d(e,t){v(e,0,e.children.length,t,e)}function v(e,t,n,i,r){r||(r=new Y([])),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var a,s=t;s<n;s++)a=e.children[s],m(r,e.leaf?i(a):a);return r}function m(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function y(e,t){return e.minX-t.minX}function p(e,t){return e.minY-t.minY}function b(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function _(e){return e.maxX-e.minX+(e.maxY-e.minY)}function g(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function x(e,t){var n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),r=Math.min(e.maxX,t.maxX),a=Math.min(e.maxY,t.maxY);return Math.max(0,r-n)*Math.max(0,a-i)}function j(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function O(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function B(e,t,n,i,r){for(var a=[t,n];a.length;){var s=Object(c.d)(a.pop()),u=Object(c.d)(a.pop());if(!(s-u<=i)){var o=u+Math.ceil((s-u)/i/2)*i;Object(l.a)(e,o,u,s,r),a.push(u,o,o,s)}}}var I=new h.a,k=new h.a,w=new h.a,M=new h.a({deallocator:void 0}),X=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments)).height=1,e.indexHint=new o.a,e}return Object(u.a)(n)}(Object(u.a)((function e(){Object(s.a)(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}))),Y=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this)).children=e,i.leaf=!0,i}return Object(u.a)(n)}(X),S=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this)).children=e,i.leaf=!1,i}return Object(u.a)(n)}(X)},634:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(92),r=n(89),a=n(88),s=n(93),u=n(597),o=n(139),c={minX:0,minY:0,maxX:0,maxY:0};function h(e,t,n){(function(e){c.minX=e[0],c.minY=e[1],c.maxX=e[2],c.maxY=e[3]})(t),e.search(c,n)}var l=function(){function e(){var t=this;Object(r.a)(this,e),this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new u.a(9,Object(s.a)("esri-csp-restrictions")?function(e){return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}:["[0]","[1]","[2]","[3]"]),this._loadIndex=function(){if(t._indexInvalid){var e=new Array(t._idByBounds.size),n=0;t._idByBounds.forEach((function(t,i){e[n++]=i})),t._indexInvalid=!1,t._index.clear(),t._index.load(e)}else t._boundsToLoad.length&&(t._index.load(Array.from(new Set(t._boundsToLoad.filter((function(e){return t._idByBounds.has(e)}))))),t._boundsToLoad.length=0)}}return Object(a.a)(e,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;var e,t=Object(o.i)(),n=Object(i.a)(this._boundsById.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;r&&(t[0]=Math.min(r[0],t[0]),t[1]=Math.min(r[1],t[1]),t[2]=Math.max(r[2],t[2]),t[3]=Math.max(r[3],t[3]))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"valid",get:function(){return!this._indexInvalid}},{key:"clear",value:function(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}},{key:"delete",value:function(e){var t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}},{key:"forEachInBounds",value:function(e,t){var n=this;this._loadIndex(),h(this._index,e,(function(e){return t(n._idByBounds.get(e))}))}},{key:"get",value:function(e){return this._boundsById.get(e)}},{key:"has",value:function(e){return this._boundsById.has(e)}},{key:"invalidateIndex",value:function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}},{key:"set",value:function(e,t){if(!this._indexInvalid){var n=this._boundsById.get(e);n&&(this._index.remove(n),this._idByBounds.delete(n))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}]),e}()},710:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(92),r=n(99),a=n(89),s=n(88),u=n(101),o=n(193),c=n(102),h=n(392),l=n(139),f=n(168),d=n(634),v=n(375),m=n(335),y=n(169),p={getObjectId:function(e){return e.objectId},getAttributes:function(e){return e.attributes},getAttribute:function(e,t){return e.attributes[t]},cloneWithGeometry:function(e,t){return new m.a(t,e.attributes,null,e.objectId)},getGeometry:function(e){return e.geometry},getCentroid:function(e,t){return null==e.centroid&&(e.centroid=Object(v.a)(new y.a,e.geometry,t.hasZ,t.hasM)),e.centroid}},b=n(598),_=Object(h.b)(),g=function(){function e(t){Object(a.a)(this,e),this.geometryInfo=t,this._boundsStore=new d.a,this._featuresById=new Map,this._markedIds=new Set,this.events=new o.a,this.featureAdapter=p}return Object(s.a)(e,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){var e=0;return this._featuresById.forEach((function(t){null!=t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}},{key:"getFullExtent",value:function(e){if(null==this.fullBounds)return null;var t=Object(r.a)(this.fullBounds,4);return{xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:Object(b.b)(e)}}},{key:"add",value:function(e){this._add(e),this._emitChanged()}},{key:"addMany",value:function(e){var t,n=Object(i.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._add(r)}}catch(a){n.e(a)}finally{n.f()}this._emitChanged()}},{key:"clear",value:function(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}},{key:"removeById",value:function(e){var t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}},{key:"removeManyById",value:function(e){this._boundsStore.invalidateIndex();var t,n=Object(i.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=this._featuresById.get(r);a&&this._remove(a)}}catch(s){n.e(s)}finally{n.f()}this._emitChanged()}},{key:"forEachBounds",value:function(e,t){var n,r=Object(i.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value,s=this._boundsStore.get(a.objectId);s&&t(Object(h.h)(_,s))}}catch(u){r.e(u)}finally{r.f()}}},{key:"getFeature",value:function(e){return this._featuresById.get(e)}},{key:"has",value:function(e){return this._featuresById.has(e)}},{key:"forEach",value:function(e){this._featuresById.forEach((function(t){return e(t)}))}},{key:"forEachInBounds",value:function(e,t){var n=this;this._boundsStore.forEachInBounds(e,(function(e){t(n._featuresById.get(e))}))}},{key:"startMarkingUsedFeatures",value:function(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}},{key:"sweep",value:function(){var e=this,t=!1;this._featuresById.forEach((function(n,i){e._markedIds.has(i)||(t=!0,e._remove(n))})),this._markedIds.clear(),t&&this._emitChanged()}},{key:"_emitChanged",value:function(){this.events.emit("changed",void 0)}},{key:"_add",value:function(e){if(e){var t=e.objectId;if(null!=t){var n,i=this._featuresById.get(t);if(this._markedIds.add(t),i?(e.displayId=i.displayId,n=this._boundsStore.get(t),this._boundsStore.delete(t)):null!=this.onFeatureAdd&&this.onFeatureAdd(e),null==e.geometry||!e.geometry.coords||!e.geometry.coords.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);null!=(n=Object(f.r)(null!=n?n:Object(l.h)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM))&&this._boundsStore.set(t,n),this._featuresById.set(t,e)}else c.a.getLogger("esri.layers.graphics.data.FeatureStore").error(new u.a("featurestore:invalid-feature","feature id is missing",{feature:e}))}}},{key:"_remove",value:function(e){null!=this.onFeatureRemove&&this.onFeatureRemove(e);var t=e.objectId;return this._markedIds.delete(t),this._boundsStore.delete(t),this._featuresById.delete(t),e}}]),e}()}}]);
//# sourceMappingURL=35.8edd190a.chunk.js.map
(this["webpackJsonpklw-bank"]=this["webpackJsonpklw-bank"]||[]).push([[187],{1165:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return d}));var r=n(1),a=n(99),i=n(213),s=n(314),u={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(s.b)(),t=(e=e.toLowerCase())in u;if(!t){var n=e.split("-");n.length>1&&n[0]in u&&(e=n[0],t=!0),t||(e="en")}var r=Object(a.a)(u[e],3),i=r[0],o=r[1],c=r[2];return{decimal:i,group:o,pattern:void 0===c?"#,##0.###":c}}function c(e,t){var n=o((t=Object(r.a)({},t)).locale);t.customs=n;var a=t.pattern||n.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,n){var r=(n=n||{}).customs.group,a=n.customs.decimal,i=t.split(";"),s=i[0];if((t=i[e<0?1:0]||"-"+s).includes("%"))e*=100;else if(t.includes("\u2030"))e*=1e3;else{if(t.includes("\xa4"))throw new Error("currency notation not supported");if(t.includes("E"))throw new Error("exponential notation not supported")}var u=l,o=s.match(u);if(!o)throw new Error("unable to find a number expression in pattern: "+t);return!1===n.fractional&&(n.places=0),t.replace(u,function(e,t,n){!0===(n=n||{}).places&&(n.places=0),n.places===1/0&&(n.places=6);var r=t.split("."),a="string"==typeof n.places&&n.places.indexOf(","),i=n.places;a?i=n.places.substring(a+1):+i>=0||(i=(r[1]||[]).length),n.round<0||(e=Number(e.toFixed(Number(i))));var s=String(Math.abs(e)).split("."),u=s[1]||"";if(r[1]||n.places){a&&(n.places=n.places.substring(0,a));var o=void 0!==n.places?n.places:r[1]&&r[1].lastIndexOf("0")+1;+o>u.length&&(s[1]=u.padEnd(Number(o),"0")),+i<u.length&&(s[1]=u.substr(0,Number(i)))}else s[1]&&s.pop();var c=r[0].replace(",",""),l=c.indexOf("0");-1!==l&&(l=c.length-l,l>s[0].length&&(s[0]=s[0].padStart(l,"0")),c.includes("#")||(s[0]=s[0].substr(s[0].length-l)));var f,d,h=r[0].lastIndexOf(",");if(-1!==h){f=r[0].length-h-1;var p=r[0].substr(0,h);-1!==(h=p.lastIndexOf(","))&&(d=p.length-h-1)}for(var v=[],m=s[0];m;){var y=m.length-f;v.push(y>0?m.substr(y):m),m=y>0?m.slice(0,y):"",d&&(f=d,d=void 0)}return s[0]=v.reverse().join(n.group||","),s.join(n.decimal||".")}(e,o[0],{decimal:a,group:r,places:n.places,round:n.round}))}(e,a,t)}var l=/[#0,]*[#0](?:\.0*#*)?/;function f(e){var t=o((e=e||{}).locale),n=e.pattern||t.pattern,r=t.group,a=t.decimal,s=1;if(n.includes("%"))s/=100;else if(n.includes("\u2030"))s/=1e3;else if(n.includes("\xa4"))throw new Error("currency notation not supported");var u=n.split(";");1===u.length&&u.push("-"+u[0]);var c=p(u,(function(t){return(t="(?:"+Object(i.a)(t,".")+")").replace(l,(function(t){var n={signed:!1,separator:e.strict?r:[r,""],fractional:e.fractional,decimal:a,exponent:!1},i=t.split("."),u=e.places;1===i.length&&1!==s&&(i[1]="###"),1===i.length||0===u?n.fractional=!1:(void 0===u&&(u=e.pattern?i[1].lastIndexOf("0")+1:1/0),u&&null==e.fractional&&(n.fractional=!0),!e.places&&+u<i[1].length&&(u+=","+i[1].length),n.places=u);var o=i[0].split(",");return o.length>1&&(n.groupSize=o.pop().length,o.length>1&&(n.groupSize2=o.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);var t=h(e),n=p(e.fractional,(function(t){var n="";return t&&0!==e.places&&(n="\\"+e.decimal,e.places===1/0?n="(?:"+n+"\\d+)?":n+="\\d{"+e.places+"}"),n}),!0),r=t+n;return n&&(r="(?:(?:"+r+")|(?:"+n+"))"),r+p(e.exponent,(function(t){return t?"([eE]"+h({signed:e.eSigned})+")":""}))}(n)+")"}))}),!0);return{regexp:c.replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:r,decimal:a,factor:s}}function d(e,t){var n=f(t),r=new RegExp("^"+n.regexp+"$").exec(e);if(!r)return NaN;var a=r[1];if(!r[1]){if(!r[2])return NaN;a=r[2],n.factor*=-1}return a=a.replaceAll(new RegExp("["+n.group+"\\s\\xa0]","g"),"").replace(n.decimal,"."),Number(a)*n.factor}function h(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",p(e.signed,(function(e){return e?"[-+]":""}),!0)+p(e.separator,(function(t){if(!t)return"(?:\\d+)";" "===(t=Object(i.a)(t))?t="\\s":"\xa0"===t&&(t="\\s\\xa0");var n=e.groupSize,r=e.groupSize2;if(r){var a="(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*["+t+"]\\d{"+n+"})";return n-r>0?"(?:"+a+"|(?:0|[1-9]\\d{0,"+(n-1)+"}))":a}return"(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+t+"]\\d{"+n+"})*)"}),!0)}var p=function(e,t,n){if(!(e instanceof Array))return t(e);for(var r=[],a=0;a<e.length;a++)r.push(t(e[a]));return v(r.join("|"),Boolean(n))},v=function(e,t){return"("+(t?"?:":"")+e+")"}},217:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return M}));var r=n(4),a=n(99),i=n(12),s=n(92),u=n(187),o=n(101),c=n(102),l=n(164),f=n(192),d=n(242),h=n(132),p=n(233),v=n(1),m=(n(119),n(129)),y=n(122),b=n(221);function g(e,t,n,r){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(Object(r.a)().mark((function e(t,n,a,i){var s,u,o,c,l,f,d,h;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(b.c)(t),u=n[0].spatialReference,o=Object(v.a)(Object(v.a)({},i),{},{query:Object(v.a)(Object(v.a)({},s.query),{},{f:"json",sr:JSON.stringify(u),target:JSON.stringify({geometryType:Object(y.c)(n[0]),geometries:n}),cutter:JSON.stringify(a)})}),e.next=5,Object(m.default)(s.path+"/cut",o);case 5:return c=e.sent,l=c.data,f=l.cutIndexes,d=l.geometries,h=void 0===d?[]:d,e.abrupt("return",{cutIndexes:f,geometries:h.map((function(e){var t=Object(y.a)(e);return t.spatialReference=u,t}))});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=n(128),O=n(417);function j(e,t,n){return k.apply(this,arguments)}function k(){return(k=Object(i.a)(Object(r.a)().mark((function e(t,n,a){var i,s,u,o,c,l,f;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="string"==typeof t?Object(_.Q)(t):t,u=n[0].spatialReference,o=Object(y.c)(n[0]),c=Object(v.a)(Object(v.a)({},a),{},{query:Object(v.a)(Object(v.a)({},s.query),{},{f:"json",sr:null!==(i=u.wkid)&&void 0!==i?i:JSON.stringify(u),geometries:JSON.stringify(Object(O.b)(n))})}),e.next=6,Object(m.default)(s.path+"/simplify",c);case 6:return l=e.sent,f=l.data,e.abrupt("return",Object(O.a)(f.geometries,o,u));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=c.a.getLogger("esri.geometry.support.normalizeUtils");function w(e,t,n){if(t){var r=function(e,t){if(!(e instanceof f.a||e instanceof l.a)){var n="straightLineDensify: the input geometry is neither polyline nor polygon";throw I.error(n),new o.a(n)}var r,a=Object(d.b)(e),i=[],u=Object(s.a)(a);try{for(u.s();!(r=u.n()).done;){var c=r.value,h=[];i.push(h),h.push([c[0][0],c[0][1]]);for(var p=0;p<c.length-1;p++){var v=c[p][0],m=c[p][1],y=c[p+1][0],b=c[p+1][1],g=Math.sqrt((y-v)*(y-v)+(b-m)*(b-m)),x=(b-m)/g,_=(y-v)/g,O=g/t;if(O>1){for(var j=1;j<=O-1;j++){var k=j*t,w=_*k+v,B=x*k+m;h.push([w,B])}var F=(g+Math.floor(O-1)*t)/2,S=_*F+v,N=x*F+m;h.push([S,N])}h.push([y,b])}}}catch(M){u.e(M)}finally{u.f()}return function(e){return"polygon"===e.type}(e)?new l.a({rings:i,spatialReference:e.spatialReference}):new f.a({paths:i,spatialReference:e.spatialReference})}(e,1e6);e=Object(p.e)(r,!0)}return n&&(e=Object(d.d)(e,n)),e}function B(e,t,n){if(Array.isArray(e)){var r=e[0];if(r>t){var a=Object(d.c)(r,t);e[0]=r+a*(-2*t)}else if(r<n){var i=Object(d.c)(r,n);e[0]=r+i*(-2*n)}}else{var s=e.x;if(s>t){var u=Object(d.c)(s,t);e=e.clone().offset(u*(-2*t),0)}else if(s<n){var o=Object(d.c)(s,n);e=e.clone().offset(o*(-2*n),0)}}return e}function F(e,t){for(var n=-1,r=function(){for(var r=t.cutIndexes[a],i=t.geometries[a],u=Object(d.b)(i),o=function(e){var t=u[e];t.some((function(n){if(n[0]<180)return!0;for(var r=0,a=0;a<t.length;a++){var s=t[a][0];r=s>r?s:r}r=Number(r.toFixed(9));for(var u=-360*Object(d.c)(r,180),o=0;o<t.length;o++){var c=i.getPoint(e,o);i.setPoint(e,o,c.clone().offset(u,0))}return!0}))},c=0;c<u.length;c++)o(c);if(r===n){if(function(e){return"polygon"===e[0].type}(e)){var l,f=Object(s.a)(Object(d.b)(i));try{for(f.s();!(l=f.n()).done;){var h=l.value;e[r]=e[r].addRing(h)}}catch(y){f.e(y)}finally{f.f()}}else if(function(e){return"polyline"===e[0].type}(e)){var p,v=Object(s.a)(Object(d.b)(i));try{for(v.s();!(p=v.n()).done;){var m=p.value;e[r]=e[r].addPath(m)}}catch(y){v.e(y)}finally{v.f()}}}else n=r,e[r]=i},a=0;a<t.cutIndexes.length;a++)r();return e}function S(e,t,n){return N.apply(this,arguments)}function N(){return(N=Object(i.a)(Object(r.a)().mark((function e(t,n,a){var i,o,c,v,m,y,b,x,_,O,k,N,M,E,T,X,Y,C,A,R,q,D,L,P,z,G,Q,V,J,U,Z,W,$,H,K,ee,te,ne,re,ae,ie;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)){e.next=2;break}return e.abrupt("return",S([t],n));case 2:n&&"string"!=typeof n&&I.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead"),o="string"==typeof n?n:null!==(i=null===n||void 0===n?void 0:n.url)&&void 0!==i?i:u.a.geometryServiceUrl,k=0,N=[],M=[],E=Object(s.a)(t);try{for(E.s();!(T=E.n()).done;)null!=(X=T.value)?(c||(c=X.spatialReference,v=Object(h.e)(c),m=c.isWebMercator,x=m?102100:4326,y=d.a[x].maxX,b=d.a[x].minX,_=d.a[x].plus180Line,O=d.a[x].minus180Line),v?"mesh"===X.type?M.push(X):"point"===X.type?M.push(B(X.clone(),y,b)):"multipoint"===X.type?((Y=X.clone()).points=Y.points.map((function(e){return B(e,y,b)})),M.push(Y)):"extent"===X.type?(C=X.clone()._normalize(!1,!1,v),M.push(C.rings?new l.a(C):C)):X.extent?(A=X.extent,R=Object(d.c)(A.xmin,b)*(2*y),q=0===R?X.clone():Object(d.d)(X.clone(),R),A.offset(R,0),A.intersects(_)&&A.xmax!==y?(k=A.xmax>k?A.xmax:k,q=w(q,m),N.push(q),M.push("cut")):A.intersects(O)&&A.xmin!==b?(k=A.xmax*(2*y)>k?A.xmax*(2*y):k,q=w(q,m,360),N.push(q),M.push("cut")):M.push(q)):M.push(X.clone()):M.push(X)):M.push(X)}catch(r){E.e(r)}finally{E.f()}for(D=Object(d.c)(k,y),L=-90,P=D,z=new f.a;D>0;)G=360*D-180,z.addPath([[G,L],[G,-1*L]]),L*=-1,D--;if(!(N.length>0&&P>0)){e.next=29;break}return e.t0=F,e.t1=N,e.next=16,g(o,N,z,a);case 16:for(e.t2=e.sent,Q=(0,e.t0)(e.t1,e.t2),V=[],J=[],U=0;U<M.length;U++)"cut"!==(Z=M[U])?J.push(Z):(W=Q.shift(),null!=($=t[U])&&"polygon"===$.type&&$.rings&&$.rings.length>1&&W.rings.length>=$.rings.length?(V.push(W),J.push("simplify")):J.push(m?Object(p.b)(W):W));if(V.length){e.next=23;break}return e.abrupt("return",J);case 23:return e.next=25,j(o,V,a);case 25:for(H=e.sent,K=[],ee=0;ee<J.length;ee++)"simplify"!==(te=J[ee])?K.push(te):K.push(m?Object(p.b)(H.shift()):H.shift());return e.abrupt("return",K);case 29:for(ne=[],re=0;re<M.length;re++)"cut"!==(ae=M[re])?ne.push(ae):(ie=N.shift(),ne.push(!0===m?Object(p.b)(ie):ie));return e.abrupt("return",ne);case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){var n=Object(h.e)(t);if(n){var r=Object(a.a)(n.valid,2),i=r[0],s=r[1],u=s-i;if(e<i)for(;e<i;)e+=u;if(e>s)for(;e>s;)e-=u}return e}},2283:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ee}));var r=n(92),a=n(1),i=n(99),s=n(4),u=n(12),o=n(88),c=n(89),l=(n(119),n(129)),f=n(339),d=n(101),h=n(102),p=n(110),v=n(128),m=n(206),y=n(341),b=n(132),g=n(233),x=n(335),_=n(169),O=n(710),j=n(309),k=n(858),I=n(1165),w=n(195),B=Object(s.a)().mark(E),F=/^\s*"([\S\s]*)"\s*$/,S=/""/g,N="\n",M=[","," ",";","|","\t"];function E(e,t,n){var r,a,i;return Object(s.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r=0;case 1:if(!(r<=e.length)){s.next=10;break}if(a=e.indexOf(t,r),i=e.substring(r,a>-1?a:void 0),r+=i.length+t.length,s.t0=n&&!i.trim(),s.t0){s.next=8;break}return s.next=8,i;case 8:s.next=1;break;case 10:case"end":return s.stop()}}),B)}function T(e){var t=e.includes("\r\n")?"\r\n":N;return E(e,t,!0)}function X(e,t){return E(e,t,!1)}function Y(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return Object.create(null)};return Object(s.a)().mark((function i(){var u,o,c,l,f,d,h,p,v,m,y,b,g,x;return Object(s.a)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:(u=T(e)).next(),o="",c="",l=0,f=a(),d=0,h=Object(r.a)(u),i.prev=4,h.s();case 6:if((p=h.n()).done){i.next=48;break}v=p.value,m=X(v,n),y=Object(r.a)(m),i.prev=10,y.s();case 12:if((b=y.n()).done){i.next=30;break}if(g=b.value,o+=c+g,c="",(l+=R(g))%2!=0){i.next=27;break}if(!(l>0)){i.next=23;break}if(x=F.exec(o)){i.next=20;break}return f=a(),d=0,o="",l=0,i.abrupt("continue",46);case 20:f[t[d]]=x[1].replaceAll(S,'"'),d++,i.next=24;break;case 23:f[t[d]]=o,d++;case 24:o="",l=0,i.next=28;break;case 27:c=n;case 28:i.next=12;break;case 30:i.next=35;break;case 32:i.prev=32,i.t0=i.catch(10),y.e(i.t0);case 35:return i.prev=35,y.f(),i.finish(35);case 38:if(0!==l){i.next=45;break}return i.next=41,f;case 41:f=a(),d=0,i.next=46;break;case 45:c=N;case 46:i.next=6;break;case 48:i.next=53;break;case 50:i.prev=50,i.t1=i.catch(4),h.e(i.t1);case 53:return i.prev=53,h.f(),i.finish(53);case 56:case"end":return i.stop()}}),i,null,[[4,50,53,56],[10,32,35,38]])}))()}function C(e,t){for(var n=A(e,t).filter((function(e){return null!=e})),r=n.map((function(e){return Object(w.y)(e)})),a=r.length-1;a>=0;a--)r[a]||(r.splice(a,1),n.splice(a,1));return{names:r,aliases:n}}function A(e,t){if(null===e||void 0===e||!e.length)return[];var n,a=[],i="",s="",u=0,o=X(e,t),c=Object(r.a)(o);try{for(c.s();!(n=c.n()).done;){var l=n.value;if(i+=s+l,s="",(u+=R(l))%2==0){if(u>0){var f=F.exec(i);f&&a.push(f[1].replaceAll(S,'"'))}else a.push(i);i="",u=0}else s=t}}catch(d){c.e(d)}finally{c.f()}return a}function R(e){var t=0,n=0;for(n=e.indexOf('"',n);n>=0;)t++,n=e.indexOf('"',n+1);return t}function q(e,t,n){var r,a;t=null===(r=Object(w.y)(t))||void 0===r?void 0:r.toLowerCase(),n=null===(a=Object(w.y)(n))||void 0===a?void 0:a.toLowerCase();var i=e.map((function(e){return e.toLowerCase()})),s=t?e[i.indexOf(t)]:null,u=n?e[i.indexOf(n)]:null;return{longitudeFieldName:s||e[i.indexOf(V.find((function(e){return i.includes(e)})))],latitudeFieldName:u||e[i.indexOf(Q.find((function(e){return i.includes(e)})))]}}function D(e,t,n,a,i){var s,u=[],o=Y(e,n,t),c=[],l=Object(r.a)(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(10===c.length)break;c.push(f)}}catch(p){l.e(p)}finally{l.f()}for(var d=function(){var e=n[h],t=a[h];if(e===i.longitudeFieldName||e===i.latitudeFieldName)u.push({name:e,type:"esriFieldTypeDouble",alias:t});else{var r,s;switch(function(e){if(!e.length)return"string";var t=/[^+-.,0-9]/;return e.map((function(e){var n=!1;if(""!==e){if(t.test(e))n=!0;else{var r=P(e);if(!isNaN(r))return/[.,]/.test(e)||!Number.isInteger(r)||r>214783647||r<-214783648?"double":"integer";if(e.includes("E")){if(r=Number(e),!isNaN(r))return"double";if(e.includes(",")){if(e=e.replace(",","."),r=Number(e),!isNaN(r))return"double";n=!0}else n=!0}else n=!0}return n?/^[-]?\d*[.,]?\d*$/.test(e)?"string":L(new Date(e),e)?"date":"string":"string"}})).reduce((function(e,t){return void 0===e?t:void 0===t?e:e===t?t:"string"===e||"string"===t?"string":"double"===e||"double"===t?"double":void 0}))}(c.map((function(t){return t[e]})))){case"integer":r="esriFieldTypeInteger";break;case"double":r="esriFieldTypeDouble";break;case"date":r="esriFieldTypeDate",s=36;break;default:r="esriFieldTypeString",s=255}u.push({name:e,type:r,alias:t,length:s})}},h=0;h<n.length;h++)d();return u}function L(e,t){if(!e||"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))return!1;var n=!0;if(!G&&/\d+\W*$/.test(t)){var r=t.match(/[a-zA-Z]{2,}/);if(r){for(var a=!1,i=0;!a&&i<=r.length;)a=!z.test(r[i]),i++;n=!a}}return n}var P=function(){var e=Object(I.a)(),t=new RegExp("^"+e.regexp+"$"),n=new RegExp("["+e.group+"\\s\\xa0]","g"),r=e.factor;return function(a){var i=t.exec(a);if(e.factor=r,!i)return NaN;var s=i[1];if(!i[1]){if(!i[2])return NaN;s=i[2],e.factor*=-1}return+(s=s.replace(n,"").replace(e.decimal,"."))*e.factor}}(),z=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,G=Number.isNaN(new Date("technology 10").getTime()),Q=["lat","latitude","latitude83","latdecdeg","lat_dd","y","ycenter","point_y"],V=["lon","lng","long","longitude","longitude83","longdecdeg","long_dd","x","xcenter","point_x"],J=n(449),U=n(227),Z=n(125),W=Object(J.d)("esriGeometryPoint"),$=["csv"],H=[0,0],K=Object(o.a)((function e(t,n){Object(c.a)(this,e),this.x=t,this.y=n})),ee=function(){function e(){var t=this;Object(c.a)(this,e),this._queryEngine=null,this._snapshotFeatures=function(){var e=Object(u.a)(Object(s.a)().mark((function e(n){var r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._fetch(n);case 2:return r=e.sent,e.abrupt("return",t._createFeatures(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return Object(o.a)(e,[{key:"destroy",value:function(){var e;null!==(e=this._queryEngine)&&void 0!==e&&e.destroy(),this._queryEngine=null}},{key:"load",value:function(){var e=Object(u.a)(Object(s.a)().mark((function e(t){var n,r,a,u,o,c,l,f,d,h,p,v,m=arguments;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.length>1&&void 0!==m[1]?m[1]:{},this._loadOptions=t,e.next=4,Promise.all([this._fetch(r.signal),this._checkProjection(null===t||void 0===t||null===(n=t.parsingOptions)||void 0===n?void 0:n.spatialReference)]);case 4:return a=e.sent,u=Object(i.a)(a,1),o=u[0],c=te(o,t),this._locationInfo=c.locationInfo,this._delimiter=c.delimiter,this._queryEngine=this._createQueryEngine(c),e.next=11,this._createFeatures(o);case 11:return l=e.sent,this._queryEngine.featureStore.addMany(l),e.next=15,this._queryEngine.fetchRecomputedExtents();case 15:return f=e.sent,d=f.fullExtent,h=f.timeExtent,c.layerDefinition.extent=d,h&&(p=h.start,v=h.end,c.layerDefinition.timeInfo.timeExtent=[p,v]),e.abrupt("return",c);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=Object(u.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new d.a("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=Object(u.a)(Object(s.a)().mark((function e(){var t,n,r=arguments;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQuery(t,n.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(){var e=Object(u.a)(Object(s.a)().mark((function e(){var t,n,r=arguments;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForCount(t,n.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryObjectIds",value:function(){var e=Object(u.a)(Object(s.a)().mark((function e(){var t,n,r=arguments;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForIds(t,n.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryExtent",value:function(){var e=Object(u.a)(Object(s.a)().mark((function e(){var t,n,r=arguments;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForExtent(t,n.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"querySnapping",value:function(){var e=Object(u.a)(Object(s.a)().mark((function e(t){var n,r=arguments;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,this._waitSnapshotComplete();case 3:return e.abrupt("return",this._queryEngine.executeQueryForSnapping(t,n.signal));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(u.a)(Object(s.a)().mark((function e(t){var n,r,a,i,u=this;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._loadOptions.customParameters=t,null!==(n=this._snapshotTask)&&void 0!==n&&n.abort(),this._snapshotTask=Object(f.a)(this._snapshotFeatures),this._snapshotTask.promise.then((function(e){u._queryEngine.featureStore.clear(),e&&u._queryEngine.featureStore.addMany(e)}),(function(e){u._queryEngine.featureStore.clear(),Object(p.h)(e)||h.a.getLogger("esri.layers.CSVLayer").error(new d.a("csv-layer:refresh","An error occurred during refresh",{error:e}))})),e.next=6,this._waitSnapshotComplete();case 6:return e.next=8,this._queryEngine.fetchRecomputedExtents();case 8:return r=e.sent,a=r.fullExtent,i=r.timeExtent,e.abrupt("return",{extent:a,timeExtent:i});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_waitSnapshotComplete",value:function(){var e=Object(u.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._snapshotTask||this._snapshotTask.finished){e.next=9;break}return e.prev=1,e.next=4,this._snapshotTask.promise;case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.abrupt("return",this._waitSnapshotComplete());case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"_fetch",value:function(){var e=Object(u.a)(Object(s.a)().mark((function e(t){var n,r,i,u;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._loadOptions,r=n.url,i=n.customParameters,r){e.next=3;break}throw new d.a("csv-layer:invalid-source","url not defined");case 3:return u=Object(v.Q)(r),e.next=6,Object(l.default)(u.path,{query:Object(a.a)(Object(a.a)({},u.query),i),responseType:"text",signal:t});case 6:return e.abrupt("return",e.sent.data);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createQueryEngine",value:function(e){var t=e.layerDefinition,n=t.objectIdField,r=t.fields,a=t.extent,i=t.timeInfo,s=new O.a({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new k.a({fields:r,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:i,objectIdField:n,spatialReference:a.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:s})}},{key:"_createFeatures",value:function(){var e=Object(u.a)(Object(s.a)().mark((function e(t){var n,a,u,o,c,l,f,d,h,p,v,O,j,k,I,B,F,S,N,M,E,T,X,C,A,R,q,D,z,G,Q,V,U,W,$,ee;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this._locationInfo,a=n.latitudeFieldName,u=n.longitudeFieldName,o=this._queryEngine,c=o.objectIdField,l=o.fieldsIndex,f=o.spatialReference,d=[],h=[],p=l.fields.filter((function(e){return e.name!==c})).map((function(e){return e.name})),v=0,O={},j=Object(r.a)(l.fields);try{for(j.s();!(k=j.n()).done;)"esriFieldTypeOID"!==(I=k.value).type&&"esriFieldTypeGlobalID"!==I.type&&void 0!==(B=Object(w.q)(I))&&(O[I.name]=B)}catch(s){j.e(s)}finally{j.f()}F=Y(t,p,this._delimiter,Object(J.b)(O,c)),S=Object(r.a)(F);try{for(S.s();!(N=S.n()).done;)if(M=N.value,E=this._parseCoordinateValue(M[a]),null!=(T=this._parseCoordinateValue(M[u]))&&null!=E&&!isNaN(E)&&!isNaN(T)){for(X in M[a]=E,M[u]=T,M)X!==a&&X!==u&&(l.isDateField(X)?(C=new Date(M[X]),M[X]=L(C,M[X])?C.getTime():null):l.isNumericField(X)&&(A=P(M[X]),isNaN(A)?M[X]=null:M[X]=A));M[c]=v,v++,d.push(new K(T,E)),h.push(M)}}catch(s){S.e(s)}finally{S.f()}if(!Object(b.d)({wkid:4326},f))if(Object(b.p)(f)){R=Object(r.a)(d);try{for(R.s();!(q=R.n()).done;)D=q.value,z=Object(g.c)(D.x,D.y,H),G=Object(i.a)(z,2),D.x=G[0],D.y=G[1]}catch(s){R.e(s)}finally{R.f()}}else d=Object(m.projectMany)(y.a,d,Z.a.WGS84,f,null,null);for(Q=[],V=0;V<d.length;V++)U=d[V],W=U.x,$=U.y,(ee=h[V])[c]=V+1,Q.push(new x.a(new _.a([],[W,$]),ee,null,ee[c]));return e.abrupt("return",Q);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_parseCoordinateValue",value:function(e){if(null==e||""===e)return null;var t=P(e);return(isNaN(t)||Math.abs(t)>181)&&(t=parseFloat(e)),t}},{key:"_checkProjection",value:function(){var e=Object(u.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(j.a)(b.b,t);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new d.a("csv-layer:projection-not-supported","Projection not supported");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function te(e,t){var n,a,i,s=t.parsingOptions||{},u={delimiter:s.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:s.latitudeField,longitudeFieldName:s.longitudeField}},o=u.layerDefinition={name:Object(v.n)(t.url,$)||"csv",drawingInfo:W,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:s.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:s.spatialReference||{wkid:4326}}},c=T(e),l=null===(n=c.next().value)||void 0===n?void 0:n.trim(),f=null===(a=c.next().value)||void 0===a?void 0:a.trim();if(!l)throw new d.a("csv-layer:empty-csv","CSV is empty",{csv:e});var h=function(e,t,n){var a;e=e.trim(),t=null===(a=t)||void 0===a?void 0:a.trim();var i,s=[],u=Array.from(new Set([null===n||void 0===n?void 0:n.delimiter].concat(M))).filter((function(e){return null!=e})),o=Object(r.a)(u);try{for(o.s();!(i=o.n()).done;){var c,l=i.value,f=A(e,l).length,d=null!==(c=A(t,l).length)&&void 0!==c?c:f;f>1&&s.push({weight:Math.min(f,d),delimiter:l})}}catch(b){o.e(b)}finally{o.f()}var h,p=s.sort((function(e,t){var n=e.weight;return t.weight-n})).map((function(e){return e.delimiter})),v=Object(r.a)(p);try{for(v.s();!(h=v.n()).done;){var m=h.value,y=q(C(e,m).names,null===n||void 0===n?void 0:n.longitudeField,null===n||void 0===n?void 0:n.latitudeField);if(y.longitudeFieldName&&y.latitudeFieldName)return{delimiter:m,locationInfo:y}}}catch(b){v.e(b)}finally{v.f()}return{delimiter:p[0],locationInfo:null}}(l,f,s),p=h.delimiter,m=h.locationInfo;if(!p)throw new d.a("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV",{firstLine:l,secondLine:f,parsingOptions:s});if(!m)throw new d.a("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file",{firstLine:l,secondLine:f,parsingOptions:s});u.locationInfo=m,u.delimiter=p;var y=C(l,p),b=y.names,g=y.aliases,x=D(e,u.delimiter,b,g,u.locationInfo);if(null!==(i=s.fields)&&void 0!==i&&i.length){var _,O=new U.a(s.fields),j=Object(r.a)(x);try{for(j.s();!(_=j.n()).done;){var k=_.value,I=O.get(k.name);I&&Object.assign(k,I)}}catch(X){j.e(X)}finally{j.f()}}if(!x.some((function(e){return"esriFieldTypeOID"===e.type&&(o.objectIdField=e.name,!0)}))){var w={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1};o.objectIdField=w.name,x.unshift(w)}o.fields=x;var B=new U.a(o.fields);if(u.locationInfo&&(u.locationInfo.latitudeFieldName=B.get(u.locationInfo.latitudeFieldName).name,u.locationInfo.longitudeFieldName=B.get(u.locationInfo.longitudeFieldName).name),o.timeInfo){var F=o.timeInfo;if(F.startTimeField){var S=B.get(F.startTimeField);S?(F.startTimeField=S.name,S.type="esriFieldTypeDate"):F.startTimeField=null}if(F.endTimeField){var N=B.get(F.endTimeField);N?(F.endTimeField=N.name,N.type="esriFieldTypeDate"):F.endTimeField=null}if(F.trackIdField){var E=B.get(F.trackIdField);F.trackIdField=E?E.name:null}F.startTimeField||F.endTimeField||(o.timeInfo=null)}return u}},242:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c}));var r=n(92),a=n(192),i=n(125),s=n(122),u={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new a.a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator}),minus180Line:new a.a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new a.a({paths:[[[180,-180],[180,180]]],spatialReference:i.a.WGS84}),minus180Line:new a.a({paths:[[[-180,-180],[-180,180]]],spatialReference:i.a.WGS84})}};function o(e,t){return Math.ceil((e-t)/(2*t))}function c(e,t){var n,a=l(e),i=Object(r.a)(a);try{for(i.s();!(n=i.n()).done;){var s,u=n.value,o=Object(r.a)(u);try{for(o.s();!(s=o.n()).done;){s.value[0]+=t}}catch(c){o.e(c)}finally{o.f()}}}catch(c){i.e(c)}finally{i.f()}return e}function l(e){return Object(s.g)(e)?e.rings:e.paths}},449:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return c}));var r=n(34),a=n(1),i=n(93),s=n(116),u=n(488),o=n(382);function c(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o.a:"esriGeometryPolyline"===e?o.c:o.b}}}var l=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,f=1;function d(e,t){if(Object(i.a)("esri-csp-restrictions"))return function(){return Object(a.a)(Object(r.a)({},t,null),e)};try{var n="this.".concat(t," = null;");for(var s in e)n+="this".concat(l.test(s)?".".concat(s):'["'.concat(s,'"]')," = ").concat(JSON.stringify(e[s]),";");var u=new Function("\n      return class AttributesClass$".concat(f++," {\n        constructor() {\n          ").concat(n,";\n        }\n      }\n    "))();return function(){return new u}}catch(o){return function(){return Object(a.a)(Object(r.a)({},t,null),e)}}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:Object(s.a)(e)}}]}function p(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:u.a,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1}}}},597:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(90),a=n(91),i=n(92),s=n(89),u=n(88),o=n(98),c=n(111),l=n(440),f=n(670),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,n=arguments.length>1?arguments[1]:void 0;Object(s.a)(this,e),this._compareMinX=m,this._compareMinY=y,this._toBBox=function(e){return e},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&("function"==typeof n?this._toBBox=n:this._initFormat(n)),this.clear()}return Object(u.a)(e,[{key:"destroy",value:function(){this.clear(),I.prune(),w.prune(),B.prune(),F.prune()}},{key:"all",value:function(e){this._all(this._data,e)}},{key:"search",value:function(e,t){var n=this._data,r=this._toBBox;if(j(e,n))for(I.clear();n;){for(var a=0,i=n.children.length;a<i;a++){var s=n.children[a],u=n.leaf?r(s):s;j(e,u)&&(n.leaf?t(s):O(e,u)?this._all(s,t):I.push(s))}n=I.pop()}}},{key:"collides",value:function(e){var t=this._data,n=this._toBBox;if(!j(e,t))return!1;for(I.clear();t;){for(var r=0,a=t.children.length;r<a;r++){var i=t.children[r],s=t.leaf?n(i):i;if(j(e,s)){if(t.leaf||O(e,s))return!0;I.push(i)}}t=I.pop()}return!1}},{key:"load",value:function(e){if(!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r=this._build(e.slice(0,e.length),0,e.length-1,0);if(this._data.children.length)if(this._data.height===r.height)this._splitRoot(this._data,r);else{if(this._data.height<r.height){var a=this._data;this._data=r,r=a}this._insert(r,this._data.height-r.height-1,!0)}else this._data=r;return this}},{key:"insert",value:function(e){return e&&this._insert(e,this._data.height-1),this}},{key:"clear",value:function(){return this._data=new N([]),this}},{key:"remove",value:function(e){if(!e)return this;var t,n=this._data,r=null,a=0,i=!1,s=this._toBBox(e);for(B.clear(),F.clear();n||B.length>0;){var u;if(n||(n=Object(c.d)(B.pop()),r=B.data[B.length-1],a=null!==(u=F.pop())&&void 0!==u?u:0,i=!0),n.leaf&&-1!==(t=Object(o.g)(n.children,e,n.children.length,n.indexHint)))return n.children.splice(t,1),B.push(n),this._condense(B),this;i||n.leaf||!O(n,s)?r?(a++,n=r.children[a],i=!1):n=null:(B.push(n),F.push(a),a=0,r=n,n=n.children[0])}return this}},{key:"toJSON",value:function(){return this._data}},{key:"fromJSON",value:function(e){return this._data=e,this}},{key:"_all",value:function(e,t){var n=e;for(w.clear();n;){var r;if(!0===n.leaf){var a,s=Object(i.a)(n.children);try{for(s.s();!(a=s.n()).done;){t(a.value)}}catch(u){s.e(u)}finally{s.f()}}else w.pushArray(n.children);n=null!==(r=w.pop())&&void 0!==r?r:null}}},{key:"_build",value:function(e,t,n,r){var a=n-t+1,i=this._maxEntries;if(a<=i){var s=new N(e.slice(t,n+1));return h(s,this._toBBox),s}r||(r=Math.ceil(Math.log(a)/Math.log(i)),i=Math.ceil(a/Math.pow(i,r-1)));var u=new M([]);u.height=r;var o=Math.ceil(a/i),c=o*Math.ceil(Math.sqrt(i));k(e,t,n,c,this._compareMinX);for(var l=t;l<=n;l+=c){var f=Math.min(l+c-1,n);k(e,l,f,o,this._compareMinY);for(var d=l;d<=f;d+=o){var p=Math.min(d+o-1,f);u.children.push(this._build(e,d,p,r-1))}}return h(u,this._toBBox),u}},{key:"_chooseSubtree",value:function(e,t,n,r){for(;r.push(t),!0!==t.leaf&&r.length-1!==n;){for(var a=void 0,i=1/0,s=1/0,u=0,o=t.children.length;u<o;u++){var c=t.children[u],l=b(c),f=x(e,c)-l;f<s?(s=f,i=l<i?l:i,a=c):f===s&&l<i&&(i=l,a=c)}t=a||t.children[0]}return t}},{key:"_insert",value:function(e,t,n){var r=this._toBBox,a=n?e:r(e);B.clear();var i=this._chooseSubtree(a,this._data,t,B);for(i.children.push(e),v(i,a);t>=0&&B.data[t].children.length>this._maxEntries;)this._split(B,t),t--;this._adjustParentBBoxes(a,B,t)}},{key:"_split",value:function(e,t){var n=e.data[t],r=n.children.length,a=this._minEntries;this._chooseSplitAxis(n,a,r);var i=this._chooseSplitIndex(n,a,r);if(i){var s=n.children.splice(i,n.children.length-i),u=n.leaf?new N(s):new M(s);u.height=n.height,h(n,this._toBBox),h(u,this._toBBox),t?e.data[t-1].children.push(u):this._splitRoot(n,u)}else console.log("  Error: assertion failed at PooledRBush._split: no valid split index")}},{key:"_splitRoot",value:function(e,t){this._data=new M([e,t]),this._data.height=e.height+1,h(this._data,this._toBBox)}},{key:"_chooseSplitIndex",value:function(e,t,n){var r,a,i;r=a=1/0;for(var s=t;s<=n-t;s++){var u=p(e,0,s,this._toBBox),o=p(e,s,n,this._toBBox),c=_(u,o),l=b(u)+b(o);c<r?(r=c,i=s,a=l<a?l:a):c===r&&l<a&&(a=l,i=s)}return i}},{key:"_chooseSplitAxis",value:function(e,t,n){var r=e.leaf?this._compareMinX:m,a=e.leaf?this._compareMinY:y;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,a)&&e.children.sort(r)}},{key:"_allDistMargin",value:function(e,t,n,r){e.children.sort(r);for(var a=this._toBBox,i=p(e,0,t,a),s=p(e,n-t,n,a),u=g(i)+g(s),o=t;o<n-t;o++){var c=e.children[o];v(i,e.leaf?a(c):c),u+=g(i)}for(var l=n-t-1;l>=t;l--){var f=e.children[l];v(s,e.leaf?a(f):f),u+=g(s)}return u}},{key:"_adjustParentBBoxes",value:function(e,t,n){for(var r=n;r>=0;r--)v(t.data[r],e)}},{key:"_condense",value:function(e){for(var t=e.length-1;t>=0;t--){var n=e.data[t];if(0===n.children.length)if(t>0){var r=e.data[t-1],a=r.children;a.splice(Object(o.g)(a,n,a.length,r.indexHint),1)}else this.clear();else h(n,this._toBBox)}}},{key:"_initFormat",value:function(e){var t=["return a"," - b",";"];this._compareMinX=new Function("a","b",t.join(e[0])),this._compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}]),e}();function h(e,t){p(e,0,e.children.length,t,e)}function p(e,t,n,r,a){a||(a=new N([])),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(var i,s=t;s<n;s++)i=e.children[s],v(a,e.leaf?r(i):i);return a}function v(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function m(e,t){return e.minX-t.minX}function y(e,t){return e.minY-t.minY}function b(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function g(e){return e.maxX-e.minX+(e.maxY-e.minY)}function x(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function _(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),a=Math.min(e.maxX,t.maxX),i=Math.min(e.maxY,t.maxY);return Math.max(0,a-n)*Math.max(0,i-r)}function O(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function j(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function k(e,t,n,r,a){for(var i=[t,n];i.length;){var s=Object(c.d)(i.pop()),u=Object(c.d)(i.pop());if(!(s-u<=r)){var o=u+Math.ceil((s-u)/r/2)*r;Object(f.a)(e,o,u,s,a),i.push(u,o,o,s)}}}var I=new l.a,w=new l.a,B=new l.a,F=new l.a({deallocator:void 0}),S=function(e){Object(r.a)(n,e);var t=Object(a.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments)).height=1,e.indexHint=new o.a,e}return Object(u.a)(n)}(Object(u.a)((function e(){Object(s.a)(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}))),N=function(e){Object(r.a)(n,e);var t=Object(a.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this)).children=e,r.leaf=!0,r}return Object(u.a)(n)}(S),M=function(e){Object(r.a)(n,e);var t=Object(a.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this)).children=e,r.leaf=!1,r}return Object(u.a)(n)}(S)},634:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(92),a=n(89),i=n(88),s=n(93),u=n(597),o=n(139),c={minX:0,minY:0,maxX:0,maxY:0};function l(e,t,n){(function(e){c.minX=e[0],c.minY=e[1],c.maxX=e[2],c.maxY=e[3]})(t),e.search(c,n)}var f=function(){function e(){var t=this;Object(a.a)(this,e),this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new u.a(9,Object(s.a)("esri-csp-restrictions")?function(e){return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}:["[0]","[1]","[2]","[3]"]),this._loadIndex=function(){if(t._indexInvalid){var e=new Array(t._idByBounds.size),n=0;t._idByBounds.forEach((function(t,r){e[n++]=r})),t._indexInvalid=!1,t._index.clear(),t._index.load(e)}else t._boundsToLoad.length&&(t._index.load(Array.from(new Set(t._boundsToLoad.filter((function(e){return t._idByBounds.has(e)}))))),t._boundsToLoad.length=0)}}return Object(i.a)(e,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;var e,t=Object(o.i)(),n=Object(r.a)(this._boundsById.values());try{for(n.s();!(e=n.n()).done;){var a=e.value;a&&(t[0]=Math.min(a[0],t[0]),t[1]=Math.min(a[1],t[1]),t[2]=Math.max(a[2],t[2]),t[3]=Math.max(a[3],t[3]))}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"valid",get:function(){return!this._indexInvalid}},{key:"clear",value:function(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}},{key:"delete",value:function(e){var t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}},{key:"forEachInBounds",value:function(e,t){var n=this;this._loadIndex(),l(this._index,e,(function(e){return t(n._idByBounds.get(e))}))}},{key:"get",value:function(e){return this._boundsById.get(e)}},{key:"has",value:function(e){return this._boundsById.has(e)}},{key:"invalidateIndex",value:function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}},{key:"set",value:function(e,t){if(!this._indexInvalid){var n=this._boundsById.get(e);n&&(this._index.remove(n),this._idByBounds.delete(n))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}]),e}()},710:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(92),a=n(99),i=n(89),s=n(88),u=n(101),o=n(193),c=n(102),l=n(392),f=n(139),d=n(168),h=n(634),p=n(375),v=n(335),m=n(169),y={getObjectId:function(e){return e.objectId},getAttributes:function(e){return e.attributes},getAttribute:function(e,t){return e.attributes[t]},cloneWithGeometry:function(e,t){return new v.a(t,e.attributes,null,e.objectId)},getGeometry:function(e){return e.geometry},getCentroid:function(e,t){return null==e.centroid&&(e.centroid=Object(p.a)(new m.a,e.geometry,t.hasZ,t.hasM)),e.centroid}},b=n(598),g=Object(l.b)(),x=function(){function e(t){Object(i.a)(this,e),this.geometryInfo=t,this._boundsStore=new h.a,this._featuresById=new Map,this._markedIds=new Set,this.events=new o.a,this.featureAdapter=y}return Object(s.a)(e,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){var e=0;return this._featuresById.forEach((function(t){null!=t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}},{key:"getFullExtent",value:function(e){if(null==this.fullBounds)return null;var t=Object(a.a)(this.fullBounds,4);return{xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:Object(b.b)(e)}}},{key:"add",value:function(e){this._add(e),this._emitChanged()}},{key:"addMany",value:function(e){var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;this._add(a)}}catch(i){n.e(i)}finally{n.f()}this._emitChanged()}},{key:"clear",value:function(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}},{key:"removeById",value:function(e){var t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}},{key:"removeManyById",value:function(e){this._boundsStore.invalidateIndex();var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=this._featuresById.get(a);i&&this._remove(i)}}catch(s){n.e(s)}finally{n.f()}this._emitChanged()}},{key:"forEachBounds",value:function(e,t){var n,a=Object(r.a)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value,s=this._boundsStore.get(i.objectId);s&&t(Object(l.h)(g,s))}}catch(u){a.e(u)}finally{a.f()}}},{key:"getFeature",value:function(e){return this._featuresById.get(e)}},{key:"has",value:function(e){return this._featuresById.has(e)}},{key:"forEach",value:function(e){this._featuresById.forEach((function(t){return e(t)}))}},{key:"forEachInBounds",value:function(e,t){var n=this;this._boundsStore.forEachInBounds(e,(function(e){t(n._featuresById.get(e))}))}},{key:"startMarkingUsedFeatures",value:function(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}},{key:"sweep",value:function(){var e=this,t=!1;this._featuresById.forEach((function(n,r){e._markedIds.has(r)||(t=!0,e._remove(n))})),this._markedIds.clear(),t&&this._emitChanged()}},{key:"_emitChanged",value:function(){this.events.emit("changed",void 0)}},{key:"_add",value:function(e){if(e){var t=e.objectId;if(null!=t){var n,r=this._featuresById.get(t);if(this._markedIds.add(t),r?(e.displayId=r.displayId,n=this._boundsStore.get(t),this._boundsStore.delete(t)):null!=this.onFeatureAdd&&this.onFeatureAdd(e),null==e.geometry||!e.geometry.coords||!e.geometry.coords.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);null!=(n=Object(d.r)(null!=n?n:Object(f.h)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM))&&this._boundsStore.set(t,n),this._featuresById.set(t,e)}else c.a.getLogger("esri.layers.graphics.data.FeatureStore").error(new u.a("featurestore:invalid-feature","feature id is missing",{feature:e}))}}},{key:"_remove",value:function(e){null!=this.onFeatureRemove&&this.onFeatureRemove(e);var t=e.objectId;return this._markedIds.delete(t),this._boundsStore.delete(t),this._featuresById.delete(t),e}}]),e}()}}]);
//# sourceMappingURL=187.d7ff305f.chunk.js.map
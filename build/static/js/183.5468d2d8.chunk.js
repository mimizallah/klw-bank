(this["webpackJsonpklw-bank"]=this["webpackJsonpklw-bank"]||[]).push([[183],{104:function(e,t,r){"use strict";r.d(t,"a",(function(){return P})),r.d(t,"b",(function(){return R})),r.d(t,"c",(function(){return I})),r.d(t,"d",(function(){return z})),r.d(t,"e",(function(){return A})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return oe})),r.d(t,"h",(function(){return se})),r.d(t,"i",(function(){return ie})),r.d(t,"j",(function(){return ae})),r.d(t,"k",(function(){return te})),r.d(t,"l",(function(){return $})),r.d(t,"m",(function(){return re})),r.d(t,"n",(function(){return Q})),r.d(t,"o",(function(){return K})),r.d(t,"p",(function(){return Z})),r.d(t,"q",(function(){return ee})),r.d(t,"r",(function(){return ne})),r.d(t,"s",(function(){return h})),r.d(t,"t",(function(){return s})),r.d(t,"u",(function(){return q})),r.d(t,"v",(function(){return l})),r.d(t,"w",(function(){return L})),r.d(t,"x",(function(){return T})),r.d(t,"y",(function(){return d})),r.d(t,"z",(function(){return D})),r.d(t,"A",(function(){return E})),r.d(t,"B",(function(){return f})),r.d(t,"C",(function(){return U})),r.d(t,"D",(function(){return c})),r.d(t,"E",(function(){return u})),r.d(t,"F",(function(){return W})),r.d(t,"G",(function(){return a})),r.d(t,"H",(function(){return V})),r.d(t,"I",(function(){return le})),r.d(t,"J",(function(){return i})),r.d(t,"K",(function(){return J})),r.d(t,"L",(function(){return Y})),r.d(t,"M",(function(){return X})),r.d(t,"N",(function(){return b})),r.d(t,"O",(function(){return w})),r.d(t,"P",(function(){return _})),r.d(t,"Q",(function(){return O})),r.d(t,"R",(function(){return x})),r.d(t,"S",(function(){return j})),r.d(t,"T",(function(){return y})),r.d(t,"U",(function(){return v})),r.d(t,"V",(function(){return k})),r.d(t,"W",(function(){return C})),r.d(t,"X",(function(){return M})),r.d(t,"Y",(function(){return F})),r.d(t,"Z",(function(){return S})),r.d(t,"ab",(function(){return g})),r.d(t,"bb",(function(){return ce})),r.d(t,"cb",(function(){return ue})),r.d(t,"db",(function(){return p})),r.d(t,"eb",(function(){return B})),r.d(t,"fb",(function(){return o})),r.d(t,"gb",(function(){return H})),r.d(t,"hb",(function(){return G})),r.d(t,"ib",(function(){return N}));var n=r(93),a=1e-30,i=4294967295,o=512,s=128,u=511,c=16777216,l=8,h=10,f=29,d=24,p=8,m={metrics:{width:15,height:17,left:0,top:-7,advance:14}},g=0,v=0,y=0,b=1,w=2,_=3,O=4,x=5,j=6,k=12,C=5,M=6,F=5,S=6,I=0,P=1,z=2,A=3,R=4,U=2,D=1,T=2,L=4,B=1.05,E=Object(n.a)("featurelayer-force-marker-text-draw-order")?.5:3,N=5,G=6,H=1.15,X=2,Y=128-2*X,q=8,V=500,W=10,J=1024,$=2,K=0,Q=1,Z=4,ee=8,te=16,re=4,ne=1,ae=4,ie=8,oe=32,se=64,ue=128,ce=4,le=2},118:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a}));var n=new Float32Array(1);new Uint32Array(n.buffer);function a(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function i(e,t){return 65535&e|t<<16}function o(e,t,r,n){return 255&e|(255&t)<<8|(255&r)<<16|n<<24}},1590:function(e,t,r){"use strict";r.d(t,"a",(function(){return C}));var n=r(1),a=r(4),i=r(12),o=r(89),s=r(88),u=r(129),c=r(101),l=r(237),h=r(110),f=r(964),d=r(92),p=r(801),m=r(454);function g(e,t){return v.apply(this,arguments)}function v(){return(v=Object(i.a)(Object(a.a)().mark((function e(t,r){var n,i,o,s,u,c,l,f,g,v,y,b,w,_;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=Object(p.a)(t))instanceof Error)){e.next=3;break}throw n;case 3:return e.next=5,n.createImages();case 5:Object(h.n)(r),i=n.frames,o=n.width,s=n.height,(u=document.createElement("canvas")).width=o,u.height=s,c=u.getContext("2d",{willReadFrequently:!0}),l=[],f=[],g=Object(d.a)(i);try{for(g.s();!(v=g.n()).done;)y=v.value,f.push(Object(m.a)(y.delay||100)),b=y.imageElement,0===y.blendOp?c.globalCompositeOperation="copy":c.globalCompositeOperation="source-over",w=2===y.disposeOp?c.getImageData(y.left,y.top,y.width,y.height):void 0,c.drawImage(b,y.left,y.top),_=c.getImageData(0,0,o,s),l.push(_),0===y.disposeOp||(1===y.disposeOp?c.clearRect(y.left,y.top,y.width,y.height):2===y.disposeOp&&c.putImageData(w,y.left,y.top))}catch(a){g.e(a)}finally{g.f()}return e.abrupt("return",{frameDurations:f,getFrame:function(e){return l[e]},width:o,height:s});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=[137,80,78,71,13,10,26,10];function b(e){if(!function(e){var t=new Uint8Array(e);return!y.some((function(e,r){return e!==t[r]}))}(e))return!1;var t,r=new DataView(e),n=new Uint8Array(e),a=8;do{var i=r.getUint32(a);if("acTL"===(t=String.fromCharCode.apply(String,Array.prototype.slice.call(n.subarray(a+4,a+8)))))return!0;a+=12+i}while("IEND"!==t&&a<n.length);return!1}var w=r(596),_=r(802);function O(e,t){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(Object(a.a)().mark((function e(t,r){var n,i,o,s,u,c,l,h,f,p,g,v,y,b,O,x;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(_.b)(t),i=Object(_.a)(n,!0),o=n.lsd,s=o.width,u=o.height,(c=document.createElement("canvas")).width=s,c.height=u,l=c.getContext("2d",{willReadFrequently:!0}),h=[],f=[],p=Object(d.a)(i);try{for(p.s();!(g=p.n()).done;)v=g.value,f.push(Object(m.a)(v.delay||100)),y=new ImageData(v.patch,v.dims.width,v.dims.height),b=Object(w.d)(y),O=3===v.disposalType?l.getImageData(v.dims.left,v.dims.top,v.dims.width,v.dims.height):void 0,l.drawImage(b,v.dims.left,v.dims.top),x=l.getImageData(0,0,s,u),h.push(x),1===v.disposalType||(2===v.disposalType?l.clearRect(v.dims.left,v.dims.top,v.dims.width,v.dims.height):3===v.disposalType&&l.putImageData(O,v.dims.left,v.dims.top))}catch(r){p.e(r)}finally{p.f()}return e.abrupt("return",{frameDurations:f,getFrame:function(e){return h[e]},width:s,height:u});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=[71,73,70];function k(e){if(!function(e){var t=new Uint8Array(e);return!j.some((function(e,r){return e!==t[r]}))}(e))return!1;for(var t=new DataView(e),r=t.getUint8(10),n=13+(128&r?3*Math.pow(2,1+(7&r)):0),a=0,i=!1;!i;){switch(t.getUint8(n++)){case 33:if(!o())return!1;break;case 44:s();break;case 59:i=!0;break;default:return!1}if(a>1)return!0}function o(){switch(t.getUint8(n++)){case 249:n++,n+=4,u();break;case 1:a++,n++,n+=12,u();break;case 254:u();break;case 255:n++,n+=8,n+=3,u();break;default:return!1}return!0}function s(){a++,n+=8;var e=t.getUint8(n++);n+=128&e?3*Math.pow(2,1+(7&e)):0,n++,u()}function u(){for(var e;e=t.getUint8(n++);)n+=e}return!1}var C=function(){function e(){Object(o.a)(this,e),this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}return Object(s.a)(e,[{key:"destroy",value:function(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}},{key:"getResource",value:function(e){var t;return null!==(t=this._resourceMap.get(e))&&void 0!==t?t:null}},{key:"fetchResource",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){var n,i,o=this;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._resourceMap.get(t))){e.next=3;break}return e.abrupt("return",{width:n.width,height:n.height});case 3:return i=this._inFlightResourceMap.get(t),e.abrupt("return",i?i.then((function(e){return{width:e.width,height:e.height}})):(i=S(t,r),this._inFlightResourceMap.set(t,i),i.then((function(e){return o._inFlightResourceMap.delete(t),o._resourceMap.set(t,e),{width:e.width,height:e.height}}),(function(){return{width:0,height:0}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteResource",value:function(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}},{key:"loadFont",value:function(e){return Object(l.d)(e)}}]),e}();function M(e,t){return F.apply(this,arguments)}function F(){return(F=Object(i.a)(Object(a.a)().mark((function e(t,r){var i,o,s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.URL.createObjectURL(t),e.prev=1,e.next=4,Object(u.default)(i,Object(n.a)(Object(n.a)({},r),{},{responseType:"image"}));case 4:return o=e.sent,s=o.data,e.abrupt("return",s);case 9:if(e.prev=9,e.t0=e.catch(1),Object(h.h)(e.t0)){e.next=13;break}throw new c.a("mapview-invalid-resource","Could not fetch requested resource at ".concat(i));case 13:throw e.t0;case 14:return e.prev=14,window.URL.revokeObjectURL(i),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,9,14,17]])})))).apply(this,arguments)}function S(e,t){return I.apply(this,arguments)}function I(){return(I=Object(i.a)(Object(a.a)().mark((function e(t,r){var n,i,o,s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t,r);case 2:if(n=e.sent,i=n.arrayBuffer,o=n.mediaType,s="image/png"===o,"image/gif"!==o||!k(i)){e.next=8;break}return e.abrupt("return",O(i));case 8:if(!s||!b(i)){e.next=10;break}return e.abrupt("return",g(i,r));case 10:return e.abrupt("return",M(new Blob([i],{type:o}),r));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return z.apply(this,arguments)}function z(){return(z=Object(i.a)(Object(a.a)().mark((function e(t,r){var i,o,s,l,d,p,m;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=";base64,",!t.includes(o)){e.next=6;break}s=t.indexOf(o),l=t.indexOf(o)+8,d=t.substring(l),i={arrayBuffer:Object(f.a)(d),mediaType:t.substring(0,s).replace("data:","")},e.next=18;break;case 6:return e.prev=6,e.next=9,Object(u.default)(t,Object(n.a)({responseType:"array-buffer"},r));case 9:p=e.sent,m=p.data,i={arrayBuffer:m,mediaType:p.getHeader("Content-Type")},e.next=18;break;case 14:if(e.prev=14,e.t0=e.catch(6),Object(h.h)(e.t0)){e.next=18;break}throw new c.a("mapview-invalid-resource","Could not fetch requested resource at ".concat(t));case 18:return e.abrupt("return",i);case 19:case"end":return e.stop()}}),e,null,[[6,14]])})))).apply(this,arguments)}},2289:function(e,t,r){"use strict";r.r(t),r.d(t,"previewCIMSymbol",(function(){return U}));var n,a,i=r(4),o=r(12),s=r(108),u=r(179),c=r(92),l=r(89),h=r(88),f=r(143),d=r(129),p=r(111),m=r(110),g=r(276),v=r(1590),y=r(232),b=r(804),w=r(334),_=r(152),O=r(1332),x=r(1136);(a=n||(n={})).Legend="legend",a.Preview="preview";var j=function(e){return e&&e.scaleFactor?e.scaleFactor:1},k=function(){function e(t,r){Object(l.a)(this,e),this._spatialReference=t,this._avoidSDF=r,this._resourceCache=new Map,this._imageDataCanvas=null,this._pictureMarkerCache=new Map,this._textRasterizer=new w.a,this._cimResourceManager=new v.a,this._rasterizer=new b.a(this._cimResourceManager)}return Object(h.a)(e,[{key:"resourceManager",get:function(){return this._cimResourceManager}},{key:"rasterizeCIMSymbolAsync",value:function(){var e=Object(o.a)(Object(i.a)().mark((function e(t,r,n,a,o,s,c,l){var h,f,d,p,m,g,v,b,w,O,x,j,k,M,F,S,I,P,z,A,R,U,D,T,L,B;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if((h=t.data)&&"CIMSymbolReference"===h.type&&h.symbol){e.next=5;break}return e.abrupt("return",null);case 5:return f=h.symbol,s||(s=Object(_.B)(f)),e.next=9,u.c.resolveSymbolOverrides(h,r,this._spatialReference,o,s,c,l);case 9:if(d=e.sent,this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas")),p=this._imageDataCanvas,m=this._cimResourceManager,g=[],u.a.fetchResources(d,m,g),u.a.fetchFonts(d,m,g),e.t0=g.length>0,!e.t0){e.next=18;break}return e.next=18,Promise.all(g);case 18:if(v=n.width,b=n.height,w=C(s,v,b,a),O=u.a.getEnvelope(d,w,m)){e.next=21;break}return e.abrupt("return",null);case 21:x=1.3333333333333333*(window.devicePixelRatio||1),j=1,k=0,M=0,e.t1=f.type,e.next="CIMPointSymbol"===e.t1||"CIMTextSymbol"===e.t1?26:"CIMLineSymbol"===e.t1?31:"CIMPolygonSymbol"===e.t1?37:40;break;case 26:return F=1,O.width>v&&(F=v/O.width),S=1,O.height>b&&(S=b/O.height),"preview"===a&&(O.width<v&&(F=v/O.width),O.height<b&&(S=b/O.height)),j=Math.min(F,S),k=O.x+O.width/2,M=O.y+O.height/2,e.abrupt("break",40);case 31:return I=1,O.height>b&&(I=b/O.height),j=I,M=O.y+O.height/2,P=O.x*j+v/2,z=(O.x+O.width)*j+v/2,P<0&&(w.paths[0][0][0]-=P),z>v&&(w.paths[0][2][0]-=z-v),e.abrupt("break",40);case 37:k=O.x+O.width/2,M=O.y+O.height/2,A=O.x*j+v/2,R=(O.x+O.width)*j+v/2,U=O.y*j+b/2,D=(O.y+O.height)*j+b/2,T=w.rings,A<0&&(T[0][0][0]-=A,T[0][3][0]-=A,T[0][4][0]-=A),U<0&&(T[0][0][1]+=U,T[0][1][1]+=U,T[0][4][1]+=U),R>v&&(T[0][1][0]-=R-v,T[0][2][0]-=R-v),D>b&&(T[0][2][1]+=D-b,T[0][3][1]+=D-b);case 40:return p.width=v*x,p.height=b*x,1,p.width+=2,p.height+=2,L=p.getContext("2d"),(B=y.i.createIdentity()).translate(-k,-M),B.scale(j*x,-j*x),B.translate(v*x/2+1,b*x/2+1),L.clearRect(0,0,p.width,p.height),e.abrupt("return",(new y.a(L,m,B,!0).drawSymbol(d,w),L.getImageData(0,0,p.width,p.height)));case 46:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a,i,o,s,u){return e.apply(this,arguments)}}()},{key:"analyzeCIMSymbol3D",value:function(){var e=Object(o.a)(Object(i.a)().mark((function e(t,r,n,a,o){var s,c,l,h,f,d,p,v;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],c=r?{geometryType:a,spatialReference:this._spatialReference,fields:r}:null,l=[],u.a.fetchFonts(t.data.symbol,this._cimResourceManager,l),e.next=4,Promise.all(l);case 4:return h=new g.a(this._cimResourceManager,c),e.next=7,h.analyzeSymbolReference(t.data,this._avoidSDF,s);case 7:for(Object(m.n)(o),d=0,p=s;d<p.length;d++)"CIMPictureMarker"!==(v=p[d]).cim.type&&"CIMPictureFill"!==v.cim.type&&"CIMPictureStroke"!==v.cim.type||(f||(f=[]),f.push(this._fetchPictureMarkerResource(v,o))),n&&"text"===v.type&&"string"==typeof v.text&&v.text.includes("[")&&(v.text=Object(_.f)(n,v.text,v.cim.textCase));if(e.t0=f,!e.t0){e.next=13;break}return e.next=13,Promise.all(f);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}()},{key:"rasterizeCIMSymbol3D",value:function(e,t,r,n,a,i){var o,s=[],u=Object(c.a)(e);try{for(u.s();!(o=u.n()).done;){var l=o.value;n&&"function"==typeof n.scaleFactor&&(n.scaleFactor=n.scaleFactor(t,a,i));var h=this._getRasterizedResource(l,t,r,n,a,i);if(h){var f=0,d=h.anchorX||0,p=h.anchorY||0,m=!1,g=0,v=0;if("esriGeometryPoint"===r){var y,b=j(n);if(g=Object(_.g)(l.offsetX,t,a,i)*b||0,v=Object(_.g)(l.offsetY,t,a,i)*b||0,"marker"===l.type)f=Object(_.g)(l.rotation,t,a,i)||0,m=null!==(y=l.rotateClockwise)&&void 0!==y&&y;else if("text"===l.type){if(f=Object(_.g)(l.angle,t,a,i)||0,void 0!==l.horizontalAlignment)switch(l.horizontalAlignment){case"left":d=-.5;break;case"right":d=.5;break;default:d=0}if(void 0!==l.verticalAlignment)switch(l.verticalAlignment){case"top":p=.5;break;case"bottom":p=-.5;break;case"baseline":p=-.25;break;default:p=0}}}null!=h&&s.push({angle:f,rotateClockWise:m,anchorX:d,anchorY:p,offsetX:g,offsetY:v,rasterizedResource:h})}}}catch(w){u.e(w)}finally{u.f()}return this.getSymbolImage(s)}},{key:"getSymbolImage",value:function(e){for(var t=document.createElement("canvas"),r=Object(p.m)(t.getContext("2d")),n=0,a=0,i=0,o=0,u=[],c=0;c<e.length;c++){var l=e[c],h=l.rasterizedResource;if(h){var f=h.size,d=l.offsetX,m=l.offsetY,g=l.anchorX,v=l.anchorY,y=l.rotateClockWise||!1,b=l.angle,w=Object(s.c)(d)-f[0]*(.5+g),_=Object(s.c)(m)-f[1]*(.5+v),O=w+f[0],j=_+f[1];if(b){y&&(b=-b);var k=Math.sin(b*Math.PI/180),C=Math.cos(b*Math.PI/180),M=w*C-_*k,F=w*k+_*C,S=w*C-j*k,I=w*k+j*C,P=O*C-j*k,z=O*k+j*C,A=O*C-_*k,R=O*k+_*C;w=Math.min(M,S,P,A),_=Math.min(F,I,z,R),O=Math.max(M,S,P,A),j=Math.max(F,I,z,R)}n=w<n?w:n,a=_<a?_:a,i=O>i?O:i,o=j>o?j:o;var U=r.createImageData(h.size[0],h.size[1]);U.data.set(new Uint8ClampedArray(h.image.buffer));var D={offsetX:d,offsetY:m,rotateClockwise:y,angle:b,rasterizedImage:U,anchorX:g,anchorY:v};u.push(D)}}t.width=i-n,t.height=o-a;for(var T=-n,L=o,B=0;B<u.length;B++){var E=u[B],N=this._imageDataToCanvas(E.rasterizedImage),G=E.rasterizedImage.width,H=E.rasterizedImage.height,X=T-G*(.5+E.anchorX),Y=L-H*(.5-E.anchorY);if(E.angle){var q=(360-E.angle)*Math.PI/180;r.save(),r.translate(Object(s.c)(E.offsetX),-Object(s.c)(E.offsetY)),r.translate(T,L),r.rotate(q),r.translate(-T,-L),r.drawImage(N,X,Y),r.restore()}else r.drawImage(N,X+Object(s.c)(E.offsetX),Y-Object(s.c)(E.offsetY))}var V=new x.a({x:T/t.width-.5,y:L/t.height-.5});return{imageData:0!==t.width&&0!==t.height?r.getImageData(0,0,t.width,t.height):r.createImageData(1,1),anchorPosition:V}}},{key:"_fetchPictureMarkerResource",value:function(){var e=Object(o.a)(Object(i.a)().mark((function e(t,r){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.materialHash,this._pictureMarkerCache.get(n)){e.next=6;break}return e.next=4,Object(d.default)(t.cim.url,{responseType:"image",signal:r&&r.signal});case 4:a=e.sent.data,this._pictureMarkerCache.set(n,a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_imageDataToCanvas",value:function(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));var t=this._imageDataCanvas,r=Object(p.m)(t.getContext("2d"));return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}},{key:"_imageTo32Array",value:function(e,t,r,n){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));var a=this._imageDataCanvas,i=Object(p.m)(a.getContext("2d"));if(a.width=t,a.height=r,i.drawImage(e,0,0,t,r),n){i.save();var o=new f.a(n);i.fillStyle=o.toHex(),i.globalCompositeOperation="multiply",i.fillRect(0,0,t,r),i.globalCompositeOperation="destination-atop",i.drawImage(e,0,0,t,r),i.restore()}return new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}},{key:"_getRasterizedResource",value:function(e,t,r,n,a,i){var o,s,u;if("text"===e.type)return this._rasterizeTextResource(e,t,n,a,i);var c=function(e,t,r,n){var a,i;"function"==typeof e.materialHash?(a=(0,e.materialHash)(t,r,n),i=Object(g.b)(e.cim,e.materialOverrides)):(a=e.materialHash,i=e.cim);return{analyzedCIM:i,hash:a}}(e,t,a,i);o=c.analyzedCIM,s=c.hash;var l=j(n);if("CIMPictureMarker"===e.cim.type){var h=Object(_.g)(e.size,t,a,i)*l,f=Object(p.m)(this._getPictureResource(e,h,Object(_.g)(e.color,t,a,i)));return u={image:f.image,size:[f.width,f.height],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0}}Object(O.b)(o,l,{preserveOutlineWidth:!1});var d=o;s+=r,n&&(s+=JSON.stringify(n));var m=this._resourceCache;return m.has(s)?m.get(s):(u=this._rasterizer.rasterizeJSONResource({cim:d,type:e.type,url:e.url,mosaicHash:s,size:null,path:null},window.devicePixelRatio||1,this._avoidSDF),m.set(s,u),u)}},{key:"_rasterizeTextResource",value:function(e,t,r,n,a){var i,o,s,u=j(r),c=Object(_.g)(e.text,t,n,a);if(!c||0===c.length)return null;var l=e.cim,h=Object(_.g)((null===l||void 0===l?void 0:l.fontFamilyName)||e.fontName,t,n,a),f=Object(_.g)((null===l||void 0===l||null===(i=l.font)||void 0===i?void 0:i.style)||e.style,t,n,a),d=Object(_.g)((null===l||void 0===l||null===(o=l.font)||void 0===o?void 0:o.weight)||e.weight,t,n,a),p=Object(_.g)((null===l||void 0===l||null===(s=l.font)||void 0===s?void 0:s.decoration)||e.decoration,t,n,a),m=Object(_.g)(e.size,t,n,a)*u,g=Object(_.g)(e.horizontalAlignment,t,n,a),v=Object(_.g)(e.verticalAlignment,t,n,a),y=Object(_.e)(Object(_.g)(e.color,t,n,a)),b=Object(_.e)(Object(_.g)(e.outlineColor,t,n,a)),w=Object(_.g)(e.outlineSize,t,n,a),O=null!=e.backgroundColor?Object(_.e)(e.backgroundColor):null,x=null!=e.borderLineColor?Object(_.e)(e.borderLineColor):null,k=null!=e.borderLineWidth?e.borderLineWidth:null,C={color:y,size:m,horizontalAlignment:g,verticalAlignment:v,font:{family:h,style:f,weight:d,decoration:p},halo:{size:w||0,color:b,style:f},backgroundColor:O,borderLine:null!=x&&null!=k?{color:x,size:k}:null,pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(c,C)}},{key:"_getPictureResource",value:function(e,t,r){var n=this._pictureMarkerCache.get(e.materialHash);if(!n)return null;var a=n.height/n.width,i=t?a>1?Object(s.c)(t):Object(s.c)(t)/a:n.width,o=t?a>1?Object(s.c)(t)*a:Object(s.c)(t):n.height;return{image:this._imageTo32Array(n,i,o,r),width:i,height:o}}}]),e}();function C(e,t,r,n){var a=-t/2+1,i=t/2-1,o=r/2-1,s=-r/2+1;switch(e){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[a,0],[0,0],[i,0]]]};default:return"legend"===n?{rings:[[[a,o],[i,0],[i,s],[a,s],[a,o]]]}:{rings:[[[a,o],[i,o],[i,s],[a,s],[a,o]]]}}}var M=r(1026),F=r(1178),S=new k(null,!0),I=Object(s.d)(M.a.size),P=Object(s.d)(M.a.maxSize),z=Object(s.d)(M.a.lineWidth),A=1;function R(e){var t=null===e||void 0===e?void 0:e.size;return"number"==typeof t?{width:t,height:t}:{width:null!=t&&"object"==typeof t&&"width"in t?t.width:null,height:null!=t&&"object"==typeof t&&"height"in t?t.height:null}}function U(e){return D.apply(this,arguments)}function D(){return D=Object(o.a)(Object(i.a)().mark((function e(t){var r,a,o,c,l,h,f,d,p,m,g,v,y,b,w,O,x,j,k,C,M,U,D,T,L,B,E,N=arguments;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=(c=N.length>1&&void 0!==N[1]?N[1]:{}).node,h=c.opacity,f=c.symbolConfig,d=null!=f&&"object"==typeof f&&"isSquareFill"in f&&f.isSquareFill,p=c.cimOptions||c,m=p.geometryType||Object(_.B)(null===(r=t)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.symbol),g=R(c),v=p.feature,y=p.fieldMap,null!=g.width&&null!=g.height){e.next=18;break}return e.next=5,u.c.resolveSymbolOverrides(t.data,v,null,y,m);case 5:if(b=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:if((t=t.clone()).data={type:"CIMSymbolReference",symbol:b},t.data.primitiveOverrides=void 0,w=[],u.a.fetchResources(b,S.resourceManager,w),u.a.fetchFonts(b,S.resourceManager,w),e.t0=w.length>0,!e.t0){e.next=16;break}return e.next=16,Promise.all(w);case 16:O=u.a.getEnvelope(b,null,S.resourceManager),x=null===O||void 0===O?void 0:O.width,j=null===O||void 0===O?void 0:O.height,g.width="esriGeometryPolygon"===m?I:"esriGeometryPolyline"===m?z:null!=x&&isFinite(x)?Math.min(x,P):I,g.height="esriGeometryPolygon"===m?I:null!=j&&isFinite(j)?Math.max(Math.min(j,P),A):I;case 18:return e.next=20,S.rasterizeCIMSymbolAsync(t,v,g,d||"esriGeometryPolygon"!==m?n.Preview:n.Legend,y,m);case 20:if(k=e.sent){e.next=23;break}return e.abrupt("return",null);case 23:return C=k.width,M=k.height,(U=document.createElement("canvas")).width=C,U.height=M,U.getContext("2d").putImageData(k,0,0),D=Object(s.c)(g.width),T=Object(s.c)(g.height),(L=new Image(D,T)).src=U.toDataURL(),L.ariaLabel=null!==(a=c.ariaLabel)&&void 0!==a?a:null,L.alt=null!==(o=c.ariaLabel)&&void 0!==o?o:"",null!=h&&(L.style.opacity="".concat(h)),B=L,null!=c.effectView&&(E={shape:{type:"image",x:0,y:0,width:D,height:T,src:L.src},fill:null,stroke:null,offset:[0,0]},B=Object(F.b)([[E]],[D,T],{effectView:c.effectView,ariaLabel:c.ariaLabel})),e.abrupt("return",(l&&B&&l.appendChild(B),B));case 31:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}},596:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return p}));var n=r(4),a=r(12),i=(r(93),r(101)),o=r(128);function s(e){var t=f(e);return null!=t?t.toDataURL():""}function u(e){return c.apply(this,arguments)}function c(){return c=Object(a.a)(Object(n.a)().mark((function e(t){var r,a,o;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=f(t))){e.next=3;break}throw new i.a("imageToArrayBuffer","Unsupported image type");case 3:return e.next=5,l(t);case 5:return a=e.sent,e.next=8,new Promise((function(e){return r.toBlob(e,a)}));case 8:if(o=e.sent){e.next=11;break}throw new i.a("imageToArrayBuffer","Failed to encode image");case 11:return e.next=13,o.arrayBuffer();case 13:return e.t0=e.sent,e.t1=a,e.abrupt("return",{data:e.t0,type:e.t1});case 16:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function l(e){return h.apply(this,arguments)}function h(){return h=Object(a.a)(Object(n.a)().mark((function e(t){var r,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof HTMLImageElement){e.next=2;break}return e.abrupt("return","image/png");case 2:if(r=t.src,!Object(o.y)(r)){e.next=6;break}return a=Object(o.h)(r),e.abrupt("return","image/jpeg"===(null===a||void 0===a?void 0:a.mediaType)?a.mediaType:"image/png");case 6:return e.abrupt("return",/\.png$/i.test(r)?"image/png":/\.(jpg|jpeg)$/i.test(r)?"image/jpeg":"image/png");case 7:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function f(e){if(e instanceof HTMLCanvasElement)return e;if(e instanceof HTMLVideoElement)return null;var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var r=t.getContext("2d");return e instanceof HTMLImageElement?r.drawImage(e,0,0,e.width,e.height):e instanceof ImageData&&r.putImageData(e,0,0),t}function d(e){for(var t=[],r=new Uint8Array(e),n=0;n<r.length;n++)t.push(String.fromCharCode(r[n]));return"data:application/octet-stream;base64,"+btoa(t.join(""))}function p(e){if(e.byteLength<8)return!1;var t=new Uint8Array(e);return 137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]&&13===t[4]&&10===t[5]&&26===t[6]&&10===t[7]}},680:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return u}));var n=r(92),a=r(112),i=r(265),o=r(141),s=function(e){return"vertical"===e||"horizontal"===e||"cross"===e||"esriSFSCross"===e||"esriSFSVertical"===e||"esriSFSHorizontal"===e};function u(e,t,r){var n=Object(o.m)(Math.ceil(r)),a=s(t)?8*n:16*n,i=2*n;e.width=a,e.height=a;var u=e.getContext("2d");u.strokeStyle="#FFFFFF",u.lineWidth=n,u.beginPath(),"vertical"!==t&&"cross"!==t&&"esriSFSCross"!==t&&"esriSFSVertical"!==t||(u.moveTo(a/2,-i),u.lineTo(a/2,a+i)),"horizontal"!==t&&"cross"!==t&&"esriSFSCross"!==t&&"esriSFSHorizontal"!==t||(u.moveTo(-i,a/2),u.lineTo(a+i,a/2)),"forward-diagonal"!==t&&"diagonal-cross"!==t&&"esriSFSDiagonalCross"!==t&&"esriSFSForwardDiagonal"!==t||(u.moveTo(-i,-i),u.lineTo(a+i,a+i),u.moveTo(a-i,-i),u.lineTo(a+i,i),u.moveTo(-i,a-i),u.lineTo(i,a+i)),"backward-diagonal"!==t&&"diagonal-cross"!==t&&"esriSFSBackwardDiagonal"!==t&&"esriSFSDiagonalCross"!==t||(u.moveTo(a+i,-i),u.lineTo(-i,a+i),u.moveTo(i,-i),u.lineTo(-i,i),u.moveTo(a+i,a-i),u.lineTo(a-i,a+i)),u.stroke();for(var c,l=u.getImageData(0,0,e.width,e.height),h=new Uint8Array(l.data),f=0;f<h.length;f+=4)c=h[f+3]/255,h[f]=h[f]*c,h[f+1]=h[f+1]*c,h[f+2]=h[f+2]*c;return[h,e.width,e.height]}function c(e,t){var r="Butt"===t,o="Square"===t,s=!r&&!o;e.length%2==1&&(e=[].concat(Object(a.a)(e),Object(a.a)(e)));var u,c=15.5,l=0,h=Object(n.a)(e);try{for(h.s();!(u=h.n()).done;){l+=u.value}}catch(S){h.e(S)}finally{h.f()}var f,d=Math.round(l*c),p=new Float32Array(31*d),m=7.75,g=0,v=0,y=.5,b=!0,w=Object(n.a)(e);try{for(w.s();!(f=w.n()).done;){var _=f.value;for(g=v,v+=_*c;y<=v;){for(var O=.5;O<31;){var x=(O-.5)*d+y-.5,j=s?(O-c)*(O-c):Math.abs(O-c);p[x]=b?r?Math.max(Math.max(g+m-y,j),Math.max(y-v+m,j)):j:s?Math.min((y-g)*(y-g)+j,(y-v)*(y-v)+j):o?Math.min(Math.max(y-g,j),Math.max(v-y,j)):Math.min(Math.max(y-g+m,j),Math.max(v+m-y,j)),O++}y++}b=!b}}catch(S){w.e(S)}finally{w.f()}for(var k=p.length,C=new Uint8Array(4*k),M=0;M<k;++M){var F=(s?Math.sqrt(p[M]):p[M])/c;Object(i.a)(F,C,4*M)}return[C,d,31]}},801:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n,a=r(201),i={exports:{}};n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.isNotPNG=function(e){return e===i},t.isNotAPNG=function(e){return e===o},t.default=function(e){var t=new Uint8Array(e);if(Array.prototype.some.call(s,(function(e,r){return e!==t[r]})))return i;var r=!1;if(u(t,(function(e){return!(r="acTL"===e)})),!r)return o;var n=[],c=[],d=null,p=null,m=0,g=new a.APNG;if(u(t,(function(e,t,r,i){var o=new DataView(t.buffer);switch(e){case"IHDR":d=t.subarray(r+8,r+8+i),g.width=o.getUint32(r+8),g.height=o.getUint32(r+12);break;case"acTL":g.numPlays=o.getUint32(r+8+4);break;case"fcTL":p&&(g.frames.push(p),m++),(p=new a.Frame).width=o.getUint32(r+8+4),p.height=o.getUint32(r+8+8),p.left=o.getUint32(r+8+12),p.top=o.getUint32(r+8+16);var s=o.getUint16(r+8+20),u=o.getUint16(r+8+22);0===u&&(u=100),p.delay=1e3*s/u,p.delay<=10&&(p.delay=100),g.playTime+=p.delay,p.disposeOp=o.getUint8(r+8+24),p.blendOp=o.getUint8(r+8+25),p.dataParts=[],0===m&&2===p.disposeOp&&(p.disposeOp=1);break;case"fdAT":p&&p.dataParts.push(t.subarray(r+8+4,r+8+i));break;case"IDAT":p&&p.dataParts.push(t.subarray(r+8,r+8+i));break;case"IEND":c.push(l(t,r,12+i));break;default:n.push(l(t,r,12+i))}})),p&&g.frames.push(p),0==g.frames.length)return o;var v=new Blob(n),y=new Blob(c);return g.frames.forEach((function(e){var t=[];t.push(s),d.set(f(e.width),0),d.set(f(e.height),4),t.push(h("IHDR",d)),t.push(v),e.dataParts.forEach((function(e){return t.push(h("IDAT",e))})),t.push(y),e.imageData=new Blob(t,{type:"image/png"}),delete e.dataParts,t=null})),g};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1)),a=r(2);var i=new Error("Not a PNG"),o=new Error("Not an animated PNG");var s=new Uint8Array([137,80,78,71,13,10,26,10]);function u(e,t){var r=new DataView(e.buffer),n=8,a=void 0,i=void 0,o=void 0;do{i=r.getUint32(n),o=t(a=c(e,n+4,4),e,n,i),n+=12+i}while(!1!==o&&"IEND"!=a&&n<e.length)}function c(e,t,r){var n=Array.prototype.slice.call(e.subarray(t,t+r));return String.fromCharCode.apply(String,n)}function l(e,t,r){var n=new Uint8Array(r);return n.set(e.subarray(t,t+r)),n}var h=function(e,t){var r=e.length+t.length,a=new Uint8Array(r+8),i=new DataView(a.buffer);i.setUint32(0,t.length),a.set(function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(e),4),a.set(t,8);var o=(0,n.default)(a,4,r);return i.setUint32(r+4,o),a},f=function(e){return new Uint8Array([e>>>24&255,e>>>16&255,e>>>8&255,255&e])}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1,a=t,i=t+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length-t);a<i;a++)n=n>>>8^r[255&(n^e[a])];return-1^n};for(var r=new Uint32Array(256),n=0;n<256;n++){for(var a=n,i=0;i<8;i++)a=0!=(1&a)?3988292384^a>>>1:a>>>1;r[n]=a}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Frame=t.APNG=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r(3));function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.APNG=function(){function e(){i(this,e),this.width=0,this.height=0,this.numPlays=0,this.playTime=0,this.frames=[]}return n(e,[{key:"createImages",value:function(){return Promise.all(this.frames.map((function(e){return e.createImage()})))}},{key:"getPlayer",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.createImages().then((function(){return new a.default(t,e,r)}))}}]),e}(),t.Frame=function(){function e(){i(this,e),this.left=0,this.top=0,this.width=0,this.height=0,this.delay=0,this.disposeOp=0,this.blendOp=0,this.imageData=null,this.imageElement=null}return n(e,[{key:"createImage",value:function(){var e=this;return this.imageElement?Promise.resolve():new Promise((function(t,r){var n=URL.createObjectURL(e.imageData);e.imageElement=document.createElement("img"),e.imageElement.onload=function(){URL.revokeObjectURL(n),t()},e.imageElement.onerror=function(){URL.revokeObjectURL(n),e.imageElement=null,r(new Error("Image creation error"))},e.imageElement.src=n}))}}]),e}()},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=function(e){function t(e,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.playbackRate=1,a._currentFrameNumber=0,a._ended=!1,a._paused=!0,a._numPlays=0,a._apng=e,a.context=r,a.stop(),n&&a.play(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"renderNextFrame",value:function(){this._currentFrameNumber=(this._currentFrameNumber+1)%this._apng.frames.length,this._currentFrameNumber===this._apng.frames.length-1&&(this._numPlays++,0!==this._apng.numPlays&&this._numPlays>=this._apng.numPlays&&(this._ended=!0,this._paused=!0)),this._prevFrame&&1==this._prevFrame.disposeOp?this.context.clearRect(this._prevFrame.left,this._prevFrame.top,this._prevFrame.width,this._prevFrame.height):this._prevFrame&&2==this._prevFrame.disposeOp&&this.context.putImageData(this._prevFrameData,this._prevFrame.left,this._prevFrame.top);var e=this.currentFrame;this._prevFrame=e,this._prevFrameData=null,2==e.disposeOp&&(this._prevFrameData=this.context.getImageData(e.left,e.top,e.width,e.height)),0==e.blendOp&&this.context.clearRect(e.left,e.top,e.width,e.height),this.context.drawImage(e.imageElement,e.left,e.top),this.emit("frame",this._currentFrameNumber),this._ended&&this.emit("end")}},{key:"play",value:function(){var e=this;this.emit("play"),this._ended&&this.stop(),this._paused=!1;var t=performance.now()+this.currentFrame.delay/this.playbackRate;requestAnimationFrame((function r(n){if(!e._ended&&!e._paused){if(n>=t){for(;n-t>=e._apng.playTime/e.playbackRate;)t+=e._apng.playTime/e.playbackRate,e._numPlays++;do{e.renderNextFrame(),t+=e.currentFrame.delay/e.playbackRate}while(!e._ended&&n>t)}requestAnimationFrame(r)}}))}},{key:"pause",value:function(){this._paused||(this.emit("pause"),this._paused=!0)}},{key:"stop",value:function(){this.emit("stop"),this._numPlays=0,this._ended=!1,this._paused=!0,this._currentFrameNumber=-1,this.context.clearRect(0,0,this._apng.width,this._apng.height),this.renderNextFrame()}},{key:"currentFrameNumber",get:function(){return this._currentFrameNumber}},{key:"currentFrame",get:function(){return this._apng.frames[this._currentFrameNumber]}},{key:"paused",get:function(){return this._paused}},{key:"ended",get:function(){return this._ended}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(r(4)).default);t.default=a},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function a(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(i(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(a(r))for(s=Array.prototype.slice.call(arguments,1),o=(c=r.slice()).length,u=0;u<o;u++)c[u].apply(this,s);return!0},r.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(o=i(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function a(){this.removeListener(e,a),r||(r=!0,t.apply(this,arguments))}return a.listener=t,this.on(e,a),this},r.prototype.removeListener=function(e,t){var r,i,o,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(r=this._events[e]).length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(s=o;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}}])},i.exports=n();var o=Object(a.b)(i.exports)},802:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return v}));var n={},a={},i={};Object.defineProperty(i,"__esModule",{value:!0}),i.loop=i.conditional=i.parse=void 0;i.parse=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;if(Array.isArray(r))r.forEach((function(r){return e(t,r,n,a)}));else if("function"==typeof r)r(t,n,a,e);else{var i=Object.keys(r)[0];Array.isArray(r[i])?(a[i]={},e(t,r[i],n,a[i])):a[i]=r[i](t,n,a,e)}return n};i.conditional=function(e,t){return function(r,n,a,i){t(r,n,a)&&i(r,e,n,a)}};i.loop=function(e,t){return function(r,n,a,i){for(var o=[],s=r.pos;t(r,n,a);){var u={};if(i(r,e,n,u),r.pos===s)break;s=r.pos,o.push(u)}return o}};var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.readBits=o.readArray=o.readUnsigned=o.readString=o.peekBytes=o.readBytes=o.peekByte=o.readByte=o.buildStream=void 0;o.buildStream=function(e){return{data:e,pos:0}};var s=function(){return function(e){return e.data[e.pos++]}};o.readByte=s;o.peekByte=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){return t.data[t.pos+e]}};var u=function(e){return function(t){return t.data.subarray(t.pos,t.pos+=e)}};o.readBytes=u;o.peekBytes=function(e){return function(t){return t.data.subarray(t.pos,t.pos+e)}};o.readString=function(e){return function(t){return Array.from(u(e)(t)).map((function(e){return String.fromCharCode(e)})).join("")}};o.readUnsigned=function(e){return function(t){var r=u(2)(t);return e?(r[1]<<8)+r[0]:(r[0]<<8)+r[1]}};o.readArray=function(e,t){return function(r,n,a){for(var i="function"==typeof t?t(r,n,a):t,o=u(e),s=new Array(i),c=0;c<i;c++)s[c]=o(r);return s}};o.readBits=function(e){return function(t){for(var r=function(e){return e.data[e.pos++]}(t),n=new Array(8),a=0;a<8;a++)n[7-a]=!!(r&1<<a);return Object.keys(e).reduce((function(t,r){var a=e[r];return a.length?t[r]=function(e,t,r){for(var n=0,a=0;a<r;a++)n+=e[t+a]&&Math.pow(2,r-a-1);return n}(n,a.index,a.length):t[r]=n[a.index],t}),{})}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i,r=o,n={blocks:function(e){for(var t=[],n=e.data.length,a=0,i=(0,r.readByte)()(e);0!==i&&i;i=(0,r.readByte)()(e)){if(e.pos+i>=n){var o=n-e.pos;t.push((0,r.readBytes)(o)(e)),a+=o;break}t.push((0,r.readBytes)(i)(e)),a+=i}for(var s=new Uint8Array(a),u=0,c=0;c<t.length;c++)s.set(t[c],u),u+=t[c].length;return s}},a=(0,t.conditional)({gce:[{codes:(0,r.readBytes)(2)},{byteSize:(0,r.readByte)()},{extras:(0,r.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,r.readUnsigned)(!0)},{transparentColorIndex:(0,r.readByte)()},{terminator:(0,r.readByte)()}]},(function(e){var t=(0,r.peekBytes)(2)(e);return 33===t[0]&&249===t[1]})),s=(0,t.conditional)({image:[{code:(0,r.readByte)()},{descriptor:[{left:(0,r.readUnsigned)(!0)},{top:(0,r.readUnsigned)(!0)},{width:(0,r.readUnsigned)(!0)},{height:(0,r.readUnsigned)(!0)},{lct:(0,r.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,t.conditional)({lct:(0,r.readArray)(3,(function(e,t,r){return Math.pow(2,r.descriptor.lct.size+1)}))},(function(e,t,r){return r.descriptor.lct.exists})),{data:[{minCodeSize:(0,r.readByte)()},n]}]},(function(e){return 44===(0,r.peekByte)()(e)})),u=(0,t.conditional)({text:[{codes:(0,r.readBytes)(2)},{blockSize:(0,r.readByte)()},{preData:function(e,t,n){return(0,r.readBytes)(n.text.blockSize)(e)}},n]},(function(e){var t=(0,r.peekBytes)(2)(e);return 33===t[0]&&1===t[1]})),c=(0,t.conditional)({application:[{codes:(0,r.readBytes)(2)},{blockSize:(0,r.readByte)()},{id:function(e,t,n){return(0,r.readString)(n.blockSize)(e)}},n]},(function(e){var t=(0,r.peekBytes)(2)(e);return 33===t[0]&&255===t[1]})),l=(0,t.conditional)({comment:[{codes:(0,r.readBytes)(2)},n]},(function(e){var t=(0,r.peekBytes)(2)(e);return 33===t[0]&&254===t[1]})),h=[{header:[{signature:(0,r.readString)(3)},{version:(0,r.readString)(3)}]},{lsd:[{width:(0,r.readUnsigned)(!0)},{height:(0,r.readUnsigned)(!0)},{gct:(0,r.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,r.readByte)()},{pixelAspectRatio:(0,r.readByte)()}]},(0,t.conditional)({gct:(0,r.readArray)(3,(function(e,t){return Math.pow(2,t.lsd.gct.size+1)}))},(function(e,t){return t.lsd.gct.exists})),{frames:(0,t.loop)([a,c,l,s,u],(function(e){var t=(0,r.peekByte)()(e);return 33===t||44===t}))}];e.default=h}(a);var c={};Object.defineProperty(c,"__esModule",{value:!0}),c.deinterlace=void 0;c.deinterlace=function(e,t){for(var r=new Array(e.length),n=e.length/t,a=function(n,a){var i=e.slice(a*t,(a+1)*t);r.splice.apply(r,[n*t,t].concat(i))},i=[0,4,2,1],o=[8,8,4,2],s=0,u=0;u<4;u++)for(var c=i[u];c<n;c+=o[u])a(c,s),s++;return r};var l={};Object.defineProperty(l,"__esModule",{value:!0}),l.lzw=void 0;l.lzw=function(e,t,r){var n,a,i,o,s,u,c,l,h,f,d,p,m,g,v,y,b=4096,w=r,_=new Array(r),O=new Array(b),x=new Array(b),j=new Array(b+1);for(s=1+(a=1<<(f=e)),n=a+2,c=-1,i=(1<<(o=f+1))-1,l=0;l<a;l++)O[l]=0,x[l]=l;for(d=p=m=g=v=y=0,h=0;h<w;){if(0===g){if(p<o){d+=t[y]<<p,p+=8,y++;continue}if(l=d&i,d>>=o,p-=o,l>n||l==s)break;if(l==a){i=(1<<(o=f+1))-1,n=a+2,c=-1;continue}if(-1==c){j[g++]=x[l],c=l,m=l;continue}for(u=l,l==n&&(j[g++]=m,l=c);l>a;)j[g++]=x[l],l=O[l];m=255&x[l],j[g++]=m,n<b&&(O[n]=c,x[n]=m,0==(++n&i)&&n<b&&(o++,i+=n)),c=u}g--,_[v++]=j[g],h++}for(h=v;h<w;h++)_[h]=0;return _},Object.defineProperty(n,"__esModule",{value:!0});var h=n.decompressFrames=n.decompressFrame=v=n.parseGIF=void 0,f=function(e){return e&&e.__esModule?e:{default:e}}(a),d=i,p=o,m=c,g=l;var v=n.parseGIF=function(e){var t=new Uint8Array(e);return(0,d.parse)((0,p.buildStream)(t),f.default)},y=function(e,t,r){if(e.image){var n=e.image,a=n.descriptor.width*n.descriptor.height,i=(0,g.lzw)(n.data.minCodeSize,n.data.blocks,a);n.descriptor.lct.interlaced&&(i=(0,m.deinterlace)(i,n.descriptor.width));var o={pixels:i,dims:{top:e.image.descriptor.top,left:e.image.descriptor.left,width:e.image.descriptor.width,height:e.image.descriptor.height}};return n.descriptor.lct&&n.descriptor.lct.exists?o.colorTable=n.lct:o.colorTable=t,e.gce&&(o.delay=10*(e.gce.delay||10),o.disposalType=e.gce.extras.disposal,e.gce.extras.transparentColorGiven&&(o.transparentIndex=e.gce.transparentColorIndex)),r&&(o.patch=function(e){for(var t=e.pixels.length,r=new Uint8ClampedArray(4*t),n=0;n<t;n++){var a=4*n,i=e.pixels[n],o=e.colorTable[i]||[0,0,0];r[a]=o[0],r[a+1]=o[1],r[a+2]=o[2],r[a+3]=i!==e.transparentIndex?255:0}return r}(o)),o}console.warn("gif frame does not have associated image.")};n.decompressFrame=y;h=n.decompressFrames=function(e,t){return e.frames.filter((function(e){return e.image})).map((function(r){return y(r,e.gct,t)}))}},804:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(92),a=r(99),i=r(89),o=r(88),s=r(141),u=r(179),c=r(680),l=r(211),h=r(308),f=r(152),d=function(){function e(t){Object(i.a)(this,e),this._resourceManager=t,this._rasterizationCanvas=null}return Object(o.a)(e,[{key:"dispose",value:function(){this._rasterizationCanvas=null}},{key:"rasterizeJSONResource",value:function(e,t,r){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===e.type||"esriSFS"===e.type){var n=Object(c.b)(this._rasterizationCanvas,e.style,t),i=Object(a.a)(n,3),o=i[0];return{size:[i[1],i[2]],image:new Uint32Array(o.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0,rasterizationScale:Object(s.m)(Math.ceil(t))}}if("simple-line"===e.type||"esriSLS"===e.type||"line"===e.type&&e.dashTemplate){var f,d;if("simple-line"===e.type||"esriSLS"===e.type)switch(f=Object(u.e)(e.style,e.cap),e.cap){case"butt":d="Butt";break;case"square":d="Square";break;default:d="Round"}else f=e.dashTemplate,d=e.cim.capStyle;var p=Object(c.a)(f,d),m=Object(a.a)(p,3),g=m[0];return{size:[m[1],m[2]],image:new Uint32Array(g.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}var v,y=null,b=null,w=1;if("simple-marker"===e.type||"esriSMS"===e.type||"line-marker"===e.type?(v=u.a.fromSimpleMarker(e),b=Object(h.c)(v)):e.cim&&"CIMHatchFill"===e.cim.type?(v=u.a.fromCIMHatchFill(e.cim,t),y=new l.a(v.frame.xmin,-v.frame.ymax,v.frame.xmax-v.frame.xmin,v.frame.ymax-v.frame.ymin),w=t):e.cim.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===e.cim.markerPlacement.type?(v=u.a.fromCIMInsidePolygon(e.cim),y=new l.a(v.frame.xmin,-v.frame.ymax,v.frame.xmax-v.frame.xmin,v.frame.ymax-v.frame.ymin)):(v=e.cim,e.avoidSDFRasterization||(b=Object(h.c)(v))),b&&!r){var _=Object(h.a)(b),O=Object(a.a)(_,3),x=O[0],j=O[1],k=O[2];return x?{size:[j,k],image:new Uint32Array(x.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0,rasterizationScale:w}:null}var C=u.a.rasterize(this._rasterizationCanvas,v,y,this._resourceManager,!r),M=Object(a.a)(C,5),F=M[0],S=M[1],I=M[2],P=M[3],z=M[4];return F?{size:[S,I],image:new Uint32Array(F.buffer),sdf:!1,simplePattern:!1,anchorX:P,anchorY:z}:null}},{key:"rasterizeImageResource",value:function(e,t,r,i){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=t;var o=this._rasterizationCanvas.getContext("2d");r instanceof ImageData?o.putImageData(r,0,0):(r.setAttribute("width","".concat(e,"px")),r.setAttribute("height","".concat(t,"px")),o.drawImage(r,0,0,e,t));var s,u=o.getImageData(0,0,e,t),c=new Uint8Array(u.data);if(i){var l,h=Object(n.a)(i);try{for(h.s();!(l=h.n()).done;){var d=l.value;if(d&&d.oldColor&&4===d.oldColor.length&&d.newColor&&4===d.newColor.length){var p=Object(a.a)(d.oldColor,4),m=p[0],g=p[1],v=p[2],y=p[3],b=Object(a.a)(d.newColor,4),w=b[0],_=b[1],O=b[2],x=b[3];if(m===w&&g===_&&v===O&&y===x)continue;for(var j=0;j<c.length;j+=4)m===c[j]&&g===c[j+1]&&v===c[j+2]&&y===c[j+3]&&(c[j]=w,c[j+1]=_,c[j+2]=O,c[j+3]=x)}}}catch(z){h.e(z)}finally{h.f()}}for(var k=0;k<c.length;k+=4)s=c[k+3]/255,c[k]=c[k]*s,c[k+1]=c[k+1]*s,c[k+2]=c[k+2]*s;var C=c,M=e,F=t,S=512;if(M>=S||F>=S){var I=M/F;I>1?(M=S,F=Math.round(S/I)):(F=S,M=Math.round(S*I)),C=new Uint8Array(4*M*F);var P=new Uint8ClampedArray(C.buffer);Object(f.C)(c,e,t,P,M,F,!1)}return{size:[M,F],image:new Uint32Array(C.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}]),e}()}}]);
//# sourceMappingURL=183.5468d2d8.chunk.js.map
(this["webpackJsonpklw-bank"]=this["webpackJsonpklw-bank"]||[]).push([[31],{1022:function(e,t,r){"use strict";function n(e,t){var r=e.attributeTable,n=e.bandCount;return!(null!=r||!function(e){var t,r;return["u8","s8"].includes(e.pixelType)&&null!=(null===(t=e.statistics)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.min)&&null!=(null===(r=e.statistics[0])||void 0===r?void 0:r.max)&&1===e.bandCount}(e))||!(null==r||n>1)&&(!t||null!=r.fields.find((function(e){return e.name.toLowerCase()===t.toLowerCase()})))}function a(e){var t=e.bandCount,r=e.dataType,n=e.pixelType;return"elevation"===r||"generic"===r&&1===t&&("s16"===n||"s32"===n||"f32"===n||"f64"===n)}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.bandCount,n=e.colormap,a=e.pixelType;return 1===r&&(!(null===n||void 0===n||!n.length)||!t&&"u8"===a)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.attributeTable;return 1===e.bandCount&&(!t||null!=r||null!=e.histograms)}function l(e){var t=e.dataType;return"vector-uv"===t||"vector-magdir"===t}function s(e){var t=e.dataType;return"vector-uv"===t||"vector-magdir"===t}r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return n})),r.d(t,"f",(function(){return l}))},1173:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n,a,i,o=r(201),l={exports:{}};a=l,void 0!==(n=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(e){var t=this.buffer,r=t?t.byteLength:0;if(e<r)return t;for(var n=512;n<e;)n<<=1;for(var a=new Uint8Array(n),i=0;i<r;++i)a[i]=t[i];return this.buffer=a},getByte:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(e){var t=this.pos;if(e){this.ensureBuffer(t+e);for(var r=t+e;!this.eof&&this.bufferLength<r;)this.readBlock();var n=this.bufferLength;r>n&&(r=n)}else{for(;!this.eof;)this.readBlock();r=this.bufferLength}return this.pos=r,this.buffer.subarray(t,r)},lookChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(e,t,r){for(var n=e+t;this.bufferLength<=n&&!this.eof;)this.readBlock();return new Stream(this.buffer,e,t,r)},skip:function(e){e||(e=1),this.pos+=e},reset:function(){this.pos=0}},e}(),i=function(){if(!self||!self.Uint32Array)return null;var e=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),r=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),a=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],i=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function o(e){throw new Error(e)}function l(e){var t=0,r=e[t++],a=e[t++];-1!=r&&-1!=a||o("Invalid header in flate stream"),8!=(15&r)&&o("Unknown compression method in flate stream"),((r<<8)+a)%31!=0&&o("Bad FCHECK in flate stream"),32&a&&o("FDICT bit set in flate stream"),this.bytes=e,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,n.call(this)}return l.prototype=Object.create(n.prototype),l.prototype.getBits=function(e){for(var t,r=this.codeSize,n=this.codeBuf,a=this.bytes,i=this.bytesPos;r<e;)void 0===(t=a[i++])&&o("Bad encoding in flate stream"),n|=t<<r,r+=8;return t=n&(1<<e)-1,this.codeBuf=n>>e,this.codeSize=r-=e,this.bytesPos=i,t},l.prototype.getCode=function(e){for(var t=e[0],r=e[1],n=this.codeSize,a=this.codeBuf,i=this.bytes,l=this.bytesPos;n<r;){var s;void 0===(s=i[l++])&&o("Bad encoding in flate stream"),a|=s<<n,n+=8}var u=t[a&(1<<r)-1],c=u>>16,f=65535&u;return(0==n||n<c||0==c)&&o("Bad encoding in flate stream"),this.codeBuf=a>>c,this.codeSize=n-c,this.bytesPos=l,f},l.prototype.generateHuffmanTable=function(e){for(var t=e.length,r=0,n=0;n<t;++n)e[n]>r&&(r=e[n]);for(var a=1<<r,i=new Uint32Array(a),o=1,l=0,s=2;o<=r;++o,l<<=1,s<<=1)for(var u=0;u<t;++u)if(e[u]==o){var c=0,f=l;for(n=0;n<o;++n)c=c<<1|1&f,f>>=1;for(n=c;n<a;n+=s)i[n]=o<<16|u;++l}return[i,r]},l.prototype.readBlock=function(){function n(e,t,r,n,a){for(var i=e.getBits(r)+n;i-- >0;)t[p++]=a}var l=this.getBits(3);if(1&l&&(this.eof=!0),0!=(l>>=1)){var s,u;if(1==l)s=a,u=i;else if(2==l){for(var c=this.getBits(5)+257,f=this.getBits(5)+1,h=this.getBits(4)+4,d=Array(e.length),p=0;p<h;)d[e[p++]]=this.getBits(3);for(var v=this.generateHuffmanTable(d),m=0,g=(p=0,c+f),b=new Array(g);p<g;){var y=this.getCode(v);16==y?n(this,b,2,3,m):17==y?n(this,b,3,3,m=0):18==y?n(this,b,7,11,m=0):b[p++]=m=y}s=this.generateHuffmanTable(b.slice(0,c)),u=this.generateHuffmanTable(b.slice(c,g))}else o("Unknown block type in flate stream");for(var w=(E=this.buffer)?E.length:0,x=this.bufferLength;;){var O=this.getCode(s);if(O<256)x+1>=w&&(w=(E=this.ensureBuffer(x+1)).length),E[x++]=O;else{if(256==O)return void(this.bufferLength=x);var k=(O=t[O-=257])>>16;k>0&&(k=this.getBits(k)),m=(65535&O)+k,O=this.getCode(u),(k=(O=r[O])>>16)>0&&(k=this.getBits(k));var C=(65535&O)+k;x+m>=w&&(w=(E=this.ensureBuffer(x+m)).length);for(var j=0;j<m;++j,++x)E[x]=E[x-C]}}}else{var A,S=this.bytes,M=this.bytesPos;void 0===(A=S[M++])&&o("Bad block header in flate stream");var T=A;void 0===(A=S[M++])&&o("Bad block header in flate stream"),T|=A<<8,void 0===(A=S[M++])&&o("Bad block header in flate stream");var I=A;void 0===(A=S[M++])&&o("Bad block header in flate stream"),(I|=A<<8)!=(65535&~T)&&o("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var P=this.bufferLength,E=this.ensureBuffer(P+T),R=P+T;this.bufferLength=R;for(var U=P;U<R;++U){if(void 0===(A=S[M++])){this.eof=!0;break}E[U]=A}this.bytesPos=M}},l}())&&(a.exports=i);var s=Object(o.b)(l.exports)},1174:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return v})),r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return h}));var n=r(99),a=r(414),i=r(420),o=1,l=1/111e3;function s(e){var t=e.altitude,r=e.azimuth,n=e.hillshadeType,a=e.pixelSizePower,i=void 0===a?1:a,o=e.pixelSizeFactor,s=void 0===o?1:o,u=e.scalingType,c=e.isGCS,f=e.resolution,h="multi-directional"===n?2*e.zFactor:e.zFactor,d=f.x,p=f.y,v=h/(8*d),m=h/(8*p);if(c&&h>.001&&(v/=l,m/=l),"adjusted"===u)if(c){var g=d*l,b=p*l;v=(h+Math.pow(g,i)*s)/(8*g),m=(h+Math.pow(b,i)*s)/(8*b)}else v=(h+Math.pow(d,i)*s)/(8*d),m=(h+Math.pow(p,i)*s)/(8*p);var y=(90-t)*Math.PI/180,w=Math.cos(y),x=(360-r+90)*Math.PI/180,O=Math.sin(y)*Math.cos(x),k=Math.sin(y)*Math.sin(x),C=[315,270,225,360,180,0],j=[60,60,60,60,60,90],A=new Float32Array([3,5,3,2,1,4]),S=A.reduce((function(e,t){return e+t})),M=A.map((function(e){return e/S})),T="multi-directional"===n?C.length:1,I=new Float32Array(6),P=new Float32Array(6),E=new Float32Array(6);if("multi-directional"===n)for(var R=0;R<T;R++)r=C[R],y=(90-(t=j[R]))*Math.PI/180,w=Math.cos(y),x=(360-r+90)*Math.PI/180,O=Math.sin(y)*Math.cos(x),k=Math.sin(y)*Math.sin(x),I[R]=w,P[R]=O,E[R]=k;else I.fill(w),P.fill(O),E.fill(k);return{resolution:f,factor:[v,m],sinZcosA:O,sinZsinA:k,cosZ:w,sinZcosAs:P,sinZsinAs:E,cosZs:I,weights:M,hillshadeType:["traditional","multi-directional"].indexOf(n)}}function u(e,t){var r,n=e.width,a=e.height,i=n*a,l=new Uint8Array(i),s=null!=e.mask;if(s){r=new Uint8Array(e.mask);for(var u=0;u<r.length;u++)r[u]&&(l[u]=1,r[u]=1)}var c,f=e.pixels[0],h=new Float32Array(i),d=new Float32Array(i),p=0;if(t){var v=t.resolution,m=v?(v.x+v.y)/2:1;p=200*t.zFactor/(m*m),c=new Float32Array(i)}for(var g,b,y,w,x,O,k,C,j=null===t||void 0===t?void 0:t.curvatureType,A=o;A<a-o;A++)for(var S=A*n,M=o;M<n-o;M++){var T=S+M;if(!r||0!==r[T]){if(r){if(r[T-n-1]+r[T-n]+r[T-n+1]+r[T-1]+r[T+1]+r[T+n-1]+r[T+n]+r[T+n+1]<7){l[T]=0;continue}g=r[T-n-1]?f[T-n-1]:f[T],b=r[T-n]?f[T-n]:f[T],y=r[T-n+1]?f[T-n+1]:f[T],w=r[T-1]?f[T-1]:f[T],x=r[T+1]?f[T+1]:f[T],O=r[T+n-1]?f[T+n-1]:f[T],k=r[T+n]?f[T+n]:f[T],C=r[T+n+1]?f[T+n+1]:f[T]}else g=f[T-n-1],b=f[T-n],y=f[T-n+1],w=f[T-1],x=f[T+1],O=f[T+n-1],k=f[T+n],C=f[T+n+1];if(h[T]=y+x+x+C-(g+w+w+O),d[T]=O+k+k+C-(g+b+b+y),null!=c){var I=f[T],P=.5*(w+x)-I,E=.5*(b+k)-I;if("standard"===j)c[T]=-p*(P+E);else{var R=(-g+y+O-C)/4,U=(-w+x)/2,L=(b-k)/2,D=U*U,G=L*L,B=D+G;B&&(c[T]="profile"===j?p*(P*D+E*G+R*U*L)/B:-p*(P*G+E*D-R*U*L)/B)}}}}return{outMask:s?l:null,dzxs:h,dzys:d,curvatures:c}}function c(e,t,r){for(var n=0;n<r;n++)e[n*t]=e[n*t+1],e[(n+1)*t-1]=e[(n+1)*t-2];for(var a=1;a<t-1;a++)e[a]=e[a+t],e[a+(r-1)*t]=e[a+(r-2)*t]}function f(e,t){if(!Object(i.k)(e))return e;for(var r=s(t),l=r.factor,f=r.sinZcosA,h=r.sinZsinA,d=r.cosZ,p=r.sinZcosAs,v=r.sinZsinAs,m=r.cosZs,g=r.weights,b=Object(n.a)(l,2),y=b[0],w=b[1],x="traditional"===t.hillshadeType,O=e.width,k=e.height,C=new Uint8Array(O*k),j=u(e),A=j.dzxs,S=j.dzys,M=j.outMask,T=o;T<k-o;T++)for(var I=T*O,P=o;P<O-o;P++){var E=I+P;if(!M||M[E]){var R=A[E]*y,U=S[E]*w,L=Math.sqrt(1+R*R+U*U),D=0;if(x){var G=255*(d+h*U-f*R)/L;G<0&&(G=0),D=G}else for(var B=v.length,N=0;N<B;N++){var F=255*(m[N]+v[N]*U-p[N]*R)/L;F<0&&(F=0),D+=F*g[N]}C[E]=255&D}}return c(C,O,k),new a.a({width:O,height:k,pixels:[C],mask:M,pixelType:"u8",validPixelCount:e.validPixelCount,statistics:[{minValue:0,maxValue:255}]})}function h(e,t,r,a){if(Object(i.k)(e)&&Object(i.k)(t)){for(var o=a.min,l=a.max,s=e.pixels[0],u=t.pixels,c=t.mask,f=u[0],h=255.00001/(l-o),d=new Uint8ClampedArray(f.length),p=new Uint8ClampedArray(f.length),v=new Uint8ClampedArray(f.length),m=r.length-1,g=0;g<f.length;g++)if(!c||0!==c[g]){var b=Math.floor((f[g]-o)*h),y=Object(n.a)(r[b<0?0:b>m?m:b],2),w=y[0],x=y[1],O=s[g],k=O*x,C=k*(1-Math.abs(w%2-1)),j=O-k;switch(Math.floor(w)){case 0:d[g]=k+j,p[g]=C+j,v[g]=j;break;case 1:d[g]=C+j,p[g]=k+j,v[g]=j;break;case 2:d[g]=j,p[g]=k+j,v[g]=C+j;break;case 3:d[g]=j,p[g]=C+j,v[g]=k+j;break;case 4:d[g]=C+j,p[g]=j,v[g]=k+j;break;case 5:case 6:d[g]=k+j,p[g]=j,v[g]=C+j}}e.pixels=[d,p,v],e.updateStatistics()}}function d(e,t){var r,n;if(!Object(i.k)(e))return e;var s=t.zFactor,f=null!==(r=t.pixelSizePower)&&void 0!==r?r:1,h=null!==(n=t.pixelSizeFactor)&&void 0!==n?n:1,d=t.slopeType,p=t.isGCS,v=t.resolution,m=v.x,g=v.y,b=s/(8*m),y=s/(8*g);p&&Math.abs(s-1)<1e-4&&(b/=l,y/=l),"adjusted"===d&&(b=(s+Math.pow(m,f)*h)/(8*m),y=(s+Math.pow(g,f)*h)/(8*g));for(var w=u(e),x=w.dzxs,O=w.dzys,k=w.outMask,C=e.width,j=e.height,A=new Float32Array(C*j),S=o;S<j-o;S++)for(var M=S*C,T=o;T<C-o;T++){var I=M+T;if(!k||k[I]){var P=x[I]*b,E=O[I]*y,R=Math.sqrt(P*P+E*E);A[M+T]="percent-rise"===d?100*R:57.2957795*Math.atan(R)}}c(A,C,j);var U=new a.a({width:C,height:j,pixels:[A],mask:k,pixelType:"f32",validPixelCount:e.validPixelCount});return U.updateStatistics(),U}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Object(i.k)(e))return e;for(var r=t.resolution,n=r?1/r.x:1,l=r?1/r.y:1,s=u(e),f=s.dzxs,h=s.dzys,d=s.outMask,p=e.width,v=e.height,m=new Float32Array(p*v),g=o;g<v-o;g++)for(var b=g*p,y=o;y<p-o;y++){var w=b+y;if(!d||d[w]){var x=f[w]*n,O=h[w]*l,k=-1;0===x&&0===O||((k=90-57.29578*Math.atan2(O,-x))<0&&(k+=360),360===k?k=0:k>360&&(k%=360)),m[b+y]=k}}return c(m,p,v),new a.a({width:p,height:v,pixels:[m],mask:d,pixelType:"f32",validPixelCount:e.validPixelCount,statistics:[{minValue:-1,maxValue:360}]})}function v(e,t){if(!Object(i.k)(e))return e;var r=u(e,t),n=r.curvatures,o=r.outMask,l=e.width,s=e.height;c(n,l,s);var f=new a.a({width:l,height:s,pixels:[n],mask:o,pixelType:"f32",validPixelCount:e.validPixelCount});return f.updateStatistics(),f}},1175:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));var n=new(r(146).a)({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),a={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"}},1245:function(e,t,r){"use strict";r.d(t,"a",(function(){return W})),r.d(t,"b",(function(){return z}));var n=r(1),a=r(4),i=r(12),o=r(101),l=r(111),s=r(414),u=r(89),c=r(88),f=r(110),h=r(1173),d=function(){function e(t){Object(u.a)(this,e),this._canvas=null,this._ctx=null,t&&(this._canvas=t.canvas,this._ctx=t.ctx||t.canvas&&t.canvas.getContext("2d"))}return Object(c.a)(e,[{key:"decode",value:function(t,r,n){var a=this;if(!t||t.byteLength<10)throw new o.a("imagecanvasdecoder: decode","required a valid encoded data as input.");var i=r.width,l=void 0===i?0:i,s=r.height,u=void 0===s?0:s,c=r.format,h=r.applyJpegMask;if(h&&(!l||!u))throw new o.a("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((function(i,o){var s=null;"jpg"===c&&h&&(s=e._getMask(t,{width:l,height:u}));var d,p=new Blob([new Uint8Array(t)],{type:"image/"+c=="jpg"?"jpeg":c}),v=URL.createObjectURL(p),m=new Image;m.src=v,m.onload=function(){if(URL.revokeObjectURL(v),Object(f.i)(n))o(Object(f.b)());else{l=m.width,u=m.height,a._canvas&&a._ctx?(a._canvas.width===l&&a._canvas.height===u||(a._canvas.width=l,a._canvas.height=u),a._ctx.clearRect(0,0,l,u)):(a._canvas=document.createElement("canvas"),a._canvas.width=l,a._canvas.height=u,a._ctx=a._canvas.getContext("2d")),a._ctx.drawImage(m,0,0);var e,t=a._ctx.getImageData(0,0,l,u);if(d=t.data,r.renderOnCanvas){if(s)for(e=0;e<s.length;e++)s[e]?d[4*e+3]=255:d[4*e+3]=0;return a._ctx.putImageData(t,0,0),void i(null)}var c=l*u,h=new Uint8Array(c),p=new Uint8Array(c),g=new Uint8Array(c);if(s)for(e=0;e<c;e++)h[e]=d[4*e],p[e]=d[4*e+1],g[e]=d[4*e+2];else for(s=new Uint8Array(c),e=0;e<c;e++)h[e]=d[4*e],p[e]=d[4*e+1],g[e]=d[4*e+2],s[e]=d[4*e+3];i({width:l,height:u,pixels:[h,p,g],mask:s,pixelType:"u8"})}},m.onerror=function(){URL.revokeObjectURL(v),o("cannot load image")}}))}}],[{key:"_getMask",value:function(e,t){var r=null;try{var n=new Uint8Array(e),a=Math.ceil(n.length/2),i=0,o=n.length-2;for(i=a;i<o&&(255!==n[i]||217!==n[i+1]);i++);if((i+=2)<n.length-1){var l=new h.a(n.subarray(i)).getBytes();r=new Uint8Array(t.width*t.height);for(var s=0,u=0;u<l.length;u++)for(var c=7;c>=0;c--)r[s++]=l[u]>>c&1}}catch(f){}return r}}]),e}(),p=r(1657),v=function(){function e(){Object(u.a)(this,e)}return Object(c.a)(e,null,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Uint8Array(e),n=new p.a;n.parse(r);var a,i=n.width,o=n.height,l=n.numComponents,s=n.eof,u=n.getData(i,o,!0),c=i*o,f=null,d=0,v=0,m=0;if(!t&&s<r.length-1)try{var g=new h.a(r.subarray(s)).getBytes();f=new Uint8Array(c);var b=0;for(d=0;d<g.length;d++)for(m=7;m>=0;m--)f[b++]=g[d]>>m&1}catch(w){}if(1===l&&u.length===i*o){var y=new Uint8Array(u.buffer);a=[y,y,y]}else{for(a=[],d=0;d<3;d++)a.push(new Uint8Array(c));for(m=0,v=0;v<c;v++)for(d=0;d<3;d++)a[d][v]=u[m++]}return{width:i,height:o,pixels:a,mask:f}}}]),e}(),m=r(1658),g=r(1659),b=r(470),y=function(e,t){var r=t.width*t.height,n=t.pixelType;return Math.floor(e.byteLength/(r*w(n)))},w=function(e){var t=1;switch(e){case Uint8Array:case Int8Array:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t},x=function(){function e(){Object(u.a)(this,e)}return Object(c.a)(e,null,[{key:"decode",value:function(e,t){var r,n,a,i,o=t.pixelType,l=[],s=t.width*t.height,u=y(e,t),c=t.bandIds,f=t.format,h=c&&c.length||y(e,t),d=e.byteLength-e.byteLength%(s*w(o)),p=new o(e,0,s*u),v=null;if("bip"===f)for(r=0;r<h;r++){for(a=new o(s),i=c?c[r]:r,n=0;n<s;n++)a[n]=p[n*u+i];l.push(a)}else if("bsq"===f)for(r=0;r<h;r++)i=c?c[r]:r,l.push(p.subarray(i*s,(i+1)*s));return d<e.byteLength-1&&(v=function(e,t){if(8*e.byteLength<t)return null;var r=new Uint8Array(e,0,Math.ceil(t/8)),n=new Uint8Array(t),a=0,i=0,o=0,l=0;for(o=0;o<r.length-1;o++)for(i=r[o],l=7;l>=0;l--)n[a++]=i>>l&1;for(l=7;a<t-1;)i=r[r.length-1],n[a++]=i>>l&1,l--;return n}(e.slice(d),s)),{pixels:l,mask:v}}}]),e}(),O=r(1660),k=r(1328),C=function(e){var t,r,n;function a(e){var t,r,n,a,i,o,l,s,u,c,f,h,d;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},i=null;;){switch(t=this.readUInt32(),s=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join(""),s){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":i&&this.animation.frames.push(i),this.pos+=4,i={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},a=this.readUInt16(),n=this.readUInt16()||100,i.delay=1e3*a/n,i.disposeOp=this.data[this.pos++],i.blendOp=this.data[this.pos++],i.data=[];break;case"IDAT":case"fdAT":for("fdAT"===s&&(this.pos+=4,t-=4),e=(null!=i?i.data:void 0)||this.imgData,f=0;0<=t?f<t:f>t;0<=t?++f:--f)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(t),(u=255-this.transparency.indexed.length)>0)for(h=0;0<=u?h<u:h>u;0<=u?++h:--h)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":o=(c=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,c.slice(0,o)),this.text[l]=String.fromCharCode.apply(String,c.slice(o+1));break;case"IEND":return i&&this.animation.frames.push(i),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(d=this.colorType)||6===d,r=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*r,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return a.load=function(e,t,r){var n;return"function"==typeof t&&(r=t),(n=new XMLHttpRequest).open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){var e;return e=new a(new Uint8Array(n.response||n.mozResponseArrayBuffer)),"function"==typeof(null!=t?t.getContext:void 0)&&e.render(t),"function"==typeof r?r(e):void 0},n.send(null)},1,2,0,a.prototype.read=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)r.push(this.data[this.pos++]);return r},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(e){var t,r,n,a,i,o,l,s,u,c,f,d,p,v,m,g,b,y,w,x,O,k,C;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);for(e=(e=new h.a(e)).getBytes(),g=(d=this.pixelBitlength/8)*this.width,p=new Uint8Array(g*this.height),o=e.length,m=0,v=0,r=0;v<o;){switch(e[v++]){case 0:for(a=w=0;w<g;a=w+=1)p[r++]=e[v++];break;case 1:for(a=x=0;x<g;a=x+=1)t=e[v++],i=a<d?0:p[r-d],p[r++]=(t+i)%256;break;case 2:for(a=O=0;O<g;a=O+=1)t=e[v++],n=(a-a%d)/d,b=m&&p[(m-1)*g+n*d+a%d],p[r++]=(b+t)%256;break;case 3:for(a=k=0;k<g;a=k+=1)t=e[v++],n=(a-a%d)/d,i=a<d?0:p[r-d],b=m&&p[(m-1)*g+n*d+a%d],p[r++]=(t+Math.floor((i+b)/2))%256;break;case 4:for(a=C=0;C<g;a=C+=1)t=e[v++],n=(a-a%d)/d,i=a<d?0:p[r-d],0===m?b=y=0:(b=p[(m-1)*g+n*d+a%d],y=n&&p[(m-1)*g+(n-1)*d+a%d]),l=i+b-y,s=Math.abs(l-i),c=Math.abs(l-b),f=Math.abs(l-y),u=s<=c&&s<=f?i:c<=f?b:y,p[r++]=(t+u)%256;break;default:throw new Error("Invalid filter algorithm: "+e[v-1])}m++}return p},a.prototype.decodePalette=function(){var e,t,r,n,a,i,o,l,s;for(r=this.palette,i=this.transparency.indexed||[],a=new Uint8Array((i.length||0)+r.length),n=0,r.length,e=0,t=o=0,l=r.length;o<l;t=o+=3)a[n++]=r[t],a[n++]=r[t+1],a[n++]=r[t+2],a[n++]=null!=(s=i[e++])?s:255;return a},a.prototype.copyToImageData=function(e,t){var r,n,a,i,o,l,s,u,c,f,h;if(n=this.colors,c=null,r=this.hasAlphaChannel,this.palette.length&&(c=null!=(h=this._decodedPalette)?h:this._decodedPalette=this.decodePalette(),n=4,r=!0),u=(a=e.data||e).length,o=c||t,i=l=0,1===n)for(;i<u;)s=c?4*t[i/4]:l,f=o[s++],a[i++]=f,a[i++]=f,a[i++]=f,a[i++]=r?o[s++]:this.transparency.grayscale&&this.transparency.grayscale===f?0:255,l=s;else for(;i<u;)s=c?4*t[i/4]:l,a[i++]=o[s++],a[i++]=o[s++],a[i++]=o[s++],a[i++]=r?o[s++]:this.transparency.rgb&&this.transparency.rgb[1]===o[s-3]&&this.transparency.rgb[3]===o[s-2]&&this.transparency.rgb[5]===o[s-1]?0:255,l=s},a.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e},r=e.document&&e.document.createElement("canvas"),n=r&&r.getContext("2d"),t=function(e){var t;return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(t=new Image).src=r.toDataURL(),t},a.prototype.decodeFrames=function(e){var r,n,a,i,o,l,s,u;if(this.animation){for(u=[],n=o=0,l=(s=this.animation.frames).length;o<l;n=++o)r=s[n],a=e.createImageData(r.width,r.height),i=this.decodePixels(new Uint8Array(r.data)),this.copyToImageData(a,i),r.imageData=a,u.push(r.image=t(a));return u}},a.prototype.renderFrame=function(e,t){var r,n,a;return r=(n=this.animation.frames)[t],a=n[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=a?a.disposeOp:void 0)?e.clearRect(a.xOffset,a.yOffset,a.width,a.height):2===(null!=a?a.disposeOp:void 0)&&e.putImageData(a.imageData,a.xOffset,a.yOffset),0===r.blendOp&&e.clearRect(r.xOffset,r.yOffset,r.width,r.height),e.drawImage(r.image,r.xOffset,r.yOffset)},a.prototype.animate=function(e){var t,r,n,a,i,o,l=this;return r=0,o=this.animation,a=o.numFrames,n=o.frames,i=o.numPlays,(t=function(){var o,s;if(o=r++%a,s=n[o],l.renderFrame(e,o),a>1&&r/a<i)return l.animation._timeout=setTimeout(t,s.delay)})()},a.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},a.prototype.render=function(e){var t,r;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(r=t.createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),t.putImageData(r,0,0))},a}(self),j=new Set(["jpg","png","bmp","gif"]);function A(e,t){return S.apply(this,arguments)}function S(){return(S=Object(i.a)(Object(a.a)().mark((function e(t,r){var n,i,l,u,c,f,h,d,p,v,g;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k.a){e.next=2;break}throw new o.a("rasterCoded:decode","lerc decoder is not supported on big endian platform");case 2:return e.next=4,Object(m.b)();case 4:return n=r.offset,i=Object(m.a)(t,{inputOffset:n,returnInterleaved:r.returnInterleaved}),l=i.width,u=i.height,c=i.pixelType,f=i.statistics,h=i.depthCount,d=i.noDataValues,p=i.bandMasks,v=i.pixels,g=i.mask,e.abrupt("return",new s.a({width:l,height:u,pixelType:c.toLowerCase(),pixels:v,mask:g,statistics:f,bandMasks:p,depthCount:h,noDataValues:d}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return T.apply(this,arguments)}function T(){return(T=Object(i.a)(Object(a.a)().mark((function e(t,r){var i,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)(t,Object(n.a)(Object(n.a)({},r),{},{noDataValue:null}));case 2:return i=e.sent,Object(l.c)(i),o=new s.a({width:i.width,height:i.height,pixels:i.pixels,pixelType:i.pixelType.toLowerCase(),mask:i.mask,statistics:null}),e.abrupt("return",(o.updateStatistics(),o));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return P.apply(this,arguments)}function P(){return(P=Object(i.a)(Object(a.a)().mark((function e(t,r){var n,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.b)(t,r.customOptions);case 2:return n=e.sent,i=new s.a({width:n.width,height:n.height,pixels:n.pixels,pixelType:n.pixelType.toLowerCase(),mask:n.mask,statistics:null}),e.abrupt("return",(i.updateStatistics(),i));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){var r=t.pixelType||"u8",n=s.a.getPixelArrayConstructor(r),a="u8"===r?e:new n(e.buffer),i=[],o=t.planes||1;if(1===o)i.push(a);else for(var l=0;l<o;l++){for(var u=(t.width||1)*(t.height||e.length),c=new n(u),f=0;f<u;f++)c[f]=a[f*o+l];i.push(c)}var h=new s.a({width:t.width||1,height:t.height||e.length,pixels:i,pixelType:r,statistics:null});return h.updateStatistics(),h}function R(e,t){return E(new h.a(new Uint8Array(e)).getBytes(),t)}function U(e,t){return E(Object(g.a)(e,t.offset,t.eof,!t.isInputBigEndian),t)}function L(e,t,r){var n=function(e){var t=null,r=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":r=255,t=Uint8Array;break;case"u16":r=r||65535,t=Uint16Array;break;case"u32":r=r||Math.pow(2,32)-1,t=Uint32Array;break;case"s8":r=r||-128,t=Int8Array;break;case"s16":r=r||-32768,t=Int16Array;break;case"s32":r=r||0-Math.pow(2,31),t=Int32Array;break;default:t=Float32Array}return{pixelTypeCtor:t,noDataValue:r}}(t.pixelType),a=n.pixelTypeCtor,i=(0,x.decode)(e,{width:t.width,height:t.height,pixelType:a,format:r}),o=new s.a({width:t.width,height:t.height,pixels:i.pixels,pixelType:t.pixelType,mask:i.mask,statistics:null});return o.updateStatistics(),o}function D(e,t){var r,n=v.decode(e,null!==(r=t.hasNoZlibMask)&&void 0!==r?r:void 0),a=new s.a({width:n.width,height:n.height,pixels:n.pixels,pixelType:"U8",mask:n.mask,statistics:null});return a.updateStatistics(),a}function G(e,t){var r,n=new Uint8Array(e),a=new C(n),i=t.width,o=t.height,l=i*o,u=a.decode(),c=0,f=0,h=new Uint8Array(l);for(c=0;c<l;c++)h[c]=u[4*c+3];var d=new s.a({width:i,height:o,pixels:[],pixelType:"U8",mask:h,statistics:[]});for(c=0;c<3;c++){for(r=new Uint8Array(l),f=0;f<l;f++)r[f]=u[4*f+c];d.addData({pixels:r})}return d.updateStatistics(),d}function B(e,t,r,n){return N.apply(this,arguments)}function N(){return(N=Object(i.a)(Object(a.a)().mark((function e(t,r,i,o){var l,u,c,f;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=new d,u=Object(n.a)({applyJpegMask:!1,format:r},i),e.next=4,l.decode(t,u,o);case 4:return c=e.sent,f=new s.a(c),e.abrupt("return",(f.updateStatistics(),f));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){if(null==e)throw new o.a("rasterCodec:decode","parameter encodeddata is required.");var t=new Uint8Array(e,0,10),r="";return 255===t[0]&&216===t[1]?r="jpg":137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]?r="png":67===t[0]&&110===t[1]&&116===t[2]&&90===t[3]&&73===t[4]&&109===t[5]&&97===t[6]&&103===t[7]&&101===t[8]&&32===t[9]?r="lerc":76===t[0]&&101===t[1]&&114===t[2]&&99===t[3]&&50===t[4]&&32===t[5]?r="lerc2":73===t[0]&&73===t[1]&&42===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&42===t[3]||73===t[0]&&73===t[1]&&43===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&43===t[3]?r="tiff":71===t[0]&&73===t[1]&&70===t[2]?r="gif":66===t[0]&&77===t[1]?r="bmp":String.fromCharCode.apply(null,t).toLowerCase().includes("error")&&(r="error"),r}function V(e){var t=null;switch(e){case"lerc":case"lerc2":t=A;break;case"jpg":t=D;break;case"png":t=G;break;case"bsq":case"bip":t=function(t,r){return L(t,r,e)};break;case"tiff":t=M;break;case"deflate":t=R;break;case"lzw":t=U;break;case"error":t=function(){throw new o.a("rasterCodec:decode","input data contains error")};break;default:t=function(){throw new o.a("rasterCodec:decode","unsupported raster format")}}return t}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e){var r=e.pixels,n=e.width,a=e.height,i=e.mask;if(r&&0!==r.length){var o,l,u,c,f,h,d=r.length,p=n-1,v=a-1,m=[],g=null,b=s.a.getPixelArrayConstructor(e.pixelType);if(0===t){for(o=0;o<d;o++){for(f=r[o],h=new b(p*v),l=0;l<v;l++)for(c=l*n,u=0;u<p;u++)h[l*p+u]=f[c+u];m.push(h)}if(null!=i)for(g=new Uint8Array(p*v),l=0;l<v;l++)for(c=l*n,u=0;u<p;u++)g[l*p+u]=i[c+u]}else{for(o=0;o<d;o++){for(f=r[o],h=new b(p*v),l=0;l<v;l++)for(c=l*n,u=0;u<p;u++)h[l*p+u]=(f[c+u]+f[c+u+1]+f[c+n+u]+f[c+n+u+1])/4;m.push(h)}if(i)for(g=new Uint8Array(p*v),l=0;l<v;l++)for(c=l*n,u=0;u<p;u++)g[l*p+u]=Math.min.apply(null,[i[c+u],i[c+u+1],i[c+n+u],i[c+n+u+1]])}e.width=p,e.height=v,e.mask=g,e.pixels=m}}}function z(e){var t=F(e);return"lerc2"===t?t="lerc":"error"===t&&(t=""),t}function W(e){return H.apply(this,arguments)}function H(){return H=Object(i.a)(Object(a.a)().mark((function e(t){var r,i,l,s,u,c=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:{},i=c.length>2?c[2]:void 0,null!=t){e.next=4;break}throw new o.a("rasterCodec:decode","missing encodeddata parameter.");case 4:if("bsq"!==(l=r.format&&r.format.toLowerCase())&&"bip"!==l||null!=r.width&&null!=r.height){e.next=7;break}throw new o.a("rasterCodec:decode","requires width and height in options parameter.");case 7:if("tiff"!==l||!r.customOptions){e.next=9;break}return e.abrupt("return",I(t,r));case 9:if((!l||"bsq"!==l&&"bip"!==l&&"deflate"!==l&&"lzw"!==l)&&(l=F(t)),!r.useCanvas||!j.has(l)){e.next=11;break}return e.abrupt("return",B(t,l,r,i));case 11:return s=V(l),r.isPoint&&(null!=(r=Object(n.a)({},r)).width&&r.width++,null!=r.height&&r.height++),e.next=15,s(t,r);case 15:return u=e.sent,e.abrupt("return",u?("jpg"!==l&&null!=r.noDataValue&&1===u.depthCount&&Object(b.a)(u,r.noDataValue,{customFloatTolerance:r.tolerance}),r.isPoint&&_(u),u):u);case 17:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}},1328:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(){var e=new ArrayBuffer(4),t=new Uint8Array(e);return new Uint32Array(e)[0]=1,1===t[0]}()},1330:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var n=r(92),a=r(1),i=r(89),o=r(88),l=r(90),s=r(91),u=r(94),c=r(600),f=r(105),h=r(102),d=r(97),p=(r(96),r(98),r(93),r(95)),v=r(557),m=r(420),g=r(738),b=r(1174),y=r(685),w=r(1022),x=function(e){Object(l.a)(r,e);var t=Object(s.a)(r);function r(e){return Object(i.a)(this,r),t.call(this,e)}return Object(o.a)(r,[{key:"bind",value:function(){var e,t=this.rendererJSON;if(!t)return{success:!1};switch(this.lookup={rendererJSON:{}},t.type){case"uniqueValue":e=this._updateUVRenderer(t);break;case"rasterColormap":e=this._updateColormapRenderer(t);break;case"rasterStretch":e=this._updateStretchRenderer(t);break;case"classBreaks":e=this._updateClassBreaksRenderer(t);break;case"rasterShadedRelief":e=this._updateShadedReliefRenderer(t);break;case"vectorField":e=this._updateVectorFieldRenderer();break;case"flowRenderer":e=this._updateFlowRenderer()}return e}},{key:"symbolize",value:function(e){var t=e&&e.pixelBlock;if(!O(t))return t;if(e.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(t,e.simpleStretchParams);try{var r;switch(t.pixels.length>3&&(t=t.extractBands([0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":r=this._symbolizeColormap(t);break;case"classBreaks":r=this._symbolizeClassBreaks(t);break;case"rasterStretch":r=this._symbolizeStretch(t,e.bandIds);break;case"rasterShadedRelief":var n=e.extent,a=n.spatialReference.isGeographic,i={x:(n.xmax-n.xmin)/t.width,y:(n.ymax-n.ymin)/t.height};r=this._symbolizeShadedRelief(t,{isGCS:a,resolution:i})}return r}catch(o){return h.a.getLogger(this).error("symbolize",o.message),t}}},{key:"simpleStretch",value:function(e,t){if(!O(e))return e;try{return e.pixels.length>3&&(e=e.extractBands([0,1,2])),Object(g.i)(e,Object(a.a)(Object(a.a)({},t),{},{isRenderer:!0}))}catch(r){return h.a.getLogger(this).error("symbolize",r.message),e}}},{key:"generateWebGLParameters",value:function(e){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){var t=this.lookup.colormapLut||{};return{colormap:t.indexedColormap,colormapOffset:t.offset,type:"lut"}}var r=e.pixelBlock,n=e.isGCS,a=e.resolution,i=e.bandIds,o=this.rendererJSON;return"rasterStretch"===o.type?this._generateStretchWebGLParams(r,o,i):"rasterShadedRelief"===o.type?this._generateShadedReliefWebGLParams(o,n,null!==a&&void 0!==a?a:void 0):"vectorField"===o.type?this._generateVectorFieldWebGLParams(o):null}},{key:"_isLUTChanged",value:function(e){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){var t=this.rendererJSON.colorRamp;return e?JSON.stringify(t)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):(this.rendererJSON,this.lookup.rendererJSON,JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}},{key:"_symbolizeColormap",value:function(e){return this._isLUTChanged()&&!this.bind().success?e:Object(m.e)(e,this.lookup.colormapLut)}},{key:"_symbolizeClassBreaks",value:function(e){var t,r=this._analyzeClassBreaks(this.rendererJSON).canUseIndexedLUT;return this._isLUTChanged()&&!this.bind().success?e:r?Object(m.e)(e,this.lookup.colormapLut):Object(m.r)(e,null!==(t=this.lookup.remapLut)&&void 0!==t?t:[])}},{key:"_symbolizeStretch",value:function(e,t){var r,n,i=this.rasterInfo,o=i.pixelType,l=i.bandCount,s=this.rendererJSON,u=["u8","u16","s8","s16"].includes(o),c=s.dra,f=this.lookup.gamma;if("histogramEqualization"===s.stretchType){var h,d=c?null:null===(h=this.lookup)||void 0===h?void 0:h.histogramLut,p=Object(g.h)(s,{rasterInfo:i,pixelBlock:e,bandIds:t,returnHistogramLut:!d}),v=Object(g.i)(e,Object(a.a)(Object(a.a)({},p),{},{gamma:f,isRenderer:!0}));n=Object(m.m)(v,{lut:c?p.histogramLut:d,offset:0})}else if(u){var b;if(c){var y=Object(g.h)(s,{rasterInfo:i,pixelBlock:e,bandIds:t});r=Object(g.e)(Object(a.a)(Object(a.a)({pixelType:o},y),{},{gamma:f,rounding:"floor"}))}else if(this._isLUTChanged()){if(!this.bind().success)return e;r=this.lookup?this.lookup.stretchLut:null}else r=this.lookup?this.lookup.stretchLut:null;if(!r)return e;l>1&&null!=t&&t.length===(null===e||void 0===e?void 0:e.pixels.length)&&(null===(b=r)||void 0===b?void 0:b.lut.length)===l&&(r={lut:t.map((function(e){return r.lut[e]})),offset:r.offset}),n=Object(m.m)(e,r)}else{var w=Object(g.h)(s,{rasterInfo:i,pixelBlock:e,bandIds:t});n=Object(g.i)(e,Object(a.a)(Object(a.a)({},w),{},{gamma:f,isRenderer:!0}))}if(s.colorRamp){var x;if(this._isLUTChanged(!0)&&!this.bind().success)return e;n=Object(m.e)(n,null===(x=this.lookup)||void 0===x?void 0:x.colormapLut)}return n}},{key:"_symbolizeShadedRelief",value:function(e,t){var r,n,i,o=this.rendererJSON,l=Object(a.a)(Object(a.a)({},o),t),s=Object(b.e)(e,l);if(!o.colorRamp)return s;if(this._isLUTChanged(!0)){if(!this.bind().success)return s;i=this.lookup?this.lookup.hsvMap:null}else i=this.lookup?this.lookup.hsvMap:null;if(!i)return s;var u=null!==(r=null===(n=this.rasterInfo.statistics)||void 0===n?void 0:n[0])&&void 0!==r?r:{min:0,max:8e3};return Object(b.g)(s,e,i,u),s}},{key:"_isVectorFieldData",value:function(){var e=this.rasterInfo,t=e.bandCount,r=e.dataType;return 2===t&&("vector-magdir"===r||"vector-uv"===r)}},{key:"_updateVectorFieldRenderer",value:function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:'Unsupported data type "'.concat(this.rasterInfo.dataType,'"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".')}}},{key:"_updateFlowRenderer",value:function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:'Unsupported data type "'.concat(this.rasterInfo.dataType,'"; FlowRenderer only supports "vector-magdir" and "vector-uv".')}}},{key:"_updateUVRenderer",value:function(e){var t=this.rasterInfo,r=t.bandCount,n=t.attributeTable,a=t.pixelType,i=e.field1;if(!i)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};var o=e.defaultSymbol,l=1===r&&["u8","s8"].includes(a);if(!Object(w.e)(this.rasterInfo,i)&&!l)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};var s=[];if(null!=n){var u=n.fields.find((function(e){return"value"===e.name.toLowerCase()}));if(!u)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};n.features.forEach((function(t){var r,n,a=null===(r=e.uniqueValueInfos)||void 0===r?void 0:r.find((function(e){return String(e.value)===String(t.attributes[i])})),l=null===a||void 0===a||null===(n=a.symbol)||void 0===n?void 0:n.color;l?s.push([t.attributes[u.name]].concat(l)):o&&s.push([t.attributes[u.name]].concat(o.color))}))}else{var c;if("value"!==i.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};null===(c=e.uniqueValueInfos)||void 0===c||c.forEach((function(e){var t,r=null===e||void 0===e||null===(t=e.symbol)||void 0===t?void 0:t.color;r?s.push([parseInt(""+e.value,10)].concat(r)):o&&s.push([parseInt(""+e.value,10)].concat(null===o||void 0===o?void 0:o.color))}))}if(0===s.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};var f=Object(m.g)({colormap:s});return this.lookup={rendererJSON:e,colormapLut:f},this.canRenderInWebGL=!0,{success:!0}}},{key:"_updateColormapRenderer",value:function(e){if(!Object(w.b)(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};var t=e.colormapInfos.map((function(e){return[e.value].concat(e.color)})).sort((function(e,t){return e[0]-t[0]}));if(!t||0===t.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};var r=Object(m.g)({colormap:t});return this.lookup={rendererJSON:e,colormapLut:r},this.canRenderInWebGL=!0,{success:!0}}},{key:"_updateShadedReliefRenderer",value:function(e){if(!Object(w.d)(this.rasterInfo))return{success:!1,error:'Unsupported data type "'.concat(this.rasterInfo.dataType,'"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.')};if(e.colorRamp){for(var t=Object(y.c)(e.colorRamp,{interpolateAlpha:!0}),r=Object(m.g)({colormap:t}),n=[],a=r.indexedColormap,i=0;i<a.length;i+=4){var o=Object(c.a)({r:a[i],g:a[i+1],b:a[i+2]});n.push([o.h/60,o.s/100,255*o.v/100])}this.lookup={rendererJSON:e,colormapLut:r,hsvMap:n}}else this.lookup=null;return this.canRenderInWebGL=!0,{success:!0}}},{key:"_analyzeClassBreaks",value:function(e){var t=this.rasterInfo,r=t.attributeTable,n=t.pixelType,a=null!=r?r.fields.find((function(e){return"value"===e.name.toLowerCase()})):null,i=null!=r?r.fields.find((function(t){return t.name.toLowerCase()===e.field.toLowerCase()})):null,o=null!=a&&null!==i;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(n)||o,tableValueField:a,tableBreakField:i}}},{key:"_updateClassBreaksRenderer",value:function(e){var t=this.rasterInfo.attributeTable,r=this._analyzeClassBreaks(e),a=r.canUseIndexedLUT,i=r.tableValueField,o=r.tableBreakField,l=e.classBreakInfos;if(null===l||void 0===l||!l.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};var s=l.sort((function(e,t){return e.classMaxValue-t.classMaxValue})),u=s[s.length-1],c=e.minValue;if(!a){for(var f=[],h=0;h<s.length;h++){var d;f.push({value:null!==(d=s[h].classMinValue)&&void 0!==d?d:c,mappedColor:s[h].symbol.color}),c=s[h].classMaxValue}return f.push({value:u.classMaxValue,mappedColor:u.symbol.color}),this.lookup={rendererJSON:e,remapLut:f},this.canRenderInWebGL=!1,{success:!0}}var p=[];if(null!=t&&null!=i&&null!==o&&i!==o){var v=i.name,g=o.name,b=s[s.length-1],y=b.classMaxValue;c=e.minValue;var w,x=Object(n.a)(t.features);try{var O=function(){var e=w.value,t=e.attributes[v],r=e.attributes[g],n=r===y?b:r<c?null:s.find((function(e){return e.classMaxValue>r}));n&&p.push([t].concat(n.symbol.color))};for(x.s();!(w=x.n()).done;)O()}catch(S){x.e(S)}finally{x.f()}}else{c=Math.floor(e.minValue);for(var k=0;k<s.length;k++){for(var C=s[k],j=c;j<C.classMaxValue;j++)p.push([j].concat(C.symbol.color));c=Math.ceil(C.classMaxValue)}u.classMaxValue===c&&p.push([u.classMaxValue].concat(u.symbol.color))}var A=Object(m.g)({colormap:p,fillUnspecified:!1});return this.lookup={rendererJSON:e,colormapLut:A},this.canRenderInWebGL=!0,{success:!0}}},{key:"_isHistogramRequired",value:function(e){return"percentClip"===e||"histogramEqualization"===e}},{key:"_isValidRasterStatistics",value:function(e){return null!=e&&e.length>0&&null!=e[0].min&&null!=e[0].max}},{key:"_updateStretchRenderer",value:function(e){var t,r,n,i=e.stretchType,o=e.dra;if(!("none"===i||null!==(t=e.statistics)&&void 0!==t&&t.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||o))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};var l=e.histograms||this.rasterInfo.histograms;!this._isHistogramRequired(e.stretchType)||(null===l||void 0===l?void 0:l.length)||o||(i="minMax");var s=e.computeGamma,u=e.useGamma,c=e.colorRamp,f=e.gamma;if(u&&s&&(null===(r=f)||void 0===r||!r.length)){var h,d=null!==(h=e.statistics)&&void 0!==h&&h.length?e.statistics:this.rasterInfo.statistics;f=Object(g.b)(this.rasterInfo.pixelType,d)}var p=this.rasterInfo.pixelType,v=!o&&["u8","u16","s8","s16"].includes(p);if("histogramEqualization"===i){var b=l.map((function(e){return Object(g.d)(e)}));this.lookup={rendererJSON:e,histogramLut:b}}else if(v){var w=Object(g.h)(e,{rasterInfo:this.rasterInfo}),x=Object(g.e)(Object(a.a)(Object(a.a)({pixelType:p},w),{},{gamma:u?f:null,rounding:"floor"}));this.lookup={rendererJSON:e,stretchLut:x}}if(c){var O=Object(y.c)(c,{interpolateAlpha:!0});this.lookup||(this.lookup={rendererJSON:e}),this.lookup.colormapLut=Object(m.g)({colormap:O}),this.lookup.rendererJSON=e}return this.lookup.gamma=u&&null!==(n=f)&&void 0!==n&&n.length?f:null,this.canRenderInWebGL=!0,{success:!0}}},{key:"_generateStretchWebGLParams",value:function(e,t,r){var n=null,i=null,o=this.lookup&&this.lookup.colormapLut;t.colorRamp&&o&&(n=o.indexedColormap,i=o.offset),"histogramEqualization"===t.stretchType&&(t=Object(a.a)(Object(a.a)({},t),{},{stretchType:"minMax"}));var l=this.lookup.gamma,s=!!(t.useGamma&&l&&l.some((function(e){return 1!==e}))),u=Object(g.h)(t,{rasterInfo:this.rasterInfo,pixelBlock:e,bandIds:r}),c=u.minCutOff,f=u.maxCutOff,h=u.outMin,d=u.outMax,p=0;null!=e&&(2===(p=e.getPlaneCount())&&((e=e.clone()).statistics=[e.statistics[0]],e.pixels=[e.pixels[0]]));var v,m=this.rasterInfo.bandCount,b=Math.min(3,(null===r||void 0===r?void 0:r.length)||p||m,m),y=new Float32Array(b),w=n||s?1:255;for(v=0;v<c.length;v++)y[v]=f[v]===c[v]?0:(d-h)/(f[v]-c[v])/w;var x=new Float32Array(b);if(s&&l)for(v=0;v<b;v++)l[v]>1?l[v]>2?x[v]=6.5+Math.pow(l[v]-2,2.5):x[v]=6.5+100*Math.pow(2-l[v],4):x[v]=1;return{bandCount:b,outMin:h/w,outMax:d/w,minCutOff:c,maxCutOff:f,factor:y,useGamma:s,gamma:s?l:[1,1,1],gammaCorrection:s?x:[1,1,1],colormap:n,colormapOffset:i,stretchType:t.stretchType,type:"stretch"}}},{key:"_generateShadedReliefWebGLParams",value:function(e){var t,r,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},l=null,s=null,u=this.lookup&&this.lookup.colormapLut;e.colorRamp&&u&&(l=u.indexedColormap,s=u.offset);var c=Object(a.a)(Object(a.a)({},e),{},{isGCS:i,resolution:o}),f=Object(b.c)(c),h=null===(t=this.rasterInfo.statistics)||void 0===t?void 0:t[0];return Object(a.a)(Object(a.a)({},f),{},{minValue:null!==(r=null===h||void 0===h?void 0:h.min)&&void 0!==r?r:0,maxValue:null!==(n=null===h||void 0===h?void 0:h.max)&&void 0!==n?n:8e3,hillshadeType:"traditional"===e.hillshadeType?0:1,type:"hillshade",colormap:l,colormapOffset:s})}},{key:"_generateVectorFieldWebGLParams",value:function(e){var t,r,n,a,i,o,l,s,u,c=e.style,f=e.inputUnit,h=e.outputUnit,d=e.visualVariables,p=e.symbolTileSize,v=e.flowRepresentation,m=null!==(t=null===(r=this.rasterInfo.statistics)||void 0===r?void 0:r[0].min)&&void 0!==t?t:0,g=null!==(n=null===(a=this.rasterInfo.statistics)||void 0===a?void 0:a[0].max)&&void 0!==n?n:50,b=null!==(i=null===d||void 0===d?void 0:d.find((function(e){return"sizeInfo"===e.type})))&&void 0!==i?i:{type:"sizeInfo",field:"Magnitude",maxDataValue:g,maxSize:.8*p,minDataValue:m,minSize:.2*p},y=null!==(o=b.minDataValue)&&void 0!==o?o:m,w=null!==(l=b.maxDataValue)&&void 0!==l?l:g,x=null!=b.maxSize&&null!=b.minSize?[b.minSize/p,b.maxSize/p]:[.2,.8];if("wind_speed"===c){var O=(x[0]+x[1])/2;x[0]=x[1]=O}var k=null!=y&&null!=w?[y,w]:null;if("classified_arrow"===c)if(null!=y&&null!=w&&null!=b){u=[];for(var C=(b.maxDataValue-b.minDataValue)/5,j=0;j<6;j++)u.push(b.minDataValue+C*j)}else u=[0,1e-6,3.5,7,10.5,14];var A="flow_to"===v===("ocean_current_kn"===c||"ocean_current_m"===c)?0:Math.PI,S=null===d||void 0===d?void 0:d.find((function(e){return"rotationInfo"===e.type}));return{breakValues:u,dataRange:k,inputUnit:f,outputUnit:h,symbolTileSize:p,symbolPercentRange:x,style:c||"single_arrow",rotation:A,rotationType:null!==(s=this.rasterInfo.storageInfo)&&void 0!==s&&s.tileInfo&&"vector-uv"===this.rasterInfo.dataType?"geographic":(null===S||void 0===S?void 0:S.rotationType)||e.rotationType,type:"vectorField"}}}]),r}(f.a);function O(e){return Object(m.k)(e)&&0!==e.validPixelCount}Object(u.a)([Object(d.b)({json:{write:!0}})],x.prototype,"rendererJSON",void 0),Object(u.a)([Object(d.b)({type:v.a,json:{write:!0}})],x.prototype,"rasterInfo",void 0),Object(u.a)([Object(d.b)({json:{write:!0}})],x.prototype,"lookup",void 0),Object(u.a)([Object(d.b)()],x.prototype,"canRenderInWebGL",void 0);var k=x=Object(u.a)([Object(p.a)("esri.renderers.support.RasterSymbolizer")],x)},1657:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n,a,i,o=r(201),l={exports:{}};n=l,a=function(){var e=function(){function e(e){this.message="JPEG error: "+e}return e.prototype=new Error,e.prototype.name="JpegError",e.constructor=e,e}();return function(){if(!self||!self.Uint8ClampedArray)return null;var t=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),r=4017,n=799,a=3406,i=2276,o=1567,l=3784,s=5793,u=2896;function c(){this.decodeTransform=null,this.colorTransform=-1}function f(e,t){for(var r,n,a=0,i=[],o=16;o>0&&!e[o-1];)o--;i.push({children:[],index:0});var l,s=i[0];for(r=0;r<o;r++){for(n=0;n<e[r];n++){for((s=i.pop()).children[s.index]=t[a];s.index>0;)s=i.pop();for(s.index++,i.push(s);i.length<=r;)i.push(l={children:[],index:0}),s.children[s.index]=l.children,s=l;a++}r+1<o&&(i.push(l={children:[],index:0}),s.children[s.index]=l.children,s=l)}return i[0].children}function h(e,t,r){return 64*((e.blocksPerLine+1)*t+r)}function d(r,n,a,i,o,l,s,u,c){var f=a.mcusPerLine,d=a.progressive,p=n,v=0,g=0;function b(){if(g>0)return g--,v>>g&1;if(255===(v=r[n++])){var t=r[n++];if(t)throw new e("unexpected marker "+(v<<8|t).toString(16))}return g=7,v>>>7}function y(t){for(var r=t;;){if("number"==typeof(r=r[b()]))return r;if("object"!=typeof r)throw new e("invalid huffman sequence")}}function w(e){for(var t=0;e>0;)t=t<<1|b(),e--;return t}function x(e){if(1===e)return 1===b()?1:-1;var t=w(e);return t>=1<<e-1?t:t+(-1<<e)+1}var O=0;var k,C=0;function j(e,t,r,n,a){var i=r%f;t(e,h(e,(r/f|0)*e.v+n,i*e.h+a))}function A(e,t,r){t(e,h(e,r/e.blocksPerLine|0,r%e.blocksPerLine))}var S,M,T,I,P,E,R=i.length;E=d?0===l?0===u?function(e,t){var r=y(e.huffmanTableDC),n=0===r?0:x(r)<<c;e.blockData[t]=e.pred+=n}:function(e,t){e.blockData[t]|=b()<<c}:0===u?function(e,r){if(O>0)O--;else for(var n=l,a=s;n<=a;){var i=y(e.huffmanTableAC),o=15&i,u=i>>4;if(0!==o){var f=t[n+=u];e.blockData[r+f]=x(o)*(1<<c),n++}else{if(u<15){O=w(u)+(1<<u)-1;break}n+=16}}}:function(r,n){for(var a,i,o=l,u=s,f=0;o<=u;){var h=t[o];switch(C){case 0:if(f=(i=y(r.huffmanTableAC))>>4,0==(a=15&i))f<15?(O=w(f)+(1<<f),C=4):(f=16,C=1);else{if(1!==a)throw new e("invalid ACn encoding");k=x(a),C=f?2:3}continue;case 1:case 2:r.blockData[n+h]?r.blockData[n+h]+=b()<<c:0==--f&&(C=2===C?3:0);break;case 3:r.blockData[n+h]?r.blockData[n+h]+=b()<<c:(r.blockData[n+h]=k<<c,C=0);break;case 4:r.blockData[n+h]&&(r.blockData[n+h]+=b()<<c)}o++}4===C&&0==--O&&(C=0)}:function(e,r){var n=y(e.huffmanTableDC),a=0===n?0:x(n);e.blockData[r]=e.pred+=a;for(var i=1;i<64;){var o=y(e.huffmanTableAC),l=15&o,s=o>>4;if(0!==l){var u=t[i+=s];e.blockData[r+u]=x(l),i++}else{if(s<15)break;i+=16}}};var U,L,D,G,B=0;for(L=1===R?i[0].blocksPerLine*i[0].blocksPerColumn:f*a.mcusPerColumn;B<L;){var N=o?Math.min(L-B,o):L;for(M=0;M<R;M++)i[M].pred=0;if(O=0,1===R)for(S=i[0],P=0;P<N;P++)A(S,E,B),B++;else for(P=0;P<N;P++){for(M=0;M<R;M++)for(D=(S=i[M]).h,G=S.v,T=0;T<G;T++)for(I=0;I<D;I++)j(S,E,B,T,I);B++}g=0,(U=m(r,n))&&U.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+U.invalid),n=U.offset);var F=U&&U.marker;if(!F||F<=65280)throw new e("marker was not found");if(!(F>=65488&&F<=65495))break;n+=2}return(U=m(r,n))&&U.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+U.invalid),n=U.offset),n-p}function p(t,c,f){var h,d,p,v,m,g,b,y,w,x,O,k,C,j,A,S,M,T=t.quantizationTable,I=t.blockData;if(!T)throw new e("missing required Quantization Table.");for(var P=0;P<64;P+=8)w=I[c+P],x=I[c+P+1],O=I[c+P+2],k=I[c+P+3],C=I[c+P+4],j=I[c+P+5],A=I[c+P+6],S=I[c+P+7],w*=T[P],0!=(x|O|k|C|j|A|S)?(x*=T[P+1],O*=T[P+2],k*=T[P+3],C*=T[P+4],j*=T[P+5],A*=T[P+6],S*=T[P+7],d=(h=(h=s*w+128>>8)+(d=s*C+128>>8)+1>>1)-d,M=(p=O)*l+(v=A)*o+128>>8,p=p*o-v*l+128>>8,b=(m=(m=u*(x-S)+128>>8)+(b=j<<4)+1>>1)-b,g=(y=(y=u*(x+S)+128>>8)+(g=k<<4)+1>>1)-g,v=(h=h+(v=M)+1>>1)-v,p=(d=d+p+1>>1)-p,M=m*i+y*a+2048>>12,m=m*a-y*i+2048>>12,y=M,M=g*n+b*r+2048>>12,g=g*r-b*n+2048>>12,b=M,f[P]=h+y,f[P+7]=h-y,f[P+1]=d+b,f[P+6]=d-b,f[P+2]=p+g,f[P+5]=p-g,f[P+3]=v+m,f[P+4]=v-m):(M=s*w+512>>10,f[P]=M,f[P+1]=M,f[P+2]=M,f[P+3]=M,f[P+4]=M,f[P+5]=M,f[P+6]=M,f[P+7]=M);for(var E=0;E<8;++E)w=f[E],0!=((x=f[E+8])|(O=f[E+16])|(k=f[E+24])|(C=f[E+32])|(j=f[E+40])|(A=f[E+48])|(S=f[E+56]))?(d=(h=4112+((h=s*w+2048>>12)+(d=s*C+2048>>12)+1>>1))-d,M=(p=O)*l+(v=A)*o+2048>>12,p=p*o-v*l+2048>>12,v=M,b=(m=(m=u*(x-S)+2048>>12)+(b=j)+1>>1)-b,g=(y=(y=u*(x+S)+2048>>12)+(g=k)+1>>1)-g,M=m*i+y*a+2048>>12,m=m*a-y*i+2048>>12,y=M,M=g*n+b*r+2048>>12,g=g*r-b*n+2048>>12,w=(w=(h=h+v+1>>1)+y)<16?0:w>=4080?255:w>>4,x=(x=(d=d+p+1>>1)+(b=M))<16?0:x>=4080?255:x>>4,O=(O=(p=d-p)+g)<16?0:O>=4080?255:O>>4,k=(k=(v=h-v)+m)<16?0:k>=4080?255:k>>4,C=(C=v-m)<16?0:C>=4080?255:C>>4,j=(j=p-g)<16?0:j>=4080?255:j>>4,A=(A=d-b)<16?0:A>=4080?255:A>>4,S=(S=h-y)<16?0:S>=4080?255:S>>4,I[c+E]=w,I[c+E+8]=x,I[c+E+16]=O,I[c+E+24]=k,I[c+E+32]=C,I[c+E+40]=j,I[c+E+48]=A,I[c+E+56]=S):(M=(M=s*w+8192>>14)<-2040?0:M>=2024?255:M+2056>>4,I[c+E]=M,I[c+E+8]=M,I[c+E+16]=M,I[c+E+24]=M,I[c+E+32]=M,I[c+E+40]=M,I[c+E+48]=M,I[c+E+56]=M)}function v(e,t){for(var r=t.blocksPerLine,n=t.blocksPerColumn,a=new Int16Array(64),i=0;i<n;i++)for(var o=0;o<r;o++)p(t,h(t,i,o),a);return t.blockData}function m(e,t,r){function n(t){return e[t]<<8|e[t+1]}var a=e.length-1,i=r<t?r:t;if(t>=a)return null;var o=n(t);if(o>=65472&&o<=65534)return{invalid:null,marker:o,offset:t};for(var l=n(i);!(l>=65472&&l<=65534);){if(++i>=a)return null;l=n(i)}return{invalid:o.toString(16),marker:l,offset:i}}return c.prototype={parse:function(r){function n(){var e=r[s]<<8|r[s+1];return s+=2,e}function a(){var e=n(),t=s+e-2,a=m(r,t,s);a&&a.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+a.invalid),t=a.offset);var i=r.subarray(s,t);return s+=i.length,i}function i(e){for(var t=Math.ceil(e.samplesPerLine/8/e.maxH),r=Math.ceil(e.scanLines/8/e.maxV),n=0;n<e.components.length;n++){B=e.components[n];var a=Math.ceil(Math.ceil(e.samplesPerLine/8)*B.h/e.maxH),i=Math.ceil(Math.ceil(e.scanLines/8)*B.v/e.maxV),o=t*B.h,l=r*B.v*64*(o+1);B.blockData=new Int16Array(l),B.blocksPerLine=a,B.blocksPerColumn=i}e.mcusPerLine=t,e.mcusPerColumn=r}var o,l,s=0,u=null,c=null,h=[],p=[],g=[],b=n();if(65496!==b)throw new e("SOI not found");for(b=n();65497!==b;){var y,w,x;switch(b){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var O=a();65504===b&&74===O[0]&&70===O[1]&&73===O[2]&&70===O[3]&&0===O[4]&&(u={version:{major:O[5],minor:O[6]},densityUnits:O[7],xDensity:O[8]<<8|O[9],yDensity:O[10]<<8|O[11],thumbWidth:O[12],thumbHeight:O[13],thumbData:O.subarray(14,14+3*O[12]*O[13])}),65518===b&&65===O[0]&&100===O[1]&&111===O[2]&&98===O[3]&&101===O[4]&&(c={version:O[5]<<8|O[6],flags0:O[7]<<8|O[8],flags1:O[9]<<8|O[10],transformCode:O[11]});break;case 65499:for(var k=n()+s-2;s<k;){var C=r[s++],j=new Uint16Array(64);if(C>>4==0)for(w=0;w<64;w++)j[t[w]]=r[s++];else{if(C>>4!=1)throw new e("DQT - invalid table spec");for(w=0;w<64;w++)j[t[w]]=n()}h[15&C]=j}break;case 65472:case 65473:case 65474:if(o)throw new e("Only single frame JPEGs supported");n(),(o={}).extended=65473===b,o.progressive=65474===b,o.precision=r[s++],o.scanLines=n(),o.samplesPerLine=n(),o.components=[],o.componentIds={};var A,S=r[s++],M=0,T=0;for(y=0;y<S;y++){A=r[s];var I=r[s+1]>>4,P=15&r[s+1];M<I&&(M=I),T<P&&(T=P);var E=r[s+2];x=o.components.push({h:I,v:P,quantizationId:E,quantizationTable:null}),o.componentIds[A]=x-1,s+=3}o.maxH=M,o.maxV=T,i(o);break;case 65476:var R=n();for(y=2;y<R;){var U=r[s++],L=new Uint8Array(16),D=0;for(w=0;w<16;w++,s++)D+=L[w]=r[s];var G=new Uint8Array(D);for(w=0;w<D;w++,s++)G[w]=r[s];y+=17+D,(U>>4==0?g:p)[15&U]=f(L,G)}break;case 65501:n(),l=n();break;case 65498:n();var B,N=r[s++],F=[];for(y=0;y<N;y++){var V=o.componentIds[r[s++]];B=o.components[V];var _=r[s++];B.huffmanTableDC=g[_>>4],B.huffmanTableAC=p[15&_],F.push(B)}var z=r[s++],W=r[s++],H=r[s++],q=d(r,s,o,F,l,z,W,H>>4,15&H);s+=q;break;case 65535:255!==r[s]&&s--;break;default:if(255===r[s-3]&&r[s-2]>=192&&r[s-2]<=254){s-=3;break}throw new e("unknown marker "+b.toString(16))}b=n()}for(this.width=o.samplesPerLine,this.height=o.scanLines,this.jfif=u,this.eof=s,this.adobe=c,this.components=[],y=0;y<o.components.length;y++){var J=h[(B=o.components[y]).quantizationId];J&&(B.quantizationTable=J),this.components.push({output:v(0,B),scaleX:B.h/o.maxH,scaleY:B.v/o.maxV,blocksPerLine:B.blocksPerLine,blocksPerColumn:B.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(e,t){var r,n,a,i,o,l,s,u,c,f,h,d=this.width/e,p=this.height/t,v=0,m=this.components.length,g=e*t*m,b=new Uint8ClampedArray(g),y=new Uint32Array(e),w=4294967288;for(s=0;s<m;s++){for(n=(r=this.components[s]).scaleX*d,a=r.scaleY*p,v=s,h=r.output,i=r.blocksPerLine+1<<3,o=0;o<e;o++)u=0|o*n,y[o]=(u&w)<<3|7&u;for(l=0;l<t;l++)for(f=i*((u=0|l*a)&w)|(7&u)<<3,o=0;o<e;o++)b[v]=h[f+y[o]],v+=m}var x=this.decodeTransform;if(x)for(s=0;s<g;)for(u=0,c=0;u<m;u++,s++,c+=2)b[s]=(b[s]*x[c]>>8)+x[c+1];return b},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this.colorTransform:1===this.colorTransform},_convertYccToRgb:function(e){for(var t,r,n,a=0,i=e.length;a<i;a+=3)t=e[a],r=e[a+1],n=e[a+2],e[a]=t-179.456+1.402*n,e[a+1]=t+135.459-.344*r-.714*n,e[a+2]=t-226.816+1.772*r;return e},_convertYcckToRgb:function(e){for(var t,r,n,a,i=0,o=0,l=e.length;o<l;o+=4)t=e[o],r=e[o+1],n=e[o+2],a=e[o+3],e[i++]=r*(-660635669420364e-19*r+.000437130475926232*n-54080610064599e-18*t+.00048449797120281*a-.154362151871126)-122.67195406894+n*(-.000957964378445773*n+.000817076911346625*t-.00477271405408747*a+1.53380253221734)+t*(.000961250184130688*t-.00266257332283933*a+.48357088451265)+a*(-.000336197177618394*a+.484791561490776),e[i++]=107.268039397724+r*(219927104525741e-19*r-.000640992018297945*n+.000659397001245577*t+.000426105652938837*a-.176491792462875)+n*(-.000778269941513683*n+.00130872261408275*t+.000770482631801132*a-.151051492775562)+t*(.00126935368114843*t-.00265090189010898*a+.25802910206845)+a*(-.000318913117588328*a-.213742400323665),e[i++]=r*(-.000570115196973677*r-263409051004589e-19*n+.0020741088115012*t-.00288260236853442*a+.814272968359295)-20.810012546947+n*(-153496057440975e-19*n-.000132689043961446*t+.000560833691242812*a-.195152027534049)+t*(.00174418132927582*t-.00255243321439347*a+.116935020465145)+a*(-.000343531996510555*a+.24165260232407);return e},_convertYcckToCmyk:function(e){for(var t,r,n,a=0,i=e.length;a<i;a+=4)t=e[a],r=e[a+1],n=e[a+2],e[a]=434.456-t-1.402*n,e[a+1]=119.541-t+.344*r+.714*n,e[a+2]=481.816-t-1.772*r;return e},_convertCmykToRgb:function(e){for(var t,r,n,a,i=0,o=1/255,l=0,s=e.length;l<s;l+=4)t=e[l]*o,r=e[l+1]*o,n=e[l+2]*o,a=e[l+3]*o,e[i++]=255+t*(-4.387332384609988*t+54.48615194189176*r+18.82290502165302*n+212.25662451639585*a-285.2331026137004)+r*(1.7149763477362134*r-5.6096736904047315*n-17.873870861415444*a-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*a+17.5119270841813)-a*(21.86122147463605*a+189.48180835922747),e[i++]=255+t*(8.841041422036149*t+60.118027045597366*r+6.871425592049007*n+31.159100130055922*a-79.2970844816548)+r*(-15.310361306967817*r+17.575251261109482*n+131.35250912493976*a-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*a-24.86741582555878)-a*(20.737325471181034*a+187.80453709719578),e[i++]=255+t*(.8842522430003296*t+8.078677503112928*r+30.89978309703729*n-.23883238689178934*a-14.183576799673286)+r*(10.49593273432072*r+63.02378494754052*n+50.606957656360734*a-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*a-193.58209356861505)-a*(22.33816807309886*a+180.12613974708367);return e},getData:function(t,r,n){if(this.numComponents>4)throw new e("Unsupported color mode");var a=this._getLinearizedBlockData(t,r);if(1===this.numComponents&&n){for(var i=a.length,o=new Uint8ClampedArray(3*i),l=0,s=0;s<i;s++){var u=a[s];o[l++]=u,o[l++]=u,o[l++]=u}return o}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(a);if(4===this.numComponents){if(this._isColorConversionNeeded())return n?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(n)return this._convertCmykToRgb(a)}return a}},c}()},void 0!==(i=a())&&(n.exports=i);var s=Object(o.b)(l.exports)},1658:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return l}));var n=r(99),a=r(288),i=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-34027999387901484e22,34027999387901484e22]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-17976931348623157e292,17976931348623157e292]}],o=null;function l(){return o||(o=r.e(231).then(r.bind(null,2109)).then((function(e){return e.l})).then((function(e){return(0,e.default)({locateFile:function(e){return Object(a.a)("esri/layers/support/rasterFormats/".concat(e))}})})).then((function(e){(function(e){var t,r=e._malloc,a=e._free,o=e._lerc_getBlobInfo,l=e._lerc_getDataRanges,c=e._lerc_decode_4D,f=e.asm,h=Object.values(f).find((function(t){return t&&"buffer"in t&&t.buffer===e.HEAPU8.buffer})),d=function(e){var n=e.map((function(e){return function(e){return 16+(e>>3<<3)}(e)})),a=n.reduce((function(e,t){return e+t})),i=r(a);t=new Uint8Array(h.buffer);var o=n[0];n[0]=i;for(var l=1;l<n.length;l++){var s=n[l];n[l]=n[l-1]+o,o=s}return n};s.getBlobInfo=function(e){var r,i,s,c,f=12,p=3,v=new Uint8Array(4*f),m=new Uint8Array(8*p),g=d([e.length,v.length,m.length]),b=Object(n.a)(g,3),y=b[0],w=b[1],x=b[2];t.set(e,y),t.set(v,w),t.set(m,x);var O=o(y,e.length,w,x,f,p);if(O)throw a(y),new Error("lerc-getBlobInfo: error code is ".concat(O));u(t=new Uint8Array(h.buffer),w,v),u(t,x,m);var k=new Uint32Array(v.buffer),C=new Float64Array(m.buffer),j=Object(n.a)(k,11),A=j[0],S=j[1],M=j[3],T=j[4],I=j[5],P=j[6],E=j[7],R=j[8],U=j[9],L=j[10],D={version:A,depthCount:U,width:M,height:T,validPixelCount:P,bandCount:I,blobSize:E,maskCount:R,dataType:S,minValue:C[0],maxValue:C[1],maxZerror:C[2],statistics:[],bandCountWithNoData:L};if(L)return D;if(1===U&&1===I)return a(y),D.statistics.push({minValue:C[0],maxValue:C[1]}),D;var G=U*I*8,B=new Uint8Array(G),N=new Uint8Array(G),F=y,V=0,_=0,z=!1;if(t.byteLength<y+2*G?(a(y),z=!0,r=d([e.length,G,G]),F=(i=Object(n.a)(r,3))[0],V=i[1],_=i[2],t.set(e,F)):(s=d([G,G]),V=(c=Object(n.a)(s,2))[0],_=c[1]),t.set(B,V),t.set(N,_),O=l(F,e.length,U,I,V,_))throw a(F),z||a(V),new Error("lerc-getDataRanges: error code is ".concat(O));u(t=new Uint8Array(h.buffer),V,B),u(t,_,N);for(var W=new Float64Array(B.buffer),H=new Float64Array(N.buffer),q=D.statistics,J=0;J<I;J++)if(U>1){var K=W.slice(J*U,(J+1)*U),Y=H.slice(J*U,(J+1)*U),X=Math.min.apply(null,K),Z=Math.max.apply(null,Y);q.push({minValue:X,maxValue:Z,depthStats:{minValues:K,maxValues:Y}})}else q.push({minValue:W[J],maxValue:H[J]});return a(F),z||a(V),D},s.decode=function(e,r){var o=r.maskCount,l=r.depthCount,s=r.bandCount,f=r.width,p=r.height,v=r.dataType,m=r.bandCountWithNoData,g=i[v],b=f*p,y=new Uint8Array(b*s),w=b*l*s*g.size,x=new Uint8Array(w),O=new Uint8Array(s),k=new Uint8Array(8*s),C=d([e.length,y.length,x.length,O.length,k.length]),j=Object(n.a)(C,5),A=j[0],S=j[1],M=j[2],T=j[3],I=j[4];t.set(e,A),t.set(y,S),t.set(x,M),t.set(O,T),t.set(k,I);var P=c(A,e.length,o,S,l,f,p,s,v,M,T,I);if(P)throw a(A),new Error("lerc-decode: error code is ".concat(P));u(t=new Uint8Array(h.buffer),M,x),u(t,S,y);var E=null;if(m){u(t,T,O),u(t,I,k),E=[];for(var R=new Float64Array(k.buffer),U=0;U<O.length;U++)E.push(O[U]?R[U]:null)}return a(A),{data:x,maskData:y,noDataValues:E}}})(e),!0})),o)}var s={getBlobInfo:null,decode:null};function u(e,t,r){r.set(e.slice(t,t+r.length))}function c(e,t,r,n,a){if(r<2)return e;var i=new n(t*r);if(a)for(var o=0,l=0;o<t;o++)for(var s=0,u=o;s<r;s++,u+=t)i[u]=e[l++];else for(var c=0,f=0;c<t;c++)for(var h=0,d=c;h<r;h++,d+=t)i[f++]=e[d];return i}function f(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null!==(t=r.inputOffset)&&void 0!==t?t:0,a=e instanceof Uint8Array?e.subarray(n):new Uint8Array(e,n),o=s.getBlobInfo(a),l=s.decode(a,o),u=l.data,f=l.maskData,h=l.noDataValues,d=o.width,p=o.height,v=o.bandCount,m=o.depthCount,g=o.dataType,b=o.maskCount,y=o.statistics,w=i[g],x=new w.ctor(u.buffer),O=[],k=[],C=d*p,j=C*m,A=0;A<v;A++){var S=x.subarray(A*j,(A+1)*j);if(r.returnInterleaved)O.push(S);else{var M=c(S,C,m,w.ctor,!0);O.push(M)}k.push(f.subarray(A*j,(A+1)*j))}var T=0===b?null:1===b?k[0]:new Uint8Array(C);if(b>1){T.set(k[0]);for(var I=1;I<k.length;I++)for(var P=k[I],E=0;E<C;E++)T[E]=T[E]&P[E]}var R=r.noDataValue,U=null!=R&&w.range[0]<=R&&w.range[1]>=R;if(b>0&&U)for(var L=0;L<v;L++)for(var D=O[L],G=k[L]||T,B=0;B<C;B++)0===G[B]&&(D[B]=R);var N=b===v&&v>1?k:null;return{width:d,height:p,bandCount:v,pixelType:w.pixelType,depthCount:m,statistics:y,pixels:O,mask:T,bandMasks:N,noDataValues:h}}},1659:function(e,t,r){"use strict";function n(){for(var e=[],t=0;t<=257;t++)e[t]=[t];return e}function a(e,t){for(var r=0;r<t.length;r++)e.push(t[r])}r.d(t,"a",(function(){return o}));var i=new Set;function o(e,t,r){for(var o=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t%4!=0||r%4!=0){var a=new ArrayBuffer(4*Math.ceil(r/4)),i=new Uint8Array(a),o=new Uint8Array(e,t,r);if(n)for(var l=0;l<i.length;l+=4)i[l]=o[l+3],i[l+1]=o[l+2],i[l+2]=o[l+1],i[l+3]=o[l];else i.set(o);return new Uint32Array(i.buffer)}if(n){for(var s=new Uint8Array(e,t,r),u=new Uint8Array(s.length),c=0;c<u.length;c+=4)u[c]=s[c+3],u[c+1]=s[c+2],u[c+2]=s[c+1],u[c+3]=s[c];return new Uint32Array(u.buffer)}return new Uint32Array(e,t,r/4)}(e,t,r,!(arguments.length>3&&void 0!==arguments[3])||arguments[3]),l=9,s=n(),u=32,c=s.length,f=[],h=1,d=o[0],p=0,v=o.length,m=8*(4*v-r),g=[];null!=d;){if(u>=l)u-=l,p=d>>>32-l,d<<=l;else{var b=l-u;p=((p=d>>>32-u)<<b)+((d=o[h++])>>>(u=32-b)),d<<=b}if(257===p)break;if(256!==p){var y=s[p];if(null==y){if(p>s.length)throw new Error("data integrity issue: code does not exist on code page");f.push(f[0]),s[c++]=f.slice(),a(g,f)}else a(g,y),f.push(y[0]),f.length>1&&(s[c++]=f.slice()),f=y.slice();if(i.has(c)&&l++,0===u&&(d=o[h++],u=32),h>v||h===v&&u<=m)break}else l=9,c=(s=n()).length,f=[]}return new Uint8Array(g)}i.add(511),i.add(1023),i.add(2047),i.add(4095),i.add(8191)},1660:function(e,t,r){"use strict";r.d(t,"a",(function(){return Z})),r.d(t,"b",(function(){return Y})),r.d(t,"c",(function(){return G})),r.d(t,"d",(function(){return F})),r.d(t,"e",(function(){return N})),r.d(t,"f",(function(){return B})),r.d(t,"g",(function(){return D})),r.d(t,"h",(function(){return q})),r.d(t,"i",(function(){return H}));var n=r(4),a=r(1),i=r(12),o=r(1661),l=r(1657),s=r(1658),u=r(1659),c=r(470),f=r(1662),h=r(1328),d=r(1173),p=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],v=4294967296,m=new Set([1,5,6,7,8,34712,34887]);function g(e,t){var r="unknown";return 3===e?r=64===t?"f64":"f32":1===e?1===t?r="u1":2===t?r="u2":4===t?r="u4":t<=8?r="u8":t<=16?r="u16":t<=32&&(r="u32"):2===e&&(t<=8?r="s8":t<=16?r="s16":t<=32&&(r="s32")),r}function b(e){var t=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"f64":t=Float64Array;break;default:t=Float32Array}return t}function y(e,t){return{x:t[0]*e.x+t[1]*e.y+t[2],y:t[3]*e.x+t[4]*e.y+t[5]}}function w(e,t){var r;return null===(r=e.get(t))||void 0===r?void 0:r.values}function x(e,t){var r;return null===(r=e.get(t))||void 0===r?void 0:r.values}function O(e,t){var r;return null===(r=e.get(t))||void 0===r||null===(r=r.values)||void 0===r?void 0:r[0]}function k(e,t){var r;return null===(r=e.get(t))||void 0===r||null===(r=r.values)||void 0===r?void 0:r[0]}function C(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f.a.TIFF_TAGS,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4,o=8===i,l=o?_(new DataView(e,r,8),0,t):new DataView(e,r,2).getUint16(0,t),s=4+2*i,u=o?8:2,c=u+l*s;if(r+c>e.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:c};for(var h,d,p,v,m,g=r+c+4<=e.byteLength?W(new DataView(e,r+c,8===i?8:4),0,t,8===i):null,b=r+u,y=new Map,w=0,x=0,O=0;O<l;O++){p=(d=new DataView(e,b+s*O,s)).getUint16(0,t),m=d.getUint16(2,t),v=f.a.getTagName(p,a);var k=[];2===i?(w=d.getUint16(4,t),x=d.getUint16(6,t)):4===i?(w=d.getUint32(4,t),x=d.getUint32(8,t)):8===i&&(w=W(d,4,t,!0),x=W(d,12,t,!0),k.push(d.getUint32(12,t)),k.push(d.getUint32(16,t))),D(e,t,h={id:p,type:m,valueCount:w,valueOffset:x,valueOffsets:k,values:null},n,!1,i),y.set(v,h)}return{success:!0,ifd:y,nextIFD:g,requiredBufferSize:c}}var j=function(e,t){return Object(s.a)(e,{inputOffset:t}).pixels[0]};function A(e,t){if(1!==t&&2!==t&&4!==t)return e;for(var r=new Uint8Array(e),n=8/t,a=new Uint8Array(e.byteLength*n),i=0,o=Math.pow(2,t)-1,l=0;l<r.length;l++)for(var s=r[l],u=0;u<n;u++)a[i++]=s<<t*u>>>8-t&o;return a.buffer}function S(e,t,r){var n=new l.a;n.parse(e),n.colorTransform=6===r?-1:0;var a=n.getData(n.width,n.height,1!==t);return new Uint8Array(a.buffer)}function M(e){var t=new d.a(e).getBytes(),r=new ArrayBuffer(t.length),n=new Uint8Array(r);return n.set(t),n}function T(e,t,r,n,a){return I.apply(this,arguments)}function I(){return I=Object(i.a)(Object(n.a)().mark((function e(t,r,a,i,o){var l,c,f,d,p,v,m,y,w,x,O,C,T,I,P,E,R,U,L,D,G,N,F,V,_,z,W,H;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=h.a===r,v=k(a,"BITSPERSAMPLE"),m=null!==(l=k(a,"SAMPLESPERPIXEL"))&&void 0!==l?l:1,y=k(a,"PHOTOMETRICINTERPRETATION"),w=null!==(c=k(a,"SAMPLEFORMAT"))&&void 0!==c?c:1,x=g(w,v),O=null!==(f=k(a,"COMPRESSION"))&&void 0!==f?f:1,C=b(x),34887!==O){e.next=5;break}return e.next=4,Object(s.b)();case 4:return e.abrupt("return",j(t,i));case 5:if(1!==O){e.next=9;break}T=t.slice(i,i+o),I=new Uint8Array(T),e.next=29;break;case 9:if(8!==O&&32946!==O){e.next=13;break}I=M(I=new Uint8Array(t,i,o)),T=I.buffer,e.next=29;break;case 13:if(6!==O){e.next=17;break}I=S(I=new Uint8Array(t,i,o),m,y),T=I.buffer,e.next=29;break;case 17:if(7!==O){e.next=26;break}for(E=a.get("JPEGTABLES").values,R=E.length-2,I=new Uint8Array(R+o-2),U=0;U<R;U++)I[U]=E[U];for(L=new Uint8Array(t,i+2,o-2),D=0;D<L.length;D++)I[R+D]=L[D];I=S(I,m,y),T=I.buffer,e.next=29;break;case 26:if(5===O){e.next=28;break}throw new Error("tiff-decode: unsupport compression "+O);case 28:I=Object(u.a)(t,i,o,r),T=I.buffer;case 29:if(T=A(T,v),"u8"!==x&&"s8"!==x&&!p){e.next=33;break}P=new C(T),e.next=42;break;case 33:T=new ArrayBuffer(I.length),G=new Uint8Array(T),e.t0=x,e.next="u16"===e.t0||"s16"===e.t0?38:"u32"===e.t0||"s32"===e.t0||"f32"===e.t0?40:41;break;case 38:for(N=0;N<I.length;N+=2)G[N]=I[N+1],G[N+1]=I[N];return e.abrupt("break",41);case 40:for(F=0;F<I.length;F+=4)G[F]=I[F+3],G[F+1]=I[F+2],G[F+2]=I[F+1],G[F+3]=I[F];case 41:P=new C(T);case 42:return V=null!==(d=k(a,"PREDICTOR"))&&void 0!==d?d:1,_=k(a,"TILEWIDTH"),z=k(a,"TILELENGTH"),V>1&&(5===O||8===O||32946===O)&&_&&z&&(W=B(a),(H=new C(P.length)).set(P),P=K(H,z,_,3===w&&3===V,W?1:m)),e.abrupt("return",P);case 45:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function P(e,t,r){return E.apply(this,arguments)}function E(){return E=Object(i.a)(Object(n.a)().mark((function e(t,r,a){var i,o,l,s,u,c,f,h,d,p,v,m,g,y,w,O,C,j,A,S,M,I,P,E,R,U,L,D,N,F,V,_,z,W;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(o=x(a,"TILEOFFSETS"))){e.next=3;break}return e.abrupt("return",null);case 3:for(l=x(a,"TILEBYTECOUNTS"),s=G([a]),u=s.width,c=s.height,f=s.pixelType,h=s.tileWidth,d=s.tileHeight,p=B(a,r),v=k(a,"SAMPLESPERPIXEL")||r.planes,m=u*c,g=k(a,"BITSPERSAMPLE"),y=34887===(null!==(i=k(a,"COMPRESSION"))&&void 0!==i?i:1),w=b(f),O=[],C=0;C<v;C++)O.push(new w(m));if(V=Math.ceil(u/h),g%8!=0){e.next=60;break}if(!(y&&p&&v>1)){e.next=38;break}_=Math.round(o.length/v),j=0;case 10:if(!(j<_)){e.next=36;break}P=Math.floor(j/V)*d,R=P*u+(E=j%V*h),z=0;case 13:if(!(z<v)){e.next=33;break}if(0===l[W=j*v+z]){e.next=30;break}return e.next=18,T(t,r.littleEndian,a,o[W],l[W]);case 18:S=e.sent,L=0,U=R,N=Math.min(h,u-E),D=Math.min(d,c-P),F=O[z],M=0;case 25:if(!(M<D)){e.next=30;break}for(U=R+M*u,L=M*h,I=0;I<N;I++,U++,L++)F[U]=S[L];case 27:M++,e.next=25;break;case 30:z++,e.next=13;break;case 33:j++,e.next=10;break;case 36:e.next=60;break;case 38:j=0;case 39:if(!(j<o.length)){e.next=60;break}if(0===l[j]){e.next=57;break}return P=Math.floor(j/V)*d,R=P*u+(E=j%V*h),e.next=46,T(t,r.littleEndian,a,o[j],l[j]);case 46:S=e.sent,L=0,U=R,N=Math.min(h,u-E),D=Math.min(d,c-P),A=0;case 52:if(!(A<v)){e.next=57;break}if(F=O[A],p||y)for(M=0;M<D;M++)for(U=R+M*u,L=h*d*A+M*h,I=0;I<N;I++,U++,L++)F[U]=S[L];else for(M=0;M<D;M++)for(U=R+M*u,L=M*h*v+A,I=0;I<N;I++,U++,L+=v)F[U]=S[L];case 54:A++,e.next=52;break;case 57:j++,e.next=39;break;case 60:return e.abrupt("return",{width:u,height:c,pixelType:f,pixels:O});case 61:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}var R=function(e,t,r){var n,a=h.a===t.littleEndian,i=x(r,"STRIPOFFSETS");if(void 0===i)return null;var o,l,s,c,f,d,p,v,m,g=G([r]),y=g.width,w=g.height,O=g.pixelType,C=k(r,"SAMPLESPERPIXEL")||t.planes,j=k(r,"PHOTOMETRICINTERPRETATION"),T=y*w,I=k(r,"BITSPERSAMPLE"),P=b(O),E=new P(T*C),R=x(r,"STRIPBYTECOUNTS"),U=k(r,"ROWSPERSTRIP"),L=null!==(n=k(r,"COMPRESSION"))&&void 0!==n?n:1,D=U;if(I%8==0)for(o=0;o<i.length;o++){if(f=o*(U*y)*C,D=(o+1)*U>w?w-o*U:U,"u8"===O||"s8"===O||a)8===L||32946===L?d=(p=M(p=new Uint8Array(e,i[o],R[o]))).buffer:6===L?d=(p=S(p=new Uint8Array(e,i[o],R[o]),C,j)).buffer:5===L?d=(p=Object(u.a)(e,i[o],R[o],t.littleEndian)).buffer:(R[o]!==D*y*C*I/8&&console.log("strip byte counts is different than expected"),d=e.slice(i[o],i[o]+R[o])),c=new P(d=A(d,I));else{switch(6===L||8===L||32946===L?d=(v=M(p=new Uint8Array(e,i[o],R[o]))).buffer:(R[o]!==D*y*C*I/8&&console.log("strip byte counts is different than expected"),d=new ArrayBuffer(R[o]),p=new Uint8Array(e,i[o],R[o]),v=new Uint8Array(d)),O){case"u16":case"s16":for(s=0;s<p.length;s+=2)v[s]=p[s+1],v[s+1]=p[s];break;case"u32":case"s32":case"f32":for(s=0;s<p.length;s+=4)v[s]=p[s+3],v[s+1]=p[s+2],v[s+2]=p[s+1],v[s+3]=p[s]}c=new P(d=A(d,I))}E.set(c,f)}var B=[];if(1===C)B.push(E);else for(o=0;o<C;o++){for(m=new P(T),l=0;l<T;l++)m[l]=E[l*C+o];B.push(m)}return{width:y,height:w,pixelType:O,pixels:B}},U=function(e,t,r){if(!(e&&e.length>0&&t&&r))return null;for(var n,a,i,o=e[0].length,l=e.length,s=new Uint8Array(o),u=0;u<l;u++)if(n=e[u],a=t[u],i=r[u],0===u)for(var c=0;c<o;c++)s[c]=n[c]<a||n[c]>i?0:1;else for(var f=0;f<o;f++)s[f]&&(s[f]=n[f]<a||n[f]>i?0:1);return s},L=function(e){if(!e)return null;var t=e.match(/<Item(.*?)Item>/gi);if(!t||0===t.length)return null;for(var r,n,a,i,o,l=new Map,s=0;s<t.length;s++)n=(r=t[s]).slice(6,r.indexOf(">")),(i=r.indexOf("sample="))>-1&&(o=r.slice(i+8,r.indexOf('"',i+8))),(i=r.indexOf("name="))>-1&&(n=r.slice(i+6,r.indexOf('"',i+6))),n&&(a=r.slice(r.indexOf(">")+1,r.indexOf("</Item>")).trim(),null!=o?l.has(n)?l.get(n)[o]=a:l.set(n,[a]):l.set(n,a)),o=null;var u=l.get("STATISTICS_MINIMUM"),c=l.get("STATISTICS_MAXIMUM"),f=l.get("STATISTICS_MEAN"),h=l.get("STATISTICS_STDDEV"),d=null;if(u&&c){d=[];for(var p=0;p<u.length;p++)d.push({min:parseFloat(u[p]),max:parseFloat(c[p]),avg:f&&parseFloat(f[p]),stddev:h&&parseFloat(h[p])})}var v=l.get("BandName"),m=l.get("WavelengthMin"),g=l.get("WavelengthMax"),b=null;if(v){b=[];for(var y=0;y<v.length;y++)b.push({BandName:v[y],WavelengthMin:m&&parseFloat(m[y]),WavelengthMax:g&&parseFloat(g[y])})}return{statistics:d,bandProperties:b,dataType:l.get("DataType"),rawMetadata:l}};function D(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4;if(r.values)return!0;var o,l,s=r.type,u=r.valueCount,c=r.valueOffset,f=[],h=p[s],d=8*h,m=u*h,g=u*p[s]*8,b=8===i?64:32,y=r.valueOffsets;if(g>b&&m>(a?e.byteLength:e?e.byteLength-c+n:0))return r.offlineOffsetSize=[c,m],r.values=null,!1;if(g<=b){if(!t)if(b<=32)c>>>=32-g;else{var w=null!==y&&void 0!==y&&y.length?y[0]:c>>>0,x=null!==y&&void 0!==y&&y.length?y[1]:Math.round((c-w)/v);g<=32?(c=w>>>32-g,y[0]=c):(c=w*Math.pow(2,32-g)+(x>>>32-g),y[0]=w,y[1]=x>>>32-g)}if(1===u&&d===b)f=[c];else if(64===b){var O=null!==y&&void 0!==y&&y.length?y[0]:c>>>0,k=null!==y&&void 0!==y&&y.length?y[1]:Math.round((c-O)/v),C=O,j=32;for(l=1;l<=u;l++){var A=32-d*l%32;if(j<d){var S=C<<A>>>32-j,M=k<<32-j>>>32-j;C=k,f.push(S+M*Math.pow(2,d-j)),j-=32-(d-j)}else f.push(C<<A>>>32-d),j-=d;0===j&&(j=32,C=k)}}else for(l=1;l<=u;l++){var T=32-d*l;f.push(c<<T>>>32-d)}}else{c-=n,a&&(c=0);for(var I=c;I<c+m;I+=h){switch(s){case 1:case 2:case 7:o=new DataView(e,I,1).getUint8(0);break;case 3:o=new DataView(e,I,2).getUint16(0,t);break;case 4:case 13:o=new DataView(e,I,4).getUint32(0,t);break;case 5:o=new DataView(e,I,4).getUint32(0,t)/new DataView(e,I+4,4).getUint32(0,t);break;case 6:o=new DataView(e,I,1).getInt8(0);break;case 8:o=new DataView(e,I,2).getInt16(0,t);break;case 9:o=new DataView(e,I,4).getInt32(0,t);break;case 10:o=new DataView(e,I,4).getInt32(0,t)/new DataView(e,I+4,4).getInt32(0,t);break;case 11:o=new DataView(e,I,4).getFloat32(0,t);break;case 12:o=new DataView(e,I,8).getFloat64(0,t);break;case 16:case 18:o=_(new DataView(e,I,8),0,t);break;case 17:o=z(new DataView(e,I,8),0,t);break;default:o=null}f.push(o)}}if(2===s){var P="",E=f;for(f=[],l=0;l<E.length;l++)0===E[l]&&""!==P?(f.push(P),P=""):P+=String.fromCharCode(E[l]);""===P&&0!==f.length||f.push(P)}return r.values=f,!0}function G(e){var t,r,n=e[0],a=k(n,"TILEWIDTH"),i=k(n,"TILELENGTH"),o=k(n,"IMAGEWIDTH"),l=k(n,"IMAGELENGTH"),s=k(n,"BITSPERSAMPLE"),u=k(n,"SAMPLESPERPIXEL"),c=null!==(t=k(n,"SAMPLEFORMAT"))&&void 0!==t?t:1,f=g(c,s),h=B(n),d=w(n,"GDAL_NODATA"),p=null;(null===d||void 0===d?void 0:d.length)&&(p=d.map((function(e){return parseFloat(e)})),p.some((function(e){return isNaN(e)}))&&(p=null));var v,b=null!==(r=k(n,"COMPRESSION"))&&void 0!==r?r:1;switch(b){case 1:v="NONE";break;case 2:case 3:case 4:case 32771:v="CCITT";break;case 5:v="LZW";break;case 6:case 7:v="JPEG";break;case 32773:v="PACKBITS";break;case 8:case 32946:v="DEFLATE";break;case 34712:v="JPEG2000";break;case 34887:v="LERC";break;default:v=String(b)}var C=!0,j="";m.has(b)||(C=!1,j+="unsupported tag compression "+b),c>3&&(C=!1,j+="unsupported tag sampleFormat "+c),1!==s&&2!==s&&4!==s&&s%8!=0&&(C=!1,j+="unsupported tag bitsPerSample "+s);var A,S=O(n,"GEOASCIIPARAMS");if(S){var M=S.split("|").find((function(e){return e.includes("ESRI PE String = ")})),T=M?M.replace("ESRI PE String = ",""):"";A=T.startsWith("COMPD_CS")||T.startsWith("PROJCS")||T.startsWith("GEOGCS")?{wkid:null,wkt:T}:null}var I,P,E=x(n,"GEOTIEPOINTS"),R=x(n,"GEOPIXELSCALE"),U=x(n,"GEOTRANSMATRIX"),D=n.has("GEOKEYDIRECTORY")?n.get("GEOKEYDIRECTORY").data:null,G=!1,V=!1;if(D){G=2===k(D,"GTRasterTypeGeoKey");var _=k(D,"GTModelTypeGeoKey");if(2===_){var z=k(D,"GeographicTypeGeoKey");z>=1024&&z<=32766&&(A={wkid:z}),A||32767!==z||(V=!0,A={wkid:4326})}else if(1===_){var W=k(D,"ProjectedCSTypeGeoKey");W>=1024&&W<=32766&&(A={wkid:W})}}if(R&&E&&E.length>=6?(I=[R[0],0,E[3]-E[0]*R[0],0,-Math.abs(R[1]),E[4]-E[1]*R[1]],G&&(I[2]-=.5*I[0]+.5*I[1],I[5]-=.5*I[3]+.5*I[4])):U&&16===U.length&&(I=G?[U[0],U[1],U[3]-.5*U[0],U[4],U[5],U[7]-.5*U[5]]:[U[0],U[1],U[3],U[4],U[5],U[7]]),I){for(var H,q=[{x:0,y:l},{x:0,y:0},{x:o,y:l},{x:o,y:0}],K=Number.POSITIVE_INFINITY,Y=Number.POSITIVE_INFINITY,X=Number.NEGATIVE_INFINITY,Z=Number.NEGATIVE_INFINITY,Q=0;Q<q.length;Q++)K=(H=y(q[Q],I)).x>K?K:H.x,X=H.x<X?X:H.x,Y=H.y>Y?Y:H.y,Z=H.y<Z?Z:H.y;P={xmin:K,xmax:X,ymin:Y,ymax:Z,spatialReference:A}}else P={xmin:-.5,ymin:.5-l,xmax:o-.5,ymax:.5,spatialReference:A};V&&(P.xmax-P.xmin>400||Math.max(Math.abs(P.xmin),Math.abs(P.xmax))>361)&&(A=null,P.spatialReference=null);var $,ee,te,re,ne,ae=N(e);if(ae.length>0){te=Math.round(Math.log(o/k(ae[0],"IMAGEWIDTH"))/Math.LN2);var ie=ae[ae.length-1];re=Math.round(Math.log(o/k(ie,"IMAGEWIDTH"))/Math.LN2),$=k(ie,"TILEWIDTH"),ee=k(ie,"TILELENGTH")}$=null!=re&&re>0?$||a:null,ee=null!=re&&re>0?ee||i:null,a&&(ne=[{maxCol:Math.ceil(o/a)-1,maxRow:Math.ceil(l/i)-1,minRow:0,minCol:0}],ae.forEach((function(e){ne.push({maxCol:Math.ceil(k(e,"IMAGEWIDTH")/k(e,"TILEWIDTH"))-1,maxRow:Math.ceil(k(e,"IMAGELENGTH")/k(e,"TILELENGTH"))-1,minRow:0,minCol:0})})));var oe=O(e[0],"GDAL_METADATA"),le=L(oe);return j+=" "+J({width:o,height:l,tileWidth:a,tileHeight:i,planes:u,ifds:e}),{width:o,height:l,tileWidth:a,tileHeight:i,planes:u,isBSQ:h,pixelType:f,compression:v,noData:p,hasMaskBand:F(e).length===ae.length+1,isSupported:C,message:j,extent:P,isPseudoGeographic:V,affine:R?null:I,firstPyramidLevel:te,maximumPyramidLevel:re,pyramidBlockWidth:$,pyramidBlockHeight:ee,tileBoundary:ne,metadata:le}}function B(e,t){var r=w(e,"PLANARCONFIGURATION");return r?2===r[0]:!!t&&t.isBSQ}function N(e){return e.filter((function(e){return 1===k(e,"NEWSUBFILETYPE")}))}function F(e){return e.filter((function(e){var t,r=4==(4&(null!==(t=k(e,"NEWSUBFILETYPE"))&&void 0!==t?t:0)),n=4===k(e,"PHOTOMETRICINTERPRETATION");return r&&n}))}function V(e){var t=H(e),r=t.littleEndian,n=t.isBigTiff,i=t.firstIFDPos,o=[];do{var l=q(e,r,i,0,f.a.TIFF_TAGS,n?8:4);if(!l.success)break;o.push(l.ifd),i=l.nextIFD}while(i>0);return Object(a.a)(Object(a.a)({},G(o)),{},{littleEndian:r,isBigTiff:n,ifds:o,pyramidIFDs:N(o),maskIFDs:F(o)})}function _(e,t,r){var n=e.getUint32(t,r),a=e.getUint32(t+4,r);return r?a*v+n:n*v+a}function z(e,t,r){var n=r?e.getInt32(t,r):e.getUint32(t,r),a=r?e.getUint32(t+4,r):e.getInt32(t+4,r),i=(r?n:a)>=0?1:-1;return r?n*=i:a*=i,i*(r?a*v+n:n*v+a)}function W(e,t,r,n){return n?_(e,t,r):e.getUint32(t,r)}function H(e){var t=new DataView(e,0,16),r=t.getUint16(0,!1),n=null;if(18761===r)n=!0;else{if(19789!==r)throw new Error("unexpected endianess byte");n=!1}var a=t.getUint16(2,n);if(42!==a&&43!==a)throw new Error("unexpected tiff identifier");var i=4,o=43===a;if(o){var l=t.getUint16(i,n);if(i+=2,8!==l)throw new Error("unsupported bigtiff version");if(0!==t.getUint16(i,n))throw new Error("unsupported bigtiff version");i+=2}return{littleEndian:n,isBigTiff:o,firstIFDPos:W(t,i,n,o)}}function q(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f.a.TIFF_TAGS,l=C(e,t,r,a,i,arguments.length>5&&void 0!==arguments[5]?arguments[5]:4),s=l.ifd;if(s){if(f.a.ifdTags.forEach((function(r,i){s.has(i)&&((n=s.get(i)).data=C(e,t,n.valueOffset-a,a,r).ifd)})),s.has("GEOKEYDIRECTORY")){var u=(n=s.get("GEOKEYDIRECTORY")).values;if(u&&u.length>4){var c=u[0]+"."+u[1]+"."+u[2];n.data=C(e,t,n.valueOffset+6-a,a,f.a.GEO_KEYS,2).ifd,n.data&&n.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[c]})}}if(s.has("XMP")){var h=(n=s.get("XMP")).values;"number"==typeof h[0]&&7===n.type&&(n.values=[Object(o.a)(new Uint8Array(h))])}}return l}function J(e){var t=e.width,r=e.height,n=e.tileHeight,a=e.tileWidth,i=e.planes,o=a?a*n:t*r,l=k(e.ifds[0],"BITSPERSAMPLE"),s="";return o*i>Math.pow(2,30)/(l>8?l/8:1)&&(s=a?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),s}function K(e,t,r,n,a){var i=n?4:1,o=r*i*a;n&&(e=new Uint8Array(e.buffer));for(var l=0;l<t;l++)for(var s=l*o,u=a;u<o;u++)e[s+u]+=e[s+u-a];if(!n)return e;for(var c=new Uint8Array(e.length),f=r*a,h=0;h<t;h++)for(var d=h*o,p=0;p<f;p++)for(var v=0;v<i;v++)c[d+p*i+v]=e[d+p+(i-v-1)*f];return new Float32Array(c.buffer)}function Y(e,t){return X.apply(this,arguments)}function X(){return X=Object(i.a)(Object(n.a)().mark((function e(t,r){var a,i,o,l,s,u,f,h,d,p,v,m,y,w,x,O,C,j,A,S,M,I,P,E,R,L,D,G,N;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=r.headerInfo,l=r.ifd,s=r.offsets,u=r.sizes,f=[],h=0;case 2:if(!(h<s.length)){e.next=10;break}return e.next=5,T(t,o.littleEndian,l,s[h],u[h]||t.byteLength);case 5:d=e.sent,f.push(d);case 7:h++,e.next=2;break;case 10:for(p=B(l,o),v=k(l,"BITSPERSAMPLE"),m=g(null!==(a=k(l,"SAMPLEFORMAT"))&&void 0!==a?a:1,v),y=k(l,"SAMPLESPERPIXEL")||o.planes,w=b(m),x=k(l,"TILEWIDTH"),O=k(l,"TILELENGTH"),C=null!==(i=k(l,"COMPRESSION"))&&void 0!==i?i:1,j=x*O,S=[],M=f[0],I=34887===C,P=0;P<y;P++){if(A=new w(j),f.length===y)(M=f[P]).length===j&&(A=M);else if(M.length)if(p||I)A=M.length===j?M:M.slice(j*P,j*(P+1));else for(E=0;E<j;E++)A[E]=M[E*y+P];S.push(A)}return R=o.noData?o.noData[0]:r.noDataValue,L=o.metadata?o.metadata.statistics:null,D=L?L.map((function(e){return e.min})):null,G=L?L.map((function(e){return e.max})):null,N={pixelType:m,width:x,height:O,pixels:S,noDataValue:R},e.abrupt("return",(null!=R?Object(c.a)(N,R):D&&G&&r.applyMinMaxConstraint&&(N.mask=U(S,D,G)),N));case 17:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function Z(e){return Q.apply(this,arguments)}function Q(){return Q=Object(i.a)(Object(n.a)().mark((function e(t){var r,a,i,o,l,s,u,f,h,d=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(r=d.length>1&&void 0!==d[1]?d[1]:{}).pyramidLevel||0,i=r.headerInfo||V(t),o=i.ifds,l=i.noData,0!==o.length){e.next=4;break}throw new Error("no valid image file directory");case 4:if(!(s=J(i))){e.next=7;break}throw s;case 7:if(u=null,f=-1===a?o[o.length-1]:o[a],h=null!==l&&void 0!==l?l:r.noDataValue,!i.tileWidth){e.next=15;break}return e.next=12,P(t,i,f);case 12:e.t0=e.sent,e.next=18;break;case 15:return e.next=17,R(t,i,f);case 17:e.t0=e.sent;case 18:return u=e.t0,e.abrupt("return",u?(null!=h&&Object(c.a)(u,h),u):u);case 20:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}},1661:function(e,t,r){"use strict";function n(e,t){for(var r=0,n="",a=0,i=0,o=e.length;r<o;)(a=(i=e[r++])>>4)<8?a=1:15===a?(a=4,i=(7&i)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++]):14===a?(a=3,i=(15&i)<<12|(63&e[r++])<<6|63&e[r++]):(a=2,i=(31&i)<<6|63&e[r++]),(0!==i||t)&&(n+=String.fromCharCode(i));return n}r.d(t,"a",(function(){return n}))},1662:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=function(){var e=[];return e[254]="NEWSUBFILETYPE",e[255]="SUBFILETYPE",e[256]="IMAGEWIDTH",e[257]="IMAGELENGTH",e[258]="BITSPERSAMPLE",e[259]="COMPRESSION",e[262]="PHOTOMETRICINTERPRETATION",e[263]="THRESHHOLDING",e[264]="CELLWIDTH",e[265]="CELLLENGTH",e[266]="FILLORDER",e[269]="DOCUMENTNAME",e[270]="IMAGEDESCRIPTION",e[271]="MAKE",e[272]="MODEL",e[273]="STRIPOFFSETS",e[274]="ORIENTATION",e[277]="SAMPLESPERPIXEL",e[278]="ROWSPERSTRIP",e[279]="STRIPBYTECOUNTS",e[280]="MINSAMPLEVALUE",e[281]="MAXSAMPLEVALUE",e[282]="XRESOLUTION",e[283]="YRESOLUTION",e[284]="PLANARCONFIGURATION",e[285]="PAGENAME",e[286]="XPOSITION",e[287]="YPOSITION",e[288]="FREEOFFSETS",e[289]="FREEBYTECOUNTS",e[290]="GRAYRESPONSEUNIT",e[291]="GRAYRESPONSECURVE",e[292]="T4OPTIONS",e[293]="T6OPTIONS",e[296]="RESOLUTIONUNIT",e[297]="PAGENUMBER",e[300]="COLORRESPONSEUNIT",e[301]="TRANSFERFUNCTION",e[305]="SOFTWARE",e[306]="DATETIME",e[315]="ARTIST",e[316]="HOSTCOMPUTER",e[317]="PREDICTOR",e[318]="WHITEPOINT",e[319]="PRIMARYCHROMATICITIES",e[320]="COLORMAP",e[321]="HALFTONEHINTS",e[322]="TILEWIDTH",e[323]="TILELENGTH",e[324]="TILEOFFSETS",e[325]="TILEBYTECOUNTS",e[326]="BADFAXLINES",e[327]="CLEANFAXDATA",e[328]="CONSECUTIVEBADFAXLINES",e[330]="SUBIFD",e[332]="INKSET",e[333]="INKNAMES",e[334]="NUMBEROFINKS",e[336]="DOTRANGE",e[337]="TARGETPRINTER",e[338]="EXTRASAMPLES",e[339]="SAMPLEFORMAT",e[340]="SMINSAMPLEVALUE",e[341]="SMAXSAMPLEVALUE",e[342]="TRANSFERRANGE",e[347]="JPEGTABLES",e[512]="JPEGPROC",e[513]="JPEGIFOFFSET",e[514]="JPEGIFBYTECOUNT",e[515]="JPEGRESTARTINTERVAL",e[517]="JPEGLOSSLESSPREDICTORS",e[518]="JPEGPOINTTRANSFORM",e[519]="JPEGQTABLES",e[520]="JPEGDCTABLES",e[521]="JPEGACTABLES",e[529]="YCBCRCOEFFICIENTS",e[530]="YCBCRSUBSAMPLING",e[531]="YCBCRPOSITIONING",e[532]="REFERENCEBLACKWHITE",e[700]="XMP",e[33550]="GEOPIXELSCALE",e[33922]="GEOTIEPOINTS",e[33432]="COPYRIGHT",e[42112]="GDAL_METADATA",e[42113]="GDAL_NODATA",e[50844]="RPCCOEFFICIENT",e[34264]="GEOTRANSMATRIX",e[34735]="GEOKEYDIRECTORY",e[34736]="GEODOUBLEPARAMS",e[34737]="GEOASCIIPARAMS",e[34665]="EXIFIFD",e[34853]="GPSIFD",e[40965]="INTEROPERABILITYIFD",e}(),a=function(){var e=n.slice();return e[36864]="ExifVersion",e[40960]="FlashpixVersion",e[40961]="ColorSpace",e[42240]="Gamma",e[37121]="ComponentsConfiguration",e[37122]="CompressedBitsPerPixel",e[40962]="PixelXDimension",e[40963]="PixelYDimension",e[37500]="MakerNote",e[37510]="UserComment",e[40964]="RelatedSoundFile",e[36867]="DateTimeOriginal",e[36868]="DateTimeDigitized",e[36880]="OffsetTime",e[36881]="OffsetTimeOriginal",e[36882]="OffsetTimeDigitized",e[37520]="SubSecTime",e[37521]="SubSecTimeOriginal",e[37522]="SubSecTimeDigitized",e[37888]="Temperature",e[37889]="Humidity",e[37890]="Pressure",e[37891]="WaterDepth",e[37892]="Acceleration",e[37893]="CameraElevationAngle",e[42016]="ImageUniqueID",e[42032]="CameraOwnerName",e[42033]="BodySerialNumber",e[42034]="LensSpecification",e[42035]="LensMake",e[42036]="LensModel",e[42037]="LensSerialNumber",e[33434]="ExposureTime",e[33437]="FNumber",e[34850]="ExposureProgram",e[34852]="SpectralSensitivity",e[34855]="PhotographicSensitivity",e[34856]="OECF",e[34864]="SensitivityType",e[34865]="StandardOutputSensitivity",e[34866]="RecommendedExposureIndex",e[34867]="ISOSpeed",e[34868]="ISOSpeedLatitudeyyy",e[34869]="ISOSpeedLatitudezzz",e[37377]="ShutterSpeedValue",e[37378]="ApertureValue",e[37379]="BrightnessValue",e[37380]="ExposureBiasValue",e[37381]="MaxApertureValue",e[37382]="SubjectDistance",e[37383]="MeteringMode",e[37384]="LightSource",e[37385]="Flash",e[37386]="FocalLength",e[37396]="SubjectArea",e[41483]="FlashEnergy",e[41484]="SpatialFrequencyResponse",e[41486]="FocalPlaneXResolution",e[41487]="FocalPlaneYResolution",e[41488]="FocalPlaneResolutionUnit",e[41492]="SubjectLocation",e[41493]="ExposureIndex",e[41495]="SensingMethod",e[41728]="FileSource",e[41729]="SceneType",e[41730]="CFAPattern",e[41985]="CustomRendered",e[41986]="ExposureMode",e[41987]="WhiteBalance",e[41988]="DigitalZoomRatio",e[41989]="FocalLengthIn35mmFilm",e[41990]="SceneCaptureType",e[41991]="GainControl",e[41992]="Contrast",e[41993]="Saturation",e[41994]="Sharpness",e[41995]="DeviceSettingDescription",e[41996]="SubjectDistanceRange",e}(),i=function(){var e=[];return e[1024]="GTModelTypeGeoKey",e[1025]="GTRasterTypeGeoKey",e[1026]="GTCitationGeoKey",e[2048]="GeographicTypeGeoKey",e[2049]="GeogCitationGeoKey",e[2050]="GeogGeodeticDatumGeoKey",e[2051]="GeogPrimeMeridianGeoKey",e[2052]="GeogLinearUnitsGeoKey",e[2053]="GeogLinearUnitSizeGeoKey",e[2054]="GeogAngularUnitsGeoKey",e[2055]="GeogAngularUnitSizeGeoKey",e[2056]="GeogEllipsoidGeoKey",e[2057]="GeogSemiMajorAxisGeoKey",e[2058]="GeogSemiMinorAxisGeoKey",e[2059]="GeogInvFlatteningGeoKey",e[2061]="GeogPrimeMeridianLongGeoKey",e[2060]="GeogAzimuthUnitsGeoKey",e[3072]="ProjectedCSTypeGeoKey",e[3073]="PCSCitationGeoKey",e[3074]="ProjectionGeoKey",e[3075]="ProjCoordTransGeoKey",e[3076]="ProjLinearUnitsGeoKey",e[3077]="ProjLinearUnitSizeGeoKey",e[3078]="ProjStdParallel1GeoKey",e[3079]="ProjStdParallel2GeoKey",e[3080]="ProjNatOriginLongGeoKey",e[3081]="ProjNatOriginLatGeoKey",e[3082]="ProjFalseEastingGeoKey",e[3083]="ProjFalseNorthingGeoKey",e[3084]="ProjFalseOriginLongGeoKey",e[3085]="ProjFalseOriginLatGeoKey",e[3086]="ProjFalseOriginEastingGeoKey",e[3087]="ProjFalseOriginNorthingGeoKey",e[3088]="ProjCenterLongGeoKey",e[3090]="ProjCenterEastingGeoKey",e[3091]="ProjCenterNorthingGeoKey",e[3092]="ProjScaleAtNatOriginGeoKey",e[3093]="ProjScaleAtCenterGeoKey",e[3094]="ProjAzimuthAngleGeoKey",e[3095]="ProjStraightVertPoleLongGeoKey",e[4096]="VerticalCSTypeGeoKey",e[4097]="VerticalCitationGeoKey",e[4098]="VerticalDatumGeoKey",e[4099]="VerticalUnitsGeoKey",e}(),o=new Map;o.set("EXIFIFD",a),o.set("GPSIFD",["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"]);var l={TIFF_TAGS:n,ifdTags:o,GEO_KEYS:i,getTagName:function(e,t){var r=(t||n)[e];return void 0===r&&(r="unknown"+String(e)),r}}},414:function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var n,a=r(92),i=r(99),o=r(89),l=r(88),s=r(90),u=r(91),c=r(94),f=r(101),h=r(105),d=r(116),p=r(102),v=r(97),m=r(191),g=r(95),b=Object(l.a)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(o.a)(this,e),this.minValue=t,this.maxValue=r,this.noDataValue=n})),y=r(470),w=n=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).width=null,n.height=null,n.pixelType="f32",n.validPixelCount=null,n.mask=null,n.maskIsAlpha=!1,n.premultiplyAlpha=!1,n.statistics=null,n.depthCount=1,n}return Object(l.a)(r,[{key:"castPixelType",value:function(e){if(!e)return"f32";var t=e.toLowerCase();return["u1","u2","u4"].includes(t)?t="u8":["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].includes(t)||(t="f32"),t}},{key:"getPlaneCount",value:function(){var e;return null===(e=this.pixels)||void 0===e?void 0:e.length}},{key:"addData",value:function(e){var t;if(!e.pixels||e.pixels.length!==this.width*this.height)throw new f.a("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(e.pixels),this.statistics.push(null!==(t=e.statistics)&&void 0!==t?t:new b)}},{key:"getAsRGBA",value:function(){var e=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(e);break;default:this._fillFrom8Bit(e)}return new Uint8ClampedArray(e)}},{key:"getAsRGBAFloat",value:function(){var e=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(e),e}},{key:"updateStatistics",value:function(){var e=this;if(this.pixels){this.statistics=this.pixels.map((function(t){return e._calculateBandStatistics(t,e.mask)}));var t=this.mask,r=0;if(null!=t)for(var n=0;n<t.length;n++)t[n]&&r++;else r=this.width*this.height;this.validPixelCount=r}}},{key:"clamp",value:function(e){if(e&&"f64"!==e&&"f32"!==e&&this.pixels){for(var t,r,a,o=Object(y.b)(e),l=Object(i.a)(o,2),s=l[0],u=l[1],c=this.pixels,f=this.width*this.height,h=c.length,d=[],p=0;p<h;p++){a=n.createEmptyBand(e,f),t=c[p];for(var v=0;v<f;v++)r=t[v],a[v]=r>u?u:r<s?s:r;d.push(a)}this.pixels=d,this.pixelType=e}}},{key:"extractBands",value:function(e){var t,r=this,a=this.pixels,i=this.statistics;if(null==e||0===e.length||!a||0===a.length)return this;var o=a.length,l=e.some((function(e){return e>=a.length})),s=o===e.length&&!e.some((function(e,t){return e!==t}));if(l||s)return this;var u=(null===(t=this.bandMasks)||void 0===t?void 0:t.length)===o?e.map((function(e){return r.bandMasks[e]})):void 0,c=this.mask,f=this.validPixelCount,h=this.width,d=this.height;if(u){if(1===u.length)c=u[0];else{var p=h*d;c=new Uint8Array(p).fill(255);for(var v=0;v<u.length;v++)for(var m=u[v],g=0;g<p;g++)m[g]||(c[g]=0)}f=c.filter((function(e){return!!e})).length}return new n({pixelType:this.pixelType,width:h,height:d,mask:c,bandMasks:u,validPixelCount:f,maskIsAlpha:this.maskIsAlpha,pixels:e.map((function(e){return a[e]})),statistics:i&&e.map((function(e){return i[e]}))})}},{key:"clone",value:function(){var e,t=new n({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});null!=this.mask&&(this.mask instanceof Uint8Array?t.mask=new Uint8Array(this.mask):t.mask=this.mask.slice(0)),this.bandMasks&&(t.bandMasks=this.bandMasks.map((function(e){return new Uint8Array(e)})));var r=n.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){t.pixels=[];var a=!!this.pixels[0].slice;for(e=0;e<this.pixels.length;e++)t.pixels[e]=a?this.pixels[e].slice(0,this.pixels[e].length):new r(this.pixels[e])}if(this.statistics)for(t.statistics=[],e=0;e<this.statistics.length;e++)t.statistics[e]=Object(d.a)(this.statistics[e]);return t.premultiplyAlpha=this.premultiplyAlpha,t}},{key:"_fillFrom8Bit",value:function(e){var t=this.mask,r=this.maskIsAlpha,n=this.premultiplyAlpha,a=this.pixels;if(e&&a&&a.length){var i,o,l,s;i=o=l=a[0],a.length>=3?(o=a[1],l=a[2]):2===a.length&&(o=a[1]);var u=new Uint32Array(e),c=this.width*this.height;if(i.length===c)if(null!=t&&t.length===c)if(r)for(s=0;s<c;s++){var f=t[s];if(f){var h=f/255;u[s]=n?f<<24|l[s]*h<<16|o[s]*h<<8|i[s]*h:f<<24|l[s]<<16|o[s]<<8|i[s]}}else for(s=0;s<c;s++)t[s]&&(u[s]=255<<24|l[s]<<16|o[s]<<8|i[s]);else for(s=0;s<c;s++)u[s]=255<<24|l[s]<<16|o[s]<<8|i[s];else p.a.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}else p.a.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")}},{key:"_fillFromNon8Bit",value:function(e){var t=this.pixels,r=this.mask,n=this.statistics;if(e&&t&&t.length){var i=this.pixelType,o=1,l=0,s=1;if(n&&n.length>0){var u,c=Object(a.a)(n);try{for(c.s();!(u=c.n()).done;){var f=u.value;if(null!=f.minValue&&(l=Math.min(l,f.minValue)),null!=f.maxValue&&null!=f.minValue){var h=f.maxValue-f.minValue;s=Math.max(s,h)}}}catch(O){c.e(O)}finally{c.f()}o=255/s}else{var d=255;"s8"===i?(l=-128,d=127):"u16"===i?d=65535:"s16"===i?(l=-32768,d=32767):"u32"===i?d=4294967295:"s32"===i?(l=-2147483648,d=2147483647):"f32"===i?(l=-34e38,d=34e38):"f64"===i&&(l=-Number.MAX_VALUE,d=Number.MAX_VALUE),o=255/(d-l)}var v,m,g,b,y,w=new Uint32Array(e),x=this.width*this.height;if((v=m=g=t[0]).length!==x)return p.a.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(t.length>=2)if(m=t[1],t.length>=3&&(g=t[2]),null!=r&&r.length===x)for(b=0;b<x;b++)r[b]&&(w[b]=255<<24|(g[b]-l)*o<<16|(m[b]-l)*o<<8|(v[b]-l)*o);else for(b=0;b<x;b++)w[b]=255<<24|(g[b]-l)*o<<16|(m[b]-l)*o<<8|(v[b]-l)*o;else if(null!=r&&r.length===x)for(b=0;b<x;b++)y=(v[b]-l)*o,r[b]&&(w[b]=255<<24|y<<16|y<<8|y);else for(b=0;b<x;b++)y=(v[b]-l)*o,w[b]=255<<24|y<<16|y<<8|y}else p.a.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")}},{key:"_fillFrom32Bit",value:function(e){var t,r,n,a,i=this.pixels,o=this.mask;if(!e||!i||!i.length)return p.a.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");t=r=n=i[0],i.length>=3?(r=i[1],n=i[2]):2===i.length&&(r=i[1]);var l=this.width*this.height;if(t.length!==l)return p.a.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");var s=0;if(null!=o&&o.length===l)for(a=0;a<l;a++)e[s++]=t[a],e[s++]=r[a],e[s++]=n[a],e[s++]=1&o[a];else for(a=0;a<l;a++)e[s++]=t[a],e[s++]=r[a],e[s++]=n[a],e[s++]=1}},{key:"_calculateBandStatistics",value:function(e,t){var r,n=1/0,a=-1/0,i=e.length,o=0;if(null!=t)for(r=0;r<i;r++)t[r]&&(n=(o=e[r])<n?o:n,a=o>a?o:a);else for(r=0;r<i;r++)n=(o=e[r])<n?o:n,a=o>a?o:a;return new b(n,a)}}],[{key:"createEmptyBand",value:function(e,t){return new(n.getPixelArrayConstructor(e))(t)}},{key:"getPixelArrayConstructor",value:function(e){var t;switch(e){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"f32":case"c64":case"c128":case"unknown":t=Float32Array;break;case"f64":t=Float64Array}return t}}]),r}(h.a);Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"width",void 0),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"height",void 0),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"pixelType",void 0),Object(c.a)([Object(m.a)("pixelType")],w.prototype,"castPixelType",null),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"validPixelCount",void 0),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"mask",void 0),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"maskIsAlpha",void 0),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"pixels",void 0),Object(c.a)([Object(v.b)()],w.prototype,"premultiplyAlpha",void 0),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"statistics",void 0),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"depthCount",void 0),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"noDataValues",void 0),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"bandMasks",void 0);var x=w=n=Object(c.a)([Object(g.a)("esri.layers.support.PixelBlock")],w)},420:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return B})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return h})),r.d(t,"g",(function(){return d})),r.d(t,"h",(function(){return C})),r.d(t,"i",(function(){return k})),r.d(t,"j",(function(){return G})),r.d(t,"k",(function(){return f})),r.d(t,"l",(function(){return m})),r.d(t,"m",(function(){return v})),r.d(t,"n",(function(){return O})),r.d(t,"o",(function(){return S})),r.d(t,"p",(function(){return j})),r.d(t,"q",(function(){return b})),r.d(t,"r",(function(){return g})),r.d(t,"s",(function(){return M})),r.d(t,"t",(function(){return L}));var n,a,i,o=r(99),l=r(112),s=r(414),u=r(470);(i=n||(n={}))[i.matchAny=0]="matchAny",i[i.matchAll=1]="matchAll",function(e){e[e.bestMatch=0]="bestMatch",e[e.fail=1]="fail"}(a||(a={}));var c=6;function f(e){return null!=e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&e.pixels.length>0}function h(e){var t,r;if(null===e||void 0===e||!e.length||e.some((function(e){return!f(e)})))return null;if(1===e.length)return null!==(t=null===(r=e[0])||void 0===r?void 0:r.clone())&&void 0!==t?t:null;var n=e,a=n[0],i=a.width,o=a.height,u=a.pixelType;if(n.some((function(e){return e.width!==i||e.height!==o})))return null;var c=n.map((function(e){return e.mask})).filter((function(e){return null!=e})),h=null;c.length&&((h=new Uint8Array(i*o)).set(c[0]),c.length>1&&x(c.slice(1),h));var d=[];n.forEach((function(e){var t=e.pixels;return d.push.apply(d,Object(l.a)(t))}));var p=n.map((function(e){return e.statistics})).filter((function(e){return null===e||void 0===e?void 0:e.length})),v=[];return p.forEach((function(e){return v.push.apply(v,Object(l.a)(e))})),new s.a({pixelType:u,width:i,height:o,mask:h,pixels:d,statistics:v.length?v:null})}function d(e){if(e){var t=e.colormap;if(t&&0!==t.length){var r=t.sort((function(e,t){return e[0]-t[0]})),n=0;r[0][0]<0&&(n=r[0][0]);var a,i=Math.max(256,r[r.length-1][0]-n+1),o=new Uint8Array(4*i),l=[],s=0,u=0,c=5===r[0].length;if(i>65536)return r.forEach((function(e){l[e[0]-n]=c?e.slice(1):e.slice(1).concat([255])})),{indexed2DColormap:l,offset:n,alphaSpecified:c};if(e.fillUnspecified)for(s=(a=r[u])[0]-n;s<i;s++)o[4*s]=a[1],o[4*s+1]=a[2],o[4*s+2]=a[3],o[4*s+3]=c?a[4]:255,s===a[0]-n&&(a=u===r.length-1?a:r[++u]);else for(s=0;s<r.length;s++)o[u=4*((a=r[s])[0]-n)]=a[1],o[u+1]=a[2],o[u+2]=a[3],o[u+3]=c?a[4]:255;return{indexedColormap:o,offset:n,alphaSpecified:c}}}}function p(e,t){if(!f(e))return e;if(!t||!t.indexedColormap&&!t.indexed2DColormap)return e;var r=e.clone(),n=r.pixels,a=r.mask,i=r.width*r.height;if(1!==n.length)return e;var o,l=t.indexedColormap,s=t.indexed2DColormap,u=t.offset,c=t.alphaSpecified,h=0,d=n[0],p=new Uint8Array(d.length),v=new Uint8Array(d.length),m=new Uint8Array(d.length),g=0;if(l){var b=l.length-1;if(null!=a)for(h=0;h<i;h++)a[h]&&((g=4*(d[h]-u))<u||g>b?a[h]=0:(p[h]=l[g],v[h]=l[g+1],m[h]=l[g+2],a[h]=l[g+3]));else{for(a=new Uint8Array(i),h=0;h<i;h++)(g=4*(d[h]-u))<u||g>b?a[h]=0:(p[h]=l[g],v[h]=l[g+1],m[h]=l[g+2],a[h]=l[g+3]);r.mask=a}}else if(s)if(null!=a)for(h=0;h<i;h++)a[h]&&(o=s[d[h]],p[h]=o[0],v[h]=o[1],m[h]=o[2],a[h]=o[3]);else{for(a=new Uint8Array(i),h=0;h<i;h++)o=s[d[h]],p[h]=o[0],v[h]=o[1],m[h]=o[2],a[h]=o[3];r.mask=a}return r.pixels=[p,v,m],r.statistics=null,r.pixelType="u8",r.maskIsAlpha=c,r}function v(e,t){if(!f(e))return null;var r=e.pixels,n=e.mask,a=r.length,i=t.lut,o=t.offset;i&&1===i[0].length&&(i=r.map((function(){return i})));for(var l=[],u=t.outputPixelType||"u8",c=0;c<a;c++){var h=m(r[c],n,i[c],o||0,u);l.push(h)}var d=new s.a({width:e.width,height:e.height,pixels:l,mask:n,pixelType:u});return d.updateStatistics(),d}function m(e,t,r,n,a){var i=e.length,o=s.a.createEmptyBand(a,i);if(t)for(var l=0;l<i;l++)t[l]&&(o[l]=r[e[l]-n]);else for(var u=0;u<i;u++)o[u]=r[e[u]-n];return o}function g(e,t){if(!f(e))return null;var r,n,a,i,o,l,s=e.clone(),u=s.pixels,c=s.width*s.height,h=t.length,d=Math.floor(h/2),p=t[Math.floor(d)],v=u[0],m=!1,g=new Uint8Array(c),b=new Uint8Array(c),y=new Uint8Array(c),w=s.mask,x=4===t[0].mappedColor.length;for(w||((w=new Uint8Array(c)).fill(x?255:1),s.mask=w),o=0;o<c;o++)if(w[o]){for(r=v[o],m=!1,l=d,n=p,a=0,i=h-1;i-a>1;){if(r===n.value){m=!0;break}r>n.value?a=l:i=l,l=Math.floor((a+i)/2),n=t[Math.floor(l)]}m||(r===t[a].value?(n=t[a],m=!0):r===t[i].value?(n=t[i],m=!0):r<t[a].value?(m=!1,n=null):r>t[a].value&&(r<t[i].value?(n=t[a],m=!0):i===h-1?(m=!1,n=null):(n=t[i],m=!0))),m?(g[o]=n.mappedColor[0],b[o]=n.mappedColor[1],y[o]=n.mappedColor[2],w[o]=n.mappedColor[3]):g[o]=b[o]=y[o]=w[o]=0}return s.pixels=[g,b,y],s.mask=w,s.pixelType="u8",s.maskIsAlpha=x,s}function b(e,t){if(!f(e))return null;var r=e.width,n=e.height,a=t.inputRanges,i=t.outputValues,l=t.outputPixelType,c=t.noDataRanges,h=t.allowUnmatched,d=t.isLastInputRangeInclusive,p=e.pixels[0],v=s.a.createEmptyBand(l,p.length),m=e.mask,g=new Uint8Array(r*n);m?g.set(m):g.fill(255);var b=e.pixelType.startsWith("f")?1e-6:0,y=a.map((function(e){return e-b}));y[0]=a[0],y[y.length-1]=a[a.length-1]+(d?1e-6:0);for(var w=a.length/2,x=Object(u.b)(l),O=Object(o.a)(x,2),k=O[0],C=O[1],j=0;j<n;j++)for(var A=0;A<r;A++){var S=j*r+A;if(g[S]){for(var M=p[S],T=!1,I=w-1;I>=0;I--)if(M===y[2*I]||M>y[2*I]&&M<y[2*I+1]){v[S]=i[I],T=!0;break}T||(h?v[S]=M>C?C:M<k?k:M:g[S]=0)}}var P=null===c||void 0===c?void 0:c.length;if(P)for(var E=0;E<n;E++)for(var R=0;R<r;R++){var U=E*r+R;if(!m||m[U])for(var L=p[U],D=0;D<P;D+=2)if(L>=c[D]&&L<=c[D+1]){v[U]=0,g[U]=0;break}}return new s.a({width:r,height:n,pixelType:l,pixels:[v],mask:g})}function y(e,t,r,n){for(var a=null!=r&&r.length>=2?new Set(r):null,i=1===(null===r||void 0===r?void 0:r.length)?r[0]:null,o=!(null===t||void 0===t||!t.length),l=0;l<e.length;l++)if(n[l]){var s=e[l];if(o){for(var u=!1,c=0;c<t.length;c+=2)if(s>=t[c]&&s<=t[c+1]){u=!0;break}u||(n[l]=0)}n[l]&&(s===i||(null===a||void 0===a?void 0:a.has(s)))&&(n[l]=0)}}function w(e,t){for(var r=e[0].length,n=0;n<r;n++)if(t[n]){for(var a=!1,i=0;i<e.length;i++)if(e[i][n]){a=!0;break}a||(t[n]=0)}}function x(e,t){for(var r=e[0].length,n=0;n<r;n++)if(t[n]){for(var a=!1,i=0;i<e.length;i++)if(0===e[i][n]){a=!0;break}a&&(t[n]=0)}}function O(e,t){if(!f(e))return null;var r=e.width,n=e.height,a=e.pixels,i=r*n,o=new Uint8Array(i);e.mask?o.set(e.mask):o.fill(255);var l=a.length,u=t.includedRanges,c=t.noDataValues,h=t.outputPixelType,d=t.matchAll,p=t.lookups;if(p){for(var v=[],g=0;g<l;g++){var b=p[g],O=m(a[g],o,b.lut,b.offset||0,"u8");v.push(O)}1===v.length?o.set(v[0]):d?w(v,o):x(v,o)}else if(d){for(var k=[],C=0;C<l;C++){var j=new Uint8Array(i);j.set(o),y(a[C],null===u||void 0===u?void 0:u.slice(2*C,2*C+2),null===c||void 0===c?void 0:c[C],j),k.push(j)}1===k.length?o.set(k[0]):w(k,o)}else for(var A=0;A<l;A++)y(a[A],null===u||void 0===u?void 0:u.slice(2*A,2*A+2),null===c||void 0===c?void 0:c[A],o);return new s.a({width:r,height:n,pixelType:h,pixels:a,mask:o})}function k(e){var t=e.srcPixelType,r=e.inputRanges,n=e.outputValues,a=e.allowUnmatched,i=e.noDataRanges,l=e.isLastInputRangeInclusive,c=e.outputPixelType;if("u8"!==t&&"s8"!==t&&"u16"!==t&&"s16"!==t)return null;var f=t.includes("16")?65536:256,h=t.includes("s")?-f/2:0,d=s.a.createEmptyBand(c,f),p=new Uint8Array(f);a&&p.fill(255);var v=Object(u.b)(c),m=Object(o.a)(v,2),g=m[0],b=m[1];if(null!==r&&void 0!==r&&r.length&&null!==n&&void 0!==n&&n.length){var y=r.map((function(e){return e-1e-6}));y[0]=r[0],l&&(y[y.length-1]=r[r.length-1]);for(var w=0;w<y.length;w++)for(var x=n[w]>b?b:n[w]<g?g:n[w],O=Math.ceil(y[2*w]-h),k=Math.floor(y[2*w+1]-h),C=O;C<=k;C++)d[C]=x,p[C]=255}if(null!==i&&void 0!==i&&i.length)for(var j=0;j<i.length;j++)for(var A=Math.ceil(i[2*j]-h),S=Math.floor(i[2*j+1]-h),M=A;M<=S;M++)p[M]=0;return{lut:d,offset:h,mask:p}}function C(e,t,r){if("u8"!==e&&"s8"!==e&&"u16"!==e&&"s16"!==e)return null;var n=e.includes("16")?65536:256,a=e.includes("s")?-n/2:0,i=new Uint8Array(n);if(t)for(var o=0;o<t.length;o++)for(var l=Math.ceil(t[2*o]-a),s=Math.floor(t[2*o+1]-a),u=l;u<=s;u++)i[u]=255;else i.fill(255);if(r)for(var c=0;c<r.length;c++)i[r[c]-a]=0;return{lut:i,offset:a}}function j(e,t){if(!e||0===e.length)return null;var r=e.find((function(e){return e.pixelBlock}));if(!r||null==r.pixelBlock)return null;var n=(r.extent.xmax-r.extent.xmin)/r.pixelBlock.width,a=(r.extent.ymax-r.extent.ymin)/r.pixelBlock.height,i=.01*Math.min(n,a),o=e.sort((function(e,t){return Math.abs(e.extent.ymax-t.extent.ymax)>i?t.extent.ymax-e.extent.ymax:Math.abs(e.extent.xmin-t.extent.xmin)>i?e.extent.xmin-t.extent.xmin:0})),l=Math.min.apply(null,o.map((function(e){return e.extent.xmin}))),s=Math.min.apply(null,o.map((function(e){return e.extent.ymin}))),u=Math.max.apply(null,o.map((function(e){return e.extent.xmax}))),c=Math.max.apply(null,o.map((function(e){return e.extent.ymax}))),f={x:Math.round((t.xmin-l)/n),y:Math.round((c-t.ymax)/a)},h={width:Math.round((u-l)/n),height:Math.round((c-s)/a)},d={width:Math.round((t.xmax-t.xmin)/n),height:Math.round((t.ymax-t.ymin)/a)};return Math.round(h.width/r.pixelBlock.width)*Math.round(h.height/r.pixelBlock.height)!==o.length||f.x<0||f.y<0||h.width<d.width||h.height<d.height?null:{extent:t,pixelBlock:S(o.map((function(e){return e.pixelBlock})),h,{clipOffset:f,clipSize:d})}}function A(e,t,r,n,a,i){var o=r.block,l=o.width,s=o.height,u=r.offset,c=u.x,f=u.y,h=r.mosaic,d=h.width,p=function(e,t,r,n,a,i,o,l){return{xmin:a<=r*e?0:a<r*e+e?a-r*e:e,ymin:i<=n*t?0:i<n*t+t?i-n*t:t,xmax:a+o<=r*e?0:a+o<r*e+e?a+o-r*e:e,ymax:i+l<=n*t?0:i+l<n*t+t?i+l-n*t:t}}(l,s,n,a,c,f,d,h.height),v=0,m=0;if(i){var g,b=i.hasGCSSShiftTransform?360:null!==(g=i.halfWorldWidth)&&void 0!==g?g:0,y=l*i.resolutionX,w=i.startX+n*y;w<b&&w+y>b?m=i.rightPadding:w>=b&&(v=i.leftMargin-i.rightPadding,m=0)}if(p.xmax-=m,"number"!=typeof t)for(var x=p.ymin;x<p.ymax;x++)for(var O=(a*s+x-f)*d+(n*l-c)+v,k=x*l,C=p.xmin;C<p.xmax;C++)e[O+C]=t[k+C];else for(var j=p.ymin;j<p.ymax;j++)for(var A=(a*s+j-f)*d+(n*l-c)+v,S=p.xmin;S<p.xmax;S++)e[A+S]=t}function S(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.clipOffset,a=r.clipSize,i=r.alignmentInfo,o=r.blockWidths;if(o)return function(e,t,r){var n=e.find((function(e){return null!=e}));if(null==n)return null;var a=e.some((function(e){return null==e||!!e.mask})),i=t.width,o=t.height,l=a?new Uint8Array(i*o):null,u=r.blockWidths,c=[],h=n.getPlaneCount(),d=s.a.getPixelArrayConstructor(n.pixelType);if(a)for(var p=0,v=0;p<e.length;v+=u[p],p++){var m=e[p];if(f(m))for(var g=m.mask,b=0;b<o;b++)for(var y=0;y<u[p];y++)l[b*i+y+v]=null==g?255:g[b*m.width+y]}for(var w=e.some((function(e){return null!=e&&e.bandMasks&&e.bandMasks.length>1})),x=w?[]:void 0,O=i*o,k=0;k<h;k++){for(var C=new d(O),j=w?new Uint8Array(O):void 0,A=0,S=0;A<e.length;S+=u[A],A++){var M=e[A];if(f(M)){var T=M.pixels[k];if(null!=T){for(var I=0;I<o;I++)for(var P=0;P<u[A];P++)C[I*i+P+S]=T[I*M.width+P];if(j)for(var E,R,U=null!==(E=null===(R=M.bandMasks)||void 0===R?void 0:R[k])&&void 0!==E?E:M.mask,L=0;L<o;L++)for(var D=0;D<u[A];D++)j[L*i+D+S]=U?U[L*M.width+D]:255}}}c.push(C),x&&j&&x.push(j)}var G=new s.a({width:i,height:o,mask:l,bandMasks:x,pixels:c,pixelType:n.pixelType});return G.updateStatistics(),G}(e,t,{blockWidths:o});var l=e.find((function(e){return f(e)}));if(null==l)return null;for(var u,c=a?a.width:t.width,h=a?a.height:t.height,d=l.width,p=l.height,v=t.width/d,m=t.height/p,g={offset:n||{x:0,y:0},mosaic:a||t,block:{width:d,height:p}},b=l.pixelType,y=s.a.getPixelArrayConstructor(b),w=l.pixels.length,x=[],O=0;O<w;O++){u=new y(c*h);for(var k=0;k<m;k++)for(var C=0;C<v;C++){var j=e[k*v+C];f(j)&&A(u,j.pixels[O],g,C,k,i)}x.push(u)}var S=e.some((function(e){return null==e||null!=e.mask&&e.mask.length>0})),M=e.some((function(e){return null!=e&&e.bandMasks&&e.bandMasks.length>1})),T=S?new Uint8Array(c*h):void 0,I=M?[]:void 0;if(T){for(var P=0;P<m;P++)for(var E=0;E<v;E++){var R=e[P*v+E],U=null!=R?R.mask:null;A(T,null!=U?U:R?255:0,g,E,P,i)}if(I)for(var L=0;L<w;L++){for(var D=new Uint8Array(c*h),G=0;G<m;G++)for(var B=0;B<v;B++){var N,F,V=e[G*v+B],_=null!==(N=null===V||void 0===V||null===(F=V.bandMasks)||void 0===F?void 0:F[L])&&void 0!==N?N:null===V||void 0===V?void 0:V.mask;A(D,null!=_?_:V?255:0,g,B,G,i)}I.push(D)}}var z=new s.a({width:c,height:h,pixels:x,pixelType:b,bandMasks:I,mask:T});return z.updateStatistics(),z}function M(e,t,r){if(!f(e))return null;var n=e.width,a=e.height,i=t.x,o=t.y,l=r.width+i,s=r.height+o;if(i<0||o<0||l>n||s>a)return e;if(0===i&&0===o&&l===n&&s===a)return e;e.mask||(e.mask=new Uint8Array(n*a));for(var u=e.mask,c=0;c<a;c++)for(var h=c*n,d=0;d<n;d++)u[h+d]=c<o||c>=s||d<i||d>=l?0:1;return e.updateStatistics(),e}function T(e){if(!f(e))return null;for(var t=e.clone(),r=e.width,n=e.height,a=e.pixels[0],i=t.pixels[0],o=e.mask,l=2;l<n-1;l++){for(var s=new Map,u=l-2;u<l+2;u++)for(var c=0;c<4;c++){var h=u*r+c;E(s,a[h],o?o[h]:1)}i[l*r]=I(s),i[l*r+1]=i[l*r+2]=i[l*r];for(var d=3;d<r-1;d++){var p=(l-2)*r+d+1;E(s,a[p],o?o[p]:1),E(s,a[p=(l-1)*r+d+1],o?o[p]:1),E(s,a[p=l*r+d+1],o?o[p]:1),E(s,a[p=(l+1)*r+d+1],o?o[p]:1),P(s,a[p=(l-2)*r+d-3],o?o[p]:1),P(s,a[p=(l-1)*r+d-3],o?o[p]:1),P(s,a[p=l*r+d-3],o?o[p]:1),P(s,a[p=(l+1)*r+d-3],o?o[p]:1),i[l*r+d]=I(s)}i[l*r+d+1]=i[l*r+d]}for(var v=0;v<r;v++)i[v]=i[r+v]=i[2*r+v],i[(n-1)*r+v]=i[(n-2)*r+v];return t.updateStatistics(),t}function I(e){if(0===e.size)return 0;for(var t=0,r=-1,n=0,a=e.keys(),i=a.next();!i.done;)(n=e.get(i.value))>t&&(r=i.value,t=n),i=a.next();return r}function P(e,t,r){if(0!==r){var n=e.get(t);1===n?e.delete(t):e.set(t,n-1)}}function E(e,t,r){0!==r&&e.set(t,e.has(t)?e.get(t)+1:1)}function R(e,t,r){var n=t.x,a=t.y,i=r.width,o=r.height;if(0===n&&0===a&&o===e.height&&i===e.width)return e;var l=e.width,u=e.height,c=Math.max(0,a),h=Math.max(0,n),d=Math.min(n+i,l),p=Math.min(a+o,u);if(d<0||p<0||!f(e))return null;n=Math.max(0,-n),a=Math.max(0,-a);for(var v=e.pixels,m=i*o,g=v.length,b=[],y=0;y<g;y++){for(var w=v[y],x=s.a.createEmptyBand(e.pixelType,m),O=c;O<p;O++)for(var k=O*l,C=(O+a-c)*i+n,j=h;j<d;j++)x[C++]=w[k+j];b.push(x)}for(var A=new Uint8Array(m),S=e.mask,M=c;M<p;M++)for(var T=M*l,I=(M+a-c)*i+n,P=h;P<d;P++)A[I++]=S?S[T+P]:1;var E=new s.a({width:r.width,height:r.height,pixelType:e.pixelType,pixels:b,mask:A});return E.updateStatistics(),E}function U(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!f(e))return null;for(var r=e.pixels,n=e.width,a=e.height,i=e.mask,o=e.pixelType,l=[],u=Math.round(n/2),c=Math.round(a/2),h=a-1,d=n-1,p=0;p<r.length;p++){for(var v=r[p],m=s.a.createEmptyBand(o,u*c),g=0,b=0;b<a;b+=2)for(var y=0;y<n;y+=2){var w=v[b*n+y];if(t){var x=y===d?w:v[b*n+y+1],O=b===h?w:v[b*n+y+n],k=y===d?O:b===h?x:v[b*n+y+n+1];m[g++]=(w+x+O+k)/4}else m[g++]=w}l.push(m)}var C=null;if(null!=i){C=new Uint8Array(u*c);for(var j=0,A=0;A<a;A+=2)for(var S=0;S<n;S+=2){var M=i[A*n+S];if(t){var T=S===d?M:i[A*n+S+1],I=A===h?M:i[A*n+S+n],P=S===d?I:A===h?T:i[A*n+S+n+1];C[j++]=M*T*I*P?1:0}else C[j++]=M}}return new s.a({width:u,height:c,pixelType:o,pixels:l,mask:C})}function L(e,t,r){if(!f(e))return null;for(var n=t.width,a=t.height,i=e.width,o=e.height,l=new Map,s={x:0,y:0},u=null==r?1:1+r,c=e,h=0;h<u;h++){for(var d=Math.ceil(i/n),p=Math.ceil(o/a),v=0;v<p;v++){s.y=v*a;for(var m=0;m<d;m++){s.x=m*n;var g=R(c,s,t);l.set("".concat(h,"/").concat(v,"/").concat(m),g)}}h<u-1&&(c=U(c)),i=Math.round(i/2),o=Math.round(o/2)}return l}function D(e,t,r,n){for(var a,i,o,l,s,u,c,f,h,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,p=e.width,v=e.height,m=t.width,g=t.height,b=n.cols,y=n.rows,w=Math.ceil(m/b-.1/b),x=Math.ceil(g/y-.1/y),O=w*b,k=O*x*y,C=new Float32Array(k),j=new Float32Array(k),A=new Uint32Array(k),S=new Uint32Array(k),M=0,T=0;T<x;T++)for(var I=0;I<w;I++){i=r[a=12*(T*w+I)],o=r[a+1],l=r[a+2],s=r[a+3],u=r[a+4],c=r[a+5];for(var P=0;P<y;P++){M=(T*y+P)*O+I*b,h=(P+.5)/y;for(var E=0;E<P;E++)f=(E+.5)/b,C[M+E]=(i*f+o*h+l)*p+d,j[M+E]=(s*f+u*h+c)*v+d,A[M+E]=Math.floor(C[M+E]),S[M+E]=Math.floor(j[M+E])}i=r[a+=6],o=r[a+1],l=r[a+2],s=r[a+3],u=r[a+4],c=r[a+5];for(var R=0;R<y;R++){M=(T*y+R)*O+I*b,h=(R+.5)/y;for(var U=R;U<b;U++)f=(U+.5)/b,C[M+U]=(i*f+o*h+l)*p+d,j[M+U]=(s*f+u*h+c)*v+d,A[M+U]=Math.floor(C[M+U]),S[M+U]=Math.floor(j[M+U])}}return{offsets_x:C,offsets_y:j,offsets_xi:A,offsets_yi:S,gridWidth:O}}function G(e,t){for(var r=t.coefficients,n=t.spacing,a=D(e,e,r,{rows:n[0],cols:n[1]}),i=a.offsets_x,o=a.offsets_y,l=a.gridWidth,s=e.width,u=e.height,c=new Float32Array(s*u),f=180/Math.PI,h=0;h<u;h++)for(var d=0;d<s;d++){var p=h*l+d,v=0===h?p:p-l,m=h===u-1?p:p+l,g=i[v]-i[m],b=o[m]-o[v];if(isNaN(g)||isNaN(b))c[h*s+d]=90;else{var y=Math.atan2(b,g)*f;y=(360+y)%360,c[h*s+d]=y}}return c}function B(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"nearest";if(!f(e))return null;"majority"===a&&(e=T(e));for(var i=e,o=i.pixels,l=i.mask,u=i.bandMasks,c=i.pixelType,h=e.width,d=e.height,p=s.a.getPixelArrayConstructor(c),v=o.length,m=t.width,g=t.height,b=!1,y=0;y<r.length;y+=3)-1===r[y]&&-1===r[y+1]&&-1===r[y+2]&&(b=!0);for(var w,x,O=D({width:h,height:d},t,r,n,"majority"===a?.5:0),k=O.offsets_x,C=O.offsets_y,j=O.offsets_xi,A=O.offsets_yi,S=O.gridWidth,M=function(e,t,r,n){for(var a=e instanceof Float32Array||e instanceof Float64Array?0:.5,i=0;i<g;i++){w=i*S;for(var o=0;o<m;o++){if(k[w]<0||C[w]<0)e[i*m+o]=0;else if(n)e[i*m+o]=t[j[w]+A[w]*h];else{var l=Math.floor(k[w]),s=Math.floor(C[w]),u=Math.ceil(k[w]),c=Math.ceil(C[w]),f=k[w]-l,d=C[w]-s;if(!r||r[l+s*h]&&r[u+s*h]&&r[l+c*h]&&r[u+c*h]){var p=(1-f)*t[l+s*h]+f*t[u+s*h],v=(1-f)*t[l+c*h]+f*t[u+c*h];e[i*m+o]=(1-d)*p+d*v+a}else e[i*m+o]=t[j[w]+A[w]*h]}w++}}},I=[],P=(null===u||void 0===u?void 0:u.length)===v,E=[],R=0;R<v;R++){if(P){var U=new Uint8Array(m*g);M(U,u[R],u[R],!0),E.push(U)}M(x=new p(m*g),o[R],P?u[R]:l,"nearest"===a||"majority"===a),I.push(x)}var L=new s.a({width:m,height:g,pixelType:c,pixels:I,bandMasks:P?E:void 0});if(null!=l)L.mask=new Uint8Array(m*g),M(L.mask,l,l,!0);else if(b){L.mask=new Uint8Array(m*g);for(var G=0;G<m*g;G++)L.mask[G]=k[G]<0||C[G]<0?0:1}return L.updateStatistics(),L}},470:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return o}));var n=9999999e31,a=2e-7,i={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function o(e){var t;return null!==(t=i[e])&&void 0!==t?t:[-34028234663852886e22,34028234663852886e22]}function l(e,t,r){var i,l;if(!(e.depthCount&&e.depthCount>1)){for(var s=e.pixels,u=e.statistics,c=e.pixelType,f=s[0].length,h=null!==(i=e.bandMasks)&&void 0!==i?i:[],d=null!==(l=e.mask)&&void 0!==l?l:new Uint8Array(f).fill(255),p="f32"===c||"f64"===c,v=o(c),m=!1,g=0;g<s.length;g++){var b,y,w="number"==typeof t?t:t[g];if(null!=w){var x=null!==(b=null===u||void 0===u?void 0:u[g].minValue)&&void 0!==b?b:v[0],O=null!==(y=null===u||void 0===u?void 0:u[g].maxValue)&&void 0!==y?y:v[1];if(!(x>w+Number.EPSILON||O<w-Number.EPSILON)){var k=h[g]||new Uint8Array(f).fill(255),C=s[g],j=null===r||void 0===r?void 0:r.customFloatTolerance;if(p&&0!==j){var A=j;A||(A=Math.abs(w)>=n?a*Math.abs(w):"f32"===c?Math.pow(2,-23):Number.EPSILON);for(var S=0;S<C.length;S++)k[S]&&Math.abs(C[S]-w)<A&&(C[S]=0,k[S]=0,d[S]=0,m=!0)}else for(var M=0;M<C.length;M++)k[M]&&C[M]===w&&(C[M]=0,k[M]=0,d[M]=0,m=!0);h[g]=k}}}m&&(e.bandMasks=h,e.mask=d),m&&"updateStatistics"in e&&e.updateStatistics()}}},557:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var n,a=r(89),i=r(88),o=r(90),l=r(91),s=r(94),u=r(105),c=r(116),f=r(97),h=(r(96),r(95)),d=r(130),p=r(125);r(98),r(93);function v(e){return e=Number(e),isNaN(e)?void 0:e}var m=n=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).name=null,e.minWavelength=void 0,e.maxWavelength=void 0,e.radianceBias=void 0,e.radianceGain=void 0,e.reflectanceBias=void 0,e.reflectanceGain=void 0,e.solarIrradiance=void 0,e}return Object(i.a)(r,[{key:"clone",value:function(){return new n({name:this.name,minWavelength:this.minWavelength,maxWavelength:this.maxWavelength,radianceBias:this.radianceBias,radianceGain:this.radianceGain,reflectanceBias:this.reflectanceBias,reflectanceGain:this.reflectanceGain,solarIrradiance:this.solarIrradiance})}}]),r}(u.a);Object(s.a)([Object(f.b)({json:{name:"BandName",write:!0}})],m.prototype,"name",void 0),Object(s.a)([Object(f.b)({json:{name:"WavelengthMin",read:{reader:v},write:!0}})],m.prototype,"minWavelength",void 0),Object(s.a)([Object(f.b)({json:{name:"WavelengthMax",read:{reader:v},write:!0}})],m.prototype,"maxWavelength",void 0),Object(s.a)([Object(f.b)({json:{name:"RadianceBias",read:{reader:v},write:!0}})],m.prototype,"radianceBias",void 0),Object(s.a)([Object(f.b)({json:{name:"RadianceGain",read:{reader:v},write:!0}})],m.prototype,"radianceGain",void 0),Object(s.a)([Object(f.b)({json:{name:"ReflectanceBias",read:{reader:v},write:!0}})],m.prototype,"reflectanceBias",void 0),Object(s.a)([Object(f.b)({json:{name:"ReflectanceGain",read:{reader:v},write:!0}})],m.prototype,"reflectanceGain",void 0),Object(s.a)([Object(f.b)({json:{name:"SolarIrradiance",read:{reader:v},write:!0}})],m.prototype,"solarIrradiance",void 0);var g,b=m=n=Object(s.a)([Object(h.a)("esri.layers.support.RasterBandInfo")],m),y=r(136),w=r(137);function x(e){return e=Number(e),isNaN(e)?void 0:e}var O=g=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).acquisitionDate=void 0,e.cloudCover=void 0,e.productName=void 0,e.sensorName=null,e.sensorAzimuth=void 0,e.sensorElevation=void 0,e.sunAzimuth=void 0,e.sunElevation=void 0,e}return Object(i.a)(r,[{key:"readAcquisitionDate",value:function(e){return new Date(e)}},{key:"writeAcquisitionDate",value:function(e,t){t.AcquisitionDate=e.getTime()}},{key:"clone",value:function(){return new g({acquisitionDate:this.acquisitionDate,cloudCover:this.cloudCover,productName:this.productName,sensorName:this.sensorName,sensorAzimuth:this.sensorAzimuth,sensorElevation:this.sensorElevation,sunAzimuth:this.sunAzimuth,sunElevation:this.sunElevation})}}]),r}(u.a);Object(s.a)([Object(f.b)({json:{name:"AcquisitionDate",write:!0}})],O.prototype,"acquisitionDate",void 0),Object(s.a)([Object(y.a)("acquisitionDate")],O.prototype,"readAcquisitionDate",null),Object(s.a)([Object(w.a)("acquisitionDate")],O.prototype,"writeAcquisitionDate",null),Object(s.a)([Object(f.b)({json:{name:"CloudCover",read:{reader:x},write:!0}})],O.prototype,"cloudCover",void 0),Object(s.a)([Object(f.b)({json:{name:"ProductName",write:!0}})],O.prototype,"productName",void 0),Object(s.a)([Object(f.b)({json:{name:"SensorName",write:!0}})],O.prototype,"sensorName",void 0),Object(s.a)([Object(f.b)({json:{name:"SensorAzimuth",read:{reader:x},write:!0}})],O.prototype,"sensorAzimuth",void 0),Object(s.a)([Object(f.b)({json:{name:"SensorElevation",read:{reader:x},write:!0}})],O.prototype,"sensorElevation",void 0),Object(s.a)([Object(f.b)({json:{name:"SunAzimuth",read:{reader:x},write:!0}})],O.prototype,"sunAzimuth",void 0),Object(s.a)([Object(f.b)({json:{name:"SunElevation",read:{reader:x},write:!0}})],O.prototype,"sunElevation",void 0);var k,C=O=g=Object(s.a)([Object(h.a)("esri.layers.support.RasterSensorInfo")],O),j=r(815),A=k=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).attributeTable=null,n.bandCount=null,n.colormap=null,n.extent=null,n.format=void 0,n.height=null,n.width=null,n.histograms=null,n.keyProperties={},n.multidimensionalInfo=null,n.noDataValue=null,n.pixelSize=null,n.pixelType=null,n.isPseudoSpatialReference=!1,n.spatialReference=null,n.statistics=null,n.storageInfo=null,n.transform=null,n}return Object(i.a)(r,[{key:"bandInfos",get:function(){var e=this.keyProperties.BandProperties;if(null===e||void 0===e||!e.length){for(var t=[],r=1;r<=this.bandCount;r++)t.push(new b({name:"band_"+r}));return t}for(var n=e.map((function(e){return b.fromJSON(e)})),a=0;a<n.length;a++){var i;n[a].name=null!==(i=n[a].name)&&void 0!==i?i:"band_"+(a+1)}return n}},{key:"dataType",get:function(){var e,t,r=null!==(e=null===(t=this.keyProperties)||void 0===t||null===(t=t.DataType)||void 0===t?void 0:t.toLowerCase())&&void 0!==e?e:"generic";return"stdtime"===r?"standard-time":r}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(e){e&&this._set("nativeExtent",e)}},{key:"nativePixelSize",get:function(){if(null==this.transform||!this.transform.affectsPixelSize)return this.pixelSize;var e=this.nativeExtent;return{x:e.width/this.width,y:e.height/this.height}}},{key:"hasMultidimensionalTranspose",get:function(){var e;return!(null===(e=this.storageInfo)||void 0===e||!e.transposeInfo)}},{key:"sensorInfo",get:function(){var e;if(null!==(e=this.keyProperties)&&void 0!==e&&e.SensorName)return C.fromJSON(this.keyProperties)}},{key:"clone",value:function(){return new k({attributeTable:Object(c.a)(this.attributeTable),bandCount:this.bandCount,colormap:Object(c.a)(this.colormap),extent:Object(c.a)(this.extent),nativePixelSize:Object(c.a)(this.nativePixelSize),format:this.format,height:this.height,width:this.width,histograms:Object(c.a)(this.histograms),keyProperties:Object(c.a)(this.keyProperties),multidimensionalInfo:Object(c.a)(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:Object(c.a)(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:Object(c.a)(this.spatialReference),statistics:Object(c.a)(this.statistics),storageInfo:Object(c.a)(this.storageInfo),transform:Object(c.a)(this.transform)})}}]),r}(u.a);Object(s.a)([Object(f.b)({json:{write:!0}})],A.prototype,"attributeTable",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],A.prototype,"bandCount",void 0),Object(s.a)([Object(f.b)({readOnly:!0})],A.prototype,"bandInfos",null),Object(s.a)([Object(f.b)({json:{write:!0}})],A.prototype,"colormap",void 0),Object(s.a)([Object(f.b)({type:String,readOnly:!0})],A.prototype,"dataType",null),Object(s.a)([Object(f.b)({type:d.a,json:{write:!0}})],A.prototype,"extent",void 0),Object(s.a)([Object(f.b)({type:d.a,json:{write:!0}})],A.prototype,"nativeExtent",null),Object(s.a)([Object(f.b)({json:{write:!0}})],A.prototype,"nativePixelSize",null),Object(s.a)([Object(f.b)({json:{write:!0}})],A.prototype,"format",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],A.prototype,"height",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],A.prototype,"width",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],A.prototype,"hasMultidimensionalTranspose",null),Object(s.a)([Object(f.b)({json:{write:!0}})],A.prototype,"histograms",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],A.prototype,"keyProperties",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],A.prototype,"multidimensionalInfo",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],A.prototype,"noDataValue",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],A.prototype,"pixelSize",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],A.prototype,"pixelType",void 0),Object(s.a)([Object(f.b)()],A.prototype,"isPseudoSpatialReference",void 0),Object(s.a)([Object(f.b)({readOnly:!0})],A.prototype,"sensorInfo",null),Object(s.a)([Object(f.b)({type:p.a,json:{write:!0}})],A.prototype,"spatialReference",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],A.prototype,"statistics",void 0),Object(s.a)([Object(f.b)({type:j.a,json:{write:!0}})],A.prototype,"storageInfo",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],A.prototype,"transform",void 0);var S=A=k=Object(s.a)([Object(h.a)("esri.layers.support.RasterInfo")],A)},571:function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return g})),r.d(t,"d",(function(){return I})),r.d(t,"e",(function(){return T})),r.d(t,"f",(function(){return f})),r.d(t,"g",(function(){return P})),r.d(t,"h",(function(){return b})),r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return d}));var n=r(99),a=r(146),i=r(414),o=r(420),l=new Map;l.set("meter-per-second",1),l.set("kilometer-per-hour",.277778),l.set("knots",.514444),l.set("feet-per-second",.3048),l.set("mile-per-hour",.44704);var s=180/Math.PI,u=5,c=new a.a({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function f(e,t){return l.get(e)/l.get(t)||1}function h(e){return(450-e)%360}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geographic",r=Object(n.a)(e,2),a=r[0],i=r[1],o=Math.sqrt(a*a+i*i),l=Math.atan2(i,a)*s;return l=(360+l)%360,"geographic"===t&&(l=h(l)),[o,l]}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geographic",r=e[1];"geographic"===t&&(r=h(r)),r%=360;var n=e[0];return[n*Math.cos(r/s),n*Math.sin(r/s)]}function v(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"geographic";if(!Object(o.k)(e)||null==r)return e;for(var a="vector-magdir"===t?e.clone():m(e,t),i=a.pixels[1],l=0;l<i.length;l++)i[l]="geographic"===n?(i[l]+r[l]+270)%360:(i[l]+360-r[l])%360;return"vector-magdir"===t?a:m(a,"vector-magdir")}function m(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"geographic",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!Object(o.k)(e))return e;for(var l=e.pixels,s=e.width,u=e.height,c=s*u,f=l[0],h=l[1],v=e.pixelType.startsWith("f")?e.pixelType:"f32",m=i.a.createEmptyBand(v,c),g=i.a.createEmptyBand(v,c),b=0,y=0;y<u;y++)for(var w=0;w<s;w++){var x,O,k,C;"vector-uv"===t?(x=d([f[b],h[b]],r),O=Object(n.a)(x,2),m[b]=O[0],g[b]=O[1],m[b]*=a):(k=p([f[b],h[b]],r),C=Object(n.a)(k,2),m[b]=C[0],g[b]=C[1],m[b]*=a,g[b]*=a),b++}var j=new i.a({pixelType:v,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[m,g]});return j.updateStatistics(),j}function g(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(1===r||!Object(o.k)(e))return e;for(var n=e.clone(),a=n.pixels,i=n.width,l=n.height,s=a[0],u=a[1],c=0,f=0;f<l;f++)for(var h=0;h<i;h++)"vector-uv"===t?(s[c]*=r,u[c]*=r):s[c]*=r,c++;return n.updateStatistics(),n}function b(e,t,r,n,a){if(null==a||!a.spatialReference.equals(e.spatialReference))return{extent:e,width:Math.round(t/n),height:Math.round(r/n),resolution:e.width/t};var i=a.xmin,o=a.ymax,l=(e.xmax-e.xmin)/t*n,s=(e.ymax-e.ymin)/r*n,u=(l+s)/2;return e.xmin=i+Math.floor((e.xmin-i)/l)*l,e.xmax=i+Math.ceil((e.xmax-i)/l)*l,e.ymin=o+Math.floor((e.ymin-o)/s)*s,e.ymax=o+Math.ceil((e.ymax-o)/s)*s,{extent:e,width:Math.round(e.width/l),height:Math.round(e.height/s),resolution:u}}var y=w(0,0,0);function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.PI,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];a&&(r=(2*Math.PI-r)%(2*Math.PI));var i=a?-1:1,o=-7*i,l=-2*i,s=-16*i,u=21.75,c=O(0,t+13*i,r,u),f=Object(n.a)(c,2),h=f[0],d=f[1],p=O(e-5.5,t+o,r,u),v=Object(n.a)(p,2),m=v[0],g=v[1],b=O(e+5.5,t+o,r,u),y=Object(n.a)(b,2),w=y[0],x=y[1],k=O(e-1.5,t+l,r,u),C=Object(n.a)(k,2),j=C[0],A=C[1],S=O(e+1.5,t+l,r,u),M=Object(n.a)(S,2),T=M[0],I=M[1],P=O(e-1.5,t+s,r,u),E=Object(n.a)(P,2),R=E[0],U=E[1],L=O(e+1.5,t+s,r,u),D=Object(n.a)(L,2);return[h,d,m,g,j,A,T,I,w,x,R,U,D[0],D[1]]}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];r&&(t=(2*Math.PI-t)%(2*Math.PI));var a=r?-1:1,i=5*a,o=20*a,l=25*a,s=45,c=2*a,f=r?1:-1,h=5*f,d=0+h,p=0-o,v=d+2*f,m=p,g=v-0*f,b=m+c,y=0-h,w=0-l,x=y+0*f,k=w-c,C=Math.ceil(e/u),j=Math.floor(C/10);C-=8*j;for(var A=[],S=[],M=0;M<C/2;M++,j--){j<=0&&C%2==1&&M===(C-1)/2&&(x=(y=0)+0*f,k=(w=(w+p)/2)-c);var T=O(y,w,t,s),I=Object(n.a)(T,2),P=I[0],E=I[1];if(j>0){var R=O(v,w,t,s),U=Object(n.a)(R,2),L=U[0],D=U[1],G=O(d,p,t,s),B=Object(n.a)(G,2),N=B[0],F=B[1];A.push(L),A.push(D),A.push(P),A.push(E),A.push(N),A.push(F)}else{var V=O(v,m,t,s),_=Object(n.a)(V,2),z=_[0],W=_[1],H=O(g,b,t,s),q=Object(n.a)(H,2),J=q[0],K=q[1],Y=O(x,k,t,s),X=Object(n.a)(Y,2),Z=X[0],Q=X[1];S.push(P),S.push(E),S.push(Z),S.push(Q),S.push(J),S.push(K),S.push(z),S.push(W)}w+=i,p+=i,m+=i,b+=i,k+=i}var $=O(0+h,0+o,t,s),ee=Object(n.a)($,2),te=ee[0],re=ee[1],ne=7*f,ae=O(0+ne,0+o,t,s),ie=Object(n.a)(ae,2),oe=ie[0],le=ie[1],se=O(0+h,0-l,t,s),ue=Object(n.a)(se,2),ce=ue[0],fe=ue[1],he=O(0+ne,0-l,t,s),de=Object(n.a)(he,2);return{pennants:A,barbs:S,shaft:[te,re,oe,le,ce,fe,de[0],de[1]]}}function O(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=Math.sqrt(e*e+t*t)/n,i=(2*Math.PI+Math.atan2(t,e))%(2*Math.PI);return[a,(2*Math.PI+i-r)%(2*Math.PI)]}var k=[0,1,3,6,10,16,21,27,33,40,47,55,63],C=[0,.5,1,1.5,2],j=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function A(e,t,r,n){var a,i=f(n||"knots",r);for(a=1;a<t.length;a++)if(a===t.length-1){if(e<t[a]*i)break}else if(e<=t[a]*i)break;return Math.min(a-1,t.length-2)}function S(e,t,r,n,a){var i=0;switch(t){case"beaufort_kn":i=A(e,k,"knots",r);break;case"beaufort_km":i=A(e,k,"kilometer-per-hour",r);break;case"beaufort_ft":i=A(e,k,"feet-per-second",r);break;case"beaufort_m":i=A(e,k,"meter-per-second",r);break;case"classified_arrow":i=A(e,null!==a&&void 0!==a?a:[],n,r);break;case"ocean_current_m":i=A(e,C,"meter-per-second",r);break;case"ocean_current_kn":i=A(e,j,"knots",r)}return i}var M=[];function T(e,t){for(var r=0,n=0,a=e.width,i=e.height,o=e.mask,l=e.pixels[0],s=[],h=[],d=f(c.fromJSON(t.inputUnit),"knots"),p="wind_speed"===t.style?u:Number.MAX_VALUE,v=0;v<i;v++)for(var m=0;m<a;m++){var g=l[v*a+m]*d;if((!o||o[v*a+m])&&g<p){for(var b=0;b<4;b++)s[r++]=(m+.5)/a,s[r++]=(v+.5)/i,s[r++]=b<2?-.5:.5,s[r++]=b%2==0?-.5:.5,s[r++]=0,s[r++]=g;var y=4*(r/24-1);h[n++]=y,h[n++]=y+1,h[n++]=y+2,h[n++]=y+1,h[n++]=y+2,h[n++]=y+3}}return{vertexData:new Float32Array(s),indexData:new Uint32Array(h)}}function I(e,t){return"simple_scalar"===t.style?T(e,t):"wind_speed"===t.style?function(e,t){if(0===M.length)for(var r=0;r<30;r++)M.push(x(5*r,0,!t.invertDirection));for(var n=f(c.fromJSON(t.inputUnit),"knots"),a=e.width,i=e.height,o=e.mask,l=e.pixels[0],s=e.pixels[1],h=[],d=[],p=0,v=0,m=0;m<i;m++)for(var g=0;g<a;g++){var b=m*a+g,y=l[b]*n;if((!o||o[m*a+g])&&y>=u){var w=(s[b]+360)%360/180*Math.PI,O=M[Math.min(Math.floor(y/5),29)],k=O.pennants,C=O.barbs,j=O.shaft;if(k.length+C.length===0)continue;for(var A=h.length/6,S=(g+.5)/a,T=(m+.5)/i,I=0;I<k.length;I+=2)h[p++]=S,h[p++]=T,h[p++]=k[I],h[p++]=k[I+1]+w,h[p++]=0,h[p++]=y;for(var P=0;P<C.length;P+=2)h[p++]=S,h[p++]=T,h[p++]=C[P],h[p++]=C[P+1]+w,h[p++]=0,h[p++]=y;for(var E=0;E<j.length;E+=2)h[p++]=S,h[p++]=T,h[p++]=j[E],h[p++]=j[E+1]+w,h[p++]=0,h[p++]=y;for(var R=0;R<k.length/6;R++)d[v++]=A,d[v++]=A+1,d[v++]=A+2,A+=3;for(var U=0;U<C.length/8;U++)d[v++]=A,d[v++]=A+1,d[v++]=A+2,d[v++]=A+1,d[v++]=A+2,d[v++]=A+3,A+=4;d[v++]=A+0,d[v++]=A+1,d[v++]=A+2,d[v++]=A+1,d[v++]=A+3,d[v++]=A+2,A+=4}}return{vertexData:new Float32Array(h),indexData:new Uint32Array(d)}}(e,t):function(e,t){for(var r=t.style,n=t.inputUnit,a=t.outputUnit,i=t.breakValues,o=c.fromJSON(n),l=c.fromJSON(a),s=0,u=0,f=e.width,h=e.height,d=e.mask,p=e.pixels[0],v=e.pixels[1],m=null!=d?d.filter((function(e){return e>0})).length:f*h,g=new Float32Array(42*m),b=new Uint32Array(15*m),x=t.invertDirection?w(0,0,0,!1):y,O=0;O<h;O++)for(var k=0;k<f;k++){var C=O*f+k;if(!d||d[O*f+k]){for(var j=(v[C]+360)%360/180*Math.PI,A=S(p[C],r,o,l,i),M=0;M<x.length;M+=2)g[s++]=(k+.5)/f,g[s++]=(O+.5)/h,g[s++]=x[M],g[s++]=x[M+1]+j,g[s++]=A,g[s++]=p[C];var T=7*(s/42-1);b[u++]=T,b[u++]=T+1,b[u++]=T+2,b[u++]=T+0,b[u++]=T+4,b[u++]=T+3,b[u++]=T+0,b[u++]=T+2,b[u++]=T+3,b[u++]=T+2,b[u++]=T+5,b[u++]=T+3,b[u++]=T+5,b[u++]=T+6,b[u++]=T+3}}return{vertexData:g,indexData:b}}(e,t)}function P(e,t,r){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,l=e.width,s=e.height,u=e.mask,c=Object(n.a)(e.pixels,2),f=c[0],h=c[1],v=Object(n.a)(a,2),m=v[0],g=v[1],b=Math.round((l-m)/r),y=Math.round((s-g)/r),w=b*y,x=new Float32Array(w),O=new Float32Array(w),k=new Uint8Array(w),C="vector-uv"===t,j=0;j<y;j++)for(var A=0;A<b;A++){for(var S=0,M=j*b+A,T=Math.max(0,j*r+g),I=Math.max(0,A*r+m),P=Math.min(s,T+r),E=Math.min(l,I+r),R=T;R<P;R++)for(var U=I;U<E;U++){var L=R*l+U;if(!u||u[L]){S++;var D=C?[f[L],h[L]]:[f[L],(360+h[L])%360],G=C?D:p(D),B=Object(n.a)(G,2),N=B[0],F=B[1];x[M]+=N,O[M]+=F}}if(S>=(P-T)*(E-I)*(1-o)){k[M]=1;var V=d([x[M]/S,O[M]/S]),_=Object(n.a)(V,2),z=_[0],W=_[1];x[M]=z,O[M]=W}else k[M]=0,x[M]=0,O[M]=0}var H=new i.a({width:b,height:y,pixels:[x,O],mask:k});return H.updateStatistics(),H}},600:function(e,t,r){"use strict";function n(e){return"h"in e&&"s"in e&&"v"in e}function a(e){return"l"in e&&"a"in e&&"b"in e}function i(e){return"l"in e&&"c"in e&&"h"in e}function o(e){return"x"in e&&"y"in e&&"z"in e}r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return y})),r.d(t,"d",(function(){return m}));var l=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],s=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function u(e,t){var r,n,a=[];if(e[0].length!==t.length)throw new Error("dimensions do not match");var i=e.length,o=e[0].length,l=0;for(r=0;r<i;r++){for(l=0,n=0;n<o;n++)l+=e[r][n]*t[n];a.push(l)}return a}function c(e){var t=[e.r/255,e.g/255,e.b/255].map((function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)})),r=u(l,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function f(e){var t=u(s,[e.x/100,e.y/100,e.z/100]).map((function(e){var t=e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function h(e){var t=[e.x/95.047,e.y/100,e.z/108.883].map((function(e){return e>Math.pow(6/29,3)?Math.pow(e,1/3):1/3*Math.pow(29/6,2)*e+4/29}));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function d(e){var t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((function(e){return e>6/29?Math.pow(e,3):3*Math.pow(6/29,2)*(e-4/29)}));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function p(e){return function(e){var t=e.l,r=e.a,n=e.b,a=Math.sqrt(r*r+n*n),i=Math.atan2(n,r);return{l:t,c:a,h:i=i>0?i:i+2*Math.PI}}(h(c(e)))}function v(e){return f(d(function(e){var t=e.l,r=e.c,n=e.h;return{l:t,a:r*Math.cos(n),b:r*Math.sin(n)}}(e)))}function m(e){return function(e){return"r"in e&&"g"in e&&"b"in e}(e)?e:i(e)?v(e):a(e)?function(e){return f(d(e))}(e):o(e)?f(e):n(e)?function(e){var t,r=(e.h+360)%360/60,n=e.s/100,a=e.v/100*255,i=a*n,o=i*(1-Math.abs(r%2-1));switch(Math.floor(r)){case 0:t={r:i,g:o,b:0};break;case 1:t={r:o,g:i,b:0};break;case 2:t={r:0,g:i,b:o};break;case 3:t={r:0,g:o,b:i};break;case 4:t={r:o,g:0,b:i};break;case 5:case 6:t={r:i,g:0,b:o};break;default:t={r:0,g:0,b:0}}return t.r=Math.round(t.r+a-i),t.g=Math.round(t.g+a-i),t.b=Math.round(t.b+a-i),t}(e):e}function g(e){return n(e)?e:function(e){var t=e.r,r=e.g,n=e.b,a=Math.max(t,r,n),i=a-Math.min(t,r,n),o=a,l=0===i?0:a===t?(r-n)/i%6:a===r?(n-t)/i+2:(t-r)/i+4,s=0===i?0:i/o;return l<0&&(l+=6),{h:l*=60,s:s*=100,v:o*=100/255}}(m(e))}function b(e){return a(e)?e:function(e){return h(c(e))}(m(e))}function y(e){return i(e)?e:p(m(e))}},685:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return w})),r.d(t,"d",(function(){return y})),r.d(t,"e",(function(){return C})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return v})),r.d(t,"h",(function(){return k})),r.d(t,"i",(function(){return s}));var n=r(1),a=r(112),i=r(143),o=r(600),l=r(146),s=["random","ndvi","ndvi2","ndvi3","elevation","gray","hillshade"],u=[{id:"aspect",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"black-to-white",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blue-bright",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blue-light-to-dark",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blue-green-bright",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blue-green-light-to-dark",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brown-light-to-dark",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brown-to-blue-green-diverging-right",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brown-to-blue-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficient-bias",fromColor:[214,214,255],toColor:[0,57,148]},{id:"cold-to-hot-diverging",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"condition-number",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyan-to-purple",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyan-light-to-blue-dark",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors",fromColor:[255,235,214],toColor:[196,10,10]},{id:"gray-light-to-dark",fromColor:[219,219,219],toColor:[69,69,69]},{id:"green-bright",fromColor:[204,255,204],toColor:[14,204,14]},{id:"green-light-to-dark",fromColor:[220,245,233],toColor:[34,102,51]},{id:"green-to-blue",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orange-bright",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orange-light-to-dark",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partial-spectrum",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partial-spectrum-1-diverging",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partial-spectrum-2-diverging",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pink-to-yellow-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pink-to-yellow-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purple-bright",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purple-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purple-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purple-blue-bright",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purple-blue-light-to-dark",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purple-red-bright",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purple-red-light-to-dark",fromColor:[250,215,246],toColor:[143,17,57]},{id:"red-bright",fromColor:[255,204,204],toColor:[219,0,0]},{id:"red-light-to-dark",fromColor:[255,224,224],toColor:[143,10,10]},{id:"red-to-blue-diverging-bright",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"red-to-blue-diverging-dark",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"red-to-green",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"red-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"red-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrum-full-bright",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrum-full-dark",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrum-full-light",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"white-to-black",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellow-to-dark-red",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellow-to-green-to-dark-blue",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellow-to-red",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellow-green-bright",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellow-green-light-to-dark",fromColor:[215,240,175],toColor:[96,107,45]}],c=new l.a({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","Purple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});function f(e,t){if(!e||!t||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]>t[r]+2||e[r]<t[r]-2)return!1;return!0}function h(e){var t=e.clone();return t.fromColor=e.toColor,t.toColor=e.fromColor,t.algorithm=e.algorithm,t}function d(e,t){if(e){var r=null!==t&&void 0!==t?t:u,n=null;return"algorithmic"===e.type?r.some((function(t){if(f(e.fromColor.toRgb(),t.fromColor)&&f(e.toColor.toRgb(),t.toColor))return n=t.id,!0})):"multipart"===e.type&&r.some((function(t){var r=e.colorRamps,a=t.colorRamps;if(r&&a&&r.length===a.length&&!a.some((function(e,t){if(!f(r[t].fromColor.toRgb(),new i.a(e.fromColor).toRgb())||!f(r[t].toColor.toRgb(),new i.a(e.toColor).toRgb()))return!0}))){if(n)return!0;n=t.id}})),n}}function p(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){var n=d(e,t);return null!=n||r||(n=d(e=function(e){if("multipart"===e.type){var t,r=e.clone();return null!==(t=r.colorRamps)&&void 0!==t&&t.length?(r.colorRamps=r.colorRamps.reverse().map((function(e){return h(e)})),r):r}return h(e)}(e),t)),n}}function v(e){var t="string"==typeof e?e:p(e,void 0,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);return t?c.toJSON(t):null}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"esriCIELabAlgorithm",r=u.find((function(t){return t.id===e}));return r?r.colorRamps?{type:"multipart",colorRamps:r.colorRamps.map((function(e){return{type:"algorithmic",algorithm:t,fromColor:Object(a.a)(e.fromColor),toColor:Object(a.a)(e.toColor)}}))}:{type:"algorithmic",algorithm:t,fromColor:Object(a.a)(r.fromColor),toColor:Object(a.a)(r.toColor)}:null}function g(e){var t=(e=e||{}).numColors||256,r=e.distanceOffset||0,a=null!=e.isCustomInterval?e.isCustomInterval:null!==e.distanceInterval&&e.distanceInterval!==1/(t-1),i=e.distanceInterval||1/(t-1);return Object(n.a)(Object(n.a)({},e),{},{numColors:t,distanceOffset:r,interpolateAlpha:!!e.interpolateAlpha,distanceInterval:i,isCustomInterval:a,weights:e.weights})}function b(e,t){var r,i,l=e.fromColor,s=e.toColor;l=Object(a.a)(l),s=Object(a.a)(s),3===l.length&&(l=l.concat([255])),3===s.length&&(s=s.concat([255]));var u=e.algorithm||"esriCIELabAlgorithm",c=g(t),f=c.numColors,h=c.distanceOffset,d=c.isCustomInterval,p=c.interpolateAlpha;if(1===f&&0===h)return[l];if(2===f&&0===h&&!d)return[l,s];for(var v={r:l[0],g:l[1],b:l[2]},m={r:s[0],g:s[1],b:s[2]},b="esriCIELabAlgorithm"===u?function(e,t,r){var n=r.numColors,a=r.distanceOffset,i=r.distanceInterval,o=r.isCustomInterval,l=e.l,s=e.a,u=e.b,c=(t.l-l)*i,f=(t.a-s)*i,h=(t.b-u)*i,d=[];if(a){var p=a/i;l+=p*c,s+=p*f,u+=p*h}for(var v=0;v<n-1;v++)d.push({l:l,a:s,b:u}),l+=c,s+=f,u+=h;return d.push(o?{l:l,a:s,b:u}:t),d}(Object(o.b)(v),Object(o.b)(m),c):"esriHSVAlgorithm"===u?function(e,t,r){var a=r.numColors,i=r.distanceOffset,o=r.distanceInterval,l=r.isCustomInterval,s=0===e.s,u=0===t.s,c=e.h,f=t.h;s&&!u?c=f:u&&!s&&(t=Object(n.a)(Object(n.a)({},t),{},{h:c}),f=c);var h,d=Math.abs(f-c),p=360;d<180?h=(f-c)*o:(d=p-d,h=c>f?d*o:-d*o);var v=(t.s-e.s)*o,m=(t.v-e.v)*o,g=e.s,b=e.v,y=c;if(i){var w=i/o;y=(y+w*h+p)%p,g+=w*v,b+=w*m}for(var x=[],O=0;O<a-1;O++)x.push({h:y,s:g,v:b}),y=(y+h+p)%p,g+=v,b+=m;return x.push(l?{h:y,s:g,v:b}:t),x}(Object(o.a)(v),Object(o.a)(m),c):function(e,t,r){var n,a=r.numColors,i=r.distanceOffset,o=r.distanceInterval,l=r.isCustomInterval,s=e.h,u=t.h,c=2*Math.PI;if(s<=u){var f=u-s,h=u-s-c;n=Math.abs(h)<Math.abs(f)?h:f}else{var d=u+c-s,p=u-s;n=Math.abs(p)<Math.abs(d)?p:d}var v=n*o,m=(t.l-e.l)*o,g=(t.c-e.c)*o,b=e.l,y=e.c,w=e.h;if(i){var x=i/o;b+=x*m,y+=x*g,w=(w+x*v+c)%c}for(var O=[],k=0;k<a-1;k++)O.push({l:b,c:y,h:w}),b+=m,y+=g,w=(w+v+c)%c;return O.push(l?{l:b,c:y,h:w}:t),O}(Object(o.c)(v),Object(o.c)(m),c),y=[],w=null!==(r=l[3])&&void 0!==r?r:255,x=((null!==(i=s[3])&&void 0!==i?i:255)-w)/(f-1),O=0;O<f;O++){var k=Object(o.d)(b[O]),C=k.r,j=k.g,A=k.b,S=p?Math.round(w+x*O):255;y.push([C,j,A,S])}return y}function y(e,t){var r="toJSON"in e?e.toJSON():e;return"multipart"===r.type?function(e,t){var r=g(t),n=r.numColors,i=r.interpolateAlpha,o=null===t||void 0===t?void 0:t.weights,l=e.colorRamps;if(o){var s=o.reduce((function(e,t){return e+t}));o=o.map((function(e){return e/s}))}else{o=[];for(var u=0;u<l.length;u++)o[u]=1/l.length}for(var c=[],f=0,h=0,d=1/(n-1),p=!1,v=0;v<l.length;v++){var m=p?0:f*d-h,y=v===l.length-1?n-1-f:(o[v]-m)/d;if(p=Math.ceil(y)===y,0!==(y=Math.ceil(y))){m/=o[v];var w=b(l[v],{numColors:y,interpolateAlpha:i,distanceOffset:m,distanceInterval:d/o[v]});f+=w.length,c.push.apply(c,Object(a.a)(w)),h+=o[v]}}var x=Object(a.a)(l[l.length-1].toColor);return 3===x.length&&x.push(255),c.push(x),c}(r,t):b(r,t)}function w(e,t){var r=y(e,t),n=null===t||void 0===t?void 0:t.interpolateAlpha;return r.forEach((function(e,t){e.unshift(t),n||e.pop()})),r}function x(e){var t=Object(o.a)(e);return{type:"HsvColor",Hue:t.h,Saturation:t.s,Value:t.v,AlphaValue:255}}function O(e){var t=e.toJSON();return{Algorithm:(null===t||void 0===t?void 0:t.Algorithm)||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:x(e.fromColor),ToColor:x(e.toColor)}}function k(e){var t=v(e);if(!t)return null;if("algorithmic"===e.type)return Object(n.a)(Object(n.a)({},O(e)),{},{Name:t});if(e.colorRamps){var r=e.colorRamps.map(O);return{type:"MultiPartColorRamp",NumColorRamps:r.length,ArrayOfColorRamp:r,Name:t}}return null}function C(e){var t=e.reverse().map((function(e){var t=e.toString(16);return t.length<2?"0"+t:t}));return 4294967295&Number.parseInt(t.join(""),16)}},738:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return v})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return g})),r.d(t,"g",(function(){return m})),r.d(t,"h",(function(){return b})),r.d(t,"i",(function(){return w}));var n=r(112),a=r(99),i=r(111),o=r(414),l=r(470),s=r(1175),u=1,c=[.299,.587,.114];function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256;t=Math.min(t,256);for(var r=e.size,n=e.counts,a=new Uint8Array(r),i=n.reduce((function(e,r){return e+r/t}),0),o=0,l=0,s=0,u=i,c=0;c<r;c++)if(s+=n[c],!(c<r-1&&s+n[c+1]<u)){for(;o<t-1&&u<s;)o++,u+=i;for(var f=l;f<=c;f++)a[f]=o;l=c+1}for(var h=l;h<r;h++)a[h]=t-1;return a}function h(e){var t=e.minCutOff,r=e.maxCutOff,n=e.gamma,a=e.pixelType,i=e.rounding,o=e.outMin||0,l=e.outMax||255;if(!["u8","u16","s8","s16"].includes(a))return null;var s,u,c=t.length,f=0;"s8"===a?f=-127:"s16"===a&&(f=-32767);var h=256;["u16","s16"].includes(a)&&(h=65536);var d,p=[],v=[],m=l-o;for(s=0;s<c;s++)v[s]=r[s]-t[s],p[s]=0===v[s]?0:m/v[s];var g,b,w,x=[];if(n&&n.length>=c){var O=y(c,n);for(s=0;s<c;s++){for(w=[],u=0;u<h;u++)if(0!==v[s])if(d=((g=u+f)-t[s])/v[s],b=1,n[s]>1&&(b-=Math.pow(1/m,d*O[s])),g<r[s]&&g>t[s]){var k=b*m*Math.pow(d,1/n[s])+o;w[u]="floor"===i?Math.floor(k):"round"===i?Math.round(k):k}else g>=r[s]?w[u]=l:w[u]=o;else w[u]=o;x[s]=w}}else for(s=0;s<c;s++){for(w=[],u=0;u<h;u++)if((g=u+f)<=t[s])w[u]=o;else if(g>=r[s])w[u]=l;else{var C=(g-t[s])*p[s]+o;w[u]="floor"===i?Math.floor(C):"round"===i?Math.round(C):C}x[s]=w}if(null!=e.contrastOffset){var j=function(e,t){var r=Math.min(Math.max(e,-100),100),n=Math.min(Math.max(null!==t&&void 0!==t?t:0,-100),100),a=255,i=128,o=0,l=0,s=new Uint8Array(256);for(o=0;o<256;o++)r>0&&r<100?l=(200*o-100*a+2*a*n)/(2*(100-r))+i:r<=0&&r>-100?l=(200*o-100*a+2*a*n)*(100+r)/2e4+i:100===r?l=(l=200*o-100*a+(a+1)*(100-r)+2*a*n)>0?a:0:-100===r&&(l=i),s[o]=l>a?a:l<0?0:l;return s}(e.contrastOffset,e.brightnessOffset);for(s=0;s<c;s++)for(w=x[s],u=0;u<h;u++)w[u]=j[w[u]]}return{lut:x,offset:f}}function d(e,t,r){for(var n=[],i=0;i<t.length;i++){var o,l,s,u,f=0,h=0,d=0;"min"in t[i]?(f=(o=t[i]).min,h=o.max,d=o.avg):(l=t[i],f=(s=Object(a.a)(l,3))[0],h=s[1],d=s[2]);var v=null!==(u=d)&&void 0!==u?u:0;"u8"!==e&&(v=255*(v-f)/(h-f)),r&&(v*=c[i]),n.push(p(v))}return n}function p(e){if(e<=0||e>=255)return u;var t=0;150!==e&&(t=e<=150?45*Math.cos(.01047*e):17*Math.sin(.021*e));var r=e+t,n=Math.log(e/255),a=Math.log(r/255);if(0===a)return u;var i=n/a;return isNaN(i)?u:Math.min(9.9,Math.max(.01,i))}function v(e){var t=e.pixels,r=e.mask,n=e.pixelType,a=e.bandMasks,i=t.map((function(e,t){var i;return function(e,t,r,n){for(var a=1/0,i=-1/0,o=0,l=0,s=e.length,u=0;u<s;u++){var c=e[u];t&&!t[u]||(a=c<a?c:a,i=c>i?c:i,o+=c,l++)}if(0===l)return{statistics:{min:0,max:0,avg:0,stddev:0},histogram:null};for(var f=o/l,h=0,d=0;d<s;d++)t&&!t[d]||(h+=Math.pow(e[d]-f,2));var p=t?t.filter((function(e){return e})).length:s,v={min:a,max:i,avg:f,stddev:p<=1?0:Math.sqrt(h/(p-1))};if(!n)return{statistics:v,histogram:null};if(["u8","s8","u4","u2","u1"].includes(r)){for(var m=i-a+1,g=new Uint32Array(m),b=0;b<s;b++)t&&!t[b]||g[e[b]-a]++;return{statistics:v,histogram:{min:a-.5,max:i+.5,size:m,counts:g}}}var y=256,w=new Uint32Array(y),x=(i-a)/y;if(0===x)return{statistics:v,histogram:{min:a,max:i,size:1,counts:new Uint32Array(1).fill(l)}};for(var O=new Uint32Array(257),k=0;k<s;k++)t&&!t[k]||O[Math.floor((e[k]-a)/x)]++;for(var C=0;C<255;C++)w[C]=O[C];return w[255]=O[255]+O[y],{statistics:v,histogram:{min:a,max:i,size:y,counts:w}}}(e,null!==(i=null===a||void 0===a?void 0:a[t])&&void 0!==i?i:r,n,!0)}));return{statistics:i.map((function(e){return e.statistics})),histograms:i.map((function(e){return e.histogram}))}}function m(e){var t;if(null==e||null===(t=e.pixels)||void 0===t||!t.length)return null;var r,n,a,i,o,l,s,u,c,f,h,d,p,v,m=e.pixels,g=e.mask,b=e.bandMasks,y=e.pixelType,w=e.width*e.height,x=m.length,O=[],k=[],C=256;for(i=0;i<x;i++){var j;l=new Uint32Array(C),u=m[i];var A=null!==(j=null===b||void 0===b?void 0:b[i])&&void 0!==j?j:g;if("u8"===y)if(r=-.5,n=255.5,A)for(o=0;o<w;o++)A[o]&&l[u[o]]++;else for(o=0;o<w;o++)l[u[o]]++;else{var S=!1;e.statistics||(e.updateStatistics(),S=!0);var M=e.statistics;if(r=M[i].minValue,0===(a=((n=M[i].maxValue)-r)/C)){!M||e.validPixelCount||S||e.updateStatistics();for(var T=(e.validPixelCount||e.width*e.height)/C,I=0;I<C;I++)l[I]=Math.round(T*(I+1))-Math.round(T*I)}else{for(s=new Uint32Array(257),o=0;o<w;o++)A&&!A[o]||s[Math.floor((u[o]-r)/a)]++;for(o=0;o<255;o++)l[o]=s[o];l[255]=s[255]+s[C]}}for(O.push({min:r,max:n,size:C,counts:l}),c=0,f=0,p=0,o=0;o<C;o++)c+=l[o],f+=o*l[o];for(v=f/c,o=0;o<C;o++)p+=l[o]*Math.pow(o-v,2);h=(v+.5)*(a=(n-r)/C)+r,d=Math.sqrt(p/(c-1))*a,k.push({min:r,max:n,avg:h,stddev:d})}return{statistics:k,histograms:O}}function g(e){for(var t=[],r=0;r<e.length;r++){for(var n=e[r],a=n.min,i=n.max,o=n.size,l=n.counts,s=0,u=0,c=0;c<o;c++)s+=l[c],u+=c*l[c];for(var f=u/s,h=0,d=0;d<o;d++)h+=l[d]*Math.pow(d-f,2);var p=(i-a)/o,v=(f+.5)*p+a,m=Math.sqrt(h/(s-1))*p;t.push({min:a,max:i,avg:v,stddev:m})}return t}function b(e,t){var r,o,u,c,h,d=t.pixelBlock,p=t.bandIds,v=t.returnHistogramLut,g=t.rasterInfo,b=null,y=null,w=e.stretchType;if("number"==typeof w&&(w=s.a[w]),e.dra)if("minMax"===w&&null!=d&&d.statistics)b=d.statistics.map((function(e){return[e.minValue,e.maxValue,0,0]}));else{var x=m(d);b=null!=x?x.statistics:null,y=null!=x?x.histograms:null}else b=(null===(r=e.statistics)||void 0===r?void 0:r.length)>0?e.statistics:g.statistics,(y="histograms"in e?e.histograms:void 0)||(y=g.histograms);"percentClip"!==w&&"histogramEqualization"!==w||(null===(o=y)||void 0===o?void 0:o.length)||(w="minMax");var O,k,C,j,A,S,M,T,I,P=(null===(u=b)||void 0===u?void 0:u.length)||(null===(c=y)||void 0===c?void 0:c.length)||g.bandCount,E=[],R=[];b&&!Array.isArray(b[0])&&(b=b.map((function(e){return[e.min,e.max,e.avg,e.stddev]})));var U,L,D,G=Object(l.b)(g.pixelType),B=Object(a.a)(G,2),N=B[0],F=B[1];if(null===(h=b)||void 0===h||!h.length){for(b=[],T=0;T<P;T++)b.push([N,F,1,1]);"standardDeviation"===w&&(w="minMax")}switch(w){case"none":for(T=0;T<P;T++)E[T]=N,R[T]=F;break;case"minMax":for(T=0;T<P;T++){var V=b[T];E[T]=V[0],R[T]=V[1]}break;case"standardDeviation":for(T=0;T<P;T++){var _=b[T];E[T]=_[2]-e.numberOfStandardDeviations*_[3],R[T]=_[2]+e.numberOfStandardDeviations*_[3],E[T]<_[0]&&(E[T]=_[0]),R[T]>_[1]&&(R[T]=_[1])}break;case"histogramEqualization":for(Object(i.c)(y),T=0;T<P;T++)E[T]=y[T].min,R[T]=y[T].max;break;case"percentClip":for(Object(i.c)(y),T=0;T<y.length;T++){for(O=y[T],A=new Uint32Array(O.size),(j=Object(n.a)(O.counts)).length>=20&&(j[0]=j[1]=j[2]=j[j.length-1]=j[j.length-2]=0),C=0,k=(O.max-O.min)/O.size,M=-.5===O.min&&1===k?.5:0,I=0;I<O.size;I++)C+=j[I],A[I]=C;for(S=(e.minPercent||0)*C/100,E[T]=O.min+M,I=0;I<O.size;I++)if(A[I]>S){E[T]=O.min+k*(I+M);break}for(S=(1-(e.maxPercent||0)/100)*C,R[T]=O.max+M,I=O.size-2;I>=0;I--)if(A[I]<S){R[T]=O.min+k*(I+2-M);break}if(R[T]<E[T]){var z=E[T];E[T]=R[T],R[T]=z}}break;default:for(T=0;T<P;T++){var W=b[T];E[T]=W[0],R[T]=W[1]}}return"histogramEqualization"===w?(Object(i.c)(y),L=y[0].size||256,U=0,v&&(D=y.map((function(e){return f(e)})))):(L=e.max||255,U=e.min||0),function(e,t){if(null==t||0===t.length)return e;var r=Math.max.apply(null,t),n=e.minCutOff,a=e.maxCutOff,i=e.outMin,o=e.outMax,l=e.histogramLut;return n.length===t.length||n.length<=r?e:{minCutOff:t.map((function(e){return n[e]})),maxCutOff:t.map((function(e){return a[e]})),histogramLut:l?t.map((function(e){return l[e]})):null,outMin:i,outMax:o}}({minCutOff:E,maxCutOff:R,outMax:L,outMin:U,histogramLut:D},p)}function y(e,t){for(var r=new Float32Array(e),n=0;n<e;n++)t[n]>1?t[n]>2?r[n]=6.5+Math.pow(t[n]-2,2.5):r[n]=6.5+100*Math.pow(2-t[n],4):r[n]=1;return r}function w(e,t){var r;if(null==e||null===(r=e.pixels)||void 0===r||!r.length)return e;for(var n=e.mask,a=e.bandMasks,i=e.width,l=e.height,s=e.pixels,u=t.minCutOff,c=t.maxCutOff,f=t.gamma,h=t.outMin||0,d=t.outMax||255,p=i*l,v=t.outputPixelType||"u8",m=e.pixels.map((function(){return o.a.createEmptyBand(v,p)})),g=m.length,b=d-h,w=[],x=[],O=0;O<g;O++)x[O]=c[O]-u[O],w[O]=0===x[O]?0:b/x[O];var k=v.startsWith("u")||v.startsWith("s"),C=f&&f.length>=g,j=!!t.isRenderer;if(C){for(var A=y(g,f),S=0;S<g;S++)for(var M,T=null!==(M=null===a||void 0===a?void 0:a[S])&&void 0!==M?M:n,I=0;I<p;I++)if(null==T||T[I]){if(0===x[S]){m[S][I]=h;continue}var P=s[S][I],E=(P-u[S])/x[S],R=1;if(f[S]>1&&(R-=Math.pow(1/b,E*A[S])),P<c[S]&&P>u[S]){var U=R*b*Math.pow(E,1/f[S])+h;m[S][I]=j?Math.floor(U):k?Math.round(U):U}else P>=c[S]?m[S][I]=d:m[S][I]=h}}else for(var L=0;L<g;L++)for(var D,G=null!==(D=null===a||void 0===a?void 0:a[L])&&void 0!==D?D:n,B=0;B<p;B++)if(null==G||G[B]){var N=s[L][B];if(N<c[L]&&N>u[L]){var F=(N-u[L])*w[L]+h;m[L][B]=j?Math.floor(F):k?Math.round(F):F}else N>=c[L]?m[L][B]=d:m[L][B]=h}var V=new o.a({width:i,height:l,mask:n,bandMasks:a,pixels:m,pixelType:v});return V.updateStatistics(),V}},815:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n,a=r(89),i=r(88),o=r(90),l=r(91),s=r(94),u=r(105),c=r(116),f=r(97),h=(r(96),r(95)),d=r(135),p=n=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).blockWidth=void 0,e.blockHeight=void 0,e.compression=null,e.origin=null,e.firstPyramidLevel=null,e.maximumPyramidLevel=null,e.pyramidScalingFactor=2,e.pyramidBlockWidth=null,e.pyramidBlockHeight=null,e.isVirtualTileInfo=!1,e.tileInfo=null,e.transposeInfo=null,e.blockBoundary=null,e}return Object(i.a)(r,[{key:"clone",value:function(){return new n({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:Object(c.a)(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:Object(c.a)(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:Object(c.a)(this.tileInfo),transposeInfo:Object(c.a)(this.transposeInfo),blockBoundary:Object(c.a)(this.blockBoundary)})}}]),r}(u.a);Object(s.a)([Object(f.b)({type:Number,json:{write:!0}})],p.prototype,"blockWidth",void 0),Object(s.a)([Object(f.b)({type:Number,json:{write:!0}})],p.prototype,"blockHeight",void 0),Object(s.a)([Object(f.b)({type:String,json:{write:!0}})],p.prototype,"compression",void 0),Object(s.a)([Object(f.b)({type:d.a,json:{write:!0}})],p.prototype,"origin",void 0),Object(s.a)([Object(f.b)({type:Number,json:{write:!0}})],p.prototype,"firstPyramidLevel",void 0),Object(s.a)([Object(f.b)({type:Number,json:{write:!0}})],p.prototype,"maximumPyramidLevel",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],p.prototype,"pyramidResolutions",void 0),Object(s.a)([Object(f.b)({type:Number,json:{write:!0}})],p.prototype,"pyramidScalingFactor",void 0),Object(s.a)([Object(f.b)({type:Number,json:{write:!0}})],p.prototype,"pyramidBlockWidth",void 0),Object(s.a)([Object(f.b)({type:Number,json:{write:!0}})],p.prototype,"pyramidBlockHeight",void 0),Object(s.a)([Object(f.b)({type:Boolean,json:{write:!0}})],p.prototype,"isVirtualTileInfo",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],p.prototype,"tileInfo",void 0),Object(s.a)([Object(f.b)()],p.prototype,"transposeInfo",void 0),Object(s.a)([Object(f.b)()],p.prototype,"blockBoundary",void 0);var v=p=n=Object(s.a)([Object(h.a)("esri.layers.support.RasterStorageInfo")],p)},816:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return j}));var n=r(4),a=r(92),i=r(99),o=r(12),l=(r(119),r(93)),s=r(102),u=r(141),c=r(110),f=r(212),h=r(132),d=r(130),p=s.a.getLogger("esri.views.2d.engine.flow.dataUtils"),v=10;function m(e,t,r,n){return g.apply(this,arguments)}function g(){return g=Object(o.a)(Object(n.a)().mark((function e(t,r,a,i){var o,s,u,f,h,d,m,g,y;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=performance.now(),s=b(r,a),u=performance.now(),f=w(r,s,a.width,a.height),h=performance.now(),d=x(f,!0),m=performance.now(),g="Streamlines"===t?O(d,v):k(d),y=performance.now(),Object(l.a)("esri-2d-profiler")&&(p.info("I.1","_createFlowFieldFromData (ms)",Math.round(u-o)),p.info("I.2","_getStreamlines (ms)",Math.round(h-u)),p.info("I.3","createAnimatedLinesData (ms)",Math.round(m-h)),p.info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(y-m)),p.info("I.5","createFlowMesh (ms)",Math.round(y-o)),p.info("I.6","Mesh size (bytes)",g.vertexData.buffer.byteLength+g.indexData.buffer.byteLength)),e.next=4,Promise.resolve();case 4:return Object(c.n)(i),e.abrupt("return",g);case 6:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function b(e,t){var r=function(e,t,r,n){if(0===n)return e;for(var a=Math.round(3*n),i=new Array(2*a+1),o=0,l=-a;l<=a;l++){var s=Math.exp(-l*l/(n*n));i[l+a]=s,o+=s}for(var u=-a;u<=a;u++)i[u+a]/=o;for(var c=new Float32Array(e.length),f=0;f<r;f++)for(var h=0;h<t;h++){for(var d=0,p=0,v=-a;v<=a;v++)if(!(h+v<0||h+v>=t)){var m=i[v+a];d+=m*e[2*(f*t+(h+v))],p+=m*e[2*(f*t+(h+v))+1]}c[2*(f*t+h)]=d,c[2*(f*t+h)+1]=p}for(var g=new Float32Array(e.length),b=0;b<t;b++)for(var y=0;y<r;y++){for(var w=0,x=0,O=-a;O<=a;O++)if(!(y+O<0||y+O>=r)){var k=i[O+a];w+=k*c[2*((y+O)*t+b)],x+=k*c[2*((y+O)*t+b)+1]}g[2*(y*t+b)]=w,g[2*(y*t+b)+1]=x}return g}(t.data,t.width,t.height,e.smoothing);return e.interpolate?function(e,n){var a=Math.floor(e),i=Math.floor(n);if(a<0||a>=t.width)return[0,0];if(i<0||i>=t.height)return[0,0];var o=e-a,l=n-i,s=a,u=i,c=a<t.width-1?a+1:a,f=i<t.height-1?i+1:i,h=r[2*(u*t.width+s)],d=r[2*(u*t.width+c)],p=r[2*(f*t.width+s)],v=r[2*(f*t.width+c)],m=r[2*(u*t.width+s)+1],g=r[2*(u*t.width+c)+1];return[(h*(1-l)+p*l)*(1-o)+(d*(1-l)+v*l)*o,(m*(1-l)+r[2*(f*t.width+s)+1]*l)*(1-o)+(g*(1-l)+r[2*(f*t.width+c)+1]*l)*o]}:function(e,n){var a=Math.round(e),i=Math.round(n);return a<0||a>=t.width||i<0||i>=t.height?[0,0]:[r[2*(i*t.width+a)],r[2*(i*t.width+a)+1]]}}function y(e,t,r,n,a,o,l,s,u){var c=[],f=r,h=n,d=0,p=t(f,h),v=Object(i.a)(p,2),m=v[0],g=v[1];m*=e.velocityScale,g*=e.velocityScale;var b,y,w=Math.sqrt(m*m+g*g);c.push({x:f,y:h,t:d,speed:w});for(var x=0;x<e.verticesPerLine;x++){var O=t(f,h),k=Object(i.a)(O,2),C=k[0],j=k[1];C*=e.velocityScale,j*=e.velocityScale;var A=Math.sqrt(C*C+j*j);if(A<e.minSpeedThreshold)return c;var S=C/A,M=j/A;if(f+=S*e.segmentLength,h+=M*e.segmentLength,d+=e.segmentLength/A,Math.acos(S*b+M*y)>e.maxTurnAngle)return c;if(e.collisions){var T=Math.round(f*u),I=Math.round(h*u);if(T<0||T>l-1||I<0||I>s-1)return c;var P=o[I*l+T];if(-1!==P&&P!==a)return c;o[I*l+T]=a}c.push({x:f,y:h,t:d,speed:A}),b=S,y=M}return c}function w(e,t,r,n){for(var a=[],i=new f.a,o=1/Math.max(e.lineCollisionWidth,1),l=Math.round(r*o),s=Math.round(n*o),u=new Int32Array(l*s),c=0;c<u.length;c++)u[c]=-1;for(var h=[],d=0;d<n;d+=e.lineSpacing)for(var p=0;p<r;p+=e.lineSpacing)h.push({x:p,y:d,sort:i.getFloat()});h.sort((function(e,t){return e.sort-t.sort}));for(var v=0,m=h;v<m.length;v++){var g=m[v],b=g.x,w=g.y;if(i.getFloat()<e.density){var x=y(e,t,b,w,a.length,u,l,s,o);if(x.length<2)continue;a.push(x)}}return a}function x(e,t){var r,n=new f.a,i=e.reduce((function(e,t){return e+t.length}),0),o=new Float32Array(4*i),l=new Array(e.length),s=0,u=0,c=Object(a.a)(e);try{for(c.s();!(r=c.n()).done;){var h,d=r.value,p=s,v=Object(a.a)(d);try{for(v.s();!(h=v.n()).done;){var m=h.value;o[4*s]=m.x,o[4*s+1]=m.y,o[4*s+2]=m.t,o[4*s+3]=m.speed,s++}}catch(g){v.e(g)}finally{v.f()}l[u++]={startVertex:p,numberOfVertices:d.length,totalTime:d[d.length-1].t,timeSeed:t?n.getFloat():0}}}catch(g){c.e(g)}finally{c.f()}return{lineVertices:o,lineDescriptors:l}}function O(e,t){var r,n=e.lineVertices,i=e.lineDescriptors,o=0,l=0,s=Object(a.a)(i);try{for(s.s();!(r=s.n()).done;){var u=r.value;o+=2*u.numberOfVertices,l+=6*(u.numberOfVertices-1)}}catch(F){s.e(F)}finally{s.f()}var c=new Float32Array(9*o),f=new Uint32Array(l),h=0,d=0;function p(e,t,r,n,a,i,o,l){var s=9*h,u=0;c[s+u++]=e,c[s+u++]=t,c[s+u++]=1,c[s+u++]=r,c[s+u++]=i,c[s+u++]=o,c[s+u++]=n/2,c[s+u++]=a/2,c[s+u++]=l,h++,c[s+u++]=e,c[s+u++]=t,c[s+u++]=-1,c[s+u++]=r,c[s+u++]=i,c[s+u++]=o,c[s+u++]=-n/2,c[s+u++]=-a/2,c[s+u++]=l,h++}var v,m=Object(a.a)(i);try{for(m.s();!(v=m.n()).done;){for(var g=v.value,b=g.totalTime,y=g.timeSeed,w=null,x=null,O=null,k=null,C=null,j=null,A=0;A<g.numberOfVertices;A++){var S=n[4*(g.startVertex+A)],M=n[4*(g.startVertex+A)+1],T=n[4*(g.startVertex+A)+2],I=n[4*(g.startVertex+A)+3],P=null,E=null,R=null,U=null;if(A>0){P=S-w,E=M-x;var L=Math.sqrt(P*P+E*E);if(P/=L,E/=L,A>1){var D=P+C,G=E+j,B=Math.sqrt(D*D+G*G);D/=B,G/=B;var N=Math.min(1/(D*P+G*E),t);R=-(G*=N),U=D*=N}else R=-E,U=P;null!==R&&null!==U&&(p(w,x,O,R,U,b,y,I),f[d++]=h-2,f[d++]=h,f[d++]=h-1,f[d++]=h,f[d++]=h+1,f[d++]=h-1)}w=S,x=M,O=T,C=P,j=E,k=I}p(w,x,O,-j,C,b,y,k)}}catch(F){m.e(F)}finally{m.f()}return{vertexData:c,indexData:f}}function k(e){var t,r=16,n=1,i=2,o=e.lineVertices,l=e.lineDescriptors,s=0,u=0,c=Object(a.a)(l);try{for(c.s();!(t=c.n()).done;){var f=t.value.numberOfVertices-1;s+=4*f*2,u+=6*f*2}}catch(V){c.e(V)}finally{c.f()}var h,d,p,v,m,g,b,y,w,x,O,k,C,j,A=new Float32Array(s*r),S=new Uint32Array(u),M=0,T=0;function I(){S[T++]=M-8,S[T++]=M-7,S[T++]=M-6,S[T++]=M-7,S[T++]=M-5,S[T++]=M-6,S[T++]=M-4,S[T++]=M-3,S[T++]=M-2,S[T++]=M-3,S[T++]=M-1,S[T++]=M-2}function P(e,t,a,o,l,s,u,c,f,h,d,p,v,m){for(var g=M*r,b=0,y=0,w=[n,i];y<w.length;y++)for(var x=w[y],O=0,k=[1,2,3,4];O<k.length;O++){var C=k[O];A[g+b++]=e,A[g+b++]=t,A[g+b++]=a,A[g+b++]=o,A[g+b++]=u,A[g+b++]=c,A[g+b++]=f,A[g+b++]=h,A[g+b++]=x,A[g+b++]=C,A[g+b++]=v,A[g+b++]=m,A[g+b++]=l/2,A[g+b++]=s/2,A[g+b++]=d/2,A[g+b++]=p/2,M++}}function E(e,t){var r=w+O,n=x+k,a=Math.sqrt(r*r+n*n),i=w*(r/=a)+x*(n/=a);r/=i,n/=i;var o=O+C,l=k+j,s=Math.sqrt(o*o+l*l),u=O*(o/=s)+k*(l/=s);P(h,d,p,v,-n,r,m,g,b,y,-(l/=u),o/=u,e,t),I()}function R(e,t,r,n,a,i){if(w=O,x=k,O=C,k=j,null==w&&null==x&&(w=O,x=k),null!=m&&null!=g){C=e-m,j=t-g;var o=Math.sqrt(C*C+j*j);C/=o,j/=o}null!=w&&null!=x&&E(a,i),h=m,d=g,p=b,v=y,m=e,g=t,b=r,y=n}function U(e,t){w=O,x=k,O=C,k=j,null==w&&null==x&&(w=O,x=k),null!=w&&null!=x&&E(e,t)}var L,D=Object(a.a)(l);try{for(D.s();!(L=D.n()).done;){var G=L.value;h=null,d=null,p=null,v=null,m=null,g=null,b=null,y=null,w=null,x=null,O=null,k=null,C=null,j=null;for(var B=G.totalTime,N=G.timeSeed,F=0;F<G.numberOfVertices;F++)R(o[4*(G.startVertex+F)],o[4*(G.startVertex+F)+1],o[4*(G.startVertex+F)+2],o[4*(G.startVertex+F)+3],B,N);U(B,N)}}catch(V){D.e(V)}finally{D.f()}return{vertexData:A,indexData:S}}function C(e,t){var r=t.pixels,n=t.width,a=t.height,i=new Float32Array(n*a*2),o=t.mask||new Uint8Array(n*a*2);if(t.mask||o.fill(255),"vector-uv"===e)for(var l=0;l<n*a;l++)i[2*l]=r[0][l],i[2*l+1]=-r[1][l];else if("vector-magdir"===e)for(var s=0;s<n*a;s++){var c=r[0][s],f=Object(u.g)(r[1][s]),h=Math.cos(f-Math.PI/2),d=Math.sin(f-Math.PI/2);i[2*s]=h*c,i[2*s+1]=d*c}return{data:i,mask:o,width:n,height:a}}function j(e,t,r,n,a,i){return A.apply(this,arguments)}function A(){return A=Object(o.a)(Object(n.a)().mark((function e(t,r,o,s,u,c){var f,v,m,g,b,y,w,x,O,k,C,j,A,M,T,I,P,E,R,U,L,D,G;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=performance.now(),v=Object(h.e)(r.spatialReference)){e.next=6;break}return e.next=4,S(t,r,o,s,u,c);case 4:return m=e.sent,e.abrupt("return",(Object(l.a)("esri-2d-profiler")&&p.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-f)),Object(l.a)("esri-2d-profiler")&&p.info("I.9","Number of parts",1),m));case 6:for(g=Object(i.a)(v.valid,2),b=g[0],y=g[1],w=y-b,x=Math.ceil(r.width/w),O=r.width/x,k=Math.round(o/x),C=r.xmin,j=[],A=performance.now(),M=0;M<x;M++)T=new d.a({xmin:C,xmax:C+O,ymin:r.ymin,ymax:r.ymax,spatialReference:r.spatialReference}),j.push(S(t,T,k,s,u,c)),C+=O;return e.next=12,Promise.all(j);case 12:I=e.sent,Object(l.a)("esri-2d-profiler")&&p.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-A)),Object(l.a)("esri-2d-profiler")&&p.info("I.9","Number of parts",I.length),P={data:new Float32Array(o*s*2),mask:new Uint8Array(o*s),width:o,height:s},E=0,R=Object(a.a)(I);try{for(R.s();!(U=R.n()).done;){for(L=U.value,D=0;D<L.height;D++)for(G=0;G<L.width;G++)E+G>=o||(P.data[2*(D*o+E+G)]=L.data[2*(D*L.width+G)],P.data[2*(D*o+E+G)+1]=L.data[2*(D*L.width+G)+1],P.mask[D*o+E+G]=L.mask[D*L.width+G]);E+=L.width}}catch(n){R.e(n)}finally{R.f()}return e.abrupt("return",(Object(l.a)("esri-2d-profiler")&&p.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-f)),P));case 19:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function S(e,t,r,n,a,i){return M.apply(this,arguments)}function M(){return M=Object(o.a)(Object(n.a)().mark((function e(t,r,a,i,o,l){var s,u,c,f,h;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s={requestProjectedLocalDirections:!0,signal:l},null!=o&&(s.timeExtent=o),"imagery"!==t.type){e.next=9;break}return e.next=4,t.load({signal:l});case 4:return u=t.rasterInfo.dataType,e.next=7,t.fetchImage(r,a,i,s);case 7:return c=e.sent,e.abrupt("return",c&&null!=c.pixelData&&null!=c.pixelData.pixelBlock?C(u,c.pixelData.pixelBlock):{data:new Float32Array(a*i*2),mask:new Uint8Array(a*i),width:a,height:i});case 9:return e.next=11,t.load({signal:l});case 11:return f=t.rasterInfo.dataType,e.next=14,t.fetchPixels(r,a,i,s);case 14:return h=e.sent,e.abrupt("return",h&&null!=h.pixelBlock?C(f,h.pixelBlock):{data:new Float32Array(a*i*2),mask:new Uint8Array(a*i),width:a,height:i});case 16:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}}}]);
//# sourceMappingURL=31.c68d9702.chunk.js.map
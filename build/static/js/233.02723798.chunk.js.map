{"version":3,"sources":["../node_modules/@arcgis/core/layers/support/RangeInfo.js","../node_modules/@arcgis/core/layers/support/PolygonCollection.js","../node_modules/@arcgis/core/layers/support/SceneFilter.js","../node_modules/@arcgis/core/layers/SceneLayer.js","../node_modules/@arcgis/core/core/accessorSupport/decorators/persistable.js","../node_modules/@arcgis/core/portal/support/resourceExtension.js"],"names":["s","_e","_inherits","_super","_createSuper","_this","_classCallCheck","apply","arguments","name","field","currentRangeExtent","fullRangeExtent","type","_createClass","e","r","t","String","json","read","write","prototype","Number","readOnly","o","c","h","p","_t","call","key","value","this","items","map","clone","toJSON","_e$layer","layer","spatialReference","toArray","equals","n","messages","push","modification","context","i","a","filter","forEach","add","fromJSON","ofType","l","g","_s","spatialRelationship","geometries","m","_geometriesSource","_handles","_this2","destroy","Array","isArray","url","u","_loadGeometries","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this$_geometriesSour","wrap","_context","prev","next","abrupt","responseType","signal","sent","data","_objectSpread","stop","_x","_x2","nonNullable","origins","prefix","d","oe","ae","G","ne","_j","_len","length","_key","concat","featureReduction","rangeInfos","operationalLayerType","fields","floorInfo","outFields","nodePages","materialDefinitions","textureSetDefinitions","geometryDefinitions","serviceUpdateTimeStamp","excludeObjectIds","definitionExpression","path","labelsVisible","labelingInfo","legendEnabled","priority","semantic","cachedDrawingInfo","color","popupEnabled","popupTemplate","objectIdField","globalIdField","_fieldUsageInfo","screenSizePerspectiveEnabled","_set","fieldsIndex","get","_this$getFeatureType","_this$getField$domain","_this$getField","getFeatureType","feature","domains","getField","domain","associatedLayer","_this$associatedLayer","_this$associatedLayer2","types","_this$associatedLayer3","_this$associatedLayer4","typeIdField","_this$associatedLayer5","_this$associatedLayer6","templates","_this$associatedLayer7","_this$associatedLayer8","formTemplate","Q","layerType","pointNodePages","V","set","loaded","_validateElevationInfo","le","profile","N","_this$associatedLayer9","_this$associatedLayer10","_this$associatedLayer11","capabilities","_","query","_e$editing","editing","supportsGlobalId","supportsRollbackOnFailure","supportsUploadWithItemId","supportsGeometryUpdate","supportsReturnServiceEditsInSourceSpatialReference","_e$data","supportsZ","supportsM","isVersioned","supportsAttachment","_e$operations","operations","y","supportsEditing","supportsAdd","supportsUpdate","supportsDelete","f","supportsQuery","supportsQueryAttachments","supportsAsyncConvert3D","v","supportsChangeTracking","b","infoFor3D","Y","_isOverridden","_get","userHasEditingPrivileges","_overrideIfSome","_this$associatedLayer12","_this$associatedLayer13","attributeStorageInfo","createPopupTemplate","some","_this$associatedLayer14","_this$associatedLayer15","displayField","store","pe","getLogger","error","loadFromPortal","supportedTypes","catch","then","_fetchService","Promise","all","_fetchIndexAndUpdateExtent","_setAssociatedFeatureLayer","_loadFilterGeometries","_applyAssociatedLayerOverrides","_populateFieldUsageInfo","J","origin","renderer","finishLoadEditablePortalLayer","addResolvingPromise","resolve","_beforeSave","t0","load","_loadFilterGeometries2","_callee2","_context2","loadGeometries","X","geometryType","returnGeometry","returnZ","where","sqlFormat","_this3","_getAssociatedLayerForQuery","queryExtent","createQuery","_this4","queryFeatureCount","_this5","queryFeatures","features","_step","_iterator","_createForOfIteratorHelper","done","sourceLayer","err","_queryCachedAttributes","_callee3","_this$attributeStorag","_context3","k","t1","re","se","t2","te","parsedUrl","_queryCachedFeature","_callee4","_context4","queryCachedAttributes","attributes","_x3","_x4","_this6","queryObjectIds","queryAttachments","supportsLabelingInfo","supportsRenderer","supportsPopupTemplate","supportsLayerQuery","ee","_loadAssociatedLayerForQuery","_loadAssociatedLayerForQuery2","_callee5","_context5","statisticsInfo","_queryCachedStatistics","_callee6","_iterator2","_step2","_context6","href","token","apiKey","finish","_x5","_x6","_saveAs","_callee7","_this7","_context7","_debouncedSaveOperations","E","SAVE_AS","getTypeKeywords","_getTypeKeywords","portalItemLayerType","_x7","_x8","_save","_callee8","_this8","_context8","SAVE","_applyEdits","_callee9","_yield$import","_context9","applyEdits","source","_x9","_x10","_uploadAssets","_callee10","_context10","uploadAssets","_x11","_x12","_getPrototypeOf","includes","isNaN","version","major","minor","serviceVersion","versionString","supportedVersions","isGeographic","normalReferenceFrame","_this9","_step3","_iterator3","_loop","_this9$associatedLaye","_applyAssociatedLayerFieldsOverrides","_applyAssociatedLayerPopupOverrides","_applyAssociatedLayerExtentOverride","_this$associatedLayer16","_step4","_iterator4","editable","nullable","slice","originIdOf","SERVICE","PORTAL_ITEM","setAtOrigin","_this$associatedLayer17","_this$associatedLayer18","_this$associatedLayer19","_this$associatedLayer20","_this$associatedLayer21","_this$serviceUpdateTi","editingInfo","lastEditDate","serverGens","getAtOrigin","A","lastUpdate","getTime","minServerGen","serverGen","_setAssociatedFeatureLayer2","_callee11","_context11","C","portalItem","fetch","_logWarningOnPopupEnabled","_x13","_logWarningOnPopupEnabled2","_callee12","_this10","_context12","title","warn","info","elevationInfo","mode","featureExpressionInfo","expression","j","O","w","L","S","F","I","base","R","typeMap","selection","q","H","service","B","target","K","M","$","enabled","allowNull","Z","T","x","W","reader","z","D","default","opacity","_t$layerDefinition","layerDefinition","drawingInfo","transparency","ie","Boolean","P","U","meshpyramids","points","lines","polygons","de","_t$origins","_t$type","writer","resources","verifyItemRelativeUrls","writtenUrls","rootPath","NO","object","propertyName","targetUrl","dest","targetPropertyName","params","_o$compress","resourceFromPath","compress","resource","content","updates","toUpdate","_ref","toKeep","_l$filename","_s$prefix","_s$compress","filename","pendingOperations","_P","itemRelativeUrl","toAdd","_ref2","Blob","JSON","stringify","_yield$r","png","jpeg","jpg","bmp","gif","txt","xml","svg","zip","pbf","gz"],"mappings":"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","file":"static/js/233.02723798.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{JSONSupport as e}from\"../../core/JSONSupport.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";let s=class extends e{constructor(){super(...arguments),this.name=null,this.field=null,this.currentRangeExtent=null,this.fullRangeExtent=null,this.type=\"rangeInfo\"}};r([t({type:String,json:{read:!0,write:!0}})],s.prototype,\"name\",void 0),r([t({type:String,json:{read:!0,write:!0}})],s.prototype,\"field\",void 0),r([t({type:[Number],json:{read:!0,write:!0}})],s.prototype,\"currentRangeExtent\",void 0),r([t({type:[Number],json:{read:!0,write:!0}})],s.prototype,\"fullRangeExtent\",void 0),r([t({type:[\"rangeInfo\"],readOnly:!0,json:{read:!1,write:!0}})],s.prototype,\"type\",void 0),s=r([o(\"esri.layers.support.RangeInfo\")],s);export{s as RangeInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Collection.js\";import{JSONSupportMixin as t}from\"../../core/JSONSupport.js\";import o from\"../../core/Warning.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/Error.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import i from\"../../geometry/Polygon.js\";import{canProjectWithoutEngine as n,projectPolygon as a}from\"../../geometry/projection.js\";var c;let p=c=class extends(t(r.ofType(i))){constructor(e){super(e)}clone(){return new c(this.items.map((e=>e.clone())))}write(e,r){return this.toJSON(r)}toJSON(e){const r=e?.layer?.spatialReference;return r?this.toArray().map((t=>{if(!r.equals(t.spatialReference)){if(!n(t.spatialReference,r))return e&&e.messages&&e.messages.push(new o(\"scenefilter:unsupported\",\"Scene filters with incompatible spatial references are not supported\",{modification:this,spatialReference:e.layer.spatialReference,context:e})),null;const s=new i;a(t,s,r),t=s}const s=t.toJSON(e);return delete s.spatialReference,s})).filter((e=>null!=e)):(e?.messages&&e.messages.push(new o(\"scenefilter:unsupported\",\"Writing Scene filters without context layer is not supported\",{modification:this,spatialReference:e.layer.spatialReference,context:e})),this.toArray().map((r=>r.toJSON(e))))}static fromJSON(e,r){const t=new c;return e.forEach((e=>t.add(i.fromJSON(e,r)))),t}};p=c=e([s(\"esri.layers.support.PolygonCollection\")],p);const l=p;export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../request.js\";import o from\"../../core/Handles.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";import{clone as t}from\"../../core/lang.js\";import{on as i,sync as a}from\"../../core/reactiveUtils.js\";import{property as p}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import{reader as n}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as c}from\"../../core/accessorSupport/decorators/subclass.js\";import{persistable as l}from\"../../core/accessorSupport/decorators/persistable.js\";import m from\"./PolygonCollection.js\";import{f as u}from\"../../chunks/persistableUrlUtils.js\";var h;let g=h=class extends s{constructor(e){super(e),this.spatialRelationship=\"disjoint\",this.geometries=new m,this._geometriesSource=null,this._handles=new o}initialize(){this._handles.add(i((()=>this.geometries),\"after-changes\",(()=>this.geometries=this.geometries),a))}destroy(){this._handles.destroy()}readGeometries(e,r,o){Array.isArray(e)?this.geometries=m.fromJSON(e,o):this._geometriesSource={url:u(e,o),context:o}}async loadGeometries(e,o){if(null==this._geometriesSource)return;const{url:s,context:t}=this._geometriesSource,i=await r(s,{responseType:\"json\",signal:o?.signal}),a=e.toJSON(),p=i.data.map((e=>({...e,spatialReference:a})));this.geometries=m.fromJSON(p,t),this._geometriesSource=null}clone(){const e=new h({geometries:t(this.geometries),spatialRelationship:this.spatialRelationship});return e._geometriesSource=this._geometriesSource,e}};e([p({type:[\"disjoint\",\"contains\"],nonNullable:!0,json:{write:!0}})],g.prototype,\"spatialRelationship\",void 0),e([p({type:m,nonNullable:!0,json:{write:!0}}),l({origins:[\"web-scene\",\"portal-item\"],type:\"resource\",prefix:\"geometries\"})],g.prototype,\"geometries\",void 0),e([n([\"web-scene\",\"portal-item\"],\"geometries\")],g.prototype,\"readGeometries\",null),g=h=e([c(\"esri.layers.support.SceneFilter\")],g);const d=g;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../Graphic.js\";import r from\"../PopupTemplate.js\";import\"../renderers/ClassBreaksRenderer.js\";import\"../renderers/DictionaryRenderer.js\";import\"../renderers/DotDensityRenderer.js\";import\"../renderers/HeatmapRenderer.js\";import\"../renderers/PieChartRenderer.js\";import\"../renderers/Renderer.js\";import\"../renderers/SimpleRenderer.js\";import\"../renderers/UniqueValueRenderer.js\";import\"../renderers/support/jsonUtils.js\";import{webSceneRendererTypes as s}from\"../renderers/support/types.js\";import i from\"../request.js\";import{ClonableMixin as o}from\"../core/Clonable.js\";import a from\"../core/Collection.js\";import n from\"../core/Error.js\";import p from\"../core/Logger.js\";import{MultiOriginJSONMixin as l}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as d,isAbortError as y}from\"../core/promiseUtils.js\";import{whenOnce as u}from\"../core/reactiveUtils.js\";import{join as c}from\"../core/urlUtils.js\";import{property as h}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import{getProperties as f}from\"../core/accessorSupport/utils.js\";import{reader as m}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as g}from\"../core/accessorSupport/decorators/subclass.js\";import{OriginId as v}from\"../core/accessorSupport/PropertyOrigin.js\";import b from\"./Layer.js\";import{APIKeyMixin as I}from\"./mixins/APIKeyMixin.js\";import{ArcGISService as w}from\"./mixins/ArcGISService.js\";import{EditBusLayer as j}from\"./mixins/EditBusLayer.js\";import{OperationalLayer as L}from\"./mixins/OperationalLayer.js\";import{PortalLayer as S}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as F}from\"./mixins/ScaleRangeLayer.js\";import{SceneService as O,SaveOperationType as E}from\"./mixins/SceneService.js\";import{isHostedAgolService as A}from\"./support/arcgisLayerUrl.js\";import{zeroCapabilities as _}from\"./support/capabilities.js\";import{elevationInfo as T,labelsVisible as x,legendEnabled as D,popupEnabled as P,screenSizePerspectiveEnabled as U}from\"./support/commonProperties.js\";import{FeatureReduction as R}from\"./support/FeatureReduction.js\";import q from\"./support/FeatureReductionSelection.js\";import{FetchAssociatedFeatureLayer as C}from\"./support/FetchAssociatedFeatureLayer.js\";import{defineFieldProperties as G}from\"./support/fieldProperties.js\";import Q from\"./support/FieldsIndex.js\";import{fixRendererFields as N,unpackFieldNames as k}from\"./support/fieldUtils.js\";import{I3SNodePageDefinition as V,I3SMaterialDefinition as K,I3STextureSetDefinition as M,I3SGeometryDefinition as $}from\"./support/I3SLayerDefinitions.js\";import W from\"./support/LabelClass.js\";import{reader as z}from\"./support/labelingInfo.js\";import B from\"./support/LayerFloorInfo.js\";import{RangeInfo as H}from\"./support/RangeInfo.js\";import Z from\"./support/SceneFilter.js\";import{loadStyleRenderer as J}from\"../renderers/support/styleUtils.js\";import X from\"../rest/support/Query.js\";import{sceneLayerEditingEnabled as Y}from\"../support/featureFlags.js\";import{createPopupTemplate as ee}from\"../support/popupUtils.js\";import{queryAttributesFromCachedAttributesId as te}from\"../views/3d/layers/i3s/I3SUtil.js\";import{getRequiredFields as re,getFetchPopupTemplate as se}from\"../views/layers/support/popupUtils.js\";import{transparencyToOpacity as ie}from\"../webdoc/support/opacityUtils.js\";const oe=[\"3DObject\",\"Point\"],ae=G();let ne=class extends(j(O(w(L(S(F(l(I(o(b)))))))))){constructor(...e){super(...e),this.featureReduction=null,this.rangeInfos=null,this.operationalLayerType=\"ArcGISSceneServiceLayer\",this.type=\"scene\",this.fields=null,this.floorInfo=null,this.outFields=null,this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.excludeObjectIds=new a,this.definitionExpression=null,this.filter=null,this.path=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.priority=null,this.semantic=null,this.cachedDrawingInfo={color:!1},this.popupEnabled=!0,this.popupTemplate=null,this.objectIdField=null,this.globalIdField=null,this._fieldUsageInfo={},this.screenSizePerspectiveEnabled=!0}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}destroy(){this._set(\"renderer\",null)}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){const r=this.getFeatureType(t?.feature)?.domains?.[e];return r&&\"inherited\"!==r.type?r:this.getField(e)?.domain??null}getFeatureType(e){return e&&this.associatedLayer?this.associatedLayer.getFeatureType(e):null}get types(){return this.associatedLayer?.types??[]}get typeIdField(){return this.associatedLayer?.typeIdField??null}get templates(){return this.associatedLayer?.templates??null}get formTemplate(){return this.associatedLayer?.formTemplate??null}get fieldsIndex(){return new Q(this.fields)}readNodePages(e,t,r){return\"Point\"===t.layerType&&(e=t.pointNodePages),null==e||\"object\"!=typeof e?null:V.fromJSON(e,r)}set elevationInfo(e){this._set(\"elevationInfo\",e),this.loaded&&this._validateElevationInfo()}get geometryType(){return le[this.profile]||\"mesh\"}set renderer(e){N(e,this.fieldsIndex),this._set(\"renderer\",e)}readCachedDrawingInfo(e){return null!=e&&\"object\"==typeof e||(e={}),null==e.color&&(e.color=!1),e}get capabilities(){const e=this.associatedLayer?.capabilities??_,{query:t,editing:{supportsGlobalId:r,supportsRollbackOnFailure:s,supportsUploadWithItemId:i,supportsGeometryUpdate:o,supportsReturnServiceEditsInSourceSpatialReference:a},data:{supportsZ:n,supportsM:p,isVersioned:l,supportsAttachment:d},operations:{supportsEditing:y,supportsAdd:u,supportsUpdate:c,supportsDelete:h,supportsQuery:f,supportsQueryAttachments:m,supportsAsyncConvert3D:g}}=e,v=e.operations.supportsChangeTracking,b=!!this.associatedLayer?.infoFor3D&&Y();return{query:t,editing:{supportsGlobalId:r,supportsReturnServiceEditsInSourceSpatialReference:a,supportsRollbackOnFailure:s,supportsGeometryUpdate:b&&o,supportsUploadWithItemId:i},data:{supportsAttachment:d,supportsZ:n,supportsM:p,isVersioned:l},operations:{supportsQuery:f,supportsQueryAttachments:m,supportsEditing:y&&v,supportsAdd:b&&u&&v,supportsDelete:b&&h&&v,supportsUpdate:c&&v,supportsAsyncConvert3D:g}}}get editingEnabled(){return this._isOverridden(\"editingEnabled\")?this._get(\"editingEnabled\"):this.userHasEditingPrivileges}set editingEnabled(e){this._overrideIfSome(\"editingEnabled\",e)}get infoFor3D(){return this.associatedLayer?.infoFor3D??null}get defaultPopupTemplate(){return this.associatedLayer||this.attributeStorageInfo?this.createPopupTemplate():null}readObjectIdField(e,t){return!e&&t.fields&&t.fields.some((t=>(\"esriFieldTypeOID\"===t.type&&(e=t.name),!!e))),e||void 0}readGlobalIdField(e,t){return!e&&t.fields&&t.fields.some((t=>(\"esriFieldTypeGlobalID\"===t.type&&(e=t.name),!!e))),e||void 0}get displayField(){return this.associatedLayer?.displayField??null}readProfile(e,t){const r=t.store.profile;return null!=r&&pe[r]?pe[r]:(p.getLogger(this).error(\"Unknown or missing profile\",{profile:r,layer:this}),\"mesh-pyramids\")}load(e){const t=null!=e?e.signal:null,r=this.loadFromPortal({supportedTypes:[\"Scene Service\"]},e).catch(d).then((()=>this._fetchService(t))).then((()=>Promise.all([this._fetchIndexAndUpdateExtent(this.nodePages,t),this._setAssociatedFeatureLayer(t),this._loadFilterGeometries()]))).then((()=>this._validateElevationInfo())).then((()=>this._applyAssociatedLayerOverrides())).then((()=>this._populateFieldUsageInfo())).then((()=>J(this,{origin:\"service\"},t))).then((()=>N(this.renderer,this.fieldsIndex))).then((()=>this.finishLoadEditablePortalLayer(e)));return this.addResolvingPromise(r),Promise.resolve(this)}async beforeSave(){null!=this.filter&&(this.filter=this.filter.clone(),await this.load())}async _loadFilterGeometries(){if(this.filter)try{await this.filter.loadGeometries(this.spatialReference)}catch(e){p.getLogger(this).error(\"#_loadFilterGeometries()\",this,\"Failed to load filter geometries. Geometry filter will not be applied for this layer.\",{error:e}),this.filter=null}}createQuery(){const e=new X;return\"mesh\"!==this.geometryType&&(e.returnGeometry=!0,e.returnZ=!0),e.where=this.definitionExpression||\"1=1\",e.sqlFormat=\"standard\",e.outFields=[\"*\"],e}queryExtent(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryExtent(e||this.createQuery(),t)))}queryFeatureCount(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryFeatureCount(e||this.createQuery(),t)))}queryFeatures(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryFeatures(e||this.createQuery(),t))).then((e=>{if(e?.features)for(const t of e.features)t.layer=this,t.sourceLayer=this;return e}))}async queryCachedAttributes(e,t){const r=k(this.fieldsIndex,await re(this,se(this)));return te(this.parsedUrl.path,this.attributeStorageInfo??[],e,t,r)}async queryCachedFeature(e,r){const s=await this.queryCachedAttributes(e,[r]);if(!s||0===s.length)throw new n(\"scenelayer:feature-not-in-cached-data\",\"Feature not found in cached data\");const i=new t;return i.attributes=s[0],i.layer=this,i.sourceLayer=this,i}queryObjectIds(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryObjectIds(e||this.createQuery(),t)))}queryAttachments(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryAttachments(e,t)))}getFieldUsageInfo(e){const t={supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1};return this.loaded?this._fieldUsageInfo[e]||t:(p.getLogger(this).error(\"#getFieldUsageInfo()\",\"Unavailable until layer is loaded\"),t)}createPopupTemplate(e){return ee(this,e)}_getAssociatedLayerForQuery(){const e=this.associatedLayer;return e?.loaded?Promise.resolve(e):this._loadAssociatedLayerForQuery()}async _loadAssociatedLayerForQuery(){if(await this.load(),!this.associatedLayer)throw new n(\"scenelayer:query-not-available\",\"SceneLayer queries are not available without an associated feature layer\",{layer:this});try{await this.associatedLayer.load()}catch(e){throw new n(\"scenelayer:query-not-available\",\"SceneLayer associated feature layer could not be loaded\",{layer:this,error:e})}return this.associatedLayer}hasCachedStatistics(e){return null!=this.statisticsInfo&&this.statisticsInfo.some((t=>t.name===e))}async queryCachedStatistics(e,t){if(await this.load(t),!this.statisticsInfo)throw new n(\"scenelayer:no-cached-statistics\",\"Cached statistics are not available for this layer\");const r=this.fieldsIndex.get(e);if(!r)throw new n(\"scenelayer:field-unexisting\",`Field '${e}' does not exist on the layer`);for(const s of this.statisticsInfo)if(s.name===r.name){const e=c(this.parsedUrl.path,s.href);return i(e,{query:{f:\"json\",token:this.apiKey},responseType:\"json\",signal:t?t.signal:null}).then((e=>e.data))}throw new n(\"scenelayer:no-cached-statistics\",\"Cached statistics for this attribute are not available\")}async saveAs(e,t){return this._debouncedSaveOperations(E.SAVE_AS,{...t,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:\"scene\"},e)}async save(){const e={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:\"scene\"};return this._debouncedSaveOperations(E.SAVE,e)}async applyEdits(e,t){const{applyEdits:r}=await import(\"./graphics/editingSupport.js\");if(await this.load(),!this.associatedLayer)throw new n(`${this.type}-layer:not-editable`,\"Service is not editable\");return await this.associatedLayer.load(),r(this,this.associatedLayer.source,e,t)}async uploadAssets(e,t){if(await this.load(),null==this.associatedLayer)throw new n(`${this.type}-layer:not-editable`,\"Service is not editable\");return await this.associatedLayer.load(),this.associatedLayer.uploadAssets(e,t)}on(e,t){return super.on(e,t)}validateLayer(e){if(e.layerType&&!oe.includes(e.layerType))throw new n(\"scenelayer:layer-type-not-supported\",\"SceneLayer does not support this layer type\",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new n(\"layer:service-version-not-supported\",\"Service version is not supported.\",{serviceVersion:this.version.versionString,supportedVersions:\"1.x, 2.x\"});if(this.version.major>2)throw new n(\"layer:service-version-too-new\",\"Service version is too new.\",{serviceVersion:this.version.versionString,supportedVersions:\"1.x, 2.x\"});function t(e,t){let r=!1,s=!1;if(null==e)r=!0,s=!0;else{const i=t&&t.isGeographic;switch(e){case\"east-north-up\":case\"earth-centered\":r=!0,s=i;break;case\"vertex-reference-frame\":r=!0,s=!i;break;default:r=!1}}if(!r)throw new n(\"scenelayer:unsupported-normal-reference-frame\",\"Normal reference frame is invalid.\");if(!s)throw new n(\"scenelayer:incompatible-normal-reference-frame\",\"Normal reference frame is incompatible with layer spatial reference.\")}t(this.normalReferenceFrame,this.spatialReference)}_getTypeKeywords(){const e=[];if(\"points\"===this.profile)e.push(\"Point\");else{if(\"mesh-pyramids\"!==this.profile)throw new n(\"scenelayer:unknown-profile\",\"SceneLayer:save() encountered an unknown SceneLayer profile: \"+this.profile);e.push(\"3DObject\")}return e}_populateFieldUsageInfo(){if(this._fieldUsageInfo={},this.fields)for(const e of this.fields){const t=!(!this.attributeStorageInfo||!this.attributeStorageInfo.some((t=>t.name===e.name))),r=!!this.associatedLayer?.fields?.some((t=>t&&e.name===t.name)),s={supportsLabelingInfo:t,supportsRenderer:t,supportsPopupTemplate:t||r,supportsLayerQuery:r};this._fieldUsageInfo[e.name]=s}}_applyAssociatedLayerOverrides(){this._applyAssociatedLayerFieldsOverrides(),this._applyAssociatedLayerPopupOverrides(),this._applyAssociatedLayerExtentOverride()}_applyAssociatedLayerFieldsOverrides(){if(!this.associatedLayer?.fields)return;let e=null;for(const t of this.associatedLayer.fields){const r=this.getField(t.name);r?(!r.domain&&t.domain&&(r.domain=t.domain.clone()),r.editable=t.editable,r.nullable=t.nullable,r.length=t.length):(e||(e=this.fields?this.fields.slice():[]),e.push(t.clone()))}e&&this._set(\"fields\",e)}_applyAssociatedLayerPopupOverrides(){if(!this.associatedLayer)return;const e=[\"popupTemplate\",\"popupEnabled\"],t=f(this);for(let r=0;r<e.length;r++){const s=e[r],i=this.originIdOf(s),o=this.associatedLayer.originIdOf(s);i<o&&(o===v.SERVICE||o===v.PORTAL_ITEM)&&t.setAtOrigin(s,this.associatedLayer[s],o)}}_applyAssociatedLayerExtentOverride(){const e=this.associatedLayer?.editingInfo?.lastEditDate,t=this.associatedLayer?.serverGens,r=this.associatedLayer?.getAtOrigin(\"fullExtent\",\"service\");if(!Y()||null==this.associatedLayer?.infoFor3D||!r||!A(this.associatedLayer?.url)||!e||this.serviceUpdateTimeStamp?.lastUpdate===e.getTime()||!this.serviceUpdateTimeStamp&&t?.minServerGen===t?.serverGen)return;f(this).setAtOrigin(\"fullExtent\",r.clone(),v.SERVICE)}async _setAssociatedFeatureLayer(e){if(![\"mesh-pyramids\",\"points\"].includes(this.profile))return;const t=new C(this.parsedUrl,this.portalItem,this.apiKey,e);try{this.associatedLayer=await t.fetch()}catch(r){y(r)||this._logWarningOnPopupEnabled()}}async _logWarningOnPopupEnabled(){await u((()=>this.popupEnabled&&null!=this.popupTemplate));const e=`this SceneLayer: ${this.title}`;null==this.attributeStorageInfo?p.getLogger(this).warn(`Associated FeatureLayer could not be loaded and no binary attributes found. Popups will not work on ${e}`):p.getLogger(this).info(`Associated FeatureLayer could not be loaded. Falling back to binary attributes for Popups on ${e}`)}_validateElevationInfo(){const e=this.elevationInfo;e&&(\"mesh-pyramids\"===this.profile&&\"relative-to-scene\"===e.mode&&p.getLogger(this).warn(\".elevationInfo=\",\"Mesh scene layers don't support relative-to-scene elevation mode\"),e.featureExpressionInfo&&\"0\"!==e.featureExpressionInfo.expression&&p.getLogger(this).warn(\".elevationInfo=\",\"Scene layers do not support featureExpressionInfo\"))}};e([h({types:{key:\"type\",base:R,typeMap:{selection:q}},json:{origins:{\"web-scene\":{name:\"layerDefinition.featureReduction\",write:!0},\"portal-item\":{name:\"layerDefinition.featureReduction\",write:!0}}}})],ne.prototype,\"featureReduction\",void 0),e([h({type:[H],json:{read:!1,origins:{\"web-scene\":{name:\"layerDefinition.rangeInfos\",write:!0},\"portal-item\":{name:\"layerDefinition.rangeInfos\",write:!0}}}})],ne.prototype,\"rangeInfos\",void 0),e([h({json:{read:!1}})],ne.prototype,\"associatedLayer\",void 0),e([h({type:[\"show\",\"hide\"]})],ne.prototype,\"listMode\",void 0),e([h({type:[\"ArcGISSceneServiceLayer\"]})],ne.prototype,\"operationalLayerType\",void 0),e([h({json:{read:!1},readOnly:!0})],ne.prototype,\"type\",void 0),e([h({...ae.fields,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],ne.prototype,\"fields\",void 0),e([h()],ne.prototype,\"types\",null),e([h()],ne.prototype,\"typeIdField\",null),e([h()],ne.prototype,\"templates\",null),e([h()],ne.prototype,\"formTemplate\",null),e([h({readOnly:!0})],ne.prototype,\"fieldsIndex\",null),e([h({type:B,json:{read:{source:\"layerDefinition.floorInfo\"},write:{target:\"layerDefinition.floorInfo\"}}})],ne.prototype,\"floorInfo\",void 0),e([h(ae.outFields)],ne.prototype,\"outFields\",void 0),e([h({type:V,readOnly:!0,json:{read:!1}})],ne.prototype,\"nodePages\",void 0),e([m(\"service\",\"nodePages\",[\"nodePages\",\"pointNodePages\"])],ne.prototype,\"readNodePages\",null),e([h({type:[K],readOnly:!0})],ne.prototype,\"materialDefinitions\",void 0),e([h({type:[M],readOnly:!0})],ne.prototype,\"textureSetDefinitions\",void 0),e([h({type:[$],readOnly:!0})],ne.prototype,\"geometryDefinitions\",void 0),e([h({readOnly:!0})],ne.prototype,\"serviceUpdateTimeStamp\",void 0),e([h({readOnly:!0})],ne.prototype,\"attributeStorageInfo\",void 0),e([h({readOnly:!0})],ne.prototype,\"statisticsInfo\",void 0),e([h({type:a.ofType(Number),nonNullable:!0,json:{origins:{service:{read:!1,write:!1}},name:\"layerDefinition.excludeObjectIds\",write:{enabled:!0}}})],ne.prototype,\"excludeObjectIds\",void 0),e([h({type:String,json:{origins:{service:{read:!1,write:!1}},name:\"layerDefinition.definitionExpression\",write:{enabled:!0,allowNull:!0}}})],ne.prototype,\"definitionExpression\",void 0),e([h({type:Z,json:{name:\"layerDefinition.polygonFilter\",write:{enabled:!0,allowNull:!0},origins:{service:{read:!1,write:!1}}}})],ne.prototype,\"filter\",void 0),e([h({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],ne.prototype,\"path\",void 0),e([h(T)],ne.prototype,\"elevationInfo\",null),e([h({type:String})],ne.prototype,\"geometryType\",null),e([h(x)],ne.prototype,\"labelsVisible\",void 0),e([h({type:[W],json:{origins:{service:{name:\"drawingInfo.labelingInfo\",read:{reader:z},write:!1}},name:\"layerDefinition.drawingInfo.labelingInfo\",read:{reader:z},write:!0}})],ne.prototype,\"labelingInfo\",void 0),e([h(D)],ne.prototype,\"legendEnabled\",void 0),e([h({type:Number,json:{origins:{\"web-document\":{default:1,write:{enabled:!0,target:{opacity:{type:Number},\"layerDefinition.drawingInfo.transparency\":{type:Number}}},read:{source:[\"opacity\",\"layerDefinition.drawingInfo.transparency\"],reader(e,t){if(\"number\"==typeof e&&e>=0&&e<=1)return e;const r=t.layerDefinition?.drawingInfo?.transparency;return void 0!==r?ie(r):void 0}}},\"portal-item\":{write:!0},service:{read:!1}}}})],ne.prototype,\"opacity\",void 0),e([h({type:[\"Low\",\"High\"],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],ne.prototype,\"priority\",void 0),e([h({type:[\"Labels\"],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],ne.prototype,\"semantic\",void 0),e([h({types:s,json:{origins:{service:{read:{source:\"drawingInfo.renderer\"}}},name:\"layerDefinition.drawingInfo.renderer\",write:!0},value:null})],ne.prototype,\"renderer\",null),e([h({json:{read:!1}})],ne.prototype,\"cachedDrawingInfo\",void 0),e([m(\"service\",\"cachedDrawingInfo\")],ne.prototype,\"readCachedDrawingInfo\",null),e([h({readOnly:!0,json:{read:!1}})],ne.prototype,\"capabilities\",null),e([h({type:Boolean,json:{read:!1}})],ne.prototype,\"editingEnabled\",null),e([h({readOnly:!0,json:{write:!1,read:!1}})],ne.prototype,\"infoFor3D\",null),e([h(P)],ne.prototype,\"popupEnabled\",void 0),e([h({type:r,json:{name:\"popupInfo\",write:!0}})],ne.prototype,\"popupTemplate\",void 0),e([h({readOnly:!0,json:{read:!1}})],ne.prototype,\"defaultPopupTemplate\",null),e([h({type:String,json:{read:!1}})],ne.prototype,\"objectIdField\",void 0),e([m(\"service\",\"objectIdField\",[\"objectIdField\",\"fields\"])],ne.prototype,\"readObjectIdField\",null),e([h({type:String,json:{read:!1}})],ne.prototype,\"globalIdField\",void 0),e([m(\"service\",\"globalIdField\",[\"globalIdField\",\"fields\"])],ne.prototype,\"readGlobalIdField\",null),e([h({readOnly:!0,type:String,json:{read:!1}})],ne.prototype,\"displayField\",null),e([h({type:String,json:{read:!1}})],ne.prototype,\"profile\",void 0),e([m(\"service\",\"profile\",[\"store.profile\"])],ne.prototype,\"readProfile\",null),e([h({readOnly:!0,type:String,json:{origins:{service:{read:{source:\"store.normalReferenceFrame\"}}},read:!1}})],ne.prototype,\"normalReferenceFrame\",void 0),e([h(U)],ne.prototype,\"screenSizePerspectiveEnabled\",void 0),ne=e([g(\"esri.layers.SceneLayer\")],ne);const pe={\"mesh-pyramids\":\"mesh-pyramids\",meshpyramids:\"mesh-pyramids\",\"features-meshes\":\"mesh-pyramids\",points:\"points\",\"features-points\":\"points\",lines:\"lines\",\"features-lines\":\"lines\",polygons:\"polygons\",\"features-polygons\":\"polygons\"},le={\"mesh-pyramids\":\"mesh\",points:\"point\",lines:\"polyline\",polygons:\"polygon\"},de=ne;export{de as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{isMultiOriginJSONMixin as t}from\"../../multiOriginJSONSupportUtils.js\";import{isAbsolute as r,isBlobProtocol as e,join as o,getPathExtension as s}from\"../../urlUtils.js\";import{generateUUID as n}from\"../../uuid.js\";import{getPropertyMetadata as i}from\"../metadata.js\";import{nameToId as a}from\"../PropertyOrigin.js\";import{propertyJSONMeta as p}from\"./property.js\";import{getResourceContentExtension as u}from\"../../../portal/support/resourceExtension.js\";import{r as c,t as l,M as m,i as f,p as y,a as d}from\"../../../chunks/persistableUrlUtils.js\";function g(t){const r=t?.origins??[void 0];return(e,o)=>{const s=h(t,e,o);for(const t of r){const r=p(e,t,o);for(const t in s)r[t]=s[t]}}}function h(t,r,e){if(\"resource\"===t?.type)return v(t,r,e);switch(t?.type??\"other\"){case\"other\":return{read:!0,write:!0};case\"url\":{const{read:t,write:r}=d;return{read:t,write:r}}}}function v(o,s,n){const p=i(s,n);return{type:String,read:(t,r,e)=>{const o=c(t,r,e);return p.type===String?o:\"function\"==typeof p.type?new p.type({url:o}):void 0},write:{writer(s,i,u,c){if(!c||!c.resources)return\"string\"==typeof s?void(i[u]=l(s,c)):void(i[u]=s.write({},c));const y=x(s),d=l(y,{...c,verifyItemRelativeUrls:c&&c.verifyItemRelativeUrls?{writtenUrls:c.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},m.NO),g=p.type!==String&&(!t(this)||c&&c.origin&&this.originIdOf(n)>a(c.origin)),h={object:this,propertyName:n,value:s,targetUrl:d,dest:i,targetPropertyName:u,context:c,params:o};c&&c.portalItem&&d&&!r(d)?g?w(h):j(h):c&&c.portalItem&&(null==d||null!=f(d)||e(d)||g)?U(h):i[u]=d}}}}function U(t){const{targetUrl:r,params:s,value:i,context:a,dest:p,targetPropertyName:c}=t;if(!a.portalItem)return;const l=y(r),m=l?.filename??n(),f=s?.prefix??l?.prefix,d=N(i,r,a),g=o(f,m),h=`${g}.${u(d)}`,v=a.portalItem.resourceFromPath(h);e(r)&&a.resources&&a.resources.pendingOperations.push(P(r).then((t=>{v.path=`${g}.${u(t)}`,p[c]=v.itemRelativeUrl})).catch((()=>{})));const U=s?.compress??!1;a.resources&&I({...t,resource:v,content:d,compress:U,updates:a.resources.toAdd}),p[c]=v.itemRelativeUrl}function w(t){const{context:r,targetUrl:e,params:o,value:n,dest:i,targetPropertyName:a}=t;if(!r.portalItem)return;const p=r.portalItem.resourceFromPath(e),c=N(n,e,r),l=u(c),m=s(p.path),f=o?.compress??!1;l===m?(r.resources&&I({...t,resource:p,content:c,compress:f,updates:r.resources.toUpdate}),i[a]=e):U(t)}function j({context:t,targetUrl:r,dest:e,targetPropertyName:o}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),e[o]=r)}function I({object:t,propertyName:r,updates:e,resource:o,content:s,compress:n}){e.push({resource:o,content:s,compress:n,finish:e=>{O(t,r,e)}})}function N(t,r,e){return\"string\"==typeof t?{url:r}:new Blob([JSON.stringify(t.toJSON(e))],{type:\"application/json\"})}async function P(t){const r=(await import(\"../../../request.js\")).default,{data:e}=await r(t,{responseType:\"blob\"});return e}function x(t){return null==t?null:\"string\"==typeof t?t:t.url}function O(t,r,e){\"string\"==typeof t[r]?t[r]=e.url:t[r].url=e.url}export{g as persistable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{getPathExtension as i}from\"../../core/urlUtils.js\";function t(i){return o[p(i)]||e}function p(i){return i instanceof Blob?i.type:n(i.url)}function n(t){const p=i(t);return g[p]||a}const o={},a=\"text/plain\",e=o[a],g={png:\"image/png\",jpeg:\"image/jpeg\",jpg:\"image/jpg\",bmp:\"image/bmp\",gif:\"image/gif\",json:\"application/json\",txt:\"text/plain\",xml:\"application/xml\",svg:\"image/svg+xml\",zip:\"application/zip\",pbf:\"application/vnd.mapbox-vector-tile\",gz:\"application/gzip\",\"bin.gz\":\"application/octet-stream\"};for(const c in g)o[g[c]]=c;export{t as getResourceContentExtension};\n"],"sourceRoot":""}
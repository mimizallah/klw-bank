(this["webpackJsonpklw-bank"]=this["webpackJsonpklw-bank"]||[]).push([[170],{1085:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return d}));var n=r(1),a=r(390),i=r(347),o=r(850),s=r(864),u=r(851),l=r(852),c=r(350),p=r(853),b={key:"type",base:null,typeMap:{"unique-value":c.a,"class-breaks":i.a,"raster-colormap":s.a,"raster-stretch":l.a,"vector-field":p.a,"raster-shaded-relief":u.a,flow:o.a}},d=Object(n.a)(Object(n.a)({},b),{},{typeMap:Object(n.a)({},b.typeMap)});delete d.typeMap["vector-field"],delete d.typeMap.flow;var m={uniqueValue:c.a,classBreaks:i.a,rasterStretch:l.a,rasterColormap:s.a,vectorField:p.a,rasterShadedRelief:u.a,flowRenderer:o.a};function f(e,t){if(!e)return null;if("classBreaks"===e.type&&e.classificationMethod){var r=e.authoringInfo||{classificationMethod:""};r.classificationMethod=e.classificationMethod,e.authoringInfo=r}"vectorField"===e.type&&e.visualVariables&&!Array.isArray(e.visualVariables)&&(e.visualVariables=[e.visualVariables]);var n,i=(n=e)&&m[n.type]||null;if(i){var o=new i;return o.read(e,t),o}return t&&t.messages&&e&&t.messages.push(new a.a("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:t})),null}},1552:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n,a=r(112),i=r(92),o=r(89),s=r(88),u=r(90),l=r(91),c=r(94),p=(r(119),r(105)),b=r(97),d=(r(96),r(98),r(93),r(95)),m=r(130),f=r(164),y=r(122),v=r(573),j={base:r(214).a,key:"type",typeMap:{extent:m.a,polygon:f.a}},h=n=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).areaOfInterest=null,n.subsetDefinitions=null,n}return Object(s.a)(r,[{key:"dimensions",get:function(){var e=this.subsetDefinitions;if(null==e||0===e.length)return[];var t=new Map;e.forEach((function(e){if(e.dimensionName){var r,n;if(Array.isArray(e.values[0])){var a=e.values;r=a[0][0],n=a[e.values.length-1][1]}else{var i=e.values;r=i[0],n=i[e.values.length-1]}if(t.has(e.dimensionName)){var o=t.get(e.dimensionName);o[0]=Math.min(r,o[0]),o[1]=Math.max(n,o[1])}else t.set(e.dimensionName,[r,n])}}));var r,n=[],a=Object(i.a)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;n.push({name:o[0],extent:o[1]})}}catch(s){a.e(s)}finally{a.f()}return n}},{key:"variables",get:function(){var e=this.subsetDefinitions;if(null==e||0===e.length)return[];var t=new Set;return e.forEach((function(e){e.variableName&&t.add(e.variableName)})),Object(a.a)(t)}},{key:"clone",value:function(){var e,t=null===(e=this.subsetDefinitions)||void 0===e?void 0:e.map((function(e){return e.clone()})),r=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new n({areaOfInterest:r,subsetDefinitions:t})}}]),r}(p.a);Object(c.a)([Object(b.b)({types:j,json:{read:y.a,write:!0}})],h.prototype,"areaOfInterest",void 0),Object(c.a)([Object(b.b)({readOnly:!0})],h.prototype,"dimensions",null),Object(c.a)([Object(b.b)({readOnly:!0})],h.prototype,"variables",null),Object(c.a)([Object(b.b)({type:[v.a],json:{write:!0}})],h.prototype,"subsetDefinitions",void 0);var g=h=n=Object(c.a)([Object(d.a)("esri.layers.support.MultidimensionalSubset")],h)},1553:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(1),a=r(4),i=r(12),o=r(89),s=r(88),u=r(101),l=r(452),c=r(414),p=function(){function e(){Object(o.a)(this,e),this._workerThread=null,this._destroyed=!1}return Object(s.a)(e,[{key:"initialize",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.b)("RasterWorker");case 2:t=e.sent,this._destroyed?t.close():this._workerThread=t;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)}},{key:"convertVectorFieldData",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:return e.next=4,this._workerThread.invoke("convertVectorFieldData",{pixelBlock:t.pixelBlock.toJSON(),type:t.dataType},r);case 4:return n=e.sent,e.abrupt("return",n?new c.a(n):null);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"computeStatisticsHistograms",value:function(e,t){if(!this._workerThread)throw new u.a("raster-jobhandler:no-connection","no available worker connection");return this._workerThread.invoke("computeStatisticsHistograms",{pixelBlock:e.pixelBlock.toJSON()},t)}},{key:"decode",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:return e.next=4,this._workerThread.invoke("decode",t,r);case 4:return n=e.sent,e.abrupt("return",n?new c.a(n):null);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"symbolize",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){var n,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:return n={extent:t.extent&&t.extent.toJSON(),pixelBlock:null!=t.pixelBlock&&t.pixelBlock.toJSON(),simpleStretchParams:t.simpleStretchParams,bandIds:t.bandIds},e.next=5,this._workerThread.invoke("symbolize",n,r);case 5:return i=e.sent,e.abrupt("return",i?new c.a(i):null);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateSymbolizer",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){var n,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:return i=null===t||void 0===t||null===(n=t.rendererJSON)||void 0===n?void 0:n.histograms,e.next=5,Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:t.toJSON(),histograms:i},r));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateRasterFunction",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:return e.next=4,Promise.all(this._workerThread.broadcast("updateRasterFunction",{rasterFunctionJSON:t.toJSON()},r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"process",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){var n,i,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:return e.next=4,this._workerThread.invoke("process",{extent:null===(n=t.extent)||void 0===n?void 0:n.toJSON(),primaryPixelSizes:null===(i=t.primaryPixelSizes)||void 0===i?void 0:i.map((function(e){return null!=e?e.toJSON():null})),primaryPixelBlocks:t.primaryPixelBlocks.map((function(e){return null!=e?e.toJSON():null})),primaryRasterIds:t.primaryRasterIds},r);case 4:return o=e.sent,e.abrupt("return",o?new c.a(o):null);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"stretch",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){var n,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!==t&&void 0!==t&&t.pixelBlock){e.next=4;break}return e.abrupt("return",null);case 4:return n={srcPixelBlock:t.pixelBlock.toJSON(),stretchParams:t.stretchParams},e.next=7,this._workerThread.invoke("stretch",n,r);case 7:return i=e.sent,e.abrupt("return",i?new c.a(i):null);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"split",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){var n,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!==t&&void 0!==t&&t.pixelBlock){e.next=4;break}return e.abrupt("return",null);case 4:return n={srcPixelBlock:t.pixelBlock.toJSON(),tileSize:t.tileSize,maximumPyramidLevel:t.maximumPyramidLevel},e.next=7,this._workerThread.invoke("split",n,r);case 7:return i=e.sent,e.abrupt("return",(i&&i.forEach((function(e,t){i.set(t,e?c.a.fromJSON(e):null)})),i));case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"estimateStatisticsHistograms",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!==t&&void 0!==t&&t.pixelBlock){e.next=4;break}return e.abrupt("return",null);case 4:return n={srcPixelBlock:t.pixelBlock.toJSON()},e.next=7,this._workerThread.invoke("estimateStatisticsHistograms",n,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"mosaicAndTransform",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){var i,o,s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!==t&&void 0!==t&&null!==(i=t.srcPixelBlocks)&&void 0!==i&&i.length){e.next=4;break}return e.abrupt("return",{pixelBlock:null});case 4:return o=Object(n.a)(Object(n.a)({},t),{},{srcPixelBlocks:t.srcPixelBlocks.map((function(e){return null!=e?e.toJSON():null}))}),e.next=7,this._workerThread.invoke("mosaicAndTransform",o,r);case 7:return s=e.sent,e.abrupt("return",{pixelBlock:s.pixelBlock?new c.a(s.pixelBlock):null,localNorthDirections:s.localNorthDirections});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createFlowMesh",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){var i,o,s,l;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:return i={buffer:t.flowData.data.buffer,maskBuffer:t.flowData.mask.buffer,width:t.flowData.width,height:t.flowData.height},o=t.meshType,s=t.simulationSettings,e.next=7,this._workerThread.invoke("createFlowMesh",{meshType:o,flowData:i,simulationSettings:s},Object(n.a)(Object(n.a)({},r),{},{transferList:[i.buffer,i.maskBuffer]}));case 7:return l=e.sent,e.abrupt("return",{vertexData:new Float32Array(l.vertexBuffer),indexData:new Uint32Array(l.indexBuffer)});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getProjectionOffsetGrid",value:function(e,t){if(!this._workerThread)throw new u.a("raster-jobhandler:no-connection","no available worker connection");var r=null!=e.datumTransformation?e.datumTransformation.steps.map((function(e){return{wkid:e.wkid,wkt:e.wkt,isInverse:e.isInverse}})):null,n=null!=e.rasterTransform?e.rasterTransform.toJSON():null,a={projectedExtent:e.projectedExtent.toJSON(),srcBufferExtent:e.srcBufferExtent.toJSON(),pixelSize:e.pixelSize,hasWrapAround:e.hasWrapAround,spacing:e.spacing,datumTransformationSteps:r,rasterTransform:n,isAdaptive:e.isAdaptive,includeGCSGrid:e.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",a,t)}}]),e}()},1554:function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return x})),r.d(t,"c",(function(){return I})),r.d(t,"d",(function(){return w})),r.d(t,"e",(function(){return M})),r.d(t,"f",(function(){return k}));var n=r(112),a=r(1),i=r(143),o=(r(1085),r(194),r(325)),s=r(557),u=(r(850),r(611)),l=(r(781),r(685)),c=r(1022),p=r(984),b=(r(809),r(810),r(979)),d=r(852),m=r(350),f=r(864),y=(r(851),r(347),r(853)),v=.25,j=b.a.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),h=b.a.fromJSON(l.a[0]),g=new Set(["scientific","standard-time","vector-uv","vector-magdir","vector-u","vector-v","vector-magnitude","vector-direction"]);function O(e,t){var r=e.attributeTable,a=e.colormap;if(Object(c.f)(e)){var o=function(e){if(!Object(c.f)(e))return null;var t;if(null!=e.statistics&&e.statistics.length&&("vector-magdir"===e.dataType||"vector-uv"===e.dataType)){var r=T(e.dataType,e.statistics);t=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:r.minMagnitude,maxDataValue:r.maxMagnitude}]}var a=null!=e.multidimensionalInfo?R.get(e.multidimensionalInfo.variables[0].unit):null,i=new y.a({visualVariables:t,inputUnit:a,rotationType:"geographic"});return i.visualVariables=[].concat(Object(n.a)(i.sizeVariables),Object(n.a)(i.rotationVariables)),i}(e);if(null!=o)return o}if(null!=a){var s=function(e){if(!Object(c.b)(e))return null;var t,r=e.attributeTable,n=e.colormap;if(null!=r){var a=D(r,"value"),i=S(r,null,!0);"string"===i.type&&(t={},r.features.forEach((function(e){var r=e.attributes;t[r[a.name]]=i?r[i.name]:r[a.name]})))}return f.a.createFromColormap(n,t)}(e);if(null!=s)return s}if(null!=r){var b=function(e,t,r,n){if(!Object(c.e)(e,t))return null;var a=e.attributeTable,o=e.statistics,s=S(a,t),b=D(a,"red"),d=D(a,"green"),f=D(a,"blue"),y=new u.a,v=[],j=new Set,g=!!(b&&d&&f);if(null!=a)a.features.forEach((function(e){var t=e.attributes[s.name];if(!j.has(e.attributes[s.name])&&null!=t){j.add(t);var r=g&&("single"===b.type||"double"===b.type)&&("single"===d.type||"double"===d.type)&&("single"===f.type||"double"===f.type)&&!a.features.some((function(e){return e.attributes[b.name]>1||e.attributes[d.name]>1||e.attributes[f.name]>1})),n=r?255:1;v.push(new p.a({value:e.attributes[s.name],label:e.attributes[s.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:new i.a(g?[e.attributes[b.name]*n,e.attributes[d.name]*n,e.attributes[f.name]*n,1]:[0,0,0,0])}}))}}));else if(null!==o&&void 0!==o&&o[0])for(var O=o[0].min;O<=o[0].max;O++)v.push(new p.a({value:O,label:O.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new i.a([0,0,0,0])}}));if(v.sort((function(e,t){return e.value&&"string"==typeof e.value.valueOf()?0:e.value>t.value?1:-1})),!g){var w=Object(l.c)(h,{numColors:v.length});v.forEach((function(e,t){return e.symbol.color=new i.a(w[t].slice(1,4))})),y.colorRamp=h}if(r||n){var I=r||Object(l.c)(n,{numColors:v.length}).map((function(e){return e.slice(1)}));v.forEach((function(e,t){return e.symbol.color=new i.a(I[t])})),y.colorRamp=n}return new m.a({field:s.name,uniqueValueInfos:v,authoringInfo:y})}(e);if(null!=b)return b}return function(e,t){var r,n,a,i,o,s,u,l;e=M(e,null===t||void 0===t?void 0:t.variableName);var c=e,p=c.bandCount,b=t||{},m=b.bandIds,f=b.stretchType;(null===(r=m)||void 0===r?void 0:r.some((function(e){return e>=p})))&&(m=null);var y=e.statistics,h=e.histograms;p>1?(m=null!==(n=m)&&void 0!==n&&n.length?m:x(e),y=null==y?null:null===(a=m)||void 0===a?void 0:a.map((function(e){return y[e]})),h=null==h?null:null===(i=m)||void 0===i?void 0:i.map((function(e){return h[e]}))):m=[0],null==f&&(f=function(e){var t="percent-clip",r=e.pixelType,n=e.dataType,a=e.histograms,i=e.statistics,o=e.multidimensionalInfo,s=g.has(n)||"generic"===n&&null!=o;return"u8"!==r||"processed"!==n&&null!=a&&null!=i?"u8"===r||"elevation"===n||s?t="min-max":null!=a?t="percent-clip":null!=i&&(t="min-max"):t="none",t}(e));var O=!1;switch(f){case"none":O=!1;break;case"percent-clip":O=!(null!==(o=h)&&void 0!==o&&o.length);break;default:O=!(null!==(s=y)&&void 0!==s&&s.length)}var w=e,I=w.dataType,S=1===(null===(u=m)||void 0===u?void 0:u.length)&&g.has(I)?j:null,D=new d.a({stretchType:f,dynamicRangeAdjustment:O,colorRamp:S,outputMin:0,outputMax:255,gamma:1===(null===(l=m)||void 0===l?void 0:l.length)?[1]:[1,1,1],useGamma:!1});return"percent-clip"===f?D.maxPercent=D.minPercent=v:"standard-deviation"===f&&(D.numberOfStandardDeviations=2),O||null==e.multidimensionalInfo&&!(null!==t&&void 0!==t&&t.includeStatisticsInStretch)||("percent-clip"===f?D.histograms=h:"min-max"!==f&&"standard-deviation"!==f||(D.statistics=y)),D}(e,t)}function w(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=["raster-stretch"];return Object(c.b)(e,t)&&r.push("raster-colormap"),Object(c.e)(e)&&r.push("unique-value"),Object(c.a)(e,t)&&r.push("class-breaks"),Object(c.d)(e)&&r.push("raster-shaded-relief"),Object(c.f)(e)&&r.push("vector-field"),Object(c.c)(e)&&r.push("flow"),r}function I(e,t,r){var n=["nearest","bilinear","cubic","majority"].find((function(e){return e===(null===r||void 0===r?void 0:r.toLowerCase())}));return"Map"===t?null!==n&&void 0!==n?n:"bilinear":"standard-time"===e.dataType?null!==n&&void 0!==n?n:"nearest":"thematic"===e.dataType||e.attributeTable||e.colormap?"nearest"===n||"majority"===n?n:"nearest":null!==n&&void 0!==n?n:"bilinear"}function M(e,t){if(!t)return e;var r=e.statistics,n=e.histograms,i=e.multidimensionalInfo;if(t&&null!=i){var o=i.variables.find((function(e){return e.name===t}));if(o){var u=o.statistics,l=o.histograms;null!==u&&void 0!==u&&u.length&&(r=u),(null===l||void 0===l?void 0:l.length)&&(n=l)}}return s.a.fromJSON(Object(a.a)(Object(a.a)({},e.toJSON()),{},{statistics:r,histograms:n}))}function x(e){var t=e.bandCount;if(1===t)return null;if(2===t)return[0];var r,n=e.bandInfos;if(n.length===t){var a=function(e){for(var t={},r=0;r<e.length;r++){var n=e[r],a=n.name.toLowerCase();if("red"===a)t.red=r;else if("green"===a)t.green=r;else if("blue"===a)t.blue=r;else if("nearinfrared"===a||"nearinfrared_1"===a||"nir"===a)t.nir=r;else if(n.maxWavelength&&n.minWavelength){var i=n.minWavelength,o=n.maxWavelength;null==t.blue&&i>=410&&i<=480&&o>=480&&o<=540?t.blue=r:null==t.green&&i>=490&&i<=560&&o>=560&&o<=610?t.green=r:null==t.red&&i>=595&&i<=670&&o>=660&&o<=730?t.red=r:null==t.nir&&i>=700&&i<=860&&o>=800&&o<=950&&(t.nir=r)}}return t}(n),i=a.red,o=a.green,s=a.blue,u=a.nir;null!=i&&null!=o&&null!=s?r=[i,o,s]:null!=u&&null!=i&&null!=o&&(r=[u,i,o])}return!r&&t>=3&&(r=[0,1,2]),r}function S(e,t,r){var n;return null!=e?(n=t?e.fields.find((function(e){return t.toLowerCase()===e.name.toLowerCase()})):function(e){for(var t,r=0;r<e.length;r++){var n=e[r].name.toLowerCase();if("string"===e[r].type){if(n.startsWith("class")){t=e[r];break}null==t&&(n.endsWith("name")||n.endsWith("type"))&&(t=e[r])}}return t}(e.fields),n||(r||(n=e.fields.find((function(e){return"string"===e.type}))),n||(n=D(e,"value")))):n=new o.a({name:"value"}),n}function D(e,t){return null==e?null:e.fields.find((function(e){return e.name.toLowerCase()===t}))}var R=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);function A(e){var t;return{color:null===(t=e.symbolLayers[0].material)||void 0===t?void 0:t.color,type:"esriSFS",style:"esriSFSSolid"}}function k(e){if("uniqueValue"===e.type){var t,r=e.uniqueValueInfos,n=null===r||void 0===r?void 0:r[0].symbol;return null!==n&&void 0!==n&&null!==(t=n.symbolLayers)&&void 0!==t&&t.length&&(e.uniqueValueInfos=null===r||void 0===r?void 0:r.map((function(e){return{value:e.value,label:e.label,symbol:e.symbol?A(e.symbol):null}}))),e}if("classBreaks"===e.type){var a,i=e.classBreakInfos,o=i[0].symbol;return null!==o&&void 0!==o&&null!==(a=o.symbolLayers)&&void 0!==a&&a.length&&(e.classBreakInfos=i.map((function(e){return{classMinValue:e.classMinValue,classMaxValue:e.classMaxValue,label:e.label,symbol:e.symbol?A(e.symbol):null}}))),e}return e}function T(e,t){var r,n;if("vector-magdir"===e)r=t[0].min,n=t[0].max;else{var a=t[0].min,i=t[0].max,o=t[1].min,s=t[1].max;r=0,n=Math.max(Math.abs(a),Math.abs(o),Math.abs(i),Math.abs(s))}return{minMagnitude:r,maxMagnitude:n}}},1555:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return y}));var n=r(4),a=r(1),i=r(12),o=r(129),s=r(130),u=r(135),l=r(125),c=r(557),p=r(221),b=r(235);function d(e,t,r){return m.apply(this,arguments)}function m(){return m=Object(i.a)(Object(n.a)().mark((function e(t,r,i){var d,m,f,y,v,j,h,g,O,w,I,M,x,S,D,R,A,k,T,N,C,F,L,P,z,V,B,U,E,H,_,J,Z,G,W;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g=Object(p.c)(t),w=(O=r||{}).rasterFunction,I=O.sourceJSON,M=w?JSON.stringify(w.rasterFunctionDefinition||w):null,x=Object(p.b)(Object(a.a)(Object(a.a)({},g.query),{},{renderingRule:M,f:"json"})),S=Object(p.a)(x,i),t=g.path,e.t0=I,e.t0){e.next=7;break}return e.next=6,Object(o.default)(t,S).then((function(e){return e.data}));case 6:e.t0=e.sent;case 7:return D=e.t0,R=D.hasRasterAttributeTable?Object(o.default)("".concat(t,"/rasterAttributeTable"),S):null,A=D.hasColormap?Object(o.default)("".concat(t,"/colormap"),S):null,k=D.hasHistograms?Object(o.default)("".concat(t,"/histograms"),S):null,T=D.currentVersion>=10.3?Object(o.default)("".concat(t,"/keyProperties"),S):null,N=D.hasMultidimensions?Object(o.default)("".concat(t,"/multidimensionalInfo"),S):null,e.next=15,Promise.allSettled([R,A,k,T,N]);case 15:if(C=e.sent,F=null,D.minValues&&D.minValues.length===D.bandCount)for(F=[],L=0;L<D.minValues.length;L++)F.push({min:D.minValues[L],max:D.maxValues[L],avg:D.meanValues[L],stddev:D.stdvValues[L]});return P=s.a.fromJSON(D.extent),z=Math.ceil(P.width/D.pixelSizeX-.1),V=Math.ceil(P.height/D.pixelSizeY-.1),B=l.a.fromJSON(D.spatialReference||D.extent.spatialReference),U="fulfilled"===C[0].status&&C[0].value?b.a.fromJSON(C[0].value.data):null,E="fulfilled"===C[1].status?null===(d=C[1].value)||void 0===d?void 0:d.data.colormap:null,H="fulfilled"===C[2].status?null===(m=C[2].value)||void 0===m?void 0:m.data.histograms:null,_="fulfilled"===C[3].status&&null!==(f=null===(y=C[3].value)||void 0===y?void 0:y.data)&&void 0!==f?f:{},(null===(J="fulfilled"===C[4].status?null===(v=C[4].value)||void 0===v?void 0:v.data.multidimensionalInfo:null)||void 0===J||null===(j=J.variables)||void 0===j?void 0:j.length)&&J.variables.forEach((function(e){var t;(null===(t=e.statistics)||void 0===t?void 0:t.length)&&e.statistics.forEach((function(e){e.avg=e.mean,e.stddev=e.standardDeviation}))})),Z=D.defaultVariable,G=D.serviceDataType,Z&&Z!==_.DefaultVariable&&(_.DefaultVariable=Z),G&&G.includes("esriImageServiceDataTypeVector")&&!G.includes(_.DataType)&&(_.DataType=G.replace("esriImageServiceDataType","")),W=D.noDataValue,e.abrupt("return",(null!==(h=D.noDataValues)&&void 0!==h&&h.length&&D.noDataValues.some((function(e){return e!==W}))&&(W=D.noDataValues),new c.a({width:z,height:V,bandCount:D.bandCount,extent:s.a.fromJSON(D.extent),spatialReference:B,pixelSize:new u.a({x:D.pixelSizeX,y:D.pixelSizeY,spatialReference:B}),pixelType:D.pixelType.toLowerCase(),statistics:F,attributeTable:U,colormap:E,histograms:H,keyProperties:_,noDataValue:W,multidimensionalInfo:J})));case 24:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function f(e,t,r){return d(e,{sourceJSON:t},r)}function y(e,t,r){return d(e,{rasterFunction:t},r)}},1556:function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));var n,a=r(89),i=r(88),o=r(90),s=r(91),u=r(94),l=r(119),c=r(365),p=r(481),b=r(105),d=r(116),m=r(102),f=r(97),y=(r(96),r(95)),v=r(137),j=r(122),h=r(747),g=r(610),O=r(135),w=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).geometry=null,e.mosaicRule=null,e.rasterFunction=null,e.pixelSize=null,e.raster=void 0,e.timeExtent=null,e}return Object(i.a)(r,[{key:"writeGeometry",value:function(e,t,r){null!=e&&(t.geometryType=Object(j.c)(e),t[r]=e.toJSON())}},{key:"renderingRule",get:function(){return Object(p.b)(m.a.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0}),this._get("rasterFunction")},set:function(e){Object(p.b)(m.a.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0}),this._set("rasterFunction",e)}},{key:"clone",value:function(){return new n(Object(d.a)({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,pixelSize:this.pixelSize,raster:this.raster,timeExtent:this.timeExtent}))}}]),r}(b.a);Object(u.a)([Object(f.b)({types:l.a,json:{read:j.a}})],w.prototype,"geometry",void 0),Object(u.a)([Object(v.a)("geometry")],w.prototype,"writeGeometry",null),Object(u.a)([Object(f.b)({type:h.a,json:{write:!0}})],w.prototype,"mosaicRule",void 0),Object(u.a)([Object(f.b)({type:g.a})],w.prototype,"renderingRule",null),Object(u.a)([Object(f.b)({type:g.a,json:{write:!0,name:"renderingRule"}})],w.prototype,"rasterFunction",void 0),Object(u.a)([Object(f.b)({type:O.a,json:{write:!0}})],w.prototype,"pixelSize",void 0),Object(u.a)([Object(f.b)({json:{write:!0}})],w.prototype,"raster",void 0),Object(u.a)([Object(f.b)({type:c.a,json:{read:{source:"time"},write:{target:"time"}}})],w.prototype,"timeExtent",void 0);var I=w=n=Object(u.a)([Object(y.a)("esri.rest.support.ImageHistogramParameters")],w)},1762:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return hr}));var n=r(92),a=r(1),i=r(89),o=r(88),s=r(90),u=r(91),l=r(94),c=r(258),p=r(281),b=r(110),d=r(97),m=r(96),f=(r(98),r(93),r(95)),y=r(137),v=r(259),j=r(4),h=r(12),g=r(119),O=r(172),w=r(1085),I=r(129),M=r(481),x=r(101),S=r(116),D=r(102),R=r(127),A=r(128),k=r(136),T=r(244),N=r(573),C=r(105),F=r(112),L=r(610),P={StretchFunction:{arguments:{ComputeGamma:{isDataset:!1,isPublic:!1,name:"ComputeGamma",type:"RasterFunctionVariable",value:!1},DRA:{isDataset:!1,isPublic:!1,name:"DRA",type:"RasterFunctionVariable",value:!1},EstimateStatsHistogram:{isDataset:!1,isPublic:!1,name:"EstimateStatsHistogram",type:"RasterFunctionVariable",value:!1},Gamma:{displayName:"Gamma",isDataset:!1,isPublic:!1,name:"Gamma",type:"RasterFunctionVariable"},Histograms:{isDataset:!1,isPublic:!1,name:"Histograms",type:"RasterFunctionVariable"},Max:{isDataset:!1,isPublic:!1,name:"Max",type:"RasterFunctionVariable",value:255},MaxPercent:{isDataset:!1,isPublic:!1,name:"MaxPercent",type:"RasterFunctionVariable",value:.5},Min:{isDataset:!1,isPublic:!1,name:"Min",type:"RasterFunctionVariable",value:0},MinPercent:{isDataset:!1,isPublic:!1,name:"MinPercent",type:"RasterFunctionVariable",value:.25},NumberOfStandardDeviations:{isDataset:!1,isPublic:!1,name:"NumberOfStandardDeviation",type:"RasterFunctionVariable",value:2},Raster:{isDataset:!0,isPublic:!1,name:"Raster",type:"RasterFunctionVariable"},SigmoidStrengthLevel:{isDataset:!1,isPublic:!1,name:"SigmoidStrengthLevel",type:"RasterFunctionVariable",value:2},Statistics:{isDataset:!1,isPublic:!1,name:"Statistics",type:"RasterFunctionVariable"},StretchType:{isDataset:!1,isPublic:!1,name:"StretchType",type:"RasterFunctionVariable",value:0},type:"StretchFunctionArguments",UseGamma:{isDataset:!1,isPublic:!1,name:"UseGamma",type:"RasterFunctionVariable",value:!1}},description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",function:{description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",name:"Stretch",pixelType:"UNKNOWN",type:"StretchFunction"},functionType:0,name:"Stretch",thumbnail:""},RemapFunction:{name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table.",function:{type:"RemapFunction",pixelType:"UNKNOWN",name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},UseTable:{name:"UseTable",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},InputRanges:{name:"InputRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Input Ranges"},OutputValues:{name:"OutputValues",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Output Values"},NoDataRanges:{name:"NoDataRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"NoData Ranges"},Table:{name:"Table",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputField:{name:"InputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},OutputField:{name:"OutputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputMaxField:{name:"InputMaxField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},RemapTableType:{name:"RemapTableType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},AllowUnmatched:{name:"AllowUnmatched",isPublic:!1,isDataset:!1,value:!0,type:"RasterFunctionVariable"},type:"RemapFunctionArguments"},functionType:0,thumbnail:""},ColormapFunction:{name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp.",function:{type:"ColormapFunction",pixelType:"UNKNOWN",name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},ColormapName:{name:"ColormapName",isPublic:!1,isDataset:!1,value:"Gray",type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},type:"ColormapFunctionArguments"},functionType:0,thumbnail:""},ShadedReliefFunction:{name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image.",function:{type:"ShadedReliefFunction",pixelType:"UNKNOWN",name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"ShadedReliefFunctionArguments"},functionType:0,thumbnail:""},HillshadeFunction:{name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image",function:{type:"HillshadeFunction",pixelType:"UNKNOWN",name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image"},arguments:{DEM:{name:"DEM",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"HillshadeFunctionArguments"},functionType:0,thumbnail:""},ResampleFunction:{name:"Resample",description:"Changes the cell size of a raster.",function:{type:"ResampleFunction",pixelType:"UNKNOWN",name:"Resample",description:"Changes the cell size of a raster."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ResamplingType:{name:"ResamplingType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},InputCellSize:{name:"InputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},OutputCellSize:{name:"OutputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},type:"ResampleFunctionArguments"},functionType:0,thumbnail:""}},z=r(470),V=r(685),B=r(1175),U=r(582),E=new Set(["u1","u2","u4","u8","s8","u16","s16"]),H={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},_=new Set(["raster-stretch","unique-value","class-breaks","raster-shaded-relief","vector-field","raster-colormap"]);function J(e){return _.has(e.type)}function Z(e,t){var r;if(!e||!t)return Object(S.a)(e||t);var n=Object(S.a)(e);if(n.functionDefinition&&t.rasterFunctionDefinition){var a=t.rasterFunctionDefinition;(a.thumbnail||a.thumbnailEx)&&(a.thumbnail=a.thumbnailEx=void 0),G(n.functionDefinition.arguments,t),n.rasterFunctionDefinition=n.functionDefinition.toJSON()}else"none"!==(null===(r=t.functionName)||void 0===r?void 0:r.toLowerCase())&&(Q(n.functionArguments).Raster=t);return n}function G(e,t){for(var r in e)"raster"===r.toLowerCase()&&("RasterFunctionVariable"===e[r].type?(e[r]=t.rasterFunctionDefinition,e[r].type="RasterFunctionTemplate"):"RasterFunctionTemplate"===e[r].type&&G(e[r].arguments,t))}function W(e){var t=Object(S.a)(P[e.functionName+"Function"]),r=e.functionArguments;for(var n in r)"raster"===n.toLowerCase()?(t.arguments[n]=W(r[n]),t.arguments[n].type="RasterFunctionTemplate"):"colormap"===n.toLowerCase()?(t.arguments[n].value=ee(r[n]),t.arguments.ColorSchemeType.value=0):t.arguments[n].value=r[n];return t}function q(e,t){switch(t=t||{},e.type){case"raster-stretch":return function(e,t){var r,n=t.convertToRFT,a=new L.a;a.functionName="Stretch";var i=K[B.b.toJSON(e.stretchType)],o="u8",s={StretchType:i,Statistics:$(null!==(r=e.statistics)&&void 0!==r?r:[]),DRA:e.dynamicRangeAdjustment,UseGamma:e.useGamma,Gamma:e.gamma,ComputeGamma:e.computeGamma};if(null!=e.outputMin&&(s.Min=e.outputMin),null!=e.outputMax&&(s.Max=e.outputMax),i===K.standardDeviation?(s.NumberOfStandardDeviations=e.numberOfStandardDeviations,a.outputPixelType=o):i===K.percentClip?(s.MinPercent=e.minPercent,s.MaxPercent=e.maxPercent,a.outputPixelType=o):i===K.minMax?a.outputPixelType=o:i===K.sigmoid&&(s.SigmoidStrengthLevel=e.sigmoidStrengthLevel),a.functionArguments=s,a.variableName="Raster",e.colorRamp){var u=e.colorRamp,l=new L.a;if(n)l.functionArguments={ColorRamp:Object(V.h)(u)};else{var c=Object(V.g)(u,!0);if(c)l.functionArguments={colorRamp:c};else if(!t.convertColorRampToColormap||"algorithmic"!==u.type&&"multipart"!==u.type){var p,b=e.colorRamp.toJSON();"algorithmic"===b.type?b.algorithm=b.algorithm||"esriCIELabAlgorithm":"multipart"===b.type&&(null===(p=b.colorRamps)||void 0===p?void 0:p.length)&&b.colorRamps.forEach((function(e){return e.algorithm=e.algorithm||"esriCIELabAlgorithm"})),l.functionArguments={colorRamp:b}}else l.functionArguments={Colormap:Object(V.c)(u)}}return l.variableName="Raster",l.functionName="Colormap",l.functionArguments.Raster=a,n?new L.a({rasterFunctionDefinition:W(l)}):l}return n?new L.a({rasterFunctionDefinition:W(a)}):a}(e,t);case"class-breaks":return function(e,t){var r=[],n=[],a=[],i=[],o=1e-6,s=t.pixelType,u=t.rasterAttributeTable,l=null==u?null:u.features,c=Y(u);if(c&&l&&Array.isArray(l)&&e.classBreakInfos){e.classBreakInfos.forEach((function(t,r){var n,a,o=null===(n=t.symbol)||void 0===n?void 0:n.color;(null===o||void 0===o?void 0:o.a)&&null!=t.minValue&&null!=t.maxValue&&l.forEach((function(n){null!=t.minValue&&null!=t.maxValue&&(((a=n.attributes[e.field])>=t.minValue&&a<t.maxValue||r===e.classBreakInfos.length-1&&a>=t.minValue)&&i.push([n.attributes[c],o.r,o.g,o.b]))}))}));var p=s?X(i,s):i,b=new L.a;return b.functionName="Colormap",b.functionArguments={},b.functionArguments.Colormap=p,b.variableName="Raster",t.convertToRFT?new L.a({rasterFunctionDefinition:W(b)}):b}e.classBreakInfos.forEach((function(e,t){if(null!=e.minValue&&null!=e.maxValue){var s=e.symbol&&e.symbol.color;null!==s&&void 0!==s&&s.a?(0===t?r.push(e.minValue,e.maxValue+o):r.push(e.minValue+o,e.maxValue+o),n.push(t),i.push([t,s.r,s.g,s.b])):a.push(e.minValue,e.maxValue)}}));var d=s?X(i,s):i,m=new L.a;m.functionName="Remap",m.functionArguments={InputRanges:r,OutputValues:n,NoDataRanges:a},m.variableName="Raster";var f=new L.a;return f.functionName="Colormap",f.functionArguments={Colormap:d,Raster:m},t.convertToRFT?new L.a({rasterFunctionDefinition:W(f)}):f}(e,t);case"unique-value":return function(e,t){var r,n=[],a=t.pixelType,i=t.rasterAttributeTable,o=null==i?null:i.features,s=Y(i),u=null===(r=e.defaultSymbol)||void 0===r||null===(r=r.color)||void 0===r?void 0:r.toRgb(),l=e.uniqueValueInfos;if(l)if(o){if(s){var c=new Map;l.forEach((function(e){var t,r=e.value,n=null===(t=e.symbol)||void 0===t?void 0:t.color;null!=r&&n&&n.a&&c.set(String(r),n.toRgb())}));var p=e.field;o.forEach((function(e){var t=e.attributes,r=String(t[p]),a=t[s],i=c.get(r);i?n.push([a].concat(Object(F.a)(i))):u&&n.push([a].concat(Object(F.a)(u)))}))}}else for(var b=0;b<l.length;b++){var d,m=l[b],f=null===(d=m.symbol)||void 0===d?void 0:d.color,y=+m.value;if(null!==f&&void 0!==f&&f.a){if(isNaN(y))return null;n.push([y,f.r,f.g,f.b])}}var v=a&&n.length>0?X(n,a):n,j=new L.a;return j.functionName="Colormap",j.functionArguments={},j.functionArguments.Colormap=v,j.variableName="Raster",t.convertToRFT?new L.a({rasterFunctionDefinition:W(j)}):j}(e,t);case"raster-colormap":return function(e,t){var r=e.extractColormap();if(!r||0===r.length)return null;var n=t.pixelType,a=n?X(r,n):r,i=new L.a;return i.functionName="Colormap",i.functionArguments={},i.functionArguments.Colormap=a,t.convertToRFT?new L.a({rasterFunctionDefinition:W(i)}):i}(e,t);case"vector-field":return function(e,t){var r=new L.a;r.functionName="VectorFieldRenderer";var n,a,i=t.dataType,o=t.bandNames,s="vector-uv"===i;if(o&&2===o.length){var u=o.map((function(e){return e.toLowerCase()}));n=u.indexOf("magnitude"),a=u.indexOf("direction")}-1!==n&&null!==n||(n=0,a=1);var l="arithmetic"===e.rotationType?1:2,c="flow-from"===e.flowRepresentation?0:1,p=e.visualVariables?e.visualVariables.find((function(e){return"Magnitude"===e.field})):new U.a,b={magnitudeBandID:n,directionBandID:a,isUVComponents:s,referenceSystem:l,massFlowAngleRepresentation:c,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:H[e.style.toLowerCase().replace("-","_")],minimumMagnitude:p.minDataValue,maximumMagnitude:p.maxDataValue,minimumSymbolSize:p.minSize,maximumSymbolSize:p.maxSize};r.functionArguments=b;var d=W(r);return t.convertToRFT?L.a.fromJSON({rasterFunctionDefinition:d}):r}(e,t);case"raster-shaded-relief":return function(e,t){var r=t.convertToRFT;if("elevation"!==t.dataType&&("generic"!==t.dataType||1!==t.bandCount||"s16"!==t.pixelType&&"s32"!==t.pixelType&&"f32"!==t.pixelType&&"f64"!==t.pixelType))return new L.a;var n=new L.a;n.functionName="Hillshade";var a="traditional"===e.hillshadeType?0:1,i="none"===e.scalingType?1:3,o={HillshadeType:a,SlopeType:i,ZFactor:e.zFactor};return 0===a&&(o.Azimuth=e.azimuth,o.Altitude=e.altitude),3===i&&(o.PSPower=e.pixelSizePower,o.PSZFactor=e.pixelSizeFactor),n.functionArguments=o,n.variableName="Raster",e.colorRamp&&(n.functionName="ShadedRelief",r?o.ColorRamp=Object(V.h)(e.colorRamp):o.Colormap=Object(V.c)(e.colorRamp)),r?new L.a({rasterFunctionDefinition:W(n)}):n}(e,t);case"flow":throw new Error("Unsupported rendering rule.")}}function Q(e){var t=null===e||void 0===e?void 0:e.Raster;return t&&"esri.layers.support.RasterFunction"===t.declaredClass?Q(t.functionArguments):e}var K={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};function X(e,t){var r=E.has(t)?Object(z.b)(t):null;return r&&e.push([Math.floor(r[0]-1),0,0,0],[Math.ceil(r[1]+1),0,0,0]),e}function Y(e){if(null!=e){var t=e.fields,r=t&&t.find((function(e){return e&&e.name&&"value"===e.name.toLowerCase()}));return r&&r.name}}function $(e){var t=[];return null!==e&&void 0!==e&&e.forEach((function(e){var r=e;if(Array.isArray(r))t.push(r);else{if(null==r.min||null==r.max)return;var n=[r.min,r.max,r.avg||0,r.stddev||0];t.push(n)}})),t}function ee(e){var t=[],r=[];return e.forEach((function(e){t.push(e[0]),r.push(Object(V.e)([].concat(Object(F.a)(e.slice(1)),[255])))})),{type:"RasterColormap",values:t,colors:r}}var te=r(747),re=r(854),ne=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).layer=null,e.compression=void 0,e.pixelType=void 0,e.lercVersion=2,e}return Object(o.a)(r,[{key:"adjustAspectRatio",get:function(){return this.layer.adjustAspectRatio}},{key:"writeAdjustAspectRatio",value:function(e,t,r){this.layer.version<10.3||(t[r]=e)}},{key:"bandIds",get:function(){return this.layer.bandIds}},{key:"compressionQuality",get:function(){return this.layer.compressionQuality}},{key:"writeCompressionQuality",value:function(e,t,r){this.format&&this.format.toLowerCase().includes("jpg")&&null!=e&&(t[r]=e)}},{key:"compressionTolerance",get:function(){return this.layer.compressionTolerance}},{key:"writeCompressionTolerance",value:function(e,t,r){"lerc"===this.format&&null!=e&&(t[r]=e)}},{key:"format",get:function(){var e;return"vector-field"===(null===(e=this.layer.renderer)||void 0===e?void 0:e.type)?"lerc":this.layer.format}},{key:"interpolation",get:function(){return this.layer.interpolation}},{key:"noData",get:function(){return this.layer.noData}},{key:"noDataInterpretation",get:function(){return this.layer.noDataInterpretation}},{key:"writeLercVersion",value:function(e,t,r){"lerc"===this.format&&this.layer.version>=10.5&&(t[r]=e)}},{key:"version",get:function(){var e=this.layer;return e.commitProperty("bandIds"),e.commitProperty("format"),e.commitProperty("compressionQuality"),e.commitProperty("compressionTolerance"),e.commitProperty("interpolation"),e.commitProperty("noData"),e.commitProperty("noDataInterpretation"),e.commitProperty("mosaicRule"),e.commitProperty("rasterFunction"),e.commitProperty("adjustAspectRatio"),e.commitProperty("pixelFilter"),e.commitProperty("definitionExpression"),e.commitProperty("multidimensionalSubset"),(this._get("version")||0)+1},set:function(e){this._set("version",e)}},{key:"mosaicRule",get:function(){var e=this.layer,t=e.mosaicRule,r=e.definitionExpression;return t?r&&r!==t.where&&((t=t.clone()).where=r):r&&(t=new te.a({where:r})),t}},{key:"rasterFunction",get:function(){var e,t,r=this.layer,n=r.rasterFunction,a=r.pixelFilter,i=!r.format||r.format.includes("jpg")||r.format.includes("png");n=this._addResampleRasterFunction(n);var o=null===(e=r.multidimensionalSubset)||void 0===e?void 0:e.areaOfInterest;return o&&(n=this._addClipFunction(n,o)),i&&!a&&"vector-field"!==(null===(t=r.renderer)||void 0===t?void 0:t.type)&&(n=this.combineRendererWithRenderingRule(n)),n}},{key:"combineRendererWithRenderingRule",value:function(e){var t,r=this.layer,n=r.rasterInfo,a=r.renderer;return e=e||r.rasterFunction,a&&J(a)?Z(q(a,{rasterAttributeTable:n.attributeTable,pixelType:n.pixelType,dataType:n.dataType,bandNames:n.bandInfos.map((function(e){return e.name})),convertColorRampToColormap:r.version<10.6,convertToRFT:!(null===(t=e)||void 0===t||!t.rasterFunctionDefinition),bandCount:n.bandCount}),e):e}},{key:"_addResampleRasterFunction",value:function(e){var t;if("vector-field"!==(null===(t=this.layer.renderer)||void 0===t?void 0:t.type)||"Resample"===(null===e||void 0===e?void 0:e.functionName))return e;var r="esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?7:10,n=this.layer.serviceRasterInfo.pixelSize,a=new L.a({functionName:"Resample",functionArguments:{ResamplingType:r,InputCellSize:n}});return Z(a=null!==e&&void 0!==e&&e.rasterFunctionDefinition?new L.a({rasterFunctionDefinition:W(a)}):a,e)}},{key:"_addClipFunction",value:function(e,t){return Z(new L.a({functionName:"Clip",functionArguments:{ClippingGeometry:t.toJSON(),ClippingType:1}}),e)}}]),r}(C.a);Object(l.a)([Object(d.b)()],ne.prototype,"layer",void 0),Object(l.a)([Object(d.b)({json:{write:!0}})],ne.prototype,"adjustAspectRatio",null),Object(l.a)([Object(y.a)("adjustAspectRatio")],ne.prototype,"writeAdjustAspectRatio",null),Object(l.a)([Object(d.b)({json:{write:!0}})],ne.prototype,"bandIds",null),Object(l.a)([Object(d.b)({json:{write:!0}})],ne.prototype,"compression",void 0),Object(l.a)([Object(d.b)({json:{write:!0}})],ne.prototype,"compressionQuality",null),Object(l.a)([Object(y.a)("compressionQuality")],ne.prototype,"writeCompressionQuality",null),Object(l.a)([Object(d.b)({json:{write:!0}})],ne.prototype,"compressionTolerance",null),Object(l.a)([Object(y.a)("compressionTolerance")],ne.prototype,"writeCompressionTolerance",null),Object(l.a)([Object(d.b)({json:{write:!0}})],ne.prototype,"format",null),Object(l.a)([Object(d.b)({type:String,json:{read:{reader:re.a.read},write:{writer:re.a.write}}})],ne.prototype,"interpolation",null),Object(l.a)([Object(d.b)({json:{write:!0}})],ne.prototype,"noData",null),Object(l.a)([Object(d.b)({type:String,json:{read:{reader:re.b.read},write:{writer:re.b.write}}})],ne.prototype,"noDataInterpretation",null),Object(l.a)([Object(d.b)({json:{write:!0}})],ne.prototype,"pixelType",void 0),Object(l.a)([Object(d.b)({json:{write:!0}})],ne.prototype,"lercVersion",void 0),Object(l.a)([Object(y.a)("lercVersion")],ne.prototype,"writeLercVersion",null),Object(l.a)([Object(d.b)({type:Number})],ne.prototype,"version",null),Object(l.a)([Object(d.b)({json:{write:!0}})],ne.prototype,"mosaicRule",null),Object(l.a)([Object(d.b)({json:{write:!0,name:"renderingRule"}})],ne.prototype,"rasterFunction",null),ne=Object(l.a)([Object(f.a)("esri.layers.mixins.ExportImageServiceParameters")],ne);var ae=r(325),ie=r(227),oe=r(515),se=r(1552),ue=r(414),le=r(557),ce=r(1553),pe=r(911),be=r(1245),de=r(571),me=r(1554),fe=r(1330),ye=r(217),ve=r(221),je=r(125),he=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).north=null,n.up=null,n.spatialReference=null,n}return Object(o.a)(r)}(C.a);Object(l.a)([Object(d.b)({type:Number,json:{write:!0}})],he.prototype,"north",void 0),Object(l.a)([Object(d.b)({type:Number,json:{write:!0}})],he.prototype,"up",void 0),Object(l.a)([Object(d.b)({type:je.a,json:{write:!0}})],he.prototype,"spatialReference",void 0);var ge=he=Object(l.a)([Object(f.a)("esri.rest.support.ImageAngleResult")],he),Oe=r(194),we=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).value=null,e.displayValue=null,e.uncertainty=null,e}return Object(o.a)(r)}(C.a);Object(l.a)([Object(d.b)({type:Number,json:{read:!0,write:!0}})],we.prototype,"value",void 0),Object(l.a)([Object(d.b)({type:String,json:{read:!0,write:!0}})],we.prototype,"displayValue",void 0),Object(l.a)([Object(d.b)({type:Number,json:{read:!0,write:!0}})],we.prototype,"uncertainty",void 0);var Ie=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).unit=null,e}return Object(o.a)(r)}(we=Object(l.a)([Object(f.a)("esri.rest.support.ImageMeasureResultValue")],we));Object(l.a)([Object(d.b)({type:String,json:{read:Oe.k.read,write:Oe.k.write}})],Ie.prototype,"unit",void 0),Ie=Object(l.a)([Object(f.a)("esri.rest.support.ImageMeasureResultLengthValue")],Ie);var Me=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).unit=null,e}return Object(o.a)(r)}(we);Object(l.a)([Object(d.b)({type:String,json:{read:Oe.b.read,write:Oe.b.write}})],Me.prototype,"unit",void 0),Me=Object(l.a)([Object(f.a)("esri.rest.support.ImageMeasureResultAreaValue")],Me);var xe=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).unit=null,e}return Object(o.a)(r)}(we);Object(l.a)([Object(d.b)({type:String,json:{read:Oe.a.read,write:Oe.a.write}})],xe.prototype,"unit",void 0),xe=Object(l.a)([Object(f.a)("esri.rest.support.ImageMeasureResultAngleValue")],xe);var Se=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).name=null,e.sensorName=null,e}return Object(o.a)(r)}(C.a);Object(l.a)([Object(d.b)({type:String,json:{read:!0,write:!0}})],Se.prototype,"name",void 0),Object(l.a)([Object(d.b)({type:String,json:{read:!0,write:!0}})],Se.prototype,"sensorName",void 0);var De=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).area=null,e.perimeter=null,e}return Object(o.a)(r)}(Se=Object(l.a)([Object(f.a)("esri.rest.support.BaseImageMeasureResult")],Se));Object(l.a)([Object(d.b)({type:Me,json:{read:!0,write:!0}})],De.prototype,"area",void 0),Object(l.a)([Object(d.b)({type:Ie,json:{read:!0,write:!0}})],De.prototype,"perimeter",void 0);var Re=De=Object(l.a)([Object(f.a)("esri.rest.support.ImageAreaResult")],De),Ae=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).distance=null,e.azimuthAngle=null,e.elevationAngle=null,e}return Object(o.a)(r)}(Se);Object(l.a)([Object(d.b)({type:Ie,json:{read:!0,write:!0}})],Ae.prototype,"distance",void 0),Object(l.a)([Object(d.b)({type:xe,json:{read:!0,write:!0}})],Ae.prototype,"azimuthAngle",void 0),Object(l.a)([Object(d.b)({type:xe,json:{read:!0,write:!0}})],Ae.prototype,"elevationAngle",void 0);var ke=Ae=Object(l.a)([Object(f.a)("esri.rest.support.ImageDistanceResult")],Ae),Te=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).height=null,e}return Object(o.a)(r)}(Se);Object(l.a)([Object(d.b)({type:Ie,json:{read:!0,write:!0}})],Te.prototype,"height",void 0);var Ne=Te=Object(l.a)([Object(f.a)("esri.rest.support.ImageHeightResult")],Te),Ce=r(135),Fe=r(235),Le=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).catalogItemVisibilities=null,e.catalogItems=null,e.location=null,e.name=null,e.objectId=null,e.processedValues=null,e.properties=null,e.value=null,e}return Object(o.a)(r)}(C.a);Object(l.a)([Object(d.b)({json:{write:!0}})],Le.prototype,"catalogItemVisibilities",void 0),Object(l.a)([Object(d.b)({type:Fe.a,json:{write:!0}})],Le.prototype,"catalogItems",void 0),Object(l.a)([Object(d.b)({type:Ce.a,json:{write:!0}})],Le.prototype,"location",void 0),Object(l.a)([Object(d.b)({json:{write:!0}})],Le.prototype,"name",void 0),Object(l.a)([Object(d.b)({json:{write:!0}})],Le.prototype,"objectId",void 0),Object(l.a)([Object(d.b)({json:{write:!0}})],Le.prototype,"processedValues",void 0),Object(l.a)([Object(d.b)({json:{write:!0}})],Le.prototype,"properties",void 0),Object(l.a)([Object(d.b)({json:{write:!0}})],Le.prototype,"value",void 0);var Pe=Le=Object(l.a)([Object(f.a)("esri.rest.support.ImageIdentifyResult")],Le),ze=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).geometries=null,e}return Object(o.a)(r)}(C.a);Object(l.a)([Object(d.b)({json:{write:!0}})],ze.prototype,"geometries",void 0);var Ve=ze=Object(l.a)([Object(f.a)("esri.rest.support.ImagePixelLocationResult")],ze),Be=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).point=null,e}return Object(o.a)(r)}(Se);Object(l.a)([Object(d.b)({type:Ce.a,json:{name:"point.value",read:!0,write:!0}})],Be.prototype,"point",void 0);var Ue=Be=Object(l.a)([Object(f.a)("esri.rest.support.ImagePointResult")],Be),Ee=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).attributes=null,e.location=null,e.locationId=null,e.rasterId=null,e.resolution=null,e.pixelValue=null,e}return Object(o.a)(r)}(C.a);Object(l.a)([Object(d.b)({json:{write:!0}})],Ee.prototype,"attributes",void 0),Object(l.a)([Object(d.b)({type:Ce.a,json:{write:!0}})],Ee.prototype,"location",void 0),Object(l.a)([Object(d.b)({json:{write:!0}})],Ee.prototype,"locationId",void 0),Object(l.a)([Object(d.b)({json:{write:!0}})],Ee.prototype,"rasterId",void 0),Object(l.a)([Object(d.b)({json:{write:!0}})],Ee.prototype,"resolution",void 0),Object(l.a)([Object(d.b)({json:{write:!0}})],Ee.prototype,"pixelValue",void 0);var He=Ee=Object(l.a)([Object(f.a)("esri.rest.support.ImageSample")],Ee),_e=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).samples=null,e}return Object(o.a)(r)}(C.a);Object(l.a)([Object(d.b)({type:[He],json:{write:!0}})],_e.prototype,"samples",void 0);var Je=_e=Object(l.a)([Object(f.a)("esri.rest.support.ImageSampleResult")],_e);function Ze(e){var t=null===e||void 0===e?void 0:e.time;if(t&&(null!=t.start||null!=t.end)){var r=[];null!=t.start&&r.push(t.start),null==t.end||r.includes(t.end)||r.push(t.end),e.time=r.join(",")}}function Ge(e,t,r){return We.apply(this,arguments)}function We(){return(We=Object(h.a)(Object(j.a)().mark((function e(t,r,n){var i,o,s,u,l,c;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(ve.c)(t),o=r.geometry?[r.geometry]:[],e.next=4,Object(ye.a)(o);case 4:return s=e.sent,Ze(u=r.toJSON()),null!=(l=s&&s[0])&&(u.geometry=l.toJSON()),c=Object(ve.b)(Object(a.a)(Object(a.a)({},i.query),{},{f:"json"},u)),e.abrupt("return",Object(ve.a)(c,n));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e,t,r){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(h.a)(Object(j.a)().mark((function e(t,r,n){var i,o,s,u,l,c,p;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=(o=r.toJSON()).angleName&&(o.angleName=o.angleName.join(",")),null!=r.point&&null!==(i=r.point.spatialReference)&&void 0!==i&&i.imageCoordinateSystem&&(o.point.spatialReference=vt(r.point.spatialReference)),null!=r.spatialReference&&r.spatialReference.imageCoordinateSystem&&(o.spatialReference=jt(r.spatialReference)),s=Object(ve.c)(t),u=Object(ve.b)(Object(a.a)(Object(a.a)({},s.query),{},{f:"json"},o)),l=Object(ve.a)(u,n),e.next=7,Object(I.default)("".concat(s.path,"/computeAngles"),l);case 7:return c=e.sent,p=c.data,e.abrupt("return",(p.spatialReference=p.spatialReference?null!=p.spatialReference.geodataXform?new je.a({wkid:0,imageCoordinateSystem:p.spatialReference}):je.a.fromJSON(p.spatialReference):null,"NaN"===p.north&&(p.north=null),"NaN"===p.up&&(p.up=null),new ge(p)));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e,t,r){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(h.a)(Object(j.a)().mark((function e(t,r,n){var i,o,s,u,l,c,p,b,d;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.toJSON(),o=r.geometries)for(s=0;s<o.length;s++)(null===(u=o[s].spatialReference)||void 0===u?void 0:u.imageCoordinateSystem)&&(i.geometries.geometries[s].spatialReference=vt(o[s].spatialReference));return l=Object(ve.c)(t),c=Object(ve.b)(Object(a.a)(Object(a.a)({},l.query),{},{f:"json"},i)),p=Object(ve.a)(c,n),e.next=7,Object(I.default)("".concat(l.path,"/computePixelLocation"),p);case 7:return b=e.sent,d=b.data,e.abrupt("return",Ve.fromJSON(d));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e,t,r){return $e.apply(this,arguments)}function $e(){return($e=Object(h.a)(Object(j.a)().mark((function e(t,r,n){var a,i,o,s,u;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge(t,r,n);case 2:return a=e.sent,i=Object(ve.c)(t),e.next=6,Object(I.default)("".concat(i.path,"/computeStatisticsHistograms"),a);case 6:return o=e.sent,s=o.data,u=s.statistics,e.abrupt("return",(null!==u&&void 0!==u&&u.length&&u.forEach((function(e){e.avg=e.mean,e.stddev=e.standardDeviation})),{statistics:u,histograms:s.histograms}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,t,r){return tt.apply(this,arguments)}function tt(){return(tt=Object(h.a)(Object(j.a)().mark((function e(t,r,n){var a,i,o,s;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge(t,r,n);case 2:return a=e.sent,i=Object(ve.c)(t),e.next=6,Object(I.default)("".concat(i.path,"/computeHistograms"),a);case 6:return o=e.sent,s=o.data,e.abrupt("return",{histograms:s.histograms});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e,t,r){return nt.apply(this,arguments)}function nt(){return(nt=Object(h.a)(Object(j.a)().mark((function e(t,r,n){var i,o,s,u,l,c,p,b,d,m,f;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ze(s=r.toJSON()),(null===(i=s.outFields)||void 0===i?void 0:i.length)&&(s.outFields=s.outFields.join(",")),e.next=4,Object(ye.a)(r.geometry);case 4:return u=e.sent,null!=(l=null===u||void 0===u?void 0:u[0])&&(s.geometry=l.toJSON()),c=Object(ve.c)(t),p=Object(ve.b)(Object(a.a)(Object(a.a)({},c.query),{},{f:"json"},s)),b=Object(ve.a)(p,n),e.next=12,Object(I.default)("".concat(c.path,"/getSamples"),b);case 12:return d=e.sent,m=d.data,f=null===m||void 0===m||null===(o=m.samples)||void 0===o?void 0:o.map((function(e){var t="NaN"===e.value||""===e.value?null:e.value.split(" ").map((function(e){return Number(e)}));return Object(a.a)(Object(a.a)({},e),{},{pixelValue:t})})),e.abrupt("return",Je.fromJSON({samples:f}));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e,t,r){return it.apply(this,arguments)}function it(){return(it=Object(h.a)(Object(j.a)().mark((function e(t,r,n){var i,o;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(ve.c)(t),o=r.geometry?[r.geometry]:[],e.abrupt("return",Object(ye.a)(o).then((function(e){var t=r.toJSON(),o=e&&e[0];null!=o&&(t.geometry=JSON.stringify(o.toJSON()));var s=Object(ve.b)(Object(a.a)(Object(a.a)({},i.query),{},{f:"json"},t)),u=Object(ve.a)(s,n);return Object(I.default)(i.path+"/identify",u)})).then((function(e){return Pe.fromJSON(e.data)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e,t,r){return st.apply(this,arguments)}function st(){return(st=Object(h.a)(Object(j.a)().mark((function e(t,r,n){var a;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt(t,r,[r.fromGeometry,r.toGeometry],n);case 2:return a=e.sent,e.abrupt("return",Ne.fromJSON(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e,t,r){return lt.apply(this,arguments)}function lt(){return(lt=Object(h.a)(Object(j.a)().mark((function e(t,r,n){var a;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt(t,r,[r.geometry],n);case 2:return a=e.sent,e.abrupt("return",Re.fromJSON(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(e,t,r){return pt.apply(this,arguments)}function pt(){return(pt=Object(h.a)(Object(j.a)().mark((function e(t,r,n){var a;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt(t,r,[r.geometry],n);case 2:return a=e.sent,e.abrupt("return",Ue.fromJSON(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e,t,r){return dt.apply(this,arguments)}function dt(){return(dt=Object(h.a)(Object(j.a)().mark((function e(t,r,n){var a;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt(t,r,[r.fromGeometry,r.toGeometry],n);case 2:return a=e.sent,e.abrupt("return",ke.fromJSON(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(e,t,r,n){return ft.apply(this,arguments)}function ft(){return(ft=Object(h.a)(Object(j.a)().mark((function e(t,r,n,i){var o,s,u,l,c,p,b;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(ve.c)(t),e.next=3,Object(ye.a)(n);case 3:return s=e.sent,u=r.toJSON(),null!=s[0]&&(u.fromGeometry=JSON.stringify(yt(s[0]))),null!=s[1]&&(u.toGeometry=JSON.stringify(yt(s[1]))),l=Object(ve.b)(Object(a.a)(Object(a.a)({},o.query),{},{f:"json"},u)),c=Object(ve.a)(l,i),e.next=10,Object(I.default)(o.path+"/measure",c);case 10:return p=e.sent,b=p.data,e.abrupt("return",b);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yt(e){var t,r=e.toJSON();return null!==(t=e.spatialReference)&&void 0!==t&&t.imageCoordinateSystem&&(r.spatialReference=vt(e.spatialReference)),r}function vt(e){var t=e.imageCoordinateSystem;if(t){var r=t.id,n=t.referenceServiceName;return null!=r?n?{icsid:r,icsns:n}:{icsid:r}:{ics:t}}return e.toJSON()}function jt(e,t){var r=vt(e),n=r.icsid,a=r.icsns,i=r.wkid;return null!=n?null==a||null!==t&&void 0!==t&&t.toLowerCase().includes("/"+a.toLowerCase()+"/")?"0:".concat(n):JSON.stringify(r):i?i.toString():JSON.stringify(r)}r(555);var ht,gt=r(572),Ot=(r(187),r(277),r(132),r(168),r(130)),wt=(r(214),r(363)),It=r(164),Mt=(r(192),r(457),r(210)),xt=(r(649),r(672),r(819)),St=r(820),Dt=(r(593),r(613),r(1555)),Rt=r(815);function At(){return(At=Object(h.a)(Object(j.a)().mark((function e(t,r,n){var i,o,s,u,l,c,p,b,d,m,f,y,v,h,g,O,w,M,x;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(ve.c)(t),u=Object(ve.b)(Object(a.a)(Object(a.a)({},null===s||void 0===s?void 0:s.query),{},{f:"json"})),l=Object(ve.a)(u,n),c="".concat(null===s||void 0===s?void 0:s.path,"/").concat(r,"/info"),p=Object(I.default)("".concat(c),l),b=Object(I.default)("".concat(c,"/keyProperties"),l),e.next=8,Promise.allSettled([p,b]);case 8:return d=e.sent,m="fulfilled"===d[0].status?d[0].value.data:null,f="fulfilled"===d[1].status?d[1].value.data:null,y=null,(null===(i=m.statistics)||void 0===i?void 0:i.length)&&(y=m.statistics.map((function(e){return{min:e[0],max:e[1],avg:e[2],stddev:e[3]}}))),v=Ot.a.fromJSON(m.extent),h=Math.ceil(v.width/m.pixelSizeX-.1),g=Math.ceil(v.height/m.pixelSizeY-.1),O=v.spatialReference,w=new Ce.a({x:m.pixelSizeX,y:m.pixelSizeY,spatialReference:O}),M=null!==(o=m.histograms)&&void 0!==o&&o.length?m.histograms:null,x=new Rt.a({origin:m.origin,blockWidth:m.blockWidth,blockHeight:m.blockHeight,firstPyramidLevel:m.firstPyramidLevel,maximumPyramidLevel:m.maxPyramidLevel}),e.abrupt("return",new le.a({width:h,height:g,bandCount:m.bandCount,extent:v,spatialReference:O,pixelSize:w,pixelType:m.pixelType.toLowerCase(),statistics:y,histograms:M,keyProperties:f,storageInfo:x}));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kt=ht=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).angleNames=null,n.point=null,n.spatialReference=null,n.rasterId=null,n}return Object(o.a)(r,[{key:"clone",value:function(){return new ht(Object(S.a)({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))}}]),r}(C.a);Object(l.a)([Object(d.b)({type:[String],json:{name:"angleName",write:!0}})],kt.prototype,"angleNames",void 0),Object(l.a)([Object(d.b)({type:Ce.a,json:{write:!0}})],kt.prototype,"point",void 0),Object(l.a)([Object(d.b)({type:je.a,json:{write:!0}})],kt.prototype,"spatialReference",void 0),Object(l.a)([Object(d.b)({type:m.a,json:{write:!0}})],kt.prototype,"rasterId",void 0);var Tt,Nt=kt=ht=Object(l.a)([Object(f.a)("esri.rest.support.ImageAngleParameters")],kt),Ct=r(122),Ft=new(r(146).a)({esriMensurationPoint:"point",esriMensurationCentroid:"centroid",esriMensurationDistanceAndAngle:"distance-and-angle",esriMensurationAreaAndPerimeter:"area-and-perimeter",esriMensurationHeightFromBaseAndTop:"base-and-top",esriMensurationHeightFromBaseAndTopShadow:"base-and-top-shadow",esriMensurationHeightFromTopAndTopShadow:"top-and-top-shadow",esriMensurationPoint3D:"point-3D",esriMensurationCentroid3D:"centroid-3D",esriMensurationDistanceAndAngle3D:"distance-and-angle-3D",esriMensurationAreaAndPerimeter3D:"area-and-perimeter-3D"}),Lt=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).type=null,e.measureOperation=null,e.mosaicRule=null,e.pixelSize=null,e.raster=void 0,e}return Object(o.a)(r)}(C.a);Object(l.a)([Object(d.b)()],Lt.prototype,"type",void 0),Object(l.a)([Object(d.b)({type:Ft.apiValues,json:{read:Ft.read,write:Ft.write}})],Lt.prototype,"measureOperation",void 0),Object(l.a)([Object(d.b)({type:te.a,json:{write:!0}})],Lt.prototype,"mosaicRule",void 0),Object(l.a)([Object(d.b)({type:Ce.a,json:{write:!0}})],Lt.prototype,"pixelSize",void 0),Object(l.a)([Object(d.b)({json:{write:!0}})],Lt.prototype,"raster",void 0),Lt=Object(l.a)([Object(f.a)("esri.rest.support.BaseImageMeasureParameters")],Lt);var Pt=Tt=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).type="area-perimeter",e.geometry=null,e.is3D=!1,e.linearUnit="meters",e.areaUnit="square-meters",e}return Object(o.a)(r,[{key:"writeGeometry",value:function(e,t,r){null!=e&&(t.geometryType=Object(Ct.c)(e),t[r]=e.toJSON())}},{key:"measureOperation",get:function(){return this.is3D?"area-and-perimeter-3D":"area-and-perimeter"}},{key:"clone",value:function(){return new Tt(Object(S.a)({geometry:this.geometry,is3D:this.is3D,linearUnit:this.linearUnit,areaUnit:this.areaUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}}]),r}(Lt);Object(l.a)([Object(d.b)({types:g.a,json:{name:"fromGeometry",read:!0,write:!0}})],Pt.prototype,"geometry",void 0),Object(l.a)([Object(y.a)("geometry")],Pt.prototype,"writeGeometry",null),Object(l.a)([Object(d.b)({type:Ft.apiValues,json:{write:Ft.write}})],Pt.prototype,"measureOperation",null),Object(l.a)([Object(d.b)({json:{read:!0}})],Pt.prototype,"is3D",void 0),Object(l.a)([Object(d.b)({type:String,json:{read:Oe.k.read,write:Oe.k.write}})],Pt.prototype,"linearUnit",void 0),Object(l.a)([Object(d.b)({type:String,json:{read:Oe.b.read,write:Oe.b.write}})],Pt.prototype,"areaUnit",void 0);var zt,Vt=Pt=Tt=Object(l.a)([Object(f.a)("esri.rest.support.ImageAreaParameters")],Pt),Bt=zt=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).type="distance-angle",e.fromGeometry=null,e.toGeometry=null,e.is3D=!1,e.linearUnit="meters",e.angularUnit="degrees",e}return Object(o.a)(r,[{key:"writeFromGeometry",value:function(e,t,r){null!=e&&(t.geometryType=Object(Ct.c)(e),t[r]=e.toJSON())}},{key:"measureOperation",get:function(){return this.is3D?"distance-and-angle-3D":"distance-and-angle"}},{key:"clone",value:function(){return new zt(Object(S.a)({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,is3D:this.is3D,linearUnit:this.linearUnit,angularUnit:this.angularUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}}]),r}(Lt);Object(l.a)([Object(d.b)({type:Ce.a,json:{read:!0,write:!0}})],Bt.prototype,"fromGeometry",void 0),Object(l.a)([Object(y.a)("fromGeometry")],Bt.prototype,"writeFromGeometry",null),Object(l.a)([Object(d.b)({type:Ce.a,json:{read:!0,write:!0}})],Bt.prototype,"toGeometry",void 0),Object(l.a)([Object(d.b)({type:Ft.apiValues,json:{write:Ft.write}})],Bt.prototype,"measureOperation",null),Object(l.a)([Object(d.b)({json:{read:!0}})],Bt.prototype,"is3D",void 0),Object(l.a)([Object(d.b)({type:String,json:{read:Oe.k.read,write:Oe.k.write}})],Bt.prototype,"linearUnit",void 0),Object(l.a)([Object(d.b)({type:String,json:{read:Oe.a.read,write:Oe.a.write}})],Bt.prototype,"angularUnit",void 0);var Ut,Et=Bt=zt=Object(l.a)([Object(f.a)("esri.rest.support.ImageDistanceParameters")],Bt),Ht=Ut=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).type="height",e.fromGeometry=null,e.toGeometry=null,e.operationType="base-and-top",e.linearUnit="meters",e}return Object(o.a)(r,[{key:"writeFromGeometry",value:function(e,t,r){null!=e&&(t.geometryType=Object(Ct.c)(e),t[r]=e.toJSON())}},{key:"measureOperation",get:function(){return this.operationType}},{key:"clone",value:function(){return new Ut(Object(S.a)({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,operationType:this.operationType,linearUnit:this.linearUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}}]),r}(Lt);Object(l.a)([Object(d.b)({type:Ce.a,json:{read:!0}})],Ht.prototype,"fromGeometry",void 0),Object(l.a)([Object(y.a)("fromGeometry")],Ht.prototype,"writeFromGeometry",null),Object(l.a)([Object(d.b)({type:Ce.a,json:{read:!0,write:!0}})],Ht.prototype,"toGeometry",void 0),Object(l.a)([Object(d.b)({type:Ft.apiValues,json:{write:Ft.write}})],Ht.prototype,"measureOperation",null),Object(l.a)([Object(d.b)({json:{read:!0}})],Ht.prototype,"operationType",void 0),Object(l.a)([Object(d.b)({type:String,json:{read:Oe.k.read,write:Oe.k.write}})],Ht.prototype,"linearUnit",void 0);var _t,Jt=Ht=Ut=Object(l.a)([Object(f.a)("esri.rest.support.ImageHeightParameters")],Ht),Zt=r(1556),Gt=r(365),Wt=_t=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).geometry=null,e.rasterFunctions=null,e.pixelSize=null,e.returnGeometry=!0,e.returnCatalogItems=!0,e.returnPixelValues=!0,e.maxItemCount=null,e.timeExtent=null,e.raster=void 0,e.viewId=void 0,e.processAsMultidimensional=!1,e}return Object(o.a)(r,[{key:"writeGeometry",value:function(e,t,r){null!=e&&(t.geometryType=Object(Ct.c)(e),t[r]=JSON.stringify(e.toJSON()))}},{key:"mosaicRule",set:function(e){var t=e;t&&t.mosaicMethod&&(t=te.a.fromJSON(Object(a.a)(Object(a.a)({},t.toJSON()),{},{mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation}))),this._set("mosaicRule",t)}},{key:"writeMosaicRule",value:function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.toJSON()))}},{key:"renderingRule",get:function(){return Object(M.b)(D.a.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0}),this._get("rasterFunction")},set:function(e){Object(M.b)(D.a.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0}),this._set("rasterFunction",e)}},{key:"renderingRules",get:function(){return Object(M.b)(D.a.getLogger(this),"renderingRules",{replacement:"rasterFunctions",version:"4.27",warnOnce:!0}),this._get("rasterFunctions")},set:function(e){Object(M.b)(D.a.getLogger(this),"renderingRules",{replacement:"rasterFunctions",version:"4.27",warnOnce:!0}),this._set("rasterFunctions",e)}},{key:"rasterFunction",set:function(e){var t=e;t&&t.rasterFunction&&(t=L.a.fromJSON(Object(a.a)(Object(a.a)({},t.toJSON()),{},{rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments}))),this._set("rasterFunction",t)}},{key:"writeRasterFunction",value:function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.toJSON())),e.rasterFunctionDefinition&&(t[r]=JSON.stringify(e.rasterFunctionDefinition))}},{key:"writeRasterFunctions",value:function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.map((function(e){return e.rasterFunctionDefinition||e.toJSON()}))))}},{key:"writePixelSize",value:function(e,t,r){null!=e&&(t[r]=JSON.stringify(e))}},{key:"writeTimeExtent",value:function(e,t,r){if(null!=e){var n=null!=e.start?e.start.getTime():null,a=null!=e.end?e.end.getTime():null;t[r]=null!=n?null!=a?"".concat(n,",").concat(a):"".concat(n):null}}},{key:"clone",value:function(){return new _t(Object(S.a)({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,rasterFunctions:this.rasterFunctions,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,processAsMultidimensional:this.processAsMultidimensional,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))}}]),r}(C.a);Object(l.a)([Object(d.b)({json:{write:!0}})],Wt.prototype,"geometry",void 0),Object(l.a)([Object(y.a)("geometry")],Wt.prototype,"writeGeometry",null),Object(l.a)([Object(d.b)({type:te.a,json:{write:!0}})],Wt.prototype,"mosaicRule",null),Object(l.a)([Object(y.a)("mosaicRule")],Wt.prototype,"writeMosaicRule",null),Object(l.a)([Object(d.b)({type:L.a})],Wt.prototype,"renderingRule",null),Object(l.a)([Object(d.b)({type:[L.a]})],Wt.prototype,"renderingRules",null),Object(l.a)([Object(d.b)({type:L.a,json:{write:!0,name:"renderingRule"}})],Wt.prototype,"rasterFunction",null),Object(l.a)([Object(y.a)("rasterFunction")],Wt.prototype,"writeRasterFunction",null),Object(l.a)([Object(d.b)({type:[L.a],json:{write:!0,name:"renderingRules"}})],Wt.prototype,"rasterFunctions",void 0),Object(l.a)([Object(y.a)("rasterFunctions")],Wt.prototype,"writeRasterFunctions",null),Object(l.a)([Object(d.b)({type:Ce.a,json:{write:!0}})],Wt.prototype,"pixelSize",void 0),Object(l.a)([Object(y.a)("pixelSize")],Wt.prototype,"writePixelSize",null),Object(l.a)([Object(d.b)({type:Boolean,json:{write:!0}})],Wt.prototype,"returnGeometry",void 0),Object(l.a)([Object(d.b)({type:Boolean,json:{write:!0}})],Wt.prototype,"returnCatalogItems",void 0),Object(l.a)([Object(d.b)({type:Boolean,json:{write:!0}})],Wt.prototype,"returnPixelValues",void 0),Object(l.a)([Object(d.b)({type:Number,json:{write:!0}})],Wt.prototype,"maxItemCount",void 0),Object(l.a)([Object(d.b)({type:Gt.a,json:{write:{target:"time"}}})],Wt.prototype,"timeExtent",void 0),Object(l.a)([Object(y.a)("timeExtent")],Wt.prototype,"writeTimeExtent",null),Object(l.a)([Object(d.b)({json:{write:!0}})],Wt.prototype,"raster",void 0),Object(l.a)([Object(d.b)({json:{write:!0}})],Wt.prototype,"viewId",void 0),Object(l.a)([Object(d.b)({type:Boolean,json:{write:!0}})],Wt.prototype,"processAsMultidimensional",void 0);var qt,Qt=Wt=_t=Object(l.a)([Object(f.a)("esri.rest.support.ImageIdentifyParameters")],Wt),Kt=qt=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).geometries=null,e.rasterId=null,e}return Object(o.a)(r,[{key:"writeGeometry",value:function(e,t,r){t.geometries={geometryType:"esriGeometryPoint",geometries:e.map((function(e){return e.toJSON()}))}}},{key:"clone",value:function(){var e,t;return new qt({geometries:null!==(e=null===(t=this.geometries)||void 0===t?void 0:t.map((function(e){return e.clone()})))&&void 0!==e?e:[],rasterId:this.rasterId})}}]),r}(C.a);Object(l.a)([Object(d.b)({type:[Ce.a],json:{write:!0}})],Kt.prototype,"geometries",void 0),Object(l.a)([Object(y.a)("geometries")],Kt.prototype,"writeGeometry",null),Object(l.a)([Object(d.b)({type:m.a,json:{write:!0}})],Kt.prototype,"rasterId",void 0);var Xt,Yt=Kt=qt=Object(l.a)([Object(f.a)("esri.rest.support.ImagePixelLocationParameters")],Kt),$t=Xt=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).type="point",e.geometry=null,e.is3D=!1,e}return Object(o.a)(r,[{key:"writeGeometry",value:function(e,t,r){null!=e&&(t.geometryType=Object(Ct.c)(e),t[r]=e.toJSON())}},{key:"measureOperation",get:function(){var e=this.is3D;return"point"===this.geometry.type?e?"point-3D":"point":e?"centroid-3D":"centroid"}},{key:"clone",value:function(){return new Xt(Object(S.a)({geometry:this.geometry,is3D:this.is3D,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}}]),r}(Lt);Object(l.a)([Object(d.b)({types:g.a,json:{name:"fromGeometry",read:Ct.a}})],$t.prototype,"geometry",void 0),Object(l.a)([Object(y.a)("geometry")],$t.prototype,"writeGeometry",null),Object(l.a)([Object(d.b)({type:Ft.apiValues,json:{read:Ft.read,write:Ft.write}})],$t.prototype,"measureOperation",null),Object(l.a)([Object(d.b)({json:{read:!0}})],$t.prototype,"is3D",void 0);var er,tr=$t=Xt=Object(l.a)([Object(f.a)("esri.rest.support.ImagePointParameters")],$t),rr=er=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).geometry=null,e.interpolation="nearest",e.mosaicRule=null,e.outFields=null,e.pixelSize=null,e.returnFirstValueOnly=!0,e.sampleDistance=null,e.sampleCount=null,e.sliceId=null,e.timeExtent=null,e}return Object(o.a)(r,[{key:"writeGeometry",value:function(e,t,r){null!=e&&(t.geometryType=Object(Ct.c)(e),t[r]=e.toJSON())}},{key:"locations",set:function(e){if(null!==e&&void 0!==e&&e.length){var t=new wt.a({spatialReference:e[0].spatialReference});t.points=e.map((function(e){return[e.x,e.y]})),this._set("locations",e),this.geometry=t}}},{key:"clone",value:function(){return new er(Object(S.a)({geometry:this.geometry,locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))}}]),r}(C.a);Object(l.a)([Object(d.b)({types:g.a,json:{read:Ct.a}})],rr.prototype,"geometry",void 0),Object(l.a)([Object(y.a)("geometry")],rr.prototype,"writeGeometry",null),Object(l.a)([Object(d.b)()],rr.prototype,"locations",null),Object(l.a)([Object(d.b)({type:String,json:{type:re.a.jsonValues,read:re.a.read,write:re.a.write}})],rr.prototype,"interpolation",void 0),Object(l.a)([Object(d.b)({type:te.a,json:{write:!0}})],rr.prototype,"mosaicRule",void 0),Object(l.a)([Object(d.b)({type:[String],json:{write:!0}})],rr.prototype,"outFields",void 0),Object(l.a)([Object(d.b)({type:Ce.a,json:{write:!0}})],rr.prototype,"pixelSize",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:!0}})],rr.prototype,"raster",void 0),Object(l.a)([Object(d.b)({type:Boolean,json:{write:!0}})],rr.prototype,"returnFirstValueOnly",void 0),Object(l.a)([Object(d.b)({type:Number,json:{write:!0}})],rr.prototype,"sampleDistance",void 0),Object(l.a)([Object(d.b)({type:Number,json:{write:!0}})],rr.prototype,"sampleCount",void 0),Object(l.a)([Object(d.b)({type:Number,json:{write:!0}})],rr.prototype,"sliceId",void 0),Object(l.a)([Object(d.b)({type:Gt.a,json:{read:{source:"time"},write:{target:"time"}}})],rr.prototype,"timeExtent",void 0);var nr=rr=er=Object(l.a)([Object(f.a)("esri.rest.support.ImageSampleParameters")],rr),ar=r(816),ir=new Set(["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"]),or=Object(d.a)(m.i,{min:0,max:255});function sr(e){if(!e)return null;var t=JSON.stringify(e).match(/"rasterFunction":"(.*?")/gi),r=null===t||void 0===t?void 0:t.map((function(e){return e.replace('"rasterFunction":"',"").replace('"',"")}));return r?r.join("/"):null}var ur=r(485),lr=r(330),cr=r(542),pr=r(311),br=r(326),dr=r(425),mr=r(302),fr=r(566),yr=r(894),vr=r(486),jr=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).legendEnabled=!0,e.isReference=null,e.operationalLayerType="ArcGISImageServiceLayer",e.popupEnabled=!0,e.popupTemplate=null,e.type="imagery",e}return Object(o.a)(r,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(a.a)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},e).catch(b.m).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"writeOperationalLayerType",value:function(e,t,r){var n,a="vector-field"===(null===(n=this.renderer)||void 0===n?void 0:n.type);t[r]=a?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"createPopupTemplate",value:function(e){var t=this.rasterFields,r=this.title,i=new Set,o=!1,s=!1;this.capabilities&&(o=this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0,s="esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType);var u=new Set;o&&u.add("raster.itempixelvalue");var l,c=Object(n.a)(t);try{for(c.s();!(l=c.n()).done;){var p=l.value,b=p.name.toLowerCase();u.has(b)||b.includes("raster.servicepixelvalue.")||i.add(p.name)}}catch(d){c.e(d)}finally{c.f()}return s&&i.add("raster.magnitude").add("raster.direction"),Object(vr.a)({fields:t,title:r},Object(a.a)(Object(a.a)({},e),{},{visibleFieldNames:i}))}},{key:"queryFeatures",value:function(e,t){var r=this;return this.queryRasters(e,t).then((function(e){if(null!==e&&void 0!==e&&e.features){var t,a=Object(n.a)(e.features);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.layer=i.sourceLayer=r}}catch(o){a.e(o)}finally{a.f()}}return e}))}},{key:"queryFeatureCount",value:function(e,t){return this.queryRasterCount(e,t)}},{key:"redraw",value:function(){this.emit("redraw")}},{key:"serviceSupportsSpatialReference",value:function(e){return Object(yr.a)(this,e)}}]),r}(Object(lr.a)(Object(fr.a)(Object(mr.a)(Object(pr.a)(Object(br.a)(function(e){var t=function(e){Object(s.a)(l,e);var t=Object(u.a)(l);function l(){var e;return Object(i.a)(this,l),(e=t.apply(this,arguments))._functionRasterInfos={},e._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},e._cachedRendererJson=null,e._serviceSupportsMosaicRule=null,e._rasterAttributeTableFieldPrefix="Raster.",e.adjustAspectRatio=null,e.bandIds=void 0,e.capabilities=null,e.compressionQuality=void 0,e.compressionTolerance=.01,e.copyright=null,e.defaultMosaicRule=null,e.definitionExpression=null,e.exportImageServiceParameters=null,e.rasterInfo=null,e.fields=null,e.fullExtent=null,e.hasMultidimensions=!1,e.imageMaxHeight=4100,e.imageMaxWidth=4100,e.interpolation=void 0,e.minScale=0,e.maxScale=0,e.multidimensionalInfo=null,e.multidimensionalSubset=null,e.noData=null,e.noDataInterpretation=void 0,e.objectIdField=null,e.geometryType="polygon",e.typeIdField=null,e.types=[],e.pixelFilter=null,e.raster=void 0,e.sourceType=null,e.viewId=void 0,e.symbolizer=null,e.rasterFunctionInfos=null,e.serviceDataType=null,e.spatialReference=null,e.pixelType=null,e.serviceRasterInfo=null,e.sourceJSON=null,e.url=null,e.version=void 0,e}return Object(o.a)(l,[{key:"initialize",value:function(){this._set("exportImageServiceParameters",new ne({layer:this}))}},{key:"readServiceSupportsMosaicRule",value:function(e,t){return this._isMosaicRuleSupported(t)}},{key:"_rasterFunctionNamesIndex",get:function(){var e=new Map;return!this.rasterFunctionInfos||null!=this.rasterFunctionInfos&&this.rasterFunctionInfos.length<1||null!=this.rasterFunctionInfos&&this.rasterFunctionInfos.forEach((function(t){e.set(t.name.toLowerCase().replaceAll(/ /gi,"_"),t.name)})),e}},{key:"readBandIds",value:function(e,t){if(Array.isArray(e)&&e.length>0&&e.every((function(e){return"number"==typeof e})))return e}},{key:"readCapabilities",value:function(e,t){return this._readCapabilities(t)}},{key:"writeCompressionQuality",value:function(e,t,r){null!=e&&"lerc"!==this.format&&(t[r]=e)}},{key:"writeCompressionTolerance",value:function(e,t,r){"lerc"===this.format&&null!=e&&(t[r]=e)}},{key:"readDefaultMosaicRule",value:function(e,t){return this._serviceSupportsMosaicRule?te.a.fromJSON(t):null}},{key:"fieldsIndex",get:function(){return this.fields?new ie.a(this.fields):null}},{key:"format",set:function(e){e&&ir.has(e.toLowerCase())&&this._set("format",e.toLowerCase())}},{key:"readFormat",value:function(e,t){return"esriImageServiceDataTypeVector-UV"===t.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===t.serviceDataType||null!=this.pixelFilter?"lerc":"jpgpng"}},{key:"readMinScale",value:function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}},{key:"readMaxScale",value:function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}},{key:"mosaicRule",set:function(e){var t=e;t&&t.mosaicMethod&&(t=te.a.fromJSON(Object(a.a)(Object(a.a)({},t.toJSON()),{},{mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation}))),this._set("mosaicRule",t)}},{key:"readMosaicRule",value:function(e,t){var r=e||t.mosaicRule;return r?te.a.fromJSON(r):this._isMosaicRuleSupported(t)?te.a.fromJSON(t):null}},{key:"writeMosaicRule",value:function(e,t,r){var n=this.mosaicRule,a=this.definitionExpression;n?a&&a!==n.where&&((n=n.clone()).where=a):a&&(n=new te.a({where:a})),this._isValidCustomizedMosaicRule(n)&&(t[r]=n.toJSON())}},{key:"writeNoData",value:function(e,t,r){null!=e&&"number"==typeof e&&(t[r]=or(e))}},{key:"readObjectIdField",value:function(e,t){if(!e){var r=t.fields.filter((function(e){return"esriFieldTypeOID"===e.type||"oid"===e.type}));e=r&&r[0]&&r[0].name}return e}},{key:"parsedUrl",get:function(){return Object(A.Q)(this.url)}},{key:"readSourceType",value:function(e,t){return this._isMosaicDataset(t)?"mosaic-dataset":"raster-dataset"}},{key:"renderer",set:function(e){this.loaded&&(e=this._configRenderer(e)),this._set("renderer",e)}},{key:"readRenderer",value:function(e,t,r){var n,a=null===t||void 0===t||null===(n=t.layerDefinition)||void 0===n||null===(n=n.drawingInfo)||void 0===n?void 0:n.renderer,i=Object(w.b)(a,r);return null==i?null:("vector-field"===i.type&&t.symbolTileSize&&!a.symbolTileSize&&(i.symbolTileSize=t.symbolTileSize),J(i)||D.a.getLogger(this).warn("ArcGISImageService","Imagery layer doesn't support given renderer type."),i)}},{key:"writeRenderer",value:function(e,t,r){t.layerDefinition=t.layerDefinition||{},t.layerDefinition.drawingInfo=t.layerDefinition.drawingInfo||{},t.layerDefinition.drawingInfo.renderer=e.toJSON(),"vector-field"===e.type&&(t.symbolTileSize=e.symbolTileSize)}},{key:"rasterFields",get:function(){var e,t,r=this._rasterAttributeTableFieldPrefix||"Raster.",n=new ae.a({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"}),a=new ae.a({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),i=new ae.a({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),o=this.fields?Object(S.a)(this.fields):[];o.push(a),null!==(e=this.capabilities)&&void 0!==e&&e.operations.supportsQuery&&this.fields&&this.fields.length>0&&o.push(n),this.version>=10.4&&null!=this.rasterFunctionInfos&&this.rasterFunctionInfos.some((function(e){return"none"===e.name.toLowerCase()}))&&o.push(i),null!=this.rasterFunctionInfos&&this.rasterFunctionInfos.filter((function(e){return"none"!==e.name.toLowerCase()})).forEach((function(e){o.push(new ae.a({name:"Raster.ServicePixelValue."+e.name,alias:e.name,domain:null,editable:!1,length:50,type:"string"}))})),this._isVectorDataSet()&&(o.push(new ae.a({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),o.push(new ae.a({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));var s=(null!==(t=this.rasterInfo)&&void 0!==t?t:{}).attributeTable;if(null!=s){var u=s.fields.filter((function(e){return"esriFieldTypeOID"!==e.type&&"value"!==e.name.toLowerCase()})).map((function(e){var t=Object(S.a)(e);return t.name=r+e.name,t}));o=o.concat(u)}return o}},{key:"renderingRule",get:function(){return Object(M.b)(D.a.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0}),this._get("rasterFunction")},set:function(e){Object(M.b)(D.a.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0}),this._set("rasterFunction",e)}},{key:"rasterFunction",set:function(e){var t=e;t&&t.rasterFunction&&(t=L.a.fromJSON(Object(a.a)(Object(a.a)({},t.toJSON()),{},{rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments}))),this._set("rasterFunction",t)}},{key:"readRasterFunction",value:function(e,t){var r=t.rasterFunctionInfos;return t.renderingRule||r&&r.length&&"None"!==r[0].name?this._isRFTJson(t.renderingRule)?L.a.fromJSON({rasterFunctionDefinition:t.renderingRule}):L.a.fromJSON(t.renderingRule||{rasterFunctionInfos:t.rasterFunctionInfos}):null}},{key:"readSpatialReference",value:function(e,t){var r=e||t.extent.spatialReference;return r?je.a.fromJSON(r):null}},{key:"readPixelType",value:function(e){return re.c.fromJSON(e)||e}},{key:"writePixelType",value:function(e,t,r){null!=this.serviceRasterInfo&&this.pixelType===this.serviceRasterInfo.pixelType||(t[r]=re.c.toJSON(e))}},{key:"readVersion",value:function(e,t){var r=t.currentVersion;return r||(r=t.hasOwnProperty("fields")||t.hasOwnProperty("timeInfo")?10:9.3),r}},{key:"applyFilter",value:function(e){var t=e;return this.pixelFilter&&(t=this._clonePixelData(e),this.pixelFilter(t)),t}},{key:"applyRenderer",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){var n,i,o,s,u,l,c,p;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,i=this.renderer,o=this.symbolizer,s=this.pixelFilter,u=this.bandIds,this._isPicture()||!i||!o||s){e.next=18;break}if(l=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(i.toJSON()),!(c=this._rasterJobHandler.instance)){e.next=17;break}if(e.t0=l,!e.t0){e.next=11;break}return o.bind(),e.next=10,c.updateSymbolizer(o,r);case 10:this._cachedRendererJson=i.toJSON();case 11:return e.next=13,c.symbolize(Object(a.a)({bandIds:u},t),r);case 13:p=e.sent,n={extent:t.extent,pixelBlock:p},e.next=18;break;case 17:n={extent:t.extent,pixelBlock:o.symbolize(Object(a.a)({bandIds:u},t))};case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){this._shutdownJobHandler()}},{key:"increaseRasterJobHandlerUsage",value:function(){this._rasterJobHandler.refCount++}},{key:"decreaseRasterJobHandlerUsage",value:function(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()}},{key:"computeAngles",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchCapabilities(null===r||void 0===r?void 0:r.signal);case 2:if(e.sent.operations.supportsComputeAngles){e.next=4;break}throw new x.a("imagery-layer:compute-angles","this operation is not supported on the input image service");case 4:return e.abrupt("return",(t=Object(m.d)(Nt,t).clone(),qe(this.url,t,this._getRequestOptions(r))));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"computePixelSpaceLocations",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchCapabilities(null===r||void 0===r?void 0:r.signal);case 2:if(e.sent.operations.supportsComputePixelLocation){e.next=4;break}throw new x.a("imagery-layer:compute-pixel-space-locations","this operation is not supported on the input image service");case 4:return e.abrupt("return",(t=Object(m.d)(Yt,t).clone(),Ke(this.url,t,this._getRequestOptions(r))));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"computeHistograms",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchCapabilities(null===r||void 0===r?void 0:r.signal);case 2:if(e.sent.operations.supportsComputeHistograms){e.next=4;break}throw new x.a("imagery-layer:compute-histograms","this operation is not supported on the input image service");case 4:return e.abrupt("return",(t=Object(m.d)(Zt.a,t).clone(),this._applyMosaicAndRenderingRules(t),et(this.url,t,this._getRequestOptions(r))));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"computeStatisticsHistograms",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchCapabilities(null===r||void 0===r?void 0:r.signal);case 2:if(e.sent.operations.supportsComputeStatisticsHistograms){e.next=4;break}throw new x.a("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");case 4:return e.abrupt("return",(t=Object(m.d)(Zt.a,t).clone(),this._applyMosaicAndRenderingRules(t),Ye(this.url,t,this._getRequestOptions(r))));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"measureHeight",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchCapabilities(null===r||void 0===r?void 0:r.signal);case 2:if(n=e.sent,"base-and-top"===t.operationType?n.mensuration.supportsHeightFromBaseAndTop:"base-and-top-shadow"===t.operationType?n.mensuration.supportsHeightFromBaseAndTopShadow:n.mensuration.supportsHeightFromTopAndTopShadow){e.next=5;break}throw new x.a("imagery-layer:measure-height","this operation is not supported on the input image service");case 5:return e.abrupt("return",(t=Object(m.d)(Jt,t).clone(),this._applyMosaicAndRenderingRules(t),ot(this.url,t,this._getRequestOptions(r))));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"measureAreaAndPerimeter",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchCapabilities(null===r||void 0===r?void 0:r.signal);case 2:if((n=e.sent).mensuration.supportsAreaAndPerimeter&&(!t.is3D||n.mensuration.supports3D)){e.next=5;break}throw new x.a("imagery-layer:measure-area-and-perimeter","this operation is not supported on the input image service");case 5:return e.abrupt("return",(t=Object(m.d)(Vt,t).clone(),this._applyMosaicAndRenderingRules(t),ut(this.url,t,this._getRequestOptions(r))));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"measureDistanceAndAngle",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchCapabilities(null===r||void 0===r?void 0:r.signal);case 2:if((n=e.sent).mensuration.supportsDistanceAndAngle&&(!t.is3D||n.mensuration.supports3D)){e.next=5;break}throw new x.a("imagery-layer:measure-distance-and-angle","this operation is not supported on the input image service");case 5:return e.abrupt("return",(t=Object(m.d)(Et,t).clone(),this._applyMosaicAndRenderingRules(t),bt(this.url,t,this._getRequestOptions(r))));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"measurePointOrCentroid",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchCapabilities(null===r||void 0===r?void 0:r.signal);case 2:if((n=e.sent).mensuration.supportsPointOrCentroid&&(!t.is3D||n.mensuration.supports3D)){e.next=5;break}throw new x.a("imagery-layer:measure-point-or-centroid","this operation is not supported on the input image service");case 5:return e.abrupt("return",(t=Object(m.d)(tr,t).clone(),this._applyMosaicAndRenderingRules(t),ct(this.url,t,this._getRequestOptions(r))));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getField",value:function(e){var t=this.fieldsIndex;return null!=t?t.get(e):void 0}},{key:"getFieldDomain",value:function(e,t){var r=this.getField(e);return r?r.domain:null}},{key:"fetchImage",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,n,a){var i,o,s,u,l,c,p,b,d,m,f,y,v,h,g,O=arguments;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=O.length>3&&void 0!==O[3]?O[3]:{},null!=t&&null!=n&&null!=a){e.next=3;break}throw new x.a("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required.");case 3:if(!this.renderer&&!this.symbolizer){e.next=8;break}return e.next=6,this._generateRasterInfo(this.rasterFunction,{signal:i.signal});case 6:(o=e.sent)&&(this.rasterInfo=o);case 8:if(null!=(s=this.getExportImageServiceParameters(t,n,a,i.timeExtent))){e.next=21;break}if(!i.requestAsImageElement||!this._canRequestImageElement(this.format)){e.next=18;break}if((l=document.createElement("canvas")).width=n,l.height=a,!i.returnImageBitmap){e.next=17;break}return e.next=15,Object(oe.a)(l,"".concat(r(this.parsedUrl),"/exportImage"),i.signal);case 15:return e.t0=e.sent,e.abrupt("return",{imageBitmap:e.t0});case 17:return e.abrupt("return",{imageOrCanvasElement:l});case 18:for(c=this.bandIds,p=this.rasterInfo,b=null!==(u=(null===c||void 0===c?void 0:c.length)||p.bandCount)&&void 0!==u?u:0,d=n*a,m=p.pixelType,f=[],y=0;y<b;y++)f.push(ue.a.createEmptyBand(m,d));return e.abrupt("return",{pixelData:{pixelBlock:new ue.a({width:n,height:a,pixels:f,mask:new Uint8Array(d),pixelType:m}),extent:t}});case 21:return v=!!i.requestAsImageElement&&!this.pixelFilter,h=v&&!!i.returnImageBitmap,g={imageServiceParameters:s,imageProps:{extent:t,width:n,height:a,format:this.format},requestAsImageElement:v,returnImageBitmap:h,signal:i.signal},e.abrupt("return",this._requestArrayBuffer(g));case 23:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"fetchKeyProperties",value:function(e){return Object(I.default)(r(this.parsedUrl)+"/keyProperties",{query:this._getQueryParams({renderingRule:this.version>=10.3?null===e||void 0===e?void 0:e.rasterFunction:null})}).then((function(e){return e.data}))}},{key:"fetchRasterAttributeTable",value:function(e){return this.version<10.1?Promise.reject(new x.a("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):Object(I.default)(r(this.parsedUrl)+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.3?null===e||void 0===e?void 0:e.rasterFunction:null})}).then((function(e){return Fe.a.fromJSON(e.data)}))}},{key:"getCatalogItemRasterInfo",value:function(e,t){var n=Object(a.a)(Object(a.a)({},t),{},{query:this._getQueryParams()});return function(e,t,r){return At.apply(this,arguments)}(r(this.parsedUrl),e,n)}},{key:"getCatalogItemICSInfo",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,n){var i,o,s,u,l,c,p,b,d,m,f,y,v,h,g,O,w,M,x,S,D,R,A,k,T,N,C,F,L,P,z,V,B,U;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.default)(r(this.parsedUrl)+"/"+t+"/info/ics",Object(a.a)({query:this._getQueryParams()},n));case 2:if(i=e.sent,o=i.data,s=o&&o.ics){e.next=7;break}return e.abrupt("return");case 7:return u=null,e.prev=8,e.next=11,Object(I.default)(r(this.parsedUrl)+"/"+t+"/info",Object(a.a)({query:this._getQueryParams()},n));case 11:u=e.sent.data.extent,e.next=16;break;case 14:e.prev=14,e.t0=e.catch(8);case 16:if(u&&u.spatialReference){e.next=18;break}return e.abrupt("return",{ics:s,icsToPixelTransform:null,icsExtent:null,northDirection:null});case 18:for(l=this.version>=10.7?Object(I.default)(r(this.parsedUrl)+"/"+t+"/info/icstopixel",Object(a.a)({query:this._getQueryParams()},n)).then((function(e){return e.data})).catch((function(){return{}})):{},c=u.spatialReference,p={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[u]}),inSR:c.wkid||JSON.stringify(c),outSR:"0:"+t},b=Object(I.default)(r(this.parsedUrl)+"/project",Object(a.a)({query:this._getQueryParams(p)},n)).then((function(e){return e.data})).catch((function(){return{}})),d=5,m=(u.xmin+u.xmax)/2,f=(u.ymax-u.ymin)/(d+1),y=u.ymin+f,v=[],h=0;h<d;h++)v.push({x:m,y:y+f*h});return g={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:v}),inSR:c.wkid||JSON.stringify(c),outSR:"0:"+t},O=Object(I.default)(r(this.parsedUrl)+"/project",Object(a.a)({query:this._getQueryParams(g)},n)).then((function(e){return e.data})).catch((function(){return{}})),e.next=24,Promise.all([l,b,O]);case 24:if(w=e.sent,null==(M=w[0].ipxf)&&"topup"===(null===(R=null===(x=s.geodataXform)||void 0===x?void 0:x.xf_0)||void 0===R||null===(S=R.name)||void 0===S?void 0:S.toLowerCase())&&6===(null===R||void 0===R||null===(D=R.coefficients)||void 0===D?void 0:D.length)&&(M={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:R.coefficients,cellsizeRatio:0,type:"GeometricXform"}}),(A=Ot.a.fromJSON(w[1]&&w[1].geometries&&w[1].geometries[0]))&&(A.spatialReference=new je.a({wkid:0,imageCoordinateSystem:s})),k=w[2].geometries?w[2].geometries.filter((function(e){return null!=e&&null!=e.x&&null!=e.y&&"NaN"!==e.x&&"NaN"!==e.y})):[],!((T=k.length)<3)){e.next=32;break}return e.abrupt("return",{ics:s,icsToPixelTransform:M,icsExtent:A,northDirection:null});case 32:for(N=0,C=0,F=0,L=0,P=0;P<T;P++)N+=k[P].x,C+=k[P].y,F+=k[P].x*k[P].x,L+=k[P].x*k[P].y;return z=(T*L-N*C)/(T*F-N*N),V=0,B=k[d-1].x>k[0].x,U=k[d-1].y>k[0].y,e.abrupt("return",(z===1/0?V=U?90:270:0===z?V=B?0:180:z>0?V=B?180*Math.atan(z)/Math.PI:180*Math.atan(z)/Math.PI+180:z<0&&(V=U?180+180*Math.atan(z)/Math.PI:360+180*Math.atan(z)/Math.PI),{ics:s,icsToPixelTransform:M,icsExtent:A,northDirection:V}));case 38:case"end":return e.stop()}}),e,this,[[8,14]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"generateRasterInfo",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,n){var i,o,s,u;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(m.d)(L.a,t),!this.serviceRasterInfo||t&&"none"!==(null===(i=t.functionName)||void 0===i?void 0:i.toLowerCase())&&!this._isVectorFieldResampleFunction(t)){e.next=2;break}return e.abrupt("return",this.serviceRasterInfo);case 2:if(o=sr(t)){e.next=5;break}throw new x.a("imagery-layer:generate-raster-info","the rendering rule is not supported");case 5:if(!this._functionRasterInfos[o]){e.next=7;break}return e.abrupt("return",this._functionRasterInfos[o]);case 7:return s=Object(a.a)(Object(a.a)({},n),{},{query:this._getQueryParams()}),u=Object(Dt.b)(r(this.parsedUrl),t,s),this._functionRasterInfos[o]=u,e.prev=9,e.next=12,u;case 12:return e.abrupt("return",e.sent);case 15:throw e.prev=15,e.t0=e.catch(9),this._functionRasterInfos[o]=null,e.t0;case 18:case"end":return e.stop()}}),e,this,[[9,15]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getExportImageServiceParameters",value:function(e,t,n,i){var o,s=jt((e=e.clone().shiftCentralMeridian()).spatialReference,r(this.parsedUrl));this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);var u=this.exportImageServiceParameters.toJSON(),l=u.bandIds,c=u.noData,p=u.renderingRule,b=null===(o=this.rasterFunction)||void 0===o?void 0:o.rasterFunctionDefinition,d=!this.renderer||"raster-stretch"===this.renderer.type;if(null!==l&&void 0!==l&&l.length&&this._hasRasterFunction(this.rasterFunction)&&!b&&d){var m={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:l}};if("Stretch"===p.rasterFunction)m.rasterFunctionArguments.Raster=p.rasterFunctionArguments.Raster,p.rasterFunctionArguments.Raster=m;else if("Colormap"===p.rasterFunction){var f=p.rasterFunctionArguments.Raster;"Stretch"===(null===f||void 0===f?void 0:f.rasterFunction)?(m.rasterFunctionArguments.Raster=f.rasterFunctionArguments.Raster,f.rasterFunctionArguments.Raster=m):(m.rasterFunctionArguments.Raster=f,p.rasterFunctionArguments.Raster=m)}else m.rasterFunctionArguments.Raster=p,p=m;u.bandIds=void 0}else u.bandIds=null===l||void 0===l?void 0:l.join(",");c instanceof Array&&c.length>0&&(u.noData=c.join(","));var y=this._processMultidimensionalIntersection(null,i,this.exportImageServiceParameters.mosaicRule);if(y.isOutSide)return null;u.mosaicRule=null!=y.mosaicRule?JSON.stringify(y.mosaicRule):null,i=y.timeExtent,u.renderingRule=this._getRenderingRuleString(L.a.fromJSON(p));var v={};if(null!=i){var j=i.toJSON(),h=j.start,g=j.end;h&&g&&h===g?v.time=""+h:null==h&&null==g||(v.time="".concat(null!==h&&void 0!==h?h:"null",",").concat(null!==g&&void 0!==g?g:"null"))}return Object(a.a)(Object(a.a)({bbox:e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:s,imageSR:s,size:t+","+n},u),v)}},{key:"getSamples",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){var n,a;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchCapabilities(null===r||void 0===r?void 0:r.signal);case 2:if(null!==(n=e.sent)&&void 0!==n&&n.operations.supportsGetSamples){e.next=5;break}throw new x.a("imagery-layer:get-samples","getSamples operation is not supported on the input image service");case 5:return t=Object(m.d)(nr,t).clone(),a=this.raster,e.abrupt("return",(a&&null==t.raster&&(t.raster=a),rt(this.url,t,this._getRequestOptions(r))));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"identify",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){var n,a,i;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchCapabilities(null===r||void 0===r?void 0:r.signal);case 2:if(e.sent.operations.supportsIdentify){e.next=4;break}throw new x.a("imagery-layer:identify","identify operation is not supported on the input image service");case 4:if(t=Object(m.d)(Qt,t).clone(),!(n=this._processMultidimensionalIntersection(t.geometry,t.timeExtent,t.mosaicRule||this.mosaicRule)).isOutSide){e.next=8;break}throw new x.a("imagery-layer:identify","the request cannot be fulfilled when falling outside of the multidimensional subset");case 8:return t.timeExtent=n.timeExtent,t.mosaicRule=n.mosaicRule,a=this.raster,i=this.rasterFunction,e.abrupt("return",(i&&null==t.rasterFunction&&(t.rasterFunction=i),a&&null==t.raster&&(t.raster=a),at(this.url,t,this._getRequestOptions(r))));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createQuery",value:function(){var e=new Mt.a;return e.outFields=["*"],e.returnGeometry=!0,e.where=this.definitionExpression||"1=1",e}},{key:"queryRasters",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._prepareForQuery(t,r);case 2:return n=e.sent,t=n.query,r=n.requestOptions,e.abrupt("return",Object(gt.a)(this.url,t,r));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryObjectIds",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._prepareForQuery(t,r);case 2:return n=e.sent,t=n.query,r=n.requestOptions,e.abrupt("return",Object(St.a)(this.url,t,r));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRasterCount",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._prepareForQuery(t,r);case 2:return n=e.sent,t=n.query,r=n.requestOptions,e.abrupt("return",Object(xt.a)(this.url,t,r));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryVisibleRasters",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){var n,i,o,s,u,l,c,p,b,d,m,f,y,v,h,g,O,w,I,M,S,D,R,A,k,T,N,C,F,P,z,V,B,U,E=this;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new x.a("imagery-layer: query-visible-rasters","missing query parameter");case 2:return e.next=4,this.load();case 4:if(i=(n=r||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1}).pixelSize,o=n.returnDomainValues,s=n.returnTopmostRaster,u=n.showNoDataRecords,l=!1,c=null,p=null,b="raster.servicepixelvalue",d=this._rasterFunctionNamesIndex,null!=t.outFields&&(l=t.outFields.some((function(e){return!e.toLowerCase().includes(b)})),this.version>=10.4)&&(m=t.outFields.filter((function(e){return e.toLowerCase().includes(b)&&e.length>24})).map((function(e){var t=e.slice(25);return[E._updateRenderingRulesFunctionName(t,d),t]})),c=m.map((function(e){return new L.a({functionName:e[0]})})),p=m.map((function(e){return e[1]})),f=this.rasterFunction,0===c.length?null!==f&&void 0!==f&&f.functionName?(c.push(f),p.push(f.functionName)):c=null:(null===f||void 0===f?void 0:f.functionName)&&!c.some((function(e){return e.functionName===f.functionName}))&&(c.push(f),p.push(f.functionName))),y=null==t.outSpatialReference||t.outSpatialReference.equals(this.spatialReference),v=this.multidimensionalSubset,h=t.timeExtent||this.timeExtent,!v){e.next=15;break}if(O=Object(pe.h)(v,{geometry:t.geometry,timeExtent:t.timeExtent,multidimensionalDefinition:null===(g=this.exportImageServiceParameters.mosaicRule)||void 0===g?void 0:g.multidimensionalDefinition}),w=O.isOutside,I=O.intersection,!w){e.next=14;break}throw new x.a("imagery-layer:query-visible-rasters","the request cannot be fulfilled when falling outside of the multidimensional subset");case 14:I&&null!=I.timeExtent&&(h=I.timeExtent);case 15:return M=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,h),delete(S=this._getQueryParams({geometry:t.geometry,timeExtent:h,mosaicRule:M,rasterFunction:this.version<10.4?this.rasterFunction:null,rasterFunctions:c,pixelSize:i,returnCatalogItems:l,returnGeometry:y,raster:this.raster,maxItemCount:s?1:null})).f,D=new Qt(S),e.prev=18,e.next=21,this._generateRasterInfo(this.rasterFunction);case 21:return e.next=23,at(this.url,D,{signal:null===r||void 0===r?void 0:r.signal,query:Object(a.a)({},this.customParameters)});case 23:if(N=e.sent,C=t.outFields,F=null!=N.value&&N.value.toLowerCase().includes("nodata"),l&&!y&&null!==N&&void 0!==N&&null!==(R=N.catalogItems)&&void 0!==R&&R.features.length&&(u||!F)){e.next=28;break}return e.abrupt("return",this._processVisibleRastersResponse(N,{returnDomainValues:o,templateRRFunctionNames:p,showNoDataRecords:u,templateFields:C}));case 28:return P=this.objectIdField||"ObjectId",z=null!==(A=null===(k=N.catalogItems)||void 0===k?void 0:k.features)&&void 0!==A?A:[],V=z.map((function(e){var t;return null===(t=e.attributes)||void 0===t?void 0:t[P]})),B=new Mt.a({objectIds:V,returnGeometry:!0,outSpatialReference:t.outSpatialReference,outFields:[P]}),e.next=34,this.queryRasters(B);case 34:return U=e.sent,e.abrupt("return",(null!==U&&void 0!==U&&null!==(T=U.features)&&void 0!==T&&T.length&&U.features.forEach((function(e){z.forEach((function(r){r.attributes[P]===e.attributes[P]&&(r.geometry=new It.a(e.geometry),null!=t.outSpatialReference&&(r.geometry.spatialReference=t.outSpatialReference))}))})),this._processVisibleRastersResponse(N,{returnDomainValues:o,templateRRFunctionNames:p,showNoDataRecords:u,templateFields:C})));case 38:throw e.prev=38,e.t0=e.catch(18),new x.a("imagery-layer:query-visible-rasters","encountered error when querying visible rasters");case 41:case"end":return e.stop()}}),e,this,[[18,38]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchVariableStatisticsHistograms",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,n){var a,i,o;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(I.default)(r(this.parsedUrl)+"/statistics",{query:this._getQueryParams({variable:t}),signal:n}).then((function(e){var t;return null===(t=e.data)||void 0===t?void 0:t.statistics})),i=Object(I.default)(r(this.parsedUrl)+"/histograms",{query:this._getQueryParams({variable:t}),signal:n}).then((function(e){var t;return null===(t=e.data)||void 0===t?void 0:t.histograms})),e.next=4,Promise.all([a,i]);case 4:return o=e.sent,e.abrupt("return",(o[0]&&o[0].forEach((function(e){e.avg=e.mean,e.stddev=e.standardDeviation})),{statistics:o[0]||null,histograms:o[1]||null}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createFlowMesh",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._rasterJobHandler.instance,e.abrupt("return",n?n.createFlowMesh(t,r):Object(ar.a)(t.meshType,t.simulationSettings,t.flowData,null!=r.signal?r.signal:(new AbortController).signal));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMultidimensionalSubsetVariables",value:function(e){var t=null!==e&&void 0!==e?e:this.serviceRasterInfo.multidimensionalInfo;return Object(pe.f)(this.multidimensionalSubset,t)}},{key:"_fetchService",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t){var n,a,i,o,s=this;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchServiceInfo(t);case 2:return this.rasterInfo||(this.rasterInfo=this.serviceRasterInfo),n=this.sourceJSON,a=null!=this.serviceRasterInfo?Promise.resolve(this.serviceRasterInfo):Object(Dt.a)(r(this.parsedUrl),n,{signal:t,query:this._getQueryParams()}).then((function(e){return s._set("serviceRasterInfo",e),s._set("multidimensionalInfo",e.multidimensionalInfo),e})),i=this._hasRasterFunction(this.rasterFunction)?this._generateRasterInfo(this.rasterFunction,{signal:t}):null,o=this._getRasterFunctionInfos(),e.abrupt("return",Promise.all([a,i,o]).then((function(e){e[1]?s._set("rasterInfo",e[1]):s._set("rasterInfo",e[0]),e[2]&&s._set("rasterFunctionInfos",e[2]),s.renderer&&!s._isSupportedRenderer(s.renderer)&&(s._set("renderer",null),D.a.getLogger(s).warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer")),s._set("renderer",s._configRenderer(s.renderer)),s.addHandles([Object(R.e)((function(){return s.rasterFunction}),(function(e){(s.renderer||s.symbolizer||s.popupEnabled&&s.popupTemplate)&&s._generateRasterInfo(e).then((function(e){e&&(s.rasterInfo=e)}))}))]);var t=s.serviceRasterInfo;null!=t.multidimensionalInfo&&s._updateMultidimensionalDefinition(t)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_combineMosaicRuleWithTimeExtent",value:function(e,t){var r,n=this.timeInfo,a=this.serviceRasterInfo.multidimensionalInfo;if(null==e||null==a||null==t||null==(null===n||void 0===n?void 0:n.startField))return e;var i=n.startField,o=a.variables.some((function(e){return e.dimensions.some((function(e){return e.name===i}))}))?i:"StdTime";if(e=e.clone(),"mosaic-dataset"===this.sourceType)return e.multidimensionalDefinition=null===(r=e.multidimensionalDefinition)||void 0===r?void 0:r.filter((function(e){return e.dimensionName!==o})),this._cleanupMultidimensionalDefinition(e);e.multidimensionalDefinition=e.multidimensionalDefinition||[];var s=e.multidimensionalDefinition.filter((function(e){return e.dimensionName===o})),u=null!=t.start?t.start.getTime():null,l=null!=t.end?t.end.getTime():null,c=null==u||null==l||u===l,p=c?[u||l]:[[u,l]],b=this.version>=10.8;if(s.length)s.forEach((function(e){e.dimensionName===o&&(b?(e.dimensionName=null,e.isSlice=!1,e.values=[]):(e.isSlice=c,e.values=p))}));else if(!b){var d=e.multidimensionalDefinition.filter((function(e){return null!=e.variableName&&null==e.dimensionName}));d.length?d.forEach((function(e){e.dimensionName=o,e.isSlice=c,e.values=p})):e.multidimensionalDefinition.push(new N.a({variableName:"",dimensionName:o,isSlice:c,values:p}))}return this._cleanupMultidimensionalDefinition(e)}},{key:"_cleanupMultidimensionalDefinition",value:function(e){return null==e?null:(e.multidimensionalDefinition&&(e.multidimensionalDefinition=e.multidimensionalDefinition.filter((function(e){return!(!e.variableName&&!e.dimensionName)})),0===e.multidimensionalDefinition.length&&(e.multidimensionalDefinition=null)),"mosaic-dataset"!==this.sourceType&&null==e.multidimensionalDefinition?null:e)}},{key:"_prepareForQuery",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t,r){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchCapabilities(null===(n=r)||void 0===n?void 0:n.signal);case 2:if(e.sent.operations.supportsQuery){e.next=4;break}throw new x.a("imagery-layer:query-rasters","query operation is not supported on the input image service");case 4:return e.abrupt("return",(t=null!=t?Object(m.d)(Mt.a,t):this.createQuery(),r=this._getRequestOptions(r),this.raster&&(r.query=Object(a.a)(Object(a.a)({},r.query),{},{raster:this.raster})),{query:t,requestOptions:r}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_initJobHandler",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(){var t,r=this;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this._rasterJobHandler.connectionPromise){e.next=2;break}return e.abrupt("return",this._rasterJobHandler.connectionPromise);case 2:return t=new ce.a,this._rasterJobHandler.connectionPromise=t.initialize().then((function(){r._rasterJobHandler.instance=t}),(function(){})),e.next=6,this._rasterJobHandler.connectionPromise;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_shutdownJobHandler",value:function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0,this._cachedRendererJson=null}},{key:"_isSupportedRenderer",value:function(e){var t=this.rasterInfo,r=this.rasterFunction;return"unique-value"===e.type&&this._hasRasterFunction(r)&&1===(null===t||void 0===t?void 0:t.bandCount)&&["u8","s8"].includes(t.pixelType)||null!=t&&null!=e&&Object(me.d)(t).includes(e.type)}},{key:"_fetchCapabilities",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.capabilities,e.t0){e.next=4;break}return e.next=4,this._fetchServiceInfo(t);case 4:return e.abrupt("return",this.capabilities);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchServiceInfo",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t){var n,a,i,o,s;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.sourceJSON){e.next=8;break}return e.next=4,Object(I.default)(r(this.parsedUrl),{query:this._getQueryParams(),signal:t});case 4:i=e.sent,o=i.data,s=i.ssl,a=o,this.sourceJSON=a,s&&(this.url=this.url.replace(/^http:/i,"https:"));case 8:if(!((null===(n=a.capabilities)||void 0===n?void 0:n.toLowerCase().split(",").map((function(e){return e.trim()})).indexOf("tilesonly"))>-1)){e.next=10;break}throw new x.a("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");case 10:this.read(a,{origin:"service",url:this.parsedUrl});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isMosaicDataset",value:function(e){var t;return e.serviceSourceType?"esriImageServiceSourceTypeMosaicDataset"===e.serviceSourceType:(null===(t=e.fields)||void 0===t?void 0:t.length)>0}},{key:"_isMosaicRuleSupported",value:function(e){var t;if(!e)return!1;var r=this._isMosaicDataset(e),n=e.currentVersion>=10.71&&e.hasMultidimensions&&!((null===(t=e.fields)||void 0===t?void 0:t.length)>1);return r||n}},{key:"_isVectorFieldResampleFunction",value:function(e){if(null==e)return!1;var t=e.functionName,r=e.functionArguments,n="resample"===(null===t||void 0===t?void 0:t.toLowerCase()),a=(null===r||void 0===r?void 0:r.ResampleType)||(null===r||void 0===r?void 0:r.resampleType);return n&&(7===a||10===a)}},{key:"_isPicture",value:function(){return!this.format||this.format.includes("jpg")||this.format.includes("png")}},{key:"_configRenderer",value:function(e){var t=this._isPicture(),r=this.rasterInfo;if(!t&&!this.pixelFilter||this._isVectorDataSet()){var n;if(!this.bandIds&&r.bandCount>=3){var a=Object(me.b)(r);!a||3===r.bandCount&&0===a[0]&&1===a[1]&&2===a[2]||(this.bandIds=a)}e||(e=Object(me.a)(r,{bandIds:this.bandIds,variableName:this.rasterFunction?null:null===(n=this.mosaicRule)||void 0===n||null===(n=n.multidimensionalDefinition)||void 0===n?void 0:n[0].variableName}));var i=Object(me.f)(e.toJSON());this.symbolizer?(this.symbolizer.rendererJSON=i,this.symbolizer.rasterInfo=r):this.symbolizer=new fe.a({rendererJSON:i,rasterInfo:r}),this.symbolizer.bind().success||(this.symbolizer=null)}return e}},{key:"_clonePixelData",value:function(e){return null==e?e:{extent:e.extent&&e.extent.clone(),pixelBlock:null!=e.pixelBlock?e.pixelBlock.clone():null}}},{key:"_getQueryParams",value:function(e){e&&null!=e.renderingRule&&"string"!=typeof e.renderingRule&&(e.renderingRule=this._getRenderingRuleString(e.renderingRule));var t=this.raster,r=this.viewId;return Object(a.a)(Object(a.a)({raster:t,viewId:r,f:"json"},e),this.customParameters)}},{key:"_getRequestOptions",value:function(e){return Object(a.a)(Object(a.a)({},e),{},{query:Object(a.a)(Object(a.a)({},null===e||void 0===e?void 0:e.query),this.customParameters)})}},{key:"_decodePixelBlock",value:function(e,t,r){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:e,options:t}):Object(be.a)(e,t,r)}},{key:"_getRasterFunctionInfos",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t){var n,a,i;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.sourceJSON.rasterFunctionInfos,!this.loaded){e.next=3;break}return e.abrupt("return",n);case 3:if(!(n&&this.version>=10.3)){e.next=10;break}if(1!==n.length||"none"!==n[0].name.toLowerCase()){e.next=6;break}return e.abrupt("return",n);case 6:return e.next=8,Object(I.default)(r(this.parsedUrl)+"/rasterFunctionInfos",{query:this._getQueryParams(),signal:t});case 8:return i=e.sent,e.abrupt("return",null===(a=i.data)||void 0===a?void 0:a.rasterFunctionInfos);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_canRequestImageElement",value:function(e){return!this.pixelFilter&&(!e||e.includes("png"))}},{key:"_requestArrayBuffer",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(t){var n,i,o,s,u,l,c,p,b,d,m,f,y,v;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.imageProps,i=t.requestAsImageElement,o=t.returnImageBitmap,s=t.signal,!i||!this._canRequestImageElement(n.format)){e.next=14;break}return u="".concat(r(this.parsedUrl),"/exportImage"),e.next=5,Object(I.default)(u,{responseType:o?"blob":"image",query:this._getQueryParams(Object(a.a)(Object(a.a)({f:"image"},this.refreshParameters),t.imageServiceParameters)),signal:s});case 5:if(l=e.sent,!((c=l.data)instanceof Blob)){e.next=13;break}return e.next=10,Object(oe.a)(c,u,s);case 10:return e.t0=e.sent,e.t1=n,e.abrupt("return",{imageBitmap:e.t0,params:e.t1});case 13:return e.abrupt("return",{imageOrCanvasElement:c,params:n});case 14:return p=this._initJobHandler(),b=Object(I.default)(r(this.parsedUrl)+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams(Object(a.a)({f:"image"},t.imageServiceParameters)),signal:s}),e.next=18,Promise.all([b,p]);case 18:if(d=e.sent[0].data,m=n.format||"jpgpng","bsq"!==(f=m)&&"bip"!==f&&(f=Object(be.b)(d)),f){e.next=23;break}throw new x.a("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(d)));case 23:return y={signal:s},v="gif"===m||"bmp"===m||m.includes("png")&&("png"===f||"jpg"===f)?Object(be.a)(d,Object(a.a)({useCanvas:!0},n),y):this._decodePixelBlock(d,{width:n.width,height:n.height,planes:null,pixelType:null,noDataValue:null,format:m},y),e.next=26,v;case 26:return e.t2=e.sent,e.t3=n.extent,e.t4={pixelBlock:e.t2,extent:e.t3},e.t5=n,e.abrupt("return",{pixelData:e.t4,params:e.t5});case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_generateRasterInfo",value:function(e,t){return this.generateRasterInfo(e,t).catch((function(){return null}))}},{key:"_isValidCustomizedMosaicRule",value:function(e){var t;return e&&JSON.stringify(e.toJSON())!==JSON.stringify(null===(t=this.defaultMosaicRule)||void 0===t?void 0:t.toJSON())}},{key:"_updateMultidimensionalDefinition",value:function(e){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)){var t=Object(pe.b)(e,{multidimensionalSubset:this.multidimensionalSubset});if(null!=t&&t.length>0){var r;this.mosaicRule=this.mosaicRule||new te.a;var n=this.mosaicRule.multidimensionalDefinition;!this.sourceJSON.defaultVariableName&&this.rasterFunction&&"none"!==(null===(r=this.rasterFunction.functionName)||void 0===r?void 0:r.toLowerCase())&&t.forEach((function(e){return e.variableName=""})),t=t.filter((function(e){var t=e.variableName,r=e.dimensionName;return t&&"*"!==t||r})),(null===n||void 0===n||!n.length)&&t.length&&(this.mosaicRule.multidimensionalDefinition=t)}}}},{key:"_processVisibleRastersResponse",value:function(e,t){t=t||{};var r,n,a,i=e.value,o=t,s=o.templateRRFunctionNames,u=o.showNoDataRecords,l=o.returnDomainValues,c=o.templateFields,p=e.processedValues,b=e.catalogItems&&e.catalogItems.features,d=e.properties&&e.properties.Values&&e.properties.Values.map((function(e){return e.replaceAll(/ /gi,", ")}))||[],m=this.objectIdField||"ObjectId",f="string"==typeof i&&i.toLowerCase().includes("nodata"),y=[];if(i&&!b&&!f){var v={};v[m]=0,d=[i],b=[new O.a(this.fullExtent,null,v)]}if(!b)return[];this._updateResponseFieldNames(b,c),f&&!u&&(b=[]);for(var j=0;j<b.length;j++){if(r=b[j],null!=i){if(n=d[j],a=this.rasterFunction&&p&&p.length>0&&s&&s.length>0&&s.includes(this.rasterFunction.functionName)?p[s.indexOf(this.rasterFunction.functionName)]:i,"nodata"===n.toLowerCase()&&!u)continue;r.attributes["Raster.ItemPixelValue"]=n,r.attributes["Raster.ServicePixelValue"]=a,this._updateFeatureWithMagDirValues(r,n);var h=this.fields&&this.fields.length>0,g=this.rasterFunction&&null!=this.serviceRasterInfo.attributeTable?h?n:i:a;this.rasterFunction||(g=h?n:i),this._updateFeatureWithRasterAttributeTableValues(r,g)}if(r.sourceLayer=r.layer=this,l&&this._updateFeatureWithDomainValues(r),s&&p&&s.length===p.length)for(var w=0;w<s.length;w++){var I="Raster.ServicePixelValue."+s[w];r.attributes[I]=p[w]}y.push(b[j])}return y}},{key:"_processMultidimensionalIntersection",value:function(e,t,r){var n=this.multidimensionalSubset;if(!n)return{isOutSide:!1,timeExtent:t,mosaicRule:r=this._combineMosaicRuleWithTimeExtent(r,t)};if(n){var a=Object(pe.h)(n,{geometry:e,timeExtent:t}),i=a.isOutside,o=a.intersection;if(i)return{isOutSide:!0,timeExtent:null,mosaicRule:null};o&&null!=o.timeExtent&&(t=o.timeExtent)}if(null!=(r=this._combineMosaicRuleWithTimeExtent(r,t))&&r.multidimensionalDefinition&&Object(pe.h)(n,{multidimensionalDefinition:r.multidimensionalDefinition}).isOutside)return{isOutSide:!0,timeExtent:null,mosaicRule:null};return{isOutSide:!1,timeExtent:t,mosaicRule:r}}},{key:"_updateFeatureWithRasterAttributeTableValues",value:function(e,t){var r=this,n=this.rasterInfo.attributeTable||this.serviceRasterInfo.attributeTable;if(null!=n){var a=n.features,i=n.fields,o=i.map((function(e){return e.name})).filter((function(e){return"value"===e.toLowerCase()})),s=o&&o[0];if(s){var u=a.filter((function(e){return e.attributes[s]===(null!=t?parseInt(t,10):null)}));u&&u[0]&&i.forEach((function(t){var n=r._rasterAttributeTableFieldPrefix+t.name;e.attributes[n]=u[0].attributes[t.name]}))}}}},{key:"_updateFeatureWithMagDirValues",value:function(e,t){if(this._isVectorDataSet()){var r=t.split(/,\s*/).map((function(e){return parseFloat(e)})),n=r.map((function(e){return[e]})),a=r.map((function(e){return{minValue:e,maxValue:e,noDataValue:null}})),i=new ue.a({height:1,width:1,pixelType:"f32",pixels:n,statistics:a});null!=this.pixelFilter&&this.pixelFilter({pixelBlock:i,extent:new Ot.a(0,0,0,0,this.spatialReference)});var o="esriImageServiceDataTypeVector-MagDir"===this.serviceDataType?[i.pixels[0][0],i.pixels[1][0]]:Object(de.j)([i.pixels[0][0],i.pixels[1][0]]);e.attributes["Raster.Magnitude"]=o[0],e.attributes["Raster.Direction"]=o[1]}}},{key:"_updateFeatureWithDomainValues",value:function(e){var t=this.fields&&this.fields.filter((function(e){return e.domain&&"coded-value"===e.domain.type}));null!=t&&t.forEach((function(t){var r=e.attributes[t.name];if(null!=r){var n=t.domain.codedValues.find((function(e){return e.code===r}));n&&(e.attributes[t.name]=n.name)}}))}},{key:"_updateResponseFieldNames",value:function(e,t){if(t&&!(t.length<1)){var r=this.fieldsIndex;null!=r&&e.forEach((function(e){if(e&&e.attributes){var a,i=Object(n.a)(t);try{for(i.s();!(a=i.n()).done;){var o,s=a.value,u=null===(o=r.get(s))||void 0===o?void 0:o.name;u&&u!==s&&(e.attributes[s]=e.attributes[u],delete e.attributes[u])}}catch(l){i.e(l)}finally{i.f()}}}))}}},{key:"_getRenderingRuleString",value:function(e){if(e){var t,r=e.toJSON();return((r=null!==(t=r.rasterFunctionDefinition)&&void 0!==t?t:r).thumbnail||r.thumbnailEx)&&(r.thumbnail=r.thumbnailEx=null),JSON.stringify(r)}return null}},{key:"_hasRasterFunction",value:function(e){return null!=e&&null!=e.functionName&&"none"!==e.functionName.toLowerCase()}},{key:"_updateRenderingRulesFunctionName",value:function(e,t){if(e&&!(e.length<1)){if("Raw"===e)return e.replace("Raw","None");var r=e.toLowerCase().replaceAll(/ /gi,"_");return t.has(r)?t.get(r):e}}},{key:"_isRFTJson",value:function(e){return e&&e.name&&e.arguments&&e.function&&e.hasOwnProperty("functionType")}},{key:"_isVectorDataSet",value:function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType}},{key:"_applyMosaicAndRenderingRules",value:function(e){var t=this.raster,r=this.mosaicRule,n=this.rasterFunction;n&&e instanceof Zt.a&&null==e.rasterFunction&&(e.rasterFunction=n),r&&null==e.mosaicRule&&(e.mosaicRule=r),t&&null==e.raster&&(e.raster=t)}},{key:"_readCapabilities",value:function(e){var t=e.capabilities?e.capabilities.toLowerCase().split(",").map((function(e){return e.trim()})):["image","catalog"],r=e.currentVersion,n=e.advancedQueryCapabilities,a=e.maxRecordCount,i=t.includes("image"),o="esriImageServiceDataTypeElevation"===e.serviceDataType,s=!!(e.spatialReference||e.extent&&e.extent.spatialReference),u=t.includes("edit"),l=t.includes("mensuration")&&s,c=null==e.mensurationCapabilities?[]:e.mensurationCapabilities.toLowerCase().split(",").map((function(e){return e.trim()})),p=l&&c.includes("basic");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:i,supportsExportImage:i,supportsIdentify:i,supportsMeasure:l,supportsDownload:t.includes("download"),supportsQuery:t.includes("catalog")&&e.fields&&e.fields.length>0,supportsGetSamples:r>=10.2&&i,supportsProject:r>=10.3&&i,supportsComputeStatisticsHistograms:r>=10.4&&i,supportsQueryBoundary:r>=10.6&&i,supportsCalculateVolume:r>=10.7&&o,supportsComputePixelLocation:r>=10.7&&t.includes("catalog"),supportsComputeAngles:r>=10.91,supportsAdd:u,supportsDelete:u,supportsEditing:u,supportsUpdate:u,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,supportsQueryTopFeatures:!1,supportsAsyncConvert3D:!1},query:{maxRecordCount:a,maxRecordCountFactor:void 0,supportsStatistics:!(null===n||void 0===n||!n.supportsStatistics),supportsOrderBy:!(null===n||void 0===n||!n.supportsOrderBy),supportsDistinct:!(null===n||void 0===n||!n.supportsDistinct),supportsPagination:!(null===n||void 0===n||!n.supportsPagination),supportsStandardizedQueriesOnly:!(null===n||void 0===n||!n.useStandardizedQueries),supportsPercentileStatistics:!(null===n||void 0===n||!n.supportsPercentileStatistics),supportsCentroid:!(null===n||void 0===n||!n.supportsReturningGeometryCentroid),supportsDistance:!(null===n||void 0===n||!n.supportsQueryWithDistance),supportsExtent:!(null===n||void 0===n||!n.supportsReturningQueryExtent),supportsGeometryProperties:!(null===n||void 0===n||!n.supportsReturningGeometryProperties),supportsHavingClause:!(null===n||void 0===n||!n.supportsHavingClause),supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!(null===n||void 0===n||!n.supportsDefaultSR),supportsFullTextSearch:!1,supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0},mensuration:{supportsDistanceAndAngle:p,supportsAreaAndPerimeter:p,supportsPointOrCentroid:p,supportsHeightFromBaseAndTop:l&&c.includes("base-top height"),supportsHeightFromBaseAndTopShadow:l&&c.includes("base-top shadow height"),supportsHeightFromTopAndTopShadow:l&&c.includes("top-top shadow height"),supports3D:l&&c.includes("3d")}}}}]),l}(e);function r(e){var t;return null!==(t=null===e||void 0===e?void 0:e.path)&&void 0!==t?t:""}return Object(l.a)([Object(d.b)()],t.prototype,"_functionRasterInfos",void 0),Object(l.a)([Object(d.b)()],t.prototype,"_rasterJobHandler",void 0),Object(l.a)([Object(d.b)()],t.prototype,"_cachedRendererJson",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],t.prototype,"_serviceSupportsMosaicRule",void 0),Object(l.a)([Object(k.a)("_serviceSupportsMosaicRule",["currentVersion","fields"])],t.prototype,"readServiceSupportsMosaicRule",null),Object(l.a)([Object(d.b)()],t.prototype,"_rasterAttributeTableFieldPrefix",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],t.prototype,"_rasterFunctionNamesIndex",null),Object(l.a)([Object(d.b)()],t.prototype,"adjustAspectRatio",void 0),Object(l.a)([Object(d.b)({type:[m.a],json:{write:!0}})],t.prototype,"bandIds",void 0),Object(l.a)([Object(k.a)("bandIds")],t.prototype,"readBandIds",null),Object(l.a)([Object(d.b)({readOnly:!0,json:{read:!1}})],t.prototype,"capabilities",void 0),Object(l.a)([Object(k.a)("service","capabilities",["capabilities","currentVersion","serviceDataType"])],t.prototype,"readCapabilities",null),Object(l.a)([Object(d.b)({type:Number})],t.prototype,"compressionQuality",void 0),Object(l.a)([Object(y.a)("compressionQuality")],t.prototype,"writeCompressionQuality",null),Object(l.a)([Object(d.b)({type:Number})],t.prototype,"compressionTolerance",void 0),Object(l.a)([Object(y.a)("compressionTolerance")],t.prototype,"writeCompressionTolerance",null),Object(l.a)([Object(d.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(l.a)([Object(d.b)({readOnly:!0,dependsOn:["_serviceSupportsMosaicRule"]})],t.prototype,"defaultMosaicRule",void 0),Object(l.a)([Object(k.a)("defaultMosaicRule",["defaultMosaicMethod"])],t.prototype,"readDefaultMosaicRule",null),Object(l.a)([Object(d.b)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),Object(l.a)([Object(d.b)({readOnly:!0,constructOnly:!0})],t.prototype,"exportImageServiceParameters",void 0),Object(l.a)([Object(d.b)()],t.prototype,"rasterInfo",void 0),Object(l.a)([Object(d.b)({readOnly:!0,type:[ae.a]})],t.prototype,"fields",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],t.prototype,"fieldsIndex",null),Object(l.a)([Object(d.b)({type:["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"],json:{write:!0}})],t.prototype,"format",null),Object(l.a)([Object(k.a)("service","format",["serviceDataType"])],t.prototype,"readFormat",null),Object(l.a)([Object(d.b)({type:Ot.a})],t.prototype,"fullExtent",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],t.prototype,"hasMultidimensions",void 0),Object(l.a)([Object(d.b)({json:{read:{source:"maxImageHeight"}}})],t.prototype,"imageMaxHeight",void 0),Object(l.a)([Object(d.b)({json:{read:{source:"maxImageWidth"}}})],t.prototype,"imageMaxWidth",void 0),Object(l.a)([Object(d.b)({type:String,json:{type:re.a.jsonValues,read:re.a.read,write:re.a.write}})],t.prototype,"interpolation",void 0),Object(l.a)([Object(d.b)()],t.prototype,"minScale",void 0),Object(l.a)([Object(k.a)("service","minScale")],t.prototype,"readMinScale",null),Object(l.a)([Object(d.b)()],t.prototype,"maxScale",void 0),Object(l.a)([Object(k.a)("service","maxScale")],t.prototype,"readMaxScale",null),Object(l.a)([Object(d.b)({type:te.a})],t.prototype,"mosaicRule",null),Object(l.a)([Object(k.a)("mosaicRule",["mosaicRule","defaultMosaicMethod"])],t.prototype,"readMosaicRule",null),Object(l.a)([Object(y.a)("mosaicRule")],t.prototype,"writeMosaicRule",null),Object(l.a)([Object(d.b)()],t.prototype,"multidimensionalInfo",void 0),Object(l.a)([Object(d.b)({type:se.a,json:{write:!0}})],t.prototype,"multidimensionalSubset",void 0),Object(l.a)([Object(d.b)({json:{type:m.a}})],t.prototype,"noData",void 0),Object(l.a)([Object(y.a)("noData")],t.prototype,"writeNoData",null),Object(l.a)([Object(d.b)({type:String,json:{type:re.b.jsonValues,read:re.b.read,write:re.b.write}})],t.prototype,"noDataInterpretation",void 0),Object(l.a)([Object(d.b)({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],t.prototype,"objectIdField",void 0),Object(l.a)([Object(k.a)("objectIdField")],t.prototype,"readObjectIdField",null),Object(l.a)([Object(d.b)({})],t.prototype,"geometryType",void 0),Object(l.a)([Object(d.b)({})],t.prototype,"typeIdField",void 0),Object(l.a)([Object(d.b)({})],t.prototype,"types",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],t.prototype,"parsedUrl",null),Object(l.a)([Object(d.b)({type:Function})],t.prototype,"pixelFilter",void 0),Object(l.a)([Object(d.b)()],t.prototype,"raster",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],t.prototype,"sourceType",void 0),Object(l.a)([Object(k.a)("sourceType",["serviceSourceType","fields"])],t.prototype,"readSourceType",null),Object(l.a)([Object(d.b)()],t.prototype,"viewId",void 0),Object(l.a)([Object(d.b)({types:w.a,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:w.c,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:function(e){return{enabled:e&&"vector-field"!==e.type&&"flow"!==e.type}}}}}}})],t.prototype,"renderer",null),Object(l.a)([Object(k.a)("renderer")],t.prototype,"readRenderer",null),Object(l.a)([Object(y.a)("renderer")],t.prototype,"writeRenderer",null),Object(l.a)([Object(d.b)()],t.prototype,"symbolizer",void 0),Object(l.a)([Object(d.b)(T.i)],t.prototype,"opacity",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],t.prototype,"rasterFields",null),Object(l.a)([Object(d.b)({constructOnly:!0})],t.prototype,"rasterFunctionInfos",void 0),Object(l.a)([Object(d.b)({type:L.a})],t.prototype,"renderingRule",null),Object(l.a)([Object(d.b)({type:L.a,json:{name:"renderingRule"}})],t.prototype,"rasterFunction",null),Object(l.a)([Object(k.a)("rasterFunction",["renderingRule","rasterFunctionInfos"])],t.prototype,"readRasterFunction",null),Object(l.a)([Object(d.b)()],t.prototype,"serviceDataType",void 0),Object(l.a)([Object(d.b)({readOnly:!0,type:je.a})],t.prototype,"spatialReference",void 0),Object(l.a)([Object(k.a)("spatialReference",["spatialReference","extent"])],t.prototype,"readSpatialReference",null),Object(l.a)([Object(d.b)({json:{type:re.c.jsonValues}})],t.prototype,"pixelType",void 0),Object(l.a)([Object(k.a)("pixelType")],t.prototype,"readPixelType",null),Object(l.a)([Object(y.a)("pixelType")],t.prototype,"writePixelType",null),Object(l.a)([Object(d.b)({constructOnly:!0,type:le.a})],t.prototype,"serviceRasterInfo",void 0),Object(l.a)([Object(d.b)()],t.prototype,"sourceJSON",void 0),Object(l.a)([Object(d.b)(T.o)],t.prototype,"url",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],t.prototype,"version",void 0),Object(l.a)([Object(k.a)("version",["currentVersion","fields","timeInfo"])],t.prototype,"readVersion",null),t=Object(l.a)([Object(f.a)("esri.layers.mixins.ArcGISImageService")],t)}(Object(dr.a)(Object(cr.a)(Object(ur.a)(Object(p.a)(v.a)))))))))));Object(l.a)([Object(d.b)(T.e)],jr.prototype,"legendEnabled",void 0),Object(l.a)([Object(d.b)({type:["show","hide"]})],jr.prototype,"listMode",void 0),Object(l.a)([Object(d.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],jr.prototype,"isReference",void 0),Object(l.a)([Object(d.b)({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],jr.prototype,"operationalLayerType",void 0),Object(l.a)([Object(y.a)("web-map","operationalLayerType")],jr.prototype,"writeOperationalLayerType",null),Object(l.a)([Object(d.b)(T.k)],jr.prototype,"popupEnabled",void 0),Object(l.a)([Object(d.b)({type:c.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],jr.prototype,"popupTemplate",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],jr.prototype,"defaultPopupTemplate",null),Object(l.a)([Object(d.b)({readOnly:!0,json:{read:!1}})],jr.prototype,"type",void 0);var hr=jr=Object(l.a)([Object(f.a)("esri.layers.ImageryLayer")],jr)},515:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return l}));var n=r(4),a=r(12),i=r(101),o=r(110);function s(e,t,r){return u.apply(this,arguments)}function u(){return u=Object(a.a)(Object(n.a)().mark((function e(t,r,a){var s;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,createImageBitmap(t);case 3:s=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new i.a("request:server","Unable to load ".concat(r),{url:r,error:e.t0});case 9:return e.abrupt("return",(Object(o.n)(a),s));case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),u.apply(this,arguments)}function l(e,t,r,n,a){return c.apply(this,arguments)}function c(){return c=Object(a.a)(Object(n.a)().mark((function e(t,r,a,s,u){var l;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,createImageBitmap(t);case 3:l=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new i.a("request:server","Unable to load tile ".concat(r,"/").concat(a,"/").concat(s),{error:e.t0,level:r,row:a,col:s});case 9:return e.abrupt("return",(Object(o.n)(u),l));case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),c.apply(this,arguments)}},572:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return b}));var n=r(1),a=r(4),i=r(12),o=r(221),s=r(408),u=r(235),l=r(210);function c(e,t,r){return p.apply(this,arguments)}function p(){return p=Object(i.a)(Object(a.a)().mark((function e(t,r,n){var i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t,r,n);case 2:return i=e.sent,e.abrupt("return",u.a.fromJSON(i));case 4:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function b(e,t,r){return d.apply(this,arguments)}function d(){return d=Object(i.a)(Object(a.a)().mark((function e(t,r,i){var u,c,p,b,d;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=Object(o.c)(t),c=Object(n.a)({},i),p=l.a.from(r),e.next=5,Object(s.a)(u,p,p.sourceSpatialReference,c);case 5:return b=e.sent,d=b.data,e.abrupt("return",d);case 8:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}},573:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n,a=r(89),i=r(88),o=r(90),s=r(91),u=r(94),l=r(105),c=r(116),p=r(97),b=r(96),d=r(95),m=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).variableName=null,n.dimensionName=null,n.values=[],n.isSlice=!1,n}return Object(i.a)(r,[{key:"clone",value:function(){return new n({variableName:this.variableName,dimensionName:this.dimensionName,values:Object(c.a)(this.values),isSlice:this.isSlice})}}]),r}(l.a);Object(u.a)([Object(p.b)({type:String,json:{write:!0}})],m.prototype,"variableName",void 0),Object(u.a)([Object(p.b)({type:String,json:{write:!0}})],m.prototype,"dimensionName",void 0),Object(u.a)([Object(p.b)({type:b.p.array(b.p.oneOf([b.p.native(Number),b.p.array(b.p.native(Number))])),json:{write:!0}})],m.prototype,"values",void 0),Object(u.a)([Object(p.b)({type:Boolean,json:{write:!0}})],m.prototype,"isSlice",void 0);var f=m=n=Object(u.a)([Object(d.a)("esri.layers.support.DimensionalDefinition")],m)},610:function(e,t,r){"use strict";r.d(t,"a",(function(){return z}));var n=r(92),a=r(89),i=r(88),o=r(90),s=r(91),u=r(94),l=r(105),c=r(116),p=r(97),b=r(96),d=r(138),m=r(136),f=r(95),y=r(137),v=r(146),j=(r(98),r(93),r(854)),h=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).pixelType="unknown",e}return Object(i.a)(r)}(l.a);Object(u.a)([Object(p.b)({type:String,json:{write:!0}})],h.prototype,"name",void 0),Object(u.a)([Object(p.b)({type:String,json:{write:!0}})],h.prototype,"description",void 0),Object(u.a)([Object(p.b)({type:b.a,json:{type:b.a,write:!0,name:"_object_id"}})],h.prototype,"id",void 0),Object(u.a)([Object(p.b)({type:String,json:{type:j.c.jsonValues,read:j.c.read,write:j.c.write}})],h.prototype,"pixelType",void 0),Object(u.a)([Object(p.b)({type:String,json:{write:!0}})],h.prototype,"type",void 0);var g=h=Object(u.a)([Object(f.a)("esri.layers.support.RasterFunctionInfo")],h),O=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).isDataset=!1,e.isPublic=!1,e.type="RasterFunctionVariable",e}return Object(i.a)(r)}(l.a);Object(u.a)([Object(p.b)({type:String,json:{write:!0}})],O.prototype,"name",void 0),Object(u.a)([Object(p.b)({type:Number,json:{type:b.a,write:!0,name:"_object_id"}})],O.prototype,"id",void 0),Object(u.a)([Object(p.b)({type:Boolean,json:{write:!0}})],O.prototype,"isDataset",void 0),Object(u.a)([Object(p.b)({type:Boolean,json:{write:!0}})],O.prototype,"isPublic",void 0),Object(u.a)([Object(p.b)({json:{write:!0}})],O.prototype,"value",void 0),Object(u.a)([Object(p.b)({type:String,json:{write:!0}})],O.prototype,"type",void 0);var w={key:"type",base:null,typeMap:{RasterFunctionVariable:O=Object(u.a)([Object(f.a)("esri.layers.support.RasterFunctionVariable")],O)}},I=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r)}(l.a);Object(u.a)([Object(p.b)({types:w,json:{types:w,name:"MatchVariable"}})],I.prototype,"matchVariable",void 0),Object(u.a)([Object(p.b)({types:w,json:{types:w,name:"UnionDimension"}})],I.prototype,"unionDimension",void 0),Object(u.a)([Object(p.b)({type:Number,json:{type:b.a,write:!0,name:"_object_id"}})],I.prototype,"id",void 0),Object(u.a)([Object(p.b)({type:String,json:{write:!0}})],I.prototype,"type",void 0);var M=I=Object(u.a)([Object(f.a)("esri.layers.support.RasterFunctionProperties")],I),x=new v.a({0:"mosaic",1:"item",2:"item-group"},{useNumericKeys:!0}),S=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).functionType="mosaic",e.type="RasterFunctionTemplate",e}return Object(i.a)(r)}(l.a);Object(u.a)([Object(p.b)({type:[String],json:{write:!0}})],S.prototype,"aliases",void 0),Object(u.a)([Object(p.b)({type:Object,json:{write:!0}})],S.prototype,"arguments",void 0),Object(u.a)([Object(p.b)({type:String,json:{write:!0}})],S.prototype,"description",void 0),Object(u.a)([Object(p.b)({type:g,json:{write:!0,name:"function"}})],S.prototype,"functionInfo",void 0),Object(u.a)([Object(p.b)({type:x.apiValues,json:{type:[0,1,2],read:x.read,write:x.write}})],S.prototype,"functionType",void 0),Object(u.a)([Object(p.b)({type:String,json:{write:!0}})],S.prototype,"group",void 0),Object(u.a)([Object(p.b)({type:String,json:{write:!0}})],S.prototype,"help",void 0),Object(u.a)([Object(p.b)({type:Number,json:{type:b.a,write:!0,name:"_object_id"}})],S.prototype,"id",void 0),Object(u.a)([Object(p.b)({type:String,json:{write:!0}})],S.prototype,"name",void 0),Object(u.a)([Object(p.b)({type:String,json:{write:!0,name:"definition"}})],S.prototype,"queryDefinition",void 0),Object(u.a)([Object(p.b)({type:String,json:{write:!0}})],S.prototype,"tag",void 0),Object(u.a)([Object(p.b)({type:M,json:{write:!0}})],S.prototype,"properties",void 0),Object(u.a)([Object(p.b)({type:String,json:{write:!0}})],S.prototype,"thumbnail",void 0),Object(u.a)([Object(p.b)({type:String,json:{write:!0}})],S.prototype,"thumbnailEx",void 0),Object(u.a)([Object(p.b)({json:{type:["RasterFunctionTemplate"],write:!0}})],S.prototype,"type",void 0);var D,R=S=Object(u.a)([Object(f.a)("esri.layers.support.RasterFunctionTemplate")],S),A=new Set(["raster","raster2","dem","fillraster"]),k=new Set(["rasters"]),T=function(e){return e&&e.rasterFunction?P.fromJSON(e):e},N=function(e){return e&&e instanceof P?e.toJSON():e},C=function(e){return(null===e||void 0===e?void 0:e.functionName)&&!e.declaredClass},F=function(e){return C(e)?new P(e):e},L={types:{key:"type",base:null,typeMap:{RasterFunctionTemplate:R}},json:{write:!0,name:"rasterFunctionDefinition"}},P=D=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).functionName=null,n.outputPixelType="unknown",n.variableName=null,n.functionDefinition=null,n}return Object(i.a)(r,[{key:"functionArguments",set:function(e){if(e){var t=Object.keys(e);if(t.some((function(t){return A.has(t.toLowerCase())&&C(e[t])}))||t.some((function(t){return k.has(t.toLowerCase())&&Array.isArray(e[t])&&e[t].some((function(e){return C(e)}))}))){e=Object(c.a)(e);var r,a=Object(n.a)(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;A.has(i.toLowerCase())?e[i]=F(e[i]):k.has(i.toLowerCase())&&Array.isArray(e[i])&&(e[i]=e[i].map((function(e){return F(e)})))}}catch(o){a.e(o)}finally{a.f()}}}this._set("functionArguments",e)}},{key:"readFunctionArguments",value:function(e){return function(e){if(null==e)return null;e=Object(c.a)(e);for(var t={},r=0,n=Object.keys(e);r<n.length;r++){var a=n[r];A.has(a.toLowerCase())?t[a]=T(e[a]):k.has(a.toLowerCase())&&Array.isArray(e[a])?t[a]=e[a].map(T):t[a]=e[a]}return t}(e)}},{key:"writeFunctionArguments",value:function(e,t,r){for(var n={},a=0,i=Object.keys(e);a<i.length;a++){var o=i[a];A.has(o.toLowerCase())?n[o]=N(e[o]):k.has(o.toLowerCase())&&Array.isArray(e[o])?n[o]=e[o].map(N):n[o]=N(e[o])}t[r]=n}},{key:"readFunctionName",value:function(e,t){var r=t.rasterFunctionInfos;return t.name||(r&&r.length&&"None"!==r[0].name?r[0].name:t.rasterFunctionDefinition?t.rasterFunctionDefinition.name:t.rasterFunction)}},{key:"rasterFunctionDefinition",get:function(){var e;return null===(e=this.functionDefinition)||void 0===e?void 0:e.toJSON()},set:function(e){this.functionDefinition=e?R.fromJSON(e):null}},{key:"clone",value:function(){return new D({functionName:this.functionName,functionArguments:Object(c.a)(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:Object(c.a)(this.rasterFunctionDefinition)})}}]),r}(l.a);Object(u.a)([Object(p.b)({json:{type:Object,name:"rasterFunctionArguments"}})],P.prototype,"functionArguments",null),Object(u.a)([Object(m.a)("functionArguments")],P.prototype,"readFunctionArguments",null),Object(u.a)([Object(y.a)("functionArguments")],P.prototype,"writeFunctionArguments",null),Object(u.a)([Object(p.b)({json:{type:String,write:{target:"rasterFunction"}}})],P.prototype,"functionName",void 0),Object(u.a)([Object(m.a)("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],P.prototype,"readFunctionName",null),Object(u.a)([Object(d.a)({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),Object(p.b)({json:{default:"unknown"}})],P.prototype,"outputPixelType",void 0),Object(u.a)([Object(p.b)({type:String,json:{read:!0,write:!0}})],P.prototype,"variableName",void 0),Object(u.a)([Object(p.b)()],P.prototype,"rasterFunctionDefinition",null),Object(u.a)([Object(p.b)(L)],P.prototype,"functionDefinition",void 0);var z=P=D=Object(u.a)([Object(f.a)("esri.layers.support.RasterFunction")],P)},649:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n,a=r(89),i=r(88),o=r(90),s=r(91),u=r(94),l=r(105),c=r(97),p=r(96),b=(r(98),r(93),r(95));var d={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}},m=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).contentType=null,n.exifInfo=null,n.id=null,n.globalId=null,n.keywords=null,n.name=null,n.parentGlobalId=null,n.parentObjectId=null,n.size=null,n.url=null,n}return Object(i.a)(r,[{key:"orientationInfo",get:function(){var e=function(e){var t=e.exifInfo,r=e.exifName,n=e.tagName;if(!t||!r||!n)return null;var a=t.find((function(e){return e.name===r}));return a?function(e){var t=e.tagName,r=e.tags;if(!r||!t)return null;var n=r.find((function(e){return e.name===t}));return n&&n.value||null}({tagName:n,tags:a.tags}):null}({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:this.exifInfo});return d[e]||null}},{key:"clone",value:function(){return new n({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}}]),r}(l.a);Object(u.a)([Object(c.b)({type:String})],m.prototype,"contentType",void 0),Object(u.a)([Object(c.b)()],m.prototype,"exifInfo",void 0),Object(u.a)([Object(c.b)({readOnly:!0})],m.prototype,"orientationInfo",null),Object(u.a)([Object(c.b)({type:p.a})],m.prototype,"id",void 0),Object(u.a)([Object(c.b)({type:String})],m.prototype,"globalId",void 0),Object(u.a)([Object(c.b)({type:String})],m.prototype,"keywords",void 0),Object(u.a)([Object(c.b)({type:String})],m.prototype,"name",void 0),Object(u.a)([Object(c.b)({json:{read:!1}})],m.prototype,"parentGlobalId",void 0),Object(u.a)([Object(c.b)({json:{read:!1}})],m.prototype,"parentObjectId",void 0),Object(u.a)([Object(c.b)({type:p.a})],m.prototype,"size",void 0),Object(u.a)([Object(c.b)({json:{read:!1}})],m.prototype,"url",void 0);var f=m=n=Object(u.a)([Object(b.a)("esri.layers.support.AttachmentInfo")],m)},747:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var n,a=r(89),i=r(88),o=r(90),s=r(91),u=r(94),l=r(481),c=r(146),p=r(105),b=r(116),d=r(102),m=r(97),f=r(191),y=r(136),v=r(95),j=r(137),h=r(96),g=r(135),O=r(573),w=r(610),I=Object(c.b)()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),M=Object(c.b)()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});var x=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).ascending=!0,n.itemRasterFunction=null,n.lockRasterIds=null,n.method=null,n.multidimensionalDefinition=null,n.objectIds=null,n.operation=null,n.sortField=null,n.sortValue=null,n.viewpoint=null,n.where=null,n}return Object(i.a)(r,[{key:"readAscending",value:function(e,t){return null!=t.ascending?t.ascending:null==t.sortAscending||t.sortAscending}},{key:"itemRenderingRule",get:function(){return Object(l.b)(d.a.getLogger(this),"itemRenderingRule",{replacement:"itemRasterFunction",version:"4.27",warnOnce:!0}),this._get("itemRasterFunction")},set:function(e){Object(l.b)(d.a.getLogger(this),"itemRenderingRule",{replacement:"itemRasterFunction",version:"4.27",warnOnce:!0}),this._set("itemRasterFunction",e)}},{key:"readMethod",value:function(e,t){return function(e){var t;switch(e?e.toLowerCase().replace("esrimosaic",""):""){case"byattribute":case"attribute":t="esriMosaicAttribute";break;case"lockraster":t="esriMosaicLockRaster";break;case"center":t="esriMosaicCenter";break;case"northwest":t="esriMosaicNorthwest";break;case"nadir":t="esriMosaicNadir";break;case"viewpoint":t="esriMosaicViewpoint";break;case"seamline":t="esriMosaicSeamline";break;default:t="esriMosaicNone"}return M.fromJSON(t)}(t.mosaicMethod||t.defaultMosaicMethod)}},{key:"writeMultidimensionalDefinition",value:function(e,t,r){null!=e&&(e=e.filter((function(e){var t=e.variableName,r=e.dimensionName;return t&&"*"!==t||r}))).length&&(t[r]=e.map((function(e){return e.toJSON()})))}},{key:"readOperation",value:function(e,t){var r=t.mosaicOperation,n=t.mosaicOperator&&t.mosaicOperator.toLowerCase(),a=r||(n?I.toJSON(n):null);return I.fromJSON(a)||"first"}},{key:"castSortValue",value:function(e){return null==e||"string"==typeof e||"number"==typeof e?e:"".concat(e)}},{key:"clone",value:function(){return new n({ascending:this.ascending,itemRasterFunction:Object(b.a)(this.itemRasterFunction),lockRasterIds:Object(b.a)(this.lockRasterIds),method:this.method,multidimensionalDefinition:Object(b.a)(this.multidimensionalDefinition),objectIds:Object(b.a)(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:Object(b.a)(this.viewpoint),where:this.where})}}]),r}(p.a);Object(u.a)([Object(m.b)({type:Boolean,json:{write:!0}})],x.prototype,"ascending",void 0),Object(u.a)([Object(y.a)("ascending",["ascending","sortAscending"])],x.prototype,"readAscending",null),Object(u.a)([Object(m.b)({type:w.a,json:{name:"itemRenderingRule",write:!0}})],x.prototype,"itemRasterFunction",void 0),Object(u.a)([Object(m.b)({type:w.a})],x.prototype,"itemRenderingRule",null),Object(u.a)([Object(m.b)({type:[h.a],json:{write:{overridePolicy:function(){return{enabled:"lock-raster"===this.method}}}}})],x.prototype,"lockRasterIds",void 0),Object(u.a)([Object(m.b)({type:String,json:{type:M.jsonValues,write:{target:"mosaicMethod",writer:M.write}}})],x.prototype,"method",void 0),Object(u.a)([Object(y.a)("method",["mosaicMethod","defaultMosaicMethod"])],x.prototype,"readMethod",null),Object(u.a)([Object(m.b)({type:[O.a],json:{write:!0}})],x.prototype,"multidimensionalDefinition",void 0),Object(u.a)([Object(j.a)("multidimensionalDefinition")],x.prototype,"writeMultidimensionalDefinition",null),Object(u.a)([Object(m.b)({type:[h.a],json:{name:"fids",write:!0}})],x.prototype,"objectIds",void 0),Object(u.a)([Object(m.b)({json:{type:I.jsonValues,read:{reader:I.read},write:{target:"mosaicOperation",writer:I.write}}})],x.prototype,"operation",void 0),Object(u.a)([Object(y.a)("operation",["mosaicOperation","mosaicOperator"])],x.prototype,"readOperation",null),Object(u.a)([Object(m.b)({type:String,json:{write:{overridePolicy:function(){return{enabled:"attribute"===this.method}}}}})],x.prototype,"sortField",void 0),Object(u.a)([Object(m.b)({type:[String,Number],json:{write:{allowNull:!0,overridePolicy:function(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],x.prototype,"sortValue",void 0),Object(u.a)([Object(f.a)("sortValue")],x.prototype,"castSortValue",null),Object(u.a)([Object(m.b)({type:g.a,json:{write:!0}})],x.prototype,"viewpoint",void 0),Object(u.a)([Object(m.b)({type:String,json:{write:!0}})],x.prototype,"where",void 0);var S=x=n=Object(u.a)([Object(v.a)("esri.layers.support.MosaicRule")],x)},809:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(89),a=r(88),i=r(90),o=r(91),s=r(94),u=r(146),l=r(105),c=r(97),p=(r(96),r(98),r(93),r(138)),b=r(95),d=new u.a({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),m=new u.a({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),f=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).type="class-breaks-definition",a.breakCount=null,a.classificationField=null,a.classificationMethod=null,a.normalizationField=null,a.normalizationType=null,a}return Object(a.a)(r,[{key:"standardDeviationInterval",set:function(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}},{key:"definedInterval",set:function(e){"defined-interval"===this.classificationMethod&&this._set("definedInterval",e)}}]),r}(l.a);Object(s.a)([Object(p.a)({classBreaksDef:"class-breaks-definition"})],f.prototype,"type",void 0),Object(s.a)([Object(c.b)({json:{write:!0}})],f.prototype,"breakCount",void 0),Object(s.a)([Object(c.b)({json:{write:!0}})],f.prototype,"classificationField",void 0),Object(s.a)([Object(c.b)({type:String,json:{read:d.read,write:d.write}})],f.prototype,"classificationMethod",void 0),Object(s.a)([Object(c.b)({json:{write:!0}})],f.prototype,"normalizationField",void 0),Object(s.a)([Object(c.b)({json:{read:m.read,write:m.write}})],f.prototype,"normalizationType",void 0),Object(s.a)([Object(c.b)({value:null,json:{write:!0}})],f.prototype,"standardDeviationInterval",null),Object(s.a)([Object(c.b)({value:null,json:{write:!0}})],f.prototype,"definedInterval",null);var y=f=Object(s.a)([Object(b.a)("esri.rest.support.ClassBreaksDefinition")],f)},810:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(102).a.getLogger("esri.rest.support.generateRendererUtils");function a(e,t){return Number(e.toFixed(t))}function i(e){var t=e.normalizationTotal;return{classBreaks:o(e),normalizationTotal:t}}function o(e){var t,r=e.definition,n=r.classificationMethod,i=r.normalizationType,o=r.definedInterval,c=null!==(t=r.breakCount)&&void 0!==t?t:1,p=[],b=e.values;if(0===b.length)return[];b=b.sort((function(e,t){return e-t}));var d=b[0],m=b[b.length-1];if("equal-interval"===n)if(b.length>=c){for(var f=(m-d)/c,y=d,v=1;v<c;v++){var j=a(d+v*f,6);p.push({minValue:y,maxValue:j,label:s(y,j,i)}),y=j}p.push({minValue:y,maxValue:m,label:s(y,m,i)})}else b.forEach((function(e){p.push({minValue:e,maxValue:e,label:s(e,e,i)})}));else if("natural-breaks"===n){for(var h=u(b),g=e.valueFrequency||h.valueFrequency,O=l(h.uniqueValues,g,c),w=d,I=1;I<c;I++)if(h.uniqueValues.length>I){var M=a(h.uniqueValues[O[I]],6);p.push({minValue:w,maxValue:M,label:s(w,M,i)}),w=M}p.push({minValue:w,maxValue:m,label:s(w,m,i)})}else if("quantile"===n)if(b.length>=c&&d!==m){for(var x=d,S=Math.ceil(b.length/c),D=0,R=1;R<c;R++){var A=S+D-1;A>b.length&&(A=b.length-1),A<0&&(A=0),p.push({minValue:x,maxValue:b[A],label:s(x,b[A],i)}),x=b[A],D+=S,S=Math.ceil((b.length-D)/(c-R))}p.push({minValue:x,maxValue:m,label:s(x,m,i)})}else for(var k=-1,T=0;T<b.length;T++){var N=b[T];N!==k&&(k=N,p.push({minValue:k,maxValue:N,label:s(k,N,i)}),k=N)}else if("standard-deviation"===n){var C=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t/=e.length,t}(b),F=function(e,t){for(var r=0,n=0;n<e.length;n++){var a=e[n];r+=(a-t)*(a-t)}return r/=e.length,Math.sqrt(r)}(b,C);if(0===F)p.push({minValue:b[0],maxValue:b[0],label:s(b[0],b[0],i)});else{for(var L=function(e,t,r,n,a){var i=Math.max(n-e,t-n)/a/r;return i=i>=1?1:i>=.5?.5:.25,i}(d,m,c,C,F)*F,P=0,z=d,V=c;V>=1;V--){var B=a(C-(V-.5)*L,6);p.push({minValue:z,maxValue:B,label:s(z,B,i)}),z=B,P++}var U=a(C+.5*L,6);p.push({minValue:z,maxValue:U,label:s(z,U,i)}),z=U,P++;for(var E=1;E<=c;E++)U=P===2*c?m:a(C+(E+.5)*L,6),p.push({minValue:z,maxValue:U,label:s(z,U,i)}),z=U,P++}}else if("defined-interval"===n){if(!o)return p;for(var H=b[0],_=b[b.length-1],J=Math.ceil((_-H)/o),Z=H,G=1;G<J;G++){var W=a(H+G*o,6);p.push({minValue:Z,maxValue:W,label:s(Z,W,i)}),Z=W}p.push({minValue:Z,maxValue:_,label:s(Z,_,i)})}return p}function s(e,t,r){return e===t?r&&"percent-of-total"===r?e+"%":e.toString():r&&"percent-of-total"===r?e+"% - "+t+"%":e+" - "+t}function u(e){for(var t=[],r=[],n=Number.MIN_VALUE,a=1,i=-1,o=0;o<e.length;o++){var s=e[o];s===n?(a++,r[i]=a):null!==s&&(t.push(s),n=s,a=1,r.push(a),i++)}return{uniqueValues:t,valueFrequency:r}}function l(e,t,r){var n=e.length,a=[];r>n&&(r=n);for(var i=0;i<r;i++)a.push(Math.round(i*n/r-1));a.push(n-1);var o=c(a,e,t,r);return function(e,t,r,n,a,i){for(var o=0,s=0,u=0,l=0,c=!0,b=0;b<2&&c;b++){0===b&&(c=!1);for(var d=0;d<i-1;d++)for(;r[d+1]+1!==r[d+2];){r[d+1]=r[d+1]+1;var m=p(d,r,n,a);u=m.sbMean,o=m.sbSdcm;var f=p(d+1,r,n,a);if(l=f.sbMean,!(o+(s=f.sbSdcm)<t[d]+t[d+1])){r[d+1]=r[d+1]-1;break}t[d]=o,t[d+1]=s,e[d]=u,e[d+1]=l,c=!0}for(var y=i-1;y>0;y--)for(;r[y]!==r[y-1]+1;){r[y]=r[y]-1;var v=p(y-1,r,n,a);u=v.sbMean,o=v.sbSdcm;var j=p(y,r,n,a);if(l=j.sbMean,!(o+(s=j.sbSdcm)<t[y-1]+t[y])){r[y]=r[y]+1;break}t[y-1]=o,t[y]=s,e[y-1]=u,e[y]=l,c=!0}}return c}(o.mean,o.sdcm,a,e,t,r)&&(o=c(a,e,t,r)),a}function c(e,t,r,n){for(var a=[],i=[],o=[],s=0,u=[],l=[],c=0;c<n;c++){var b=p(c,e,t,r);u.push(b.sbMean),l.push(b.sbSdcm),s+=l[c]}for(var d,m=s,f=!0;f||s<m;){f=!1,a=[];for(var y=0;y<n;y++)a.push(e[y]);for(var v=0;v<n;v++)for(var j=e[v]+1;j<=e[v+1];j++)if(d=t[j],v>0&&j!==e[v+1]&&Math.abs(d-u[v])>Math.abs(d-u[v-1]))e[v]=j;else if(v<n-1&&e[v]!==j-1&&Math.abs(d-u[v])>Math.abs(d-u[v+1])){e[v+1]=j-1;break}m=s,s=0,i=[],o=[];for(var h=0;h<n;h++){i.push(u[h]),o.push(l[h]);var g=p(h,e,t,r);u[h]=g.sbMean,l[h]=g.sbSdcm,s+=l[h]}}if(s>m){for(var O=0;O<n;O++)e[O]=a[O],u[O]=i[O],l[O]=o[O];s=m}return{mean:u,sdcm:l}}function p(e,t,r,a){for(var i=0,o=0,s=t[e]+1;s<=t[e+1];s++){var u=a[s];i+=r[s]*u,o+=u}o<=0&&n.warn("Exception in Natural Breaks calculation");for(var l=i/o,c=0,p=t[e]+1;p<=t[e+1];p++)c+=a[p]*Math.pow(r[p]-l,2);return{sbMean:l,sbSdcm:c}}},819:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(4),a=r(1),i=r(12),o=r(221),s=r(408),u=r(210);function l(e,t,r){return c.apply(this,arguments)}function c(){return c=Object(i.a)(Object(n.a)().mark((function e(t,r,i){var l;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=Object(o.c)(t),e.abrupt("return",Object(s.b)(l,u.a.from(r),Object(a.a)({},i)).then((function(e){return e.data.count})));case 2:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}},820:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(4),a=r(1),i=r(12),o=r(221),s=r(408),u=r(210);function l(e,t,r){return c.apply(this,arguments)}function c(){return c=Object(i.a)(Object(n.a)().mark((function e(t,r,i){var l;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=Object(o.c)(t),e.abrupt("return",Object(s.d)(l,u.a.from(r),Object(a.a)({},i)).then((function(e){return e.data.objectIds})));case 2:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}},850:function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));var n,a=r(4),i=r(12),o=r(89),s=r(88),u=r(90),l=r(91),c=r(94),p=r(143),b=r(146),d=r(105),m=r(108),f=r(97),y=(r(96),r(98),r(93),r(138)),v=r(95),j=r(477),h=r(611),g=r(505),O=new b.a({flow_from:"flow-from",flow_to:"flow-to"}),w=n=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).density=.8,n.color=new p.a([255,255,255,1]),n.maxPathLength=200,n.trailWidth=1.5,n.flowSpeed=10,n.trailLength=100,n.smoothing=0,n.flowRepresentation="flow-from",n.type="flow",n.authoringInfo=null,n.legendOptions=null,n.trailCap="butt",n.background="none",n}return Object(s.a)(r,[{key:"clone",value:function(){var e,t,r=this.density,a=this.maxPathLength,i=this.trailWidth,o=this.flowSpeed,s=this.trailLength,u=this.smoothing,l=this.flowRepresentation,c=this.trailCap,p=this.background,b=this.color.clone(),d=(this.visualVariables||[]).map((function(e){return e.clone()})),m=null===(e=this.authoringInfo)||void 0===e?void 0:e.clone(),f=null===(t=this.legendOptions)||void 0===t?void 0:t.clone();return new n({density:r,color:b,maxPathLength:a,trailWidth:i,flowSpeed:o,trailLength:s,trailCap:c,background:p,smoothing:u,flowRepresentation:l,visualVariables:d,authoringInfo:m,legendOptions:f})}},{key:"getSymbol",value:function(e,t){}},{key:"getSymbolAsync",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return[]}}]),r}(Object(j.a)(d.a));Object(c.a)([Object(f.b)({type:Number,json:{write:!0}})],w.prototype,"density",void 0),Object(c.a)([Object(f.b)({type:p.a,json:{write:{allowNull:!0}}})],w.prototype,"color",void 0),Object(c.a)([Object(f.b)({type:Number,cast:m.e,json:{write:!0}})],w.prototype,"maxPathLength",void 0),Object(c.a)([Object(f.b)({type:Number,cast:m.e,json:{write:!0}})],w.prototype,"trailWidth",void 0),Object(c.a)([Object(f.b)({type:Number,json:{write:!0}})],w.prototype,"flowSpeed",void 0),Object(c.a)([Object(f.b)({type:Number,json:{write:!0}})],w.prototype,"trailLength",void 0),Object(c.a)([Object(f.b)({type:Number,cast:m.e,json:{write:!1}})],w.prototype,"smoothing",void 0),Object(c.a)([Object(f.b)({type:O.apiValues,json:{type:O.jsonValues,read:{reader:O.read},write:{writer:O.write}}})],w.prototype,"flowRepresentation",void 0),Object(c.a)([Object(y.a)({flowRenderer:"flow"})],w.prototype,"type",void 0),Object(c.a)([Object(f.b)({type:h.a,json:{write:!0}})],w.prototype,"authoringInfo",void 0),Object(c.a)([Object(f.b)({type:g.a,json:{write:!0}})],w.prototype,"legendOptions",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],w.prototype,"trailCap",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],w.prototype,"background",void 0);var I=w=n=Object(c.a)([Object(v.a)("esri.renderers.FlowRenderer")],w)},851:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n,a=r(89),i=r(88),o=r(90),s=r(91),u=r(94),l=r(105),c=r(116),p=r(97),b=(r(96),r(138)),d=r(136),m=r(95),f=r(720),y=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).altitude=45,n.azimuth=315,n.colorRamp=null,n.hillshadeType="traditional",n.pixelSizePower=.664,n.pixelSizeFactor=.024,n.scalingType="none",n.type="raster-shaded-relief",n.zFactor=1,n}return Object(i.a)(r,[{key:"readColorRamp",value:function(e){return Object(f.a)(e)}},{key:"clone",value:function(){return new n({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:Object(c.a)(this.colorRamp)})}}]),r}(l.a);Object(u.a)([Object(p.b)({type:Number,json:{write:!0}})],y.prototype,"altitude",void 0),Object(u.a)([Object(p.b)({type:Number,json:{write:!0}})],y.prototype,"azimuth",void 0),Object(u.a)([Object(p.b)({types:f.b,json:{write:!0}})],y.prototype,"colorRamp",void 0),Object(u.a)([Object(d.a)("colorRamp")],y.prototype,"readColorRamp",null),Object(u.a)([Object(p.b)({type:["traditional","multi-directional"],json:{write:!0}})],y.prototype,"hillshadeType",void 0),Object(u.a)([Object(p.b)({type:Number,json:{write:!0}})],y.prototype,"pixelSizePower",void 0),Object(u.a)([Object(p.b)({type:Number,json:{write:!0}})],y.prototype,"pixelSizeFactor",void 0),Object(u.a)([Object(p.b)({type:["none","adjusted"],json:{write:!0}})],y.prototype,"scalingType",void 0),Object(u.a)([Object(b.a)({rasterShadedRelief:"raster-shaded-relief"})],y.prototype,"type",void 0),Object(u.a)([Object(p.b)({type:Number,json:{write:!0}})],y.prototype,"zFactor",void 0);var v=y=n=Object(u.a)([Object(m.a)("esri.renderers.RasterShadedReliefRenderer")],y)},852:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n,a=r(89),i=r(88),o=r(90),s=r(91),u=r(94),l=r(105),c=r(116),p=r(97),b=(r(96),r(138)),d=r(136),m=r(95),f=r(137),y=r(1175),v=r(720),j=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).colorRamp=null,n.computeGamma=!1,n.dynamicRangeAdjustment=!1,n.gamma=[],n.maxPercent=null,n.minPercent=null,n.numberOfStandardDeviations=null,n.outputMax=null,n.outputMin=null,n.sigmoidStrengthLevel=null,n.statistics=[],n.histograms=null,n.useGamma=!1,n.stretchType="none",n.type="raster-stretch",n}return Object(i.a)(r,[{key:"readColorRamp",value:function(e){if(e)return Object(v.a)(e)}},{key:"writeStatistics",value:function(e,t,r){var n;(null===(n=e)||void 0===n?void 0:n.length)&&(Array.isArray(e[0])||(e=e.map((function(e){return[e.min,e.max,e.avg,e.stddev]}))),t[r]=e)}},{key:"readStretchType",value:function(e,t){var r=t.stretchType;return"number"==typeof r&&(r=y.a[r]),y.b.read(r)}},{key:"clone",value:function(){return new n({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:Object(c.a)(this.statistics),gamma:Object(c.a)(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:Object(c.a)(this.colorRamp),histograms:Object(c.a)(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}}]),r}(l.a);Object(u.a)([Object(p.b)({types:v.b,json:{write:!0}})],j.prototype,"colorRamp",void 0),Object(u.a)([Object(d.a)("colorRamp")],j.prototype,"readColorRamp",null),Object(u.a)([Object(p.b)({type:Boolean,json:{write:!0}})],j.prototype,"computeGamma",void 0),Object(u.a)([Object(p.b)({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],j.prototype,"dynamicRangeAdjustment",void 0),Object(u.a)([Object(p.b)({type:[Number],json:{write:!0}})],j.prototype,"gamma",void 0),Object(u.a)([Object(p.b)({type:Number,json:{write:!0}})],j.prototype,"maxPercent",void 0),Object(u.a)([Object(p.b)({type:Number,json:{write:!0}})],j.prototype,"minPercent",void 0),Object(u.a)([Object(p.b)({type:Number,json:{write:!0}})],j.prototype,"numberOfStandardDeviations",void 0),Object(u.a)([Object(p.b)({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],j.prototype,"outputMax",void 0),Object(u.a)([Object(p.b)({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],j.prototype,"outputMin",void 0),Object(u.a)([Object(p.b)({type:Number,json:{write:!0}})],j.prototype,"sigmoidStrengthLevel",void 0),Object(u.a)([Object(p.b)({json:{type:[[Number]],write:!0}})],j.prototype,"statistics",void 0),Object(u.a)([Object(p.b)()],j.prototype,"histograms",void 0),Object(u.a)([Object(f.a)("statistics")],j.prototype,"writeStatistics",null),Object(u.a)([Object(p.b)({type:Boolean,json:{write:!0}})],j.prototype,"useGamma",void 0),Object(u.a)([Object(p.b)({type:y.b.apiValues,json:{type:y.b.jsonValues,write:y.b.write}})],j.prototype,"stretchType",void 0),Object(u.a)([Object(d.a)("stretchType",["stretchType"])],j.prototype,"readStretchType",null),Object(u.a)([Object(b.a)({rasterStretch:"raster-stretch"})],j.prototype,"type",void 0);var h=j=n=Object(u.a)([Object(m.a)("esri.renderers.RasterStretchRenderer")],j)},853:function(e,t,r){"use strict";r.d(t,"a",(function(){return V}));var n,a=r(4),i=r(12),o=r(92),s=r(89),u=r(88),l=r(90),c=r(91),p=r(94),b=r(143),d=(r(119),r(172)),m=(r(177),r(146)),f=r(105),y=r(116),v=r(97),j=(r(96),r(138)),h=r(136),g=r(95),O=r(217),w=r(571),I=r(347),M=r(477),x=r(781),S=r(780),D=r(582),R=r(982),A=r(346),k=r(394),T=r(739),N=r(135),C=r(562),F=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),L=new m.a({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"}),P=new m.a({flow_from:"flow-from",flow_to:"flow-to"}),z=n=function(e){Object(l.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).attributeField="Magnitude",n.flowRepresentation="flow-from",n.rotationType="arithmetic",n.style="single-arrow",n.symbolTileSize=50,n.type="vector-field",n}return Object(u.a)(r,[{key:"readInputUnit",value:function(e,t){return F.has(e)?w.i.fromJSON(e):null}},{key:"readOutputUnit",value:function(e,t){return F.has(e)?w.i.fromJSON(e):null}},{key:"styleRenderer",get:function(){var e=this.style,t=this.attributeField,r=this._createStyleRenderer(e);return r.field=t,r}},{key:"sizeVariables",get:function(){var e=[];if(this.visualVariables){var t,r=Object(o.a)(this.visualVariables);try{for(r.s();!(t=r.n()).done;){var n=t.value;"size"===n.type&&e.push(n)}}catch(i){r.e(i)}finally{r.f()}}if(0===e.length){var a=new D.a({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(a):this._set("visualVariables",[a]),e.push(a)}return e}},{key:"rotationVariables",get:function(){var e=[];if(this.visualVariables){var t,r=Object(o.a)(this.visualVariables);try{for(r.s();!(t=r.n()).done;){var n=t.value;"rotation"===n.type&&e.push(n)}}catch(i){r.e(i)}finally{r.f()}}if(0===e.length){var a=new S.a({field:"Direction",rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(a):this._set("visualVariables",[a]),e.push(a)}return e}},{key:"clone",value:function(){return new n({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:Object(y.a)(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}},{key:"getGraphicsFromPixelData",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,n,i,o,s,u,l,c,p,b,m,f,y,v,j,h=this,g=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=g.length>1&&void 0!==g[1]&&g[1],i=g.length>2&&void 0!==g[2]?g[2]:[],o=new Array,s=Object(w.f)(this.inputUnit,this.outputUnit),u=(null===(r=this.rotationVariables[0])||void 0===r?void 0:r.rotationType)||this.rotationType,null!=(l=n?Object(w.b)(t.pixelBlock,"vector-uv",u,s):Object(w.c)(t.pixelBlock,"vector-magdir",s))){e.next=5;break}return e.abrupt("return",o);case 5:c=t.extent,p=null!=l.mask&&l.mask.length>0,b=0,m=(c.xmax-c.xmin)/l.width,f=(c.ymax-c.ymin)/l.height,y=0;case 9:if(!(y<l.height)){e.next=20;break}v=Object(a.a)().mark((function e(){var t,r,n,s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new N.a({x:c.xmin+j*m+m/2,y:c.ymax-y*f-f/2,spatialReference:c.spatialReference}),e.next=3,Object(O.a)(t);case 3:t=e.sent[0],r=i.some((function(e){return e.intersects(t)})),p&&!l.mask[b]||r||(n={Magnitude:l.pixels[0][b],Direction:l.pixels[1][b]},(s=new d.a({geometry:{type:"point",x:t.x,y:t.y,spatialReference:c.spatialReference},attributes:n})).symbol=h._getVisualVariablesAppliedSymbol(s),o.push(s));case 6:case"end":return e.stop()}}),e)})),j=0;case 12:if(!(j<l.width)){e.next=17;break}return e.delegateYield(v(),"t0",14);case 14:j++,b++,e.next=12;break;case 17:y++,e.next=9;break;case 20:return e.abrupt("return",o);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){}},{key:"getSymbolAsync",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return[]}},{key:"getClassBreakInfos",value:function(){var e;return null===(e=this.styleRenderer)||void 0===e?void 0:e.classBreakInfos}},{key:"getDefaultSymbol",value:function(){var e;return null===(e=this.styleRenderer)||void 0===e?void 0:e.defaultSymbol}},{key:"_getDefaultSymbol",value:function(e){return new k.a({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new A.a({width:0}),size:20,color:e||new b.a([0,92,230])})}},{key:"_getVisualVariablesAppliedSymbol",value:function(e){var t;if(e){var r=null===(t=this.styleRenderer)||void 0===t||null===(t=t.getSymbol(e))||void 0===t?void 0:t.clone(),n=this.sizeVariables,a=this.rotationVariables;if(n&&n.length&&this.sizeVariables.forEach((function(t){return Object(T.d)(r,Object(R.getAllSizes)([t],e))})),a&&a.length){var i="flow-to"===this.flowRepresentation===("ocean-current-kn"===this.style||"ocean-current-m"===this.style)?0:180;e.attributes.Direction=e.attributes.Direction+i,this.rotationVariables.forEach((function(t){return Object(T.c)(r,Object(R.getRotationAngle)(t,e),t.axis)}))}return r}}},{key:"_createStyleRenderer",value:function(e){var t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(e){case"single-arrow":t=this._createSingleArrowRenderer();break;case"beaufort-kn":t=this._createBeaufortKnotsRenderer();break;case"beaufort-m":t=this._createBeaufortMeterRenderer();break;case"beaufort-ft":t=this._createBeaufortFeetRenderer();break;case"beaufort-mi":t=this._createBeaufortMilesRenderer();break;case"beaufort-km":t=this._createBeaufortKilometersRenderer();break;case"ocean-current-m":t=this._createCurrentMeterRenderer();break;case"ocean-current-kn":t=this._createCurrentKnotsRenderer();break;case"simple-scalar":t=this._createSimpleScalarRenderer();break;case"wind-barb":t=this._createWindBarbsRenderer();break;case"classified-arrow":t=this._createClassifiedArrowRenderer()}return new I.a(t)}},{key:"_createSingleArrowRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol()}}},{key:"_createBeaufortKnotsRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new b.a([214,47,39])),classBreakInfos:this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])}}},{key:"_createBeaufortMeterRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new b.a([214,47,39])),classBreakInfos:this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createBeaufortFeetRenderer",value:function(){var e=this._getDefaultSymbol(new b.a([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((function(e){return 3.28084*e})),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createBeaufortMilesRenderer",value:function(){var e=this._getDefaultSymbol(new b.a([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((function(e){return 2.23694*e})),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createBeaufortKilometersRenderer",value:function(){var e=this._getDefaultSymbol(new b.a([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((function(e){return 3.6*e})),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createCurrentMeterRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new b.a([177,177,177])),classBreakInfos:this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])}}},{key:"_createCurrentKnotsRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new b.a([177,177,177])),classBreakInfos:this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])}}},{key:"_createClassifiedArrowRenderer",value:function(){var e,t=this._getDefaultSymbol(new b.a([56,168,0])),r=[0,1e-6,3.5,7,10.5,14];if(null!==(e=this.sizeVariables)&&void 0!==e&&e.length){var n=this.sizeVariables[0].minDataValue,a=this.sizeVariables[0].maxDataValue;if(n&&a){var i=(a-n)/5;r=Array.from(Array(6).keys()).map((function(e){return n+i*e}))}}return{defaultSymbol:t,classBreakInfos:this._getClassBreaks(r,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])}}},{key:"_createSimpleScalarRenderer",value:function(){return{defaultSymbol:C.a.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=",height:20,width:20,type:"esriPMS",angle:0})}}},{key:"_createWindBarbsRenderer",value:function(){var e=Array.from(Array(31).keys()).map((function(e){return 5*e})),t=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"90-95",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="}],r=C.a.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",height:20,width:20,type:"esriPMS",angle:0}),n=e.map((function(n,a){var i;if(a!==e.length-1)if(0===a)i={minValue:n,maxValue:e[a+1],symbol:r};else{var o=C.a.fromJSON({type:"esriPMS",imageData:t[a].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0});i={minValue:n,maxValue:e[a+1],symbol:o}}return new x.a(i)}));return{defaultSymbol:r,classBreakInfos:n}}},{key:"_getClassBreaks",value:function(e,t){var r=this;return t.map((function(t,n){return new x.a({minValue:e[n],maxValue:e[n+1],symbol:r._getDefaultSymbol(new b.a(t))})}))}}]),r}(Object(M.a)(f.a));Object(p.a)([Object(v.b)({type:String,json:{write:!0}})],z.prototype,"attributeField",void 0),Object(p.a)([Object(v.b)({type:P.apiValues,json:{type:P.jsonValues,read:{reader:P.read},write:{writer:P.write}}})],z.prototype,"flowRepresentation",void 0),Object(p.a)([Object(v.b)({type:["geographic","arithmetic"],json:{write:!0}})],z.prototype,"rotationType",void 0),Object(p.a)([Object(v.b)({type:L.apiValues,json:{type:L.jsonValues,read:{reader:L.read},write:{writer:L.write}}})],z.prototype,"style",void 0),Object(p.a)([Object(v.b)({json:{write:!0}})],z.prototype,"symbolTileSize",void 0),Object(p.a)([Object(v.b)({type:w.i.apiValues,json:{type:w.i.jsonValues,write:{writer:w.i.write}}})],z.prototype,"inputUnit",void 0),Object(p.a)([Object(h.a)("inputUnit")],z.prototype,"readInputUnit",null),Object(p.a)([Object(v.b)({type:w.i.apiValues,json:{type:w.i.jsonValues,read:{reader:w.i.read},write:{writer:w.i.write}}})],z.prototype,"outputUnit",void 0),Object(p.a)([Object(h.a)("outputUnit")],z.prototype,"readOutputUnit",null),Object(p.a)([Object(j.a)({vectorField:"vector-field"})],z.prototype,"type",void 0),Object(p.a)([Object(v.b)({type:I.a})],z.prototype,"styleRenderer",null),Object(p.a)([Object(v.b)({type:D.a})],z.prototype,"sizeVariables",null),Object(p.a)([Object(v.b)({type:S.a})],z.prototype,"rotationVariables",null);var V=z=n=Object(p.a)([Object(g.a)("esri.renderers.VectorFieldRenderer")],z)},854:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return o}));var n=r(146),a=Object(n.b)()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),i=Object(n.b)()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),o=Object(n.b)()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"})},864:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n=r(112),a=r(89),i=r(88),o=r(90),s=r(91),u=r(94),l=r(105),c=r(97),p=r(96),b=(r(98),r(93),r(138)),d=r(95),m=r(143),f=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).value=null,e.label=null,e.color=null,e}return Object(i.a)(r)}(l.a);Object(u.a)([Object(c.b)({type:Number,json:{write:!0}})],f.prototype,"value",void 0),Object(u.a)([Object(c.b)({type:String,json:{write:!0}})],f.prototype,"label",void 0),Object(u.a)([Object(c.b)({type:m.a,json:{type:[p.a],write:!0}})],f.prototype,"color",void 0);var y,v=f=Object(u.a)([Object(d.a)("esri.renderers.support.ColormapInfo")],f),j=r(685),h=y=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).colormapInfos=null,n.type="raster-colormap",n}return Object(i.a)(r,[{key:"clone",value:function(){return new y({colormapInfos:this.colormapInfos.map((function(e){return e.toJSON()}))})}},{key:"extractColormap",value:function(){return this.colormapInfos.map((function(e){var t=e.value,r=e.color;return[t,r.r,r.g,r.b,r.a>1?r.a:255*r.a&255]})).sort((function(e,t){return e[0]-t[0]}))}}],[{key:"createFromColormap",value:function(e,t){if(!e)return null;var r=5===e[0].length,a=Object(n.a)(e).sort((function(e,t){return e[0]-t[0]})).map((function(e){var n;return v.fromJSON({value:e[0],color:r?e.slice(1,5):e.slice(1,4).concat([255]),label:t?null!==(n=t[e[0]])&&void 0!==n?n:"":e[0]})}));return new y({colormapInfos:a})}},{key:"createFromColorramp",value:function(e){var t=Object(j.c)(e);return y.createFromColormap(t)}}]),r}(l.a);Object(u.a)([Object(c.b)({type:[v],json:{write:!0}})],h.prototype,"colormapInfos",void 0),Object(u.a)([Object(b.a)({rasterColormap:"raster-colormap"})],h.prototype,"type",void 0);var g=h=y=Object(u.a)([Object(d.a)("esri.renderers.RasterColormapRenderer")],h)},911:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return f})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return g})),r.d(t,"f",(function(){return j})),r.d(t,"g",(function(){return d})),r.d(t,"h",(function(){return m})),r.d(t,"i",(function(){return v}));var n=r(1),a=r(112),i=r(98),o=r(573);function s(e,t,r){var n=t.shift();if(0===r.length){r.push({sliceId:-1,multidimensionalDefinition:[]})}for(var i=r.length,o=function(){var t,i=r.shift().multidimensionalDefinition;null===(t=n.values)||void 0===t||t.forEach((function(t){r.push({sliceId:-1,multidimensionalDefinition:[].concat(Object(a.a)(i),[{variableName:e,dimensionName:n.name,values:[t]}])})}))},u=0;u<i;u++)o();t.length&&s(e,t,r)}function u(e,t){var r=[],i=0;return(t?e.variables.filter((function(e){return e.name.toLowerCase()===t.toLowerCase()})):Object(a.a)(e.variables).sort((function(e,t){return e.name>t.name?1:-1}))).forEach((function(e){var t=[],o=Object(a.a)(e.dimensions).sort((function(e,t){return e.name>t.name?-1:1}));s(e.name,o,t),t.forEach((function(e){r.push(Object(n.a)(Object(n.a)({},e),{},{sliceId:i++}))}))})),r}function l(e,t,r){var n=e;if(t&&(t=Object(a.a)(t).sort((function(e,t){return e.dimensionName<t.dimensionName?-1:1}))).forEach((function(e){var t=e.dimensionName,r=e.values,a=e.isSlice;r.length&&(n=n.filter((function(e){var n=e.multidimensionalDefinition.find((function(e){return e.dimensionName===t}));if(null==n)return!1;var i=n.values[0];return"number"==typeof i?"number"==typeof r[0]?r.includes(i):r.some((function(e){return e[0]<=i&&e[1]>=i})):"number"==typeof r[0]?r.some((function(e){return i[0]<=e&&i[1]>=e})):a?r.some((function(e){return e[0]===i[0]&&e[0]===i[1]})):r.some((function(e){return e[0]>=i[0]&&e[0]<=i[1]||e[1]>=i[0]&&e[1]<=i[1]||e[0]<i[0]&&e[1]>i[1]}))})))})),n.length&&r&&null!=r.start&&null!=r.end){var i=r.start.getTime(),o=r.end.getTime(),s=n[0].multidimensionalDefinition.findIndex((function(e){return"StdTime"===e.dimensionName}));s>-1&&(n=n.filter((function(e){var t=e.multidimensionalDefinition[s].values[0];return i<=t&&o>=t})))}return n.map((function(e){return e.sliceId}))}function c(e,t){return Array.isArray(e)?t[0]===t[1]?e[0]===t[0]||e[1]===t[0]:e[0]>=t[0]&&e[0]<=t[1]&&e[1]>=t[0]&&e[1]<=t[1]:e>=t[0]&&e<=t[1]}function p(e){return 1===e.length?[e[0],e[0]]:[e[0],e[e.length-1]]}function b(e,t,r){var i,o;if(null===t||void 0===t||null===(i=t.subsetDefinitions)||void 0===i||!i.length)return e;if(r){var s,u=t.variables;if(u.length&&!u.includes(r))return null;var l=t.subsetDefinitions.find((function(t){return t.dimensionName===e.name&&t.variableName===r}));if(null===l||void 0===l||null===(s=l.values)||void 0===s||!s.length)return e;o=p(l.values)}else{var b=t.dimensions.find((function(t){return t.name===e.name}));o=null===b||void 0===b?void 0:b.extent}var d=o;if(!d||null===d||void 0===d||!d.length)return e;var m=e.values.filter((function(e){return c(e,d)}));return Object(n.a)(Object(n.a)({},e),{},{extent:Object(a.a)(d),values:m})}function d(e,t,r){var n;if(null===t||void 0===t||null===(n=t.subsetDefinitions)||void 0===n||!n.length)return!1;var a=t.variables;if(a.length&&e.some((function(e){var t=e.variableName;return t&&!a.includes(t)})))return!0;for(var i,o=function(){var n=e[s],a=t.subsetDefinitions.find((function(e){return(""===n.variableName||e.variableName===n.variableName)&&e.dimensionName===n.dimensionName}));if(null!==a&&void 0!==a&&a.values.length){var i=p(a.values);if(n.isSlice||2!==n.values.length||Array.isArray(n.values[0])||n.values[0]===n.values[1]||!r){if(n.values.some((function(e){return!c(e,i)})))return{v:!0}}else if(!function(e,t){return e[0]<=t[0]&&e[1]>=t[0]||e[0]<=t[1]&&e[1]>=t[1]||e[0]>=t[0]&&e[1]<=t[1]}(n.values,i))return{v:!0}}},s=0;s<e.length;s++)if(i=o())return i.v;return!1}function m(e,t){if(null==e)return{isOutside:!1};var r=t.geometry,n=t.timeExtent,a=t.multidimensionalDefinition,i=null;if(null!=n&&(i=function(e,t){var r,n,a=e.dimensions.find((function(e){return"StdTime"===e.name}));if(null==a||null==t.start&&null==t.end)return t;t=t.clone();var i=t.toJSON(),s=i.start,u=i.end,l=s===u?[s]:null!=s&&null!=u?[s,u]:[null!==s&&void 0!==s?s:u];return 2===l.length&&null!==a&&void 0!==a&&a.extent.length&&(l[0]=Math.max(l[0],a.extent[0]),l[1]=Math.min(l[1],null!==(r=a.extent[1])&&void 0!==r?r:a.extent[0]),l[1]<l[0])||d([new o.a({variableName:"",dimensionName:"StdTime",isSlice:1===l.length,values:l})],e,!0)?null:(t.start=new Date(l[0]),t.end=new Date(null!==(n=l[1])&&void 0!==n?n:l[0]),t)}(e,n),null==i))return{isOutside:!0};var s=e.areaOfInterest;if(s&&r){var u="point"===r.type?r:"extent"===r.type?r.center:"polygon"===r.type?r.centroid:null;if(u&&!s.contains(u))return{isOutside:!0}}return null!=a&&a.length&&d(a,e,!0)?{isOutside:!0}:{isOutside:!1,intersection:{geometry:r,timeExtent:i,multidimensionalDefinition:a}}}function f(e){var t,r,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.multidimensionalInfo,o=e.keyProperties;if(null==i)return null;var s=a.variableName,u=a.multidimensionalSubset,l=a.multidimensionalDefinition,c=null!=l?null===(t=l[0])||void 0===t?void 0:t.variableName:null,p=s||c||(null===o||void 0===o?void 0:o.DefaultVariable),b=i.variables;return(null===u||void 0===u||null===(r=u.variables)||void 0===r?void 0:r.length)&&(b=b.filter((function(e){var t=e.name;return u.variables.includes(t)}))),p&&null!==(n=b.find((function(e){return e.name===p})))&&void 0!==n?n:b[0]}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=f(e,t);if(!r)return null;var n=[],a=r.dimensions,i=r.name;if(0===a.length)return[new o.a({variableName:i,dimensionName:"",values:[],isSlice:!0})];for(var s=0;s<a.length;s++){var u,l=b(a[s],t.multidimensionalSubset,i);if(!l)return null;var c=l.values,p=l.extent,d=null!==(u=null===c||void 0===c?void 0:c[0])&&void 0!==u?u:p[0];"stdz"===l.name.toLowerCase()&&!l.hasRanges&&Math.abs(p[1])<=Math.abs(p[0])&&(d=null!==c&&void 0!==c&&c.length?c[c.length-1]:p[1]),n.push(new o.a({variableName:i,dimensionName:l.name,values:[d],isSlice:!t.useRangeForRangedDimensionInfo||!!l.hasRanges}))}return n}function v(e){return!(null==e||!e.length)&&e.some((function(e){if(null==e.values)return!0;var t=e.values.length;return 0===t||t>1||!e.isSlice&&Array.isArray(e.values[0])}))}function j(e,t){var r;if(null==t||null==e)return null;var a=t.variables.map((function(e){return Object(n.a)({},e)}));return null!==e&&void 0!==e&&null!==(r=e.variables)&&void 0!==r&&r.length&&(a=a.filter((function(t){var r=t.name;return e.variables.includes(r)}))).forEach((function(t){t.dimensions=t.dimensions.map((function(r){return b(r,e,t.name)})).filter(i.i)})),a}function h(e){var t,r,n,a=null===(t=e.values)||void 0===t?void 0:t.length;if(a)return a;var i=e.extent,o=e.unit,s=e.interval||1,u=i?i[1]-i[0]:0;if("ISO8601"!==o)return Math.round(u/s);switch(null!==(r=null===(n=e.intervalUnit)||void 0===n?void 0:n.toLowerCase())&&void 0!==r?r:"seconds"){case"seconds":a=Math.round(u/1e3/s);break;case"minutes":a=Math.round(u/6e4/s);break;case"hours":a=Math.round(u/36e5/s);break;case"days":a=Math.round(u/864e5/s);break;case"months":var l=new Date(i[1]).getUTCFullYear()-new Date(i[0]).getUTCFullYear(),c=new Date(i[0]).getUTCMonth(),p=new Date(i[1]).getUTCMonth();a=0===l?p-c+1:p+11-c+12*(l-1)+1;break;case"years":a=Math.round((new Date(i[1]).getUTCFullYear()-new Date(i[0]).getUTCFullYear())/s);break;case"decades":a=Math.round((new Date(i[1]).getUTCFullYear()-new Date(i[0]).getUTCFullYear())/10/s);break;default:a=0}return a}function g(e,t){for(var r,n=0,i=e[0].variableName,o=Object(a.a)(t.variables).sort((function(e,t){return e.name>t.name?1:-1})),s=function(){var t=o[u],r=Object(a.a)(t.dimensions).sort((function(e,t){return e.name>t.name?-1:1}));if(t.name!==i)return n+=r.map((function(e){return h(e)})).reduce((function(e,t){return e*t})),0;for(var s,l=r.map((function(e){return h(e)})),c=r.length,p=function(t){var a=e.find((function(e){return e.dimensionName===r[t].name}));if(null==a)return{v:{v:null}};var i=function(e,t){var r,n=t.values;if(null!==n&&void 0!==n&&n.length){var a=Array.isArray(n[0]),i=Array.isArray(e);return a!==i?-1:a&&i?n.findIndex((function(t){return t[0]===e[0]&&t[1]===e[1]})):n.indexOf(e)}var o=t.extent;if(Array.isArray(e)||e<o[0]||e>o[1])return-1;var s=t.interval||1;if("ISO8601"!==t.unit)return Math.round((e-o[0])/s);var u=o[0],l=-1;switch((null===(r=t.intervalUnit)||void 0===r?void 0:r.toLowerCase())||"seconds"){case"seconds":l=Math.round((e-u)/1e3/s);break;case"minutes":l=Math.round((e-u)/6e4/s);break;case"hours":l=Math.round((e-u)/36e5/s);break;case"days":l=Math.round((e-u)/864e5/s);break;case"months":var c=new Date(e).getUTCFullYear()-new Date(u).getUTCFullYear(),p=new Date(u).getUTCMonth(),b=new Date(e).getUTCMonth();l=0===c?b-p:b+11-p+12*(c-1);break;case"years":l=Math.round((new Date(e).getUTCFullYear()-new Date(u).getUTCFullYear())/s);break;case"decades":l=Math.round((new Date(e).getUTCFullYear()-new Date(u).getUTCFullYear())/10/s)}return l}(a.values[0],r[t]);if(-1===i)return{v:{v:null}};l.shift(),n+=t===c-1?i:i*l.reduce((function(e,t){return e*t}))},b=0;b<c;b++)if(s=p(b))return s.v;return 1},u=0;u<o.length;u++)if(0!==(r=s())){if(1===r)break;if(r)return r.v}return n}}}]);
//# sourceMappingURL=170.e7fed2d9.chunk.js.map
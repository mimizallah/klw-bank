(this["webpackJsonpklw-bank"]=this["webpackJsonpklw-bank"]||[]).push([[193],{1325:function(e,t,r){"use strict";r.d(t,"a",(function(){return x})),r.d(t,"b",(function(){return O})),r.d(t,"c",(function(){return w})),r.d(t,"d",(function(){return S})),r.d(t,"e",(function(){return I})),r.d(t,"f",(function(){return C})),r.d(t,"g",(function(){return P})),r.d(t,"h",(function(){return G})),r.d(t,"i",(function(){return M})),r.d(t,"j",(function(){return E}));var n=r(4),a=r(92),i=r(1),o=r(569),s=r(12),u=(r(119),r(129)),c=r(101),l=r(102),p=r(132),d=r(233),f=r(168),y=r(908),b=r(637),v=r(449),m=r(227),h=r(782),j=r(125),g=l.a.getLogger("esri.layers.graphics.sources.ogcfeature"),O="http://www.opengis.net/def/crs/",x="".concat(O,"OGC/1.3/CRS84");function w(e,t){return k.apply(this,arguments)}function k(){return k=Object(s.a)(Object(n.a)().mark((function e(t,r){var o,s,l,p,d,f,y,j,O,x,w,k,S,F,I,T,C,R,P,D,G,M=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=M.length>2&&void 0!==M[2]?M[2]:{},s=M.length>3&&void 0!==M[3]?M[3]:5,l=t.links,null!=(p=Z(l,"items","application/geo+json")||Z(l,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json"))){e.next=5;break}throw new c.a("ogc-feature-layer:missing-items-page","Missing items url");case 5:return e.next=7,Object(u.default)(p.href,{signal:o.signal,query:Object(i.a)(Object(i.a)({limit:s},o.customParameters),{},{token:o.apiKey}),headers:{accept:"application/geo+json"}});case 7:return d=e.sent,f=d.data,e.next=11,Object(b.d)(f);case 11:if(y=Object(b.c)(f,{geometryType:r.geometryType}),j=r.fields||y.fields||[],O=null!=r.hasZ?r.hasZ:y.hasZ,x=y.geometryType,w=r.objectIdField||y.objectIdFieldName||"OBJECTID",k=r.timeInfo,!(S=j.find((function(e){return e.name===w})))){e.next=18;break}S.editable=!1,S.nullable=!1,e.next=21;break;case 18:if(y.objectIdFieldType){e.next=20;break}throw new c.a("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");case 20:j.unshift({name:w,alias:w,type:"number"===y.objectIdFieldType?"esriFieldTypeOID":"esriFieldTypeString",editable:!1,nullable:!1});case 21:w!==y.objectIdFieldName&&(F=j.find((function(e){return e.name===y.objectIdFieldName})))&&(F.type="esriFieldTypeInteger"),j===y.fields&&y.unknownFields.length>0&&g.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:y.unknownFields}}),I=Object(a.a)(j),e.prev=24,I.s();case 26:if((T=I.n()).done){e.next=34;break}if(null==(C=T.value).name&&(C.name=C.alias),null==C.alias&&(C.alias=C.name),"esriFieldTypeOID"!==C.type&&"esriFieldTypeGlobalID"!==C.type&&(C.editable=null==C.editable||!!C.editable,C.nullable=null==C.nullable||!!C.nullable),C.name){e.next=30;break}throw new c.a("ogc-feature-layer:invalid-field-name","field name is missing",{field:C});case 30:if(h.a.jsonValues.includes(C.type)){e.next=32;break}throw new c.a("ogc-feature-layer:invalid-field-type",'invalid type for field "'.concat(C.name,'"'),{field:C});case 32:e.next=26;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(24),I.e(e.t0);case 39:return e.prev=39,I.f(),e.finish(39);case 42:return k&&(R=new m.a(j),k.startTimeField&&((P=R.get(k.startTimeField))?(k.startTimeField=P.name,P.type="esriFieldTypeDate"):k.startTimeField=null),k.endTimeField&&((D=R.get(k.endTimeField))?(k.endTimeField=D.name,D.type="esriFieldTypeDate"):k.endTimeField=null),k.trackIdField&&((G=R.get(k.trackIdField))?k.trackIdField=G.name:(k.trackIdField=null,g.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:k}}))),k.startTimeField||k.endTimeField||(g.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:k}}),k=null)),e.abrupt("return",{drawingInfo:x?Object(v.d)(x):null,extent:B(t),geometryType:x,fields:j,hasZ:!!O,objectIdField:w,timeInfo:k});case 44:case"end":return e.stop()}}),e,null,[[24,36,39,42]])}))),k.apply(this,arguments)}function S(e){return F.apply(this,arguments)}function F(){return F=Object(s.a)(Object(n.a)().mark((function e(t){var r,a,o,s,l,p,d,f,y=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.length>1&&void 0!==y[1]?y[1]:{},a=t.links,null!=(o=Z(a,"data","application/json")||Z(a,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json"))){e.next=4;break}throw new c.a("ogc-feature-layer:missing-collections-page","Missing collections url");case 4:return s=r.apiKey,l=r.customParameters,p=r.signal,e.next=9,Object(u.default)(o.href,{signal:p,headers:{accept:"application/json"},query:Object(i.a)(Object(i.a)({},l),{},{token:s})});case 9:return d=e.sent,f=d.data,e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function I(e){return T.apply(this,arguments)}function T(){return T=Object(s.a)(Object(n.a)().mark((function e(t){var r,a,o,s,l,p,d,f,y=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.length>1&&void 0!==y[1]?y[1]:{},a=t.links,null!=(o=Z(a,"conformance","application/json")||Z(a,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json"))){e.next=4;break}throw new c.a("ogc-feature-layer:missing-conformance-page","Missing conformance url");case 4:return s=r.apiKey,l=r.customParameters,p=r.signal,e.next=9,Object(u.default)(o.href,{signal:p,headers:{accept:"application/json"},query:Object(i.a)(Object(i.a)({},l),{},{token:s})});case 9:return d=e.sent,f=d.data,e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function C(e){return R.apply(this,arguments)}function R(){return R=Object(s.a)(Object(n.a)().mark((function e(t){var r,a,o,s,c,l,p=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(r=p.length>1&&void 0!==p[1]?p[1]:{}).apiKey,o=r.customParameters,s=r.signal,e.next=6,Object(u.default)(t,{signal:s,headers:{accept:"application/json"},query:Object(i.a)(Object(i.a)({},o),{},{token:a})});case 6:return c=e.sent,l=c.data,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function P(e){return D.apply(this,arguments)}function D(){return D=Object(s.a)(Object(n.a)().mark((function e(t){var r,a,o,s,c,l,p,d,f=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:{},a="application/vnd.oai.openapi+json;version=3.0",null!=(o=Z(t.links,"service-desc",a))){e.next=4;break}return e.abrupt("return",(g.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null));case 4:return s=r.apiKey,c=r.customParameters,l=r.signal,e.next=9,Object(u.default)(o.href,{signal:l,headers:{accept:a},query:Object(i.a)(Object(i.a)({},c),{},{token:s})});case 9:return p=e.sent,d=p.data,e.abrupt("return",d);case 12:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function G(e){var t=Object(o.a)(/^http:\/\/www\.opengis.net\/def\/crs\/(.*)\/(.*)\/(.*)$/i,{authority:1,version:2,code:3}).exec(e),r=null===t||void 0===t?void 0:t.groups;if(!r)return null;var n=r.authority,a=r.code;switch(n.toLowerCase()){case"ogc":switch(a.toLowerCase()){case"crs27":return j.a.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return j.a.WGS84.wkid;default:return null}case"esri":case"epsg":var i=Number.parseInt(a,10);return Number.isNaN(i)?null:i;default:return null}}function M(e,t,r){return A.apply(this,arguments)}function A(){return(A=Object(s.a)(Object(n.a)().mark((function e(t,r,a){var i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t,r,a);case 2:return i=e.sent,e.abrupt("return",Object(f.k)(i));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t,r){return q.apply(this,arguments)}function q(){return q=Object(s.a)(Object(n.a)().mark((function e(t,r,o){var s,l,v,m,h,g,O,x,w,k,S,F,I,T,C,R,P,D,G,M,A,E,q,Q,B,W,J,H,z,U,$,K,V,Y,X,ee,te,re,ne,ae,ie;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=t.collection,v=t.layerDefinition,m=t.maxRecordCount,h=t.queryParameters,g=h.apiKey,O=h.customParameters,x=t.spatialReference,w=t.supportedCrs,k=l.links,null!=(S=Z(k,"items","application/geo+json")||Z(k,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json"))){e.next=3;break}throw new c.a("ogc-feature-layer:missing-items-page","Missing items url");case 3:if(F=r.geometry,I=r.num,T=r.start,C=r.timeExtent,R=r.where,!r.objectIds){e.next=6;break}throw new c.a("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");case 6:return P=j.a.fromJSON(x),D=null!==(s=r.outSpatialReference)&&void 0!==s?s:P,G=D.isWGS84?null:N(D,w),M=L(F,w),A=_(C),E=null!=(n=R)&&n&&"1=1"!==n?n:null,q=null!==I&&void 0!==I?I:null!=T&&void 0!==T?10:m,e.next=15,Object(u.default)(S.href,Object(i.a)(Object(i.a)({},o),{},{query:Object(i.a)(Object(i.a)(Object(i.a)({},O),M),{},{crs:G,datetime:A,query:E,limit:q,startindex:T,token:g}),headers:{accept:"application/geo+json"}}));case 15:if(Q=e.sent,B=Q.data,W=!1,B.links&&(J=B.links.find((function(e){return"next"===e.rel})),W=!!J),!W&&Number.isInteger(B.numberMatched)&&Number.isInteger(B.numberReturned)&&(W=B.numberReturned<B.numberMatched),H=v.fields,z=v.geometryType,U=v.hasZ,$=v.objectIdField,K=Object(b.a)(B,{geometryType:z,hasZ:U,objectIdField:$}),!G&&D.isWebMercator){V=Object(a.a)(K);try{for(V.s();!(Y=V.n()).done;)null!=(X=Y.value).geometry&&null!=z&&((ee=Object(f.l)(X.geometry,z,U,!1)).spatialReference=j.a.WGS84,X.geometry=Object(f.d)(Object(d.d)(ee,D)))}catch(oe){V.e(oe)}finally{V.f()}}te=Object(a.a)(K);try{for(te.s();!(re=te.n()).done;)(ne=re.value).objectId=ne.attributes[$]}catch(oe){te.e(oe)}finally{te.f()}return ae=G||!G&&D.isWebMercator?D.toJSON():p.b,ie=new y.a,e.abrupt("return",(ie.exceededTransferLimit=W,ie.features=K,ie.fields=H,ie.geometryType=z,ie.hasZ=U,ie.objectIdFieldName=$,ie.spatialReference=ae,ie));case 26:case"end":return e.stop()}var n}),e)}))),q.apply(this,arguments)}function N(e,t){var r,n,a,i=e.isWebMercator;if(!e.wkid)return null;var o=i?null!==(r=null!==(n=null!==(a=t[3857])&&void 0!==a?a:t[102100])&&void 0!==n?n:t[102113])&&void 0!==r?r:t[900913]:t[e.wkid];return o?"".concat(O).concat(o):null}function Q(e){if(null==e)return"";var t=e.xmin,r=e.ymin,n=e.xmax,a=e.ymax;return"".concat(t,",").concat(r,",").concat(n,",").concat(a)}function _(e){if(null==e)return null;var t=e.start,r=e.end;return"".concat(null!=t?t.toISOString():"..","/").concat(null!=r?r.toISOString():"..")}function L(e,t){if(!function(e){return null!=e&&"extent"===e.type}(e))return null;var r=e.spatialReference;if(!r||r.isWGS84)return{bbox:Q(e)};var n=N(r,t);return null!=n?{bbox:Q(e),"bbox-crs":n}:r.isWebMercator?{bbox:Q(Object(d.d)(e,j.a.WGS84))}:null}function B(e){var t,r=null===(t=e.extent)||void 0===t?void 0:t.spatial;if(!r)return null;var n=r.bbox[0],a=4===n.length,i=n[0],o=n[1],s=a?void 0:n[2];return{xmin:i,ymin:o,xmax:a?n[2]:n[3],ymax:a?n[3]:n[4],zmin:s,zmax:a?void 0:n[5],spatialReference:j.a.WGS84.toJSON()}}function Z(e,t,r){return e.find((function(e){return e.rel===t&&e.type===r}))||e.find((function(e){return e.rel===t&&!e.type}))}},1794:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return V}));var n=r(92),a=r(4),i=r(12),o=r(89),s=r(88),u=r(120),c=r(107),l=r(106),p=r(90),d=r(91),f=r(94),y=(r(119),r(258)),b=(r(347),r(432),r(438),r(439),r(437),r(301),r(397),r(350),r(416),r(467)),v=r(281),m=r(97),h=(r(96),r(98),r(93),r(95)),j=r(364),g=r(259),O=r(99),x=r(101),w=r(329),k=r(1325),S=r(235),F=r(125),I=function(e){Object(p.a)(r,e);var t=Object(d.a)(r);function r(){var e;return Object(o.a)(this,r),(e=t.apply(this,arguments)).featureDefinition=null,e.type="ogc-feature",e}return Object(s.a)(r,[{key:"load",value:function(e){return this.addResolvingPromise(this._loadOGCServices(this.layer,e)),this.when()}},{key:"getSource",value:function(){var e=this.featureDefinition,t=e.collection,r=e.layerDefinition,n=e.spatialReference,a=e.supportedCrs,i=this.layer,o=i.apiKey,s=i.customParameters;return{type:"ogc-source",collection:t,layerDefinition:r,maxRecordCount:i.effectiveMaxRecordCount,queryParameters:{apiKey:o,customParameters:s},spatialReference:n,supportedCrs:a}}},{key:"queryExtent",value:function(e){return null}},{key:"queryFeatureCount",value:function(e){return null}},{key:"queryFeatures",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.queryFeaturesJSON(e,t).then((function(e){return S.a.fromJSON(e)}))}},{key:"queryFeaturesJSON",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getSource();return this.load(t).then((function(){return Object(k.i)(r,e,t)}))}},{key:"queryObjectIds",value:function(e){return null}},{key:"serviceSupportsSpatialReference",value:function(e){return!(!e.isWGS84&&!e.isWebMercator)||!!this.featureDefinition.supportedCrs[e.wkid]}},{key:"_conformsToType",value:function(e,t){var r,n=new RegExp("^".concat(t,"$"),"i");return null!==(r=e.conformsTo.some((function(e){return n.test(e)})))&&void 0!==r&&r}},{key:"_getCapabilities",value:function(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},query:{maxRecordCount:t,maxRecordCountFactor:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,supportsSqlExpression:!1,tileMaxRecordCount:void 0},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1,supportsAsyncApplyEdits:!1}}}},{key:"_getMaxRecordCount",value:function(e){var t,r,n,a,i=null===e||void 0===e||null===(t=e.components)||void 0===t?void 0:t.parameters;return null!==(r=null===i||void 0===i||null===(n=i.limit)||void 0===n||null===(n=n.schema)||void 0===n?void 0:n.maximum)&&void 0!==r?r:null===i||void 0===i||null===(a=i.limitFeatures)||void 0===a||null===(a=a.schema)||void 0===a?void 0:a.maximum}},{key:"_getStorageSpatialReference",value:function(e){var t,r=null!==(t=e.storageCrs)&&void 0!==t?t:k.a,n=Object(k.h)(r);return null==n?F.a.WGS84:new F.a({wkid:n})}},{key:"_getSupportedSpatialReferences",value:function(e,t){var r,n,a="#/crs",i=null!==(r=e.crs)&&void 0!==r?r:[k.a],o=i.includes(a)?i.filter((function(e){return e!==a})).concat(null!==(n=t.crs)&&void 0!==n?n:[]):i,s=/^http:\/\/www\.opengis.net\/def\/crs\/epsg\/.*\/3785$/i;return o.filter((function(e){return!s.test(e)}))}},{key:"_loadOGCServices",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,r){var i,o,s,u,c,l,p,d,f,y,b,v,m,h,g,w,S,F,I,T,C,R,P,D,G,M,A,E,q,N;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null!=r?r.signal:null,o=t.apiKey,s=t.collectionId,u=t.customParameters,c=t.fields,l=t.geometryType,p=t.hasZ,d=t.objectIdField,f=t.timeInfo,y=t.url,b={fields:null===c||void 0===c?void 0:c.map((function(e){return e.toJSON()})),geometryType:j.b.toJSON(l),hasZ:null!==p&&void 0!==p&&p,objectIdField:d,timeInfo:null===f||void 0===f?void 0:f.toJSON()},v={apiKey:o,customParameters:u,signal:i},e.next=14,Object(k.f)(y,v);case 14:return m=e.sent,e.next=17,Promise.all([Object(k.e)(m,v),Object(k.d)(m,v)]);case 17:if(h=e.sent,g=Object(O.a)(h,2),w=g[0],S=g[1],this._conformsToType(w,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson")){e.next=23;break}throw new x.a("ogc-feature-layer:no-geojson-support","Server does not support geojson");case 23:if(F=S.collections.find((function(e){return e.id===s})),F){e.next=26;break}throw new x.a("ogc-feature-layer:collection-not-found","Server does not contain the named collection");case 26:if(!this._conformsToType(w,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30")){e.next=32;break}return e.next=29,Object(k.g)(m,v);case 29:e.t0=e.sent,e.next=33;break;case 32:e.t0=null;case 33:return I=e.t0,e.next=36,Object(k.c)(F,b,v);case 36:T=e.sent,C=this._getMaxRecordCount(I),R=this._getCapabilities(T.hasZ,C),P=this._getStorageSpatialReference(F).toJSON(),D=this._getSupportedSpatialReferences(F,S),G=new RegExp("^".concat(k.b),"i"),M={},A=Object(n.a)(D);try{for(A.s();!(E=A.n()).done;)q=E.value,null!=(N=Object(k.h)(q))&&(M[N]||(M[N]=q.replace(G,"")))}catch(a){A.e(a)}finally{A.f()}this.featureDefinition={capabilities:R,collection:F,layerDefinition:T,spatialReference:P,supportedCrs:M};case 46:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(w.a);Object(f.a)([Object(m.b)()],I.prototype,"featureDefinition",void 0),Object(f.a)([Object(m.b)({constructOnly:!0})],I.prototype,"layer",void 0),Object(f.a)([Object(m.b)()],I.prototype,"type",void 0),I=Object(f.a)([Object(h.a)("esri.layers.graphics.sources.OGCFeatureSource")],I);var T=r(541),C=r(330),R=r(542),P=r(784),D=r(751),G=r(311),M=r(938),A=r(326),E=r(425),q=r(302),N=r(566),Q=r(244),_=r(723),L=r(325),B=r(544),Z=r(195),W=r(497),J=r(383),H=r(210),z=r(486),U=r(130),$=Object(B.a)(),K=function(e){Object(p.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).capabilities=null,n.collectionId=null,n.copyright=null,n.definitionExpression=null,n.description=null,n.displayField=null,n.elevationInfo=null,n.fields=null,n.fieldsIndex=null,n.fullExtent=null,n.geometryType=null,n.hasZ=void 0,n.labelingInfo=null,n.labelsVisible=!0,n.legendEnabled=!0,n.maxRecordCount=null,n.objectIdField=null,n.operationalLayerType="OGCFeatureLayer",n.popupEnabled=!0,n.popupTemplate=null,n.screenSizePerspectiveEnabled=!0,n.source=new I({layer:Object(u.a)(n)}),n.spatialReference=null,n.title=null,n.type="ogc-feature",n.typeIdField=null,n.types=null,n.url=null,n}return Object(s.a)(r,[{key:"destroy",value:function(){var e;null===(e=this.source)||void 0===e||e.destroy()}},{key:"load",value:function(e){var t=this;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["OGCFeatureServer"]},e).then((function(){return t._fetchService(e)}))),this.when()}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"effectiveMaxRecordCount",get:function(){var e,t,r;return null!==(e=null!==(t=this.maxRecordCount)&&void 0!==t?t:null===(r=this.capabilities)||void 0===r?void 0:r.query.maxRecordCount)&&void 0!==e?e:5e3}},{key:"isTable",get:function(){return this.loaded&&null==this.geometryType}},{key:"renderer",set:function(e){Object(Z.m)(e,this.fieldsIndex),this._set("renderer",e)}},{key:"on",value:function(e,t){return Object(c.a)(Object(l.a)(r.prototype),"on",this).call(this,e,t)}},{key:"createPopupTemplate",value:function(e){return Object(z.a)(this,e)}},{key:"createQuery",value:function(){return new H.a}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"getFieldDomain",value:function(e,t){var r,n,a=this,i=!1,o=null===t||void 0===t||null===(r=t.feature)||void 0===r?void 0:r.attributes,s=this.typeIdField&&(null===o||void 0===o?void 0:o[this.typeIdField]);return null!=s&&this.types&&(i=this.types.some((function(t){var r,i;return t.id==s&&("inherited"===(null===(i=n=null===(r=t.domains)||void 0===r?void 0:r[e])||void 0===i?void 0:i.type)&&(n=a._getLayerDomain(e)),!0)}))),i||n||(n=this._getLayerDomain(e)),n}},{key:"queryFeatures",value:function(e,t){var r=this;return this.load().then((function(){return r.source.queryFeatures(H.a.from(e)||r.createQuery(),t)})).then((function(e){var t;return null!==e&&void 0!==e&&null!==(t=e.features)&&void 0!==t&&t.forEach((function(e){e.layer=e.sourceLayer=r})),e}))}},{key:"serviceSupportsSpatialReference",value:function(e){var t,r;return null!==(t=null===(r=this.source)||void 0===r?void 0:r.serviceSupportsSpatialReference(e))&&void 0!==t&&t}},{key:"_fetchService",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.source.load(t);case 2:this.read(this.source.featureDefinition,{origin:"service"}),Object(Z.m)(this.renderer,this.fieldsIndex),Object(Z.n)(this.timeInfo,this.fieldsIndex);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getLayerDomain",value:function(e){if(!this.fields)return null;var t,r=Object(n.a)(this.fields);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.name===e&&a.domain)return a.domain}}catch(i){r.e(i)}finally{r.f()}return null}}]),r}(Object(T.a)(Object(R.a)(Object(D.a)(Object(P.a)(Object(C.a)(Object(M.a)(Object(N.a)(Object(q.a)(Object(G.a)(Object(A.a)(Object(E.a)(Object(v.a)(g.a)))))))))))));Object(f.a)([Object(m.b)({readOnly:!0,json:{origins:{service:{read:!0}}}})],K.prototype,"capabilities",void 0),Object(f.a)([Object(m.b)({type:String,json:{write:!0}})],K.prototype,"collectionId",void 0),Object(f.a)([Object(m.b)({type:String})],K.prototype,"copyright",void 0),Object(f.a)([Object(m.b)({readOnly:!0})],K.prototype,"defaultPopupTemplate",null),Object(f.a)([Object(m.b)({type:String})],K.prototype,"definitionExpression",void 0),Object(f.a)([Object(m.b)({readOnly:!0,type:String,json:{origins:{service:{name:"collection.description"}}}})],K.prototype,"description",void 0),Object(f.a)([Object(m.b)({type:String})],K.prototype,"displayField",void 0),Object(f.a)([Object(m.b)({type:Number})],K.prototype,"effectiveMaxRecordCount",null),Object(f.a)([Object(m.b)(Q.b)],K.prototype,"elevationInfo",void 0),Object(f.a)([Object(m.b)({type:[L.a],json:{origins:{service:{name:"layerDefinition.fields"}}}})],K.prototype,"fields",void 0),Object(f.a)([Object(m.b)($.fieldsIndex)],K.prototype,"fieldsIndex",void 0),Object(f.a)([Object(m.b)({readOnly:!0,type:U.a,json:{origins:{service:{name:"layerDefinition.extent"}}}})],K.prototype,"fullExtent",void 0),Object(f.a)([Object(m.b)({type:j.a.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:j.a.read}}}}})],K.prototype,"geometryType",void 0),Object(f.a)([Object(m.b)({type:Boolean,json:{origins:{service:{name:"layerDefinition.hasZ"}}}})],K.prototype,"hasZ",void 0),Object(f.a)([Object(m.b)({type:Boolean,readOnly:!0})],K.prototype,"isTable",null),Object(f.a)([Object(m.b)({type:[W.a],json:{origins:{"web-document":{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:J.a},write:!0}}}})],K.prototype,"labelingInfo",void 0),Object(f.a)([Object(m.b)(Q.d)],K.prototype,"labelsVisible",void 0),Object(f.a)([Object(m.b)(Q.e)],K.prototype,"legendEnabled",void 0),Object(f.a)([Object(m.b)({type:Number})],K.prototype,"maxRecordCount",void 0),Object(f.a)([Object(m.b)({type:String,json:{origins:{service:{name:"layerDefinition.objectIdField"}}}})],K.prototype,"objectIdField",void 0),Object(f.a)([Object(m.b)({type:["OGCFeatureLayer"]})],K.prototype,"operationalLayerType",void 0),Object(f.a)([Object(m.b)(Q.k)],K.prototype,"popupEnabled",void 0),Object(f.a)([Object(m.b)({type:y.a,json:{name:"popupInfo",write:!0}})],K.prototype,"popupTemplate",void 0),Object(f.a)([Object(m.b)({types:b.a,json:{origins:{service:{name:"layerDefinition.drawingInfo.renderer",write:!1},"web-scene":{types:b.b,name:"layerDefinition.drawingInfo.renderer",write:!0}},name:"layerDefinition.drawingInfo.renderer",write:!0}})],K.prototype,"renderer",null),Object(f.a)([Object(m.b)(Q.n)],K.prototype,"screenSizePerspectiveEnabled",void 0),Object(f.a)([Object(m.b)({readOnly:!0})],K.prototype,"source",void 0),Object(f.a)([Object(m.b)({readOnly:!0,type:F.a,json:{origins:{service:{read:!0}}}})],K.prototype,"spatialReference",void 0),Object(f.a)([Object(m.b)({type:String,json:{write:{enabled:!0,ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"collection.title"}}}})],K.prototype,"title",void 0),Object(f.a)([Object(m.b)({readOnly:!0,json:{read:!1}})],K.prototype,"type",void 0),Object(f.a)([Object(m.b)({type:String,readOnly:!0})],K.prototype,"typeIdField",void 0),Object(f.a)([Object(m.b)({type:[_.a]})],K.prototype,"types",void 0),Object(f.a)([Object(m.b)(Q.o)],K.prototype,"url",void 0);var V=K=Object(f.a)([Object(h.a)("esri.layers.OGCFeatureLayer")],K)},449:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return f})),r.d(t,"d",(function(){return c}));var n=r(34),a=r(1),i=r(93),o=r(116),s=r(488),u=r(382);function c(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?u.a:"esriGeometryPolyline"===e?u.c:u.b}}}var l=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,p=1;function d(e,t){if(Object(i.a)("esri-csp-restrictions"))return function(){return Object(a.a)(Object(n.a)({},t,null),e)};try{var r="this.".concat(t," = null;");for(var o in e)r+="this".concat(l.test(o)?".".concat(o):'["'.concat(o,'"]')," = ").concat(JSON.stringify(e[o]),";");var s=new Function("\n      return class AttributesClass$".concat(p++," {\n        constructor() {\n          ").concat(r,";\n        }\n      }\n    "))();return function(){return new s}}catch(u){return function(){return Object(a.a)(Object(n.a)({},t,null),e)}}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:Object(o.a)(e)}}]}function y(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:s.a,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1}}}},488:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},569:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(19),a=r(534),i=r(90);function o(){o=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,i){var o=new RegExp(e,n);return t.set(o,i||t.get(e)),Object(a.a)(o,r.prototype)}function s(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){var a=n[r];if("number"==typeof a)t[r]=e[a];else{for(var i=0;void 0===e[a[i]]&&i+1<a.length;)i++;t[r]=e[a[i]]}return t}),Object.create(null))}return Object(i.a)(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);if(r){r.groups=s(r,this);var n=r.indices;n&&(n.groups=s(n,this))}return r},r.prototype[Symbol.replace]=function(r,a){if("string"==typeof a){var i=t.get(this);return e[Symbol.replace].call(this,r,a.replace(/\$<([^>]+)>/g,(function(e,t){var r=i[t];return"$"+(Array.isArray(r)?r.join("$"):r)})))}if("function"==typeof a){var o=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=Object(n.a)(e[e.length-1])&&(e=[].slice.call(e)).push(s(e,o)),a.apply(this,e)}))}return e[Symbol.replace].call(this,r,a)},o.apply(this,arguments)}},637:function(e,t,r){"use strict";r.d(t,"a",(function(){return I})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return F})),r.d(t,"d",(function(){return S}));var n=r(99),a=r(4),i=r(92),o=r(101),s=r(335),u=r(169),c=r(195),l=Object(a.a)().mark(y),p=Object(a.a)().mark(b),d={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function f(e){return d[e]}function y(e){var t,r,n;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=e.type,a.next="Feature"===a.t0?3:"FeatureCollection"===a.t0?6:25;break;case 3:return a.next=5,e;case 5:return a.abrupt("break",25);case 6:t=Object(i.a)(e.features),a.prev=7,t.s();case 9:if((r=t.n()).done){a.next=17;break}if(n=r.value,a.t1=n,!a.t1){a.next=15;break}return a.next=15,n;case 15:a.next=9;break;case 17:a.next=22;break;case 19:a.prev=19,a.t2=a.catch(7),t.e(a.t2);case 22:return a.prev=22,t.f(),a.finish(22);case 25:case"end":return a.stop()}}),l,null,[[7,19,22,25]])}function b(e){var t,r,n,o,s,u,c,l,d;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=57;break}a.t0=e.type,a.next="Point"===a.t0?4:"LineString"===a.t0||"MultiPoint"===a.t0?7:"MultiLineString"===a.t0||"Polygon"===a.t0?9:"MultiPolygon"===a.t0?26:57;break;case 4:return a.next=6,e.coordinates;case 6:return a.abrupt("break",57);case 7:return a.delegateYield(e.coordinates,"t1",8);case 8:return a.abrupt("break",57);case 9:t=Object(i.a)(e.coordinates),a.prev=10,t.s();case 12:if((r=t.n()).done){a.next=17;break}return n=r.value,a.delegateYield(n,"t2",15);case 15:a.next=12;break;case 17:a.next=22;break;case 19:a.prev=19,a.t3=a.catch(10),t.e(a.t3);case 22:return a.prev=22,t.f(),a.finish(22);case 25:return a.abrupt("break",57);case 26:o=Object(i.a)(e.coordinates),a.prev=27,o.s();case 29:if((s=o.n()).done){a.next=49;break}u=s.value,c=Object(i.a)(u),a.prev=32,c.s();case 34:if((l=c.n()).done){a.next=39;break}return d=l.value,a.delegateYield(d,"t4",37);case 37:a.next=34;break;case 39:a.next=44;break;case 41:a.prev=41,a.t5=a.catch(32),c.e(a.t5);case 44:return a.prev=44,c.f(),a.finish(44);case 47:a.next=29;break;case 49:a.next=54;break;case 51:a.prev=51,a.t6=a.catch(27),o.e(a.t6);case 54:return a.prev=54,o.f(),a.finish(54);case 57:case"end":return a.stop()}}),p,null,[[10,19,22,25],[27,51,54,57],[32,41,44,47]])}function v(e){for(var t=0,r=0;r<e.length;r++){var n=e[r],a=e[(r+1)%e.length];t+=n[0]*a[1]-a[0]*n[1]}return t<=0}function m(e){var t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]||e.push(t),e}function h(e,t,r){switch(t.type){case"LineString":case"MultiPoint":return function(e,t,r){return O(e,t.coordinates,r),e}(e,t,r);case"MultiLineString":return function(e,t,r){var n,a=Object(i.a)(t.coordinates);try{for(a.s();!(n=a.n()).done;){O(e,n.value,r)}}catch(o){a.e(o)}finally{a.f()}return e}(e,t,r);case"MultiPolygon":return function(e,t,r){var n,a=Object(i.a)(t.coordinates);try{for(a.s();!(n=a.n()).done;){var o=n.value;j(e,o[0],r);for(var s=1;s<o.length;s++)g(e,o[s],r)}}catch(u){a.e(u)}finally{a.f()}return e}(e,t,r);case"Point":return function(e,t,r){return w(e,t.coordinates,r),e}(e,t,r);case"Polygon":return function(e,t,r){var n=t.coordinates;j(e,n[0],r);for(var a=1;a<n.length;a++)g(e,n[a],r);return e}(e,t,r)}}function j(e,t,r){var n=m(t);!function(e){return!v(e)}(n)?O(e,n,r):x(e,n,r)}function g(e,t,r){var n=m(t);!function(e){return v(e)}(n)?O(e,n,r):x(e,n,r)}function O(e,t,r){var n,a=Object(i.a)(t);try{for(a.s();!(n=a.n()).done;){w(e,n.value,r)}}catch(o){a.e(o)}finally{a.f()}e.lengths.push(t.length)}function x(e,t,r){for(var n=t.length-1;n>=0;n--)w(e,t[n],r);e.lengths.push(t.length)}function w(e,t,r){var a=Object(n.a)(t,3),i=a[0],o=a[1],s=a[2];e.coords.push(i,o),r.hasZ&&e.coords.push(s||0)}function k(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function S(e){if(!e)throw new o.a("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new o.a("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});var t=e.crs;if(t){var r="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,n=new RegExp(".*(CRS84H?|4326)$","i");if(!r||!n.test(r))throw new o.a("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}}function F(e){var t,r,n,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=[],u=new Set,l=new Set,p=!1,d=null,v=!1,m=o.geometryType,h=void 0===m?null:m,j=!1,g=Object(i.a)(y(e));try{var O=function(){var e=a.value,t=e.geometry,r=e.properties,o=e.id;if((!t||(h||(h=f(t.type)),f(t.type)===h))&&(p||(p=function(e){var t,r=Object(i.a)(e);try{for(r.s();!(t=r.n()).done;)if(t.value.length>2)return!0}catch(n){r.e(n)}finally{r.f()}return!1}(b(t))),v||(v=null!=o)&&(n=typeof o,r&&(d=Object.keys(r).filter((function(e){return r[e]===o})))),r&&d&&v&&null!=o&&(d.length>1?d=d.filter((function(e){return r[e]===o})):1===d.length&&(d=r[d[0]]===o?d:[])),!j&&r)){var y=!0;for(var m in r)if(!u.has(m)){var g=r[m];if(null!=g){var O=k(g);if("unknown"!==O){l.delete(m),u.add(m);var x=Object(c.y)(m);x&&s.push({name:x,alias:m,type:O})}else l.add(m)}else y=!1,l.add(m)}j=y}};for(g.s();!(a=g.n()).done;)O()}catch(I){g.e(I)}finally{g.f()}var x=null!==(t=Object(c.y)(1===(null===(r=d)||void 0===r?void 0:r.length)&&d[0]||null))&&void 0!==t?t:void 0;if(x){var w,S=Object(i.a)(s);try{for(S.s();!(w=S.n()).done;){var F=w.value;if(F.name===x&&Object(c.v)(F)){F.type="esriFieldTypeOID";break}}}catch(I){S.e(I)}finally{S.f()}}return{fields:s,geometryType:h,hasZ:p,objectIdFieldName:x,objectIdFieldType:n,unknownFields:Array.from(l)}}function I(e,t){return Array.from(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a.a)().mark((function r(){var n,o,c,l,p,d,y,b,v,m,j,g;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=t.geometryType,o=t.objectIdField,c=Object(i.a)(e),r.prev=2,c.s();case 4:if((l=c.n()).done){r.next=17;break}if(d=l.value,y=d.geometry,b=d.properties,v=d.id,!y||f(y.type)===n){r.next=9;break}return r.abrupt("continue",15);case 9:return m=b||{},j=void 0,o&&(j=m[o],null==v||j||(m[o]=j=v)),g=new s.a(y?h(new u.a,y,t):null,m,null,null!==(p=j)&&void 0!==p?p:void 0),r.next=15,g;case 15:r.next=4;break;case 17:r.next=22;break;case 19:r.prev=19,r.t0=r.catch(2),c.e(r.t0);case 22:return r.prev=22,c.f(),r.finish(22);case 25:case"end":return r.stop()}}),r,null,[[2,19,22,25]])}))()}(y(e),t))}}}]);
//# sourceMappingURL=193.d2a26461.chunk.js.map
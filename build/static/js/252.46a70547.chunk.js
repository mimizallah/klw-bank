(this["webpackJsonpklw-bank"]=this["webpackJsonpklw-bank"]||[]).push([[252],{2239:function(t,e,n){"use strict";n.r(e),n.d(e,"executeForTopCount",(function(){return l}));var r=n(4),u=n(1),o=n(12),i=n(221),a=n(855),c=n(613);function l(t,e,n){return s.apply(this,arguments)}function s(){return s=Object(o.a)(Object(r.a)().mark((function t(e,n,o){var l;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=Object(i.c)(e),t.next=3,Object(a.a)(l,c.a.from(n),Object(u.a)({},o));case 3:return t.abrupt("return",t.sent.data.count);case 4:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}},855:function(t,e,n){"use strict";n.d(e,"a",(function(){return F})),n.d(e,"b",(function(){return j})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return y}));var r=n(4),u=n(1),o=n(12),i=n(129),a=n(128),c=n(122),l=n(217),s=n(814),p=n(721),d="Layer does not support extent calculation.";function y(t,e,n,r){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(Object(r.a)().mark((function t(e,n,u,o){var i;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(e,n,"json",o);case 2:return i=t.sent,t.abrupt("return",(Object(p.a)(n,u,i.data),i));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t,e,n){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(Object(r.a)().mark((function t(e,n,u){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null!=n.timeExtent&&n.timeExtent.isEmpty?{data:{objectIds:[]}}:h(e,n,"json",u,{returnIdsOnly:!0}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(t,e,n){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(Object(r.a)().mark((function t(e,n,u){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null!=n.timeExtent&&n.timeExtent.isEmpty?{data:{count:0,extent:null}}:h(e,n,"json",u,{returnExtentOnly:!0,returnCountOnly:!0}).then((function(t){var e=t.data;if(e.hasOwnProperty("extent"))return t;if(e.features)throw new Error(d);if(e.hasOwnProperty("count"))throw new Error(d);return t})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(t,e,n){return null!=e.timeExtent&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):h(t,e,"json",n,{returnIdsOnly:!0,returnCountOnly:!0})}function h(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},p="string"==typeof t?Object(a.Q)(t):t,d=e.geometry?[e.geometry]:[];return r.responseType="pbf"===n?"array-buffer":"json",Object(l.a)(d,null,r).then((function(t){var l=t&&t[0];null!=l&&((e=e.clone()).geometry=l);var d=Object(s.a)(Object(u.a)(Object(u.a)(Object(u.a)({},p.query),{},{f:n},o),function(t,e){var n,r,u=t.geometry,o=t.toJSON(),i=o;if(null!=u&&(i.geometry=JSON.stringify(u),i.geometryType=Object(c.c)(u),i.inSR=u.spatialReference.wkid||JSON.stringify(u.spatialReference)),null!==(n=o.topFilter)&&void 0!==n&&n.groupByFields&&(i.topFilter.groupByFields=o.topFilter.groupByFields.join(",")),null!==(r=o.topFilter)&&void 0!==r&&r.orderByFields&&(i.topFilter.orderByFields=o.topFilter.orderByFields.join(",")),o.topFilter&&(i.topFilter=JSON.stringify(i.topFilter)),o.objectIds&&(i.objectIds=o.objectIds.join(",")),o.orderByFields&&(i.orderByFields=o.orderByFields.join(",")),o.outFields&&!(null!==e&&void 0!==e&&e.returnCountOnly||null!==e&&void 0!==e&&e.returnExtentOnly||null!==e&&void 0!==e&&e.returnIdsOnly)?o.outFields.includes("*")?i.outFields="*":i.outFields=o.outFields.join(","):delete i.outFields,o.outSR?i.outSR=o.outSR.wkid||JSON.stringify(o.outSR):u&&o.returnGeometry&&(i.outSR=i.inSR),o.returnGeometry&&delete o.returnGeometry,o.timeExtent){var a=o.timeExtent,l=a.start,s=a.end;null==l&&null==s||(i.time=l===s?l:"".concat(null!==l&&void 0!==l?l:"null",",").concat(null!==s&&void 0!==s?s:"null")),delete o.timeExtent}return i}(e,o)));return Object(i.default)(Object(a.D)(p.path,"queryTopFeatures"),Object(u.a)(Object(u.a)({},r),{},{query:Object(u.a)(Object(u.a)({},d),r.query)}))}))}}}]);
//# sourceMappingURL=252.46a70547.chunk.js.map
{"version":3,"sources":["../node_modules/@arcgis/core/geometry/support/lineSegment.js","../node_modules/@arcgis/core/geometry/support/clipRay.js","../node_modules/@arcgis/core/geometry/support/frustum.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Octree.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/sceneLayerSnappingUtils.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/SceneLayerSnappingSourceWorker.js"],"names":["v","t","origin","a","vector","g","m","r","o","arguments","length","undefined","n","b","e","M","c","f","get","s","u","i","j","p","h","A","ray","c0","c1","Number","MAX_VALUE","l","k","T","P","_","O","R","LEFT","RIGHT","BOTTOM","TOP","NEAR","FAR","NEAR_BOTTOM_LEFT","NEAR_BOTTOM_RIGHT","NEAR_TOP_RIGHT","NEAR_TOP_LEFT","FAR_BOTTOM_LEFT","FAR_BOTTOM_RIGHT","FAR_TOP_RIGHT","FAR_TOP_LEFT","E","F","_classCallCheck","this","objectToBoundingSphere","_maximumObjectsPerNode","_maximumDepth","_degenerateObjects","Set","_root","_objectCount","maximumObjectsPerNode","maximumDepth","_createClass","key","bounds","halfSize","node","value","clear","clearPool","B","prune","H","_grow","acquire","_isDegenerate","add","init","_add","release","_step","_iterator","_createForOfIteratorHelper","done","w","_remove","delete","err","_shrink","remove","_this","_forEachNode","_intersectsNode","terminals","forAll","_intersectsObject","residents","_this2","_intersectsNodeWithOffset","_intersectsObjectWithOffset","forEach","_this3","d","z","_forEachNodeDepthOrdered","_this4","setRange","DepthOrder","FRONT_TO_BACK","Math","max","near","min","far","depth","_this5","forEachDegenerateObject","C","y","direction","applyToMinMax","applyToBoundingSphere","pop","isLeaf","children","push","advance","index","distance","data","sort","N","K","advanceTo","removeUnordered","_purge","_nodeIsEmpty","shrink","_split","at","_this6","x","_fitsInsideTree","updateBoundsRadiusFromHalfSize","_rootBoundsForRootAsSubNode","_placingRootViolatesMaxDepth","_rebuildTree","_growRootAsSubNode","_this7","q","I","initFrom","increaseHalfSize","_this8","log","LOG2E","ceil","pow","L","floor","_findShrinkIndex","_nodeToJSON","objectCount","root","_e$residents","_e$terminals","_this9","map","createEmptyNode","isTerminalFor","_childIndex","_pool","S","D","isNaN","BACK_TO_FRONT","sqrt","W","_idToComponent","Map","_components","_edges","_tmpLineSegment","_tmpP1","_tmpP2","_tmpP3","remoteClient","_fetchCandidates","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","Promise","resolve","_ensureEdgeLocations","abrupt","forEachNeighbor","_addCandidates","result","candidates","stop","_x","_x2","apply","_ensureEdgeLocations2","_callee2","_i","_context2","info","id","uid","components","invoke","sent","_setFetchEdgeLocations","_x3","_x4","_callee3","_context3","set","_x5","_callee4","_e","_context4","component","_x6","createView","locations","Array","count","position0","getVec","position1","objectIds","componentIndex","_addEdgeCandidate","_addVertexCandidate","returnEdge","type","objectId","target","start","end","returnVertex"],"mappings":"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","file":"static/js/248.4f11f449.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../core/mathUtils.js\";import{ObjectStack as r}from\"../../core/ObjectStack.js\";import{c as n,b as o,e,g as i,a as c,p as s,d as u}from\"../../chunks/vec3.js\";import{a,c as g}from\"../../chunks/vec3f64.js\";import{sv3d as f}from\"./vectorStacks.js\";function v(t){return t?{origin:a(t.origin),vector:a(t.vector)}:{origin:g(),vector:g()}}function p(t,r){const n=x.get();return n.origin=t,n.vector=r,n}function h(t,r=v()){return m(t.origin,t.vector,r)}function m(t,r,o=v()){return n(o.origin,t),n(o.vector,r),o}function b(t,r,e=v()){return n(e.origin,t),o(e.vector,r,t),e}function M(r,n){const c=o(f.get(),n,r.origin),s=e(r.vector,c),u=e(r.vector,r.vector),a=t(s/u,0,1),g=o(f.get(),i(f.get(),r.vector,a),c);return e(g,g)}function d(t,r){return Math.sqrt(M(t,r))}function j(t,r,n){return A(t,r,0,1,n)}function l(t,r,n){return c(n,t.origin,i(n,t.vector,r))}function A(r,n,u,a,g){const{vector:v,origin:p}=r,h=o(f.get(),n,p),m=e(v,h)/s(v);return i(g,v,t(m,u,a)),c(g,g,r.origin)}function B(t,r){if(q(t,p(r.origin,r.direction),!1,w)){const{tA:r,pB:n,distance2:o}=w;if(r>=0&&r<=1)return o;if(r<0)return u(t.origin,n);if(r>1)return u(c(f.get(),t.origin,t.vector),n)}return null}function k(t,r,o){return!!q(t,r,!0,w)&&(n(o,w.pA),!0)}function S(t,r){return q(t,r,!0,w)?w.distance2:null}function q(r,n,o,e){const i=1e-6,s=r.origin,a=c(f.get(),s,r.vector),g=n.origin,v=c(f.get(),g,n.vector),p=f.get(),h=f.get();if(p[0]=s[0]-g[0],p[1]=s[1]-g[1],p[2]=s[2]-g[2],h[0]=v[0]-g[0],h[1]=v[1]-g[1],h[2]=v[2]-g[2],Math.abs(h[0])<i&&Math.abs(h[1])<i&&Math.abs(h[2])<i)return!1;const m=f.get();if(m[0]=a[0]-s[0],m[1]=a[1]-s[1],m[2]=a[2]-s[2],Math.abs(m[0])<i&&Math.abs(m[1])<i&&Math.abs(m[2])<i)return!1;const b=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],M=h[0]*m[0]+h[1]*m[1]+h[2]*m[2],d=p[0]*m[0]+p[1]*m[1]+p[2]*m[2],j=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],l=(m[0]*m[0]+m[1]*m[1]+m[2]*m[2])*j-M*M;if(Math.abs(l)<i)return!1;let A=(b*M-d*j)/l,B=(b+M*A)/j;o&&(A=t(A,0,1),B=t(B,0,1));const k=f.get(),S=f.get();return k[0]=s[0]+A*m[0],k[1]=s[1]+A*m[1],k[2]=s[2]+A*m[2],S[0]=g[0]+B*h[0],S[1]=g[1]+B*h[1],S[2]=g[2]+B*h[2],e.tA=A,e.tB=B,e.pA=k,e.pB=S,e.distance2=u(k,S),!0}const w={tA:0,tB:0,pA:g(),pB:g(),distance2:0},x=new r((()=>v()));export{S as closestLineSegmentDistance2,k as closestLineSegmentPoint,B as closestRayDistance2,h as copy,v as create,d as distance,M as distance2,b as fromPoints,m as fromValues,l as pointAt,j as projectPoint,A as projectPointClamp,p as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{ObjectStack as r}from\"../../core/ObjectStack.js\";import{l as c,a as n,g as t}from\"../../chunks/vec3.js\";import{create as o,copy as e,fromValues as u}from\"./ray.js\";function a(r){return r?{ray:o(r.ray),c0:r.c0,c1:r.c1}:{ray:o(),c0:0,c1:Number.MAX_VALUE}}function i(r,c,n){const t=A.get();return t.ray=r,t.c0=c,t.c1=n,t}function s(r,c=a()){return f(r.ray,r.c0,r.c1,c)}function f(r,c,n,t=a()){return e(r,t.ray),t.c0=c,t.c1=n,t}function y(r,c=a()){return e(r,c.ray),c.c0=0,c.c1=Number.MAX_VALUE,c}function m(r,n,t=a()){const o=c(r.vector);return u(r.origin,n,t.ray),t.c0=0,t.c1=o,t}function p(r,c){return j(r,r.c0,c)}function g(r,c){return j(r,r.c1,c)}function j(r,c,o){return n(o,r.ray.origin,t(o,r.ray.direction,c))}const A=new r((()=>a()));export{s as copy,a as create,m as fromLineSegmentAndDirection,y as fromRay,f as fromValues,j as getAt,g as getEnd,p as getStart,i as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{ObjectStack as T}from\"../../core/ObjectStack.js\";import{m as _,a as O}from\"../../chunks/mat4.js\";import{s as R}from\"../../chunks/vec3.js\";import{c as A}from\"../../chunks/vec3f64.js\";import{t}from\"../../chunks/vec4.js\";import{f as E}from\"../../chunks/vec4f64.js\";import{create as F,fromRay as r,fromLineSegmentAndDirection as n}from\"./clipRay.js\";import{create as o,copy as e,fromPoints as c,clipInfinite as f,signedDistance as B,clip as M}from\"./plane.js\";import{sm4d as G,sv4d as H}from\"./vectorStacks.js\";function I(T){return T?[o(T[0]),o(T[1]),o(T[2]),o(T[3]),o(T[4]),o(T[5])]:[o(),o(),o(),o(),o(),o()]}function N(){return[A(),A(),A(),A(),A(),A(),A(),A()]}function L(T,_){for(let O=0;O<v;O++)e(T[O],_[O])}function s(T,A,E,F=S){const r=_(G.get(),A,T);O(r,r);for(let _=0;_<g;++_){const T=t(H.get(),b[_],r);R(F[_],T[0]/T[3],T[1]/T[3],T[2]/T[3])}u(E,F)}function u(T,_){c(_[k.FAR_BOTTOM_LEFT],_[k.NEAR_BOTTOM_LEFT],_[k.NEAR_TOP_LEFT],T[l.LEFT]),c(_[k.NEAR_BOTTOM_RIGHT],_[k.FAR_BOTTOM_RIGHT],_[k.FAR_TOP_RIGHT],T[l.RIGHT]),c(_[k.FAR_BOTTOM_LEFT],_[k.FAR_BOTTOM_RIGHT],_[k.NEAR_BOTTOM_RIGHT],T[l.BOTTOM]),c(_[k.NEAR_TOP_LEFT],_[k.NEAR_TOP_RIGHT],_[k.FAR_TOP_RIGHT],T[l.TOP]),c(_[k.NEAR_BOTTOM_LEFT],_[k.NEAR_BOTTOM_RIGHT],_[k.NEAR_TOP_RIGHT],T[l.NEAR]),c(_[k.FAR_BOTTOM_RIGHT],_[k.FAR_BOTTOM_LEFT],_[k.FAR_TOP_LEFT],T[l.FAR])}function P(T,_){for(let O=0;O<v;O++){const R=T[O];if(R[0]*_[0]+R[1]*_[1]+R[2]*_[2]+R[3]>=_[3])return!1}return!0}function i(T,_){return j(T,r(_,y.get()))}function m(T,_){for(let O=0;O<v;O++){const R=T[O];if(!f(R,_))return!1}return!0}function a(T,_,O){return j(T,n(_,O,y.get()))}function p(T,_){for(let O=0;O<v;O++){if(B(T[O],_)>0)return!1}return!0}function j(T,_){for(let O=0;O<v;O++)if(!M(T[O],_))return!1;return!0}var l,k;!function(T){T[T.LEFT=0]=\"LEFT\",T[T.RIGHT=1]=\"RIGHT\",T[T.BOTTOM=2]=\"BOTTOM\",T[T.TOP=3]=\"TOP\",T[T.NEAR=4]=\"NEAR\",T[T.FAR=5]=\"FAR\"}(l||(l={})),function(T){T[T.NEAR_BOTTOM_LEFT=0]=\"NEAR_BOTTOM_LEFT\",T[T.NEAR_BOTTOM_RIGHT=1]=\"NEAR_BOTTOM_RIGHT\",T[T.NEAR_TOP_RIGHT=2]=\"NEAR_TOP_RIGHT\",T[T.NEAR_TOP_LEFT=3]=\"NEAR_TOP_LEFT\",T[T.FAR_BOTTOM_LEFT=4]=\"FAR_BOTTOM_LEFT\",T[T.FAR_BOTTOM_RIGHT=5]=\"FAR_BOTTOM_RIGHT\",T[T.FAR_TOP_RIGHT=6]=\"FAR_TOP_RIGHT\",T[T.FAR_TOP_LEFT=7]=\"FAR_TOP_LEFT\"}(k||(k={}));const h={bottom:[k.FAR_BOTTOM_RIGHT,k.NEAR_BOTTOM_RIGHT,k.NEAR_BOTTOM_LEFT,k.FAR_BOTTOM_LEFT],near:[k.NEAR_BOTTOM_LEFT,k.NEAR_BOTTOM_RIGHT,k.NEAR_TOP_RIGHT,k.NEAR_TOP_LEFT],far:[k.FAR_BOTTOM_RIGHT,k.FAR_BOTTOM_LEFT,k.FAR_TOP_LEFT,k.FAR_TOP_RIGHT],right:[k.NEAR_BOTTOM_RIGHT,k.FAR_BOTTOM_RIGHT,k.FAR_TOP_RIGHT,k.NEAR_TOP_RIGHT],left:[k.FAR_BOTTOM_LEFT,k.NEAR_BOTTOM_LEFT,k.NEAR_TOP_LEFT,k.FAR_TOP_LEFT],top:[k.FAR_TOP_LEFT,k.NEAR_TOP_LEFT,k.NEAR_TOP_RIGHT,k.FAR_TOP_RIGHT]},v=6,g=8,b=[E(-1,-1,-1,1),E(1,-1,-1,1),E(1,1,-1,1),E(-1,1,-1,1),E(-1,-1,1,1),E(1,-1,1,1),E(1,1,1,1),E(-1,1,1,1)],y=new T(F),S=N();export{v as NumPlanes,g as NumPoints,l as PlaneIndex,k as PointIndex,u as computePlanes,L as copy,I as create,N as createPoints,s as fromMatrix,m as intersectClipRay,a as intersectsLineSegment,p as intersectsPoint,i as intersectsRay,P as intersectsSphere,h as planePointIndices};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/ObjectPool.js\";import t from\"../../../../core/PooledArray.js\";import{g as o,a as n,d as i,c as s,h as r}from\"../../../../chunks/vec3.js\";import{c as h,f as a}from\"../../../../chunks/vec3f64.js\";import{intersectsSphere as d}from\"../../../../geometry/support/frustum.js\";import{wrap as l}from\"../../../../geometry/support/ray.js\";import{h as u,a as c,g as f,j as m,c as _}from\"../../../../chunks/sphere.js\";import{rayBoxTest as p}from\"./Util.js\";class b{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(e,t){this.objectToBoundingSphere=e,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new g,this._objectCount=0,t&&(void 0!==t.maximumObjectsPerNode&&(this._maximumObjectsPerNode=t.maximumObjectsPerNode),void 0!==t.maximumDepth&&(this._maximumDepth=t.maximumDepth))}destroy(){this._degenerateObjects.clear(),g.clearPool(),B[0]=null,P.prune(),H.prune()}add(e,t=e.length){this._objectCount+=t,this._grow(e,t);const o=g.acquire();for(let n=0;n<t;n++){const t=e[n];this._isDegenerate(t)?this._degenerateObjects.add(t):(o.init(this._root),this._add(t,o))}g.release(o)}remove(e,t=null){this._objectCount-=e.length;const o=g.acquire();for(const n of e){const e=null!=t?t:u(this.objectToBoundingSphere(n),w);E(e[3])?(o.init(this._root),this._remove(n,e,o)):this._degenerateObjects.delete(n)}g.release(o),this._shrink()}update(e,t){if(!E(t[3])&&this._isDegenerate(e))return;const o=R(e);this.remove(o,t),this.add(o)}forEachAlongRay(e,t,o){const n=l(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNode(n,e))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObject(n,e)&&o(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObject(n,e)&&o(e)})),!0}))}forEachAlongRayWithVerticalOffset(e,t,o,n){const i=l(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNodeWithOffset(i,e,n))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObjectWithOffset(i,e,n)&&o(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObjectWithOffset(i,e,n)&&o(e)})),!0}))}forEach(e){this._forEachNode(this._root,(t=>{const o=t.node;return o.terminals.forAll(e),null!==o.residents&&o.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}forEachDegenerateObject(e){this._degenerateObjects.forEach(e)}findClosest(e,t,i,s=(()=>!0),r=1/0){let h=1/0,a=1/0,l=null;const u=T(e,t),c=o=>{if(--r,!s(o))return;const n=this.objectToBoundingSphere(o);if(!d(i,n))return;const u=z(e,t,f(n)),c=u-n[3],m=u+n[3];c<h&&(h=c,a=m,l=o)};return this._forEachNodeDepthOrdered(this._root,(s=>{if(r<=0||!d(i,s.bounds))return!1;o(v,u,s.halfSize),n(v,v,s.bounds);if(z(e,t,v)>a)return!1;const h=s.node;return h.terminals.forAll((e=>c(e))),null!==h.residents&&h.residents.forAll((e=>c(e))),!0}),e,t),l}forEachInDepthRange(e,t,i,s,r,h,a){let l=-1/0,u=1/0;const c={setRange:e=>{i===b.DepthOrder.FRONT_TO_BACK?(l=Math.max(l,e.near),u=Math.min(u,e.far)):(l=Math.max(l,-e.far),u=Math.min(u,-e.near))}};c.setRange(s);const m=z(t,i,e),_=T(t,i),p=T(t,-i),g=e=>{if(!a(e))return;const o=this.objectToBoundingSphere(e),n=f(o),s=z(t,i,n)-m,_=s-o[3],p=s+o[3];_>u||p<l||!d(h,o)||r(e,c)};this._forEachNodeDepthOrdered(this._root,(e=>{if(!d(h,e.bounds))return!1;o(v,_,e.halfSize),n(v,v,e.bounds);if(z(t,i,v)-m>u)return!1;o(v,p,e.halfSize),n(v,v,e.bounds);if(z(t,i,v)-m<l)return!1;const s=e.node;return s.terminals.forAll((e=>g(e))),null!==s.residents&&s.residents.forAll((e=>g(e))),!0}),t,i)}forEachNode(e){this._forEachNode(this._root,(t=>e(t.node,t.bounds,t.halfSize,t.depth)))}forEachNeighbor(e,t){const o=c(t),n=f(t),s=t=>{const s=this.objectToBoundingSphere(t),r=c(s),h=o+r;return!(i(f(s),n)-h*h<=0)||e(t)};let r=!0;const h=e=>{r&&(r=s(e))};this._forEachNode(this._root,(e=>{const t=c(e.bounds),s=o+t;if(i(f(e.bounds),n)-s*s>0)return!1;const a=e.node;return a.terminals.forAll(h),r&&null!==a.residents&&a.residents.forAll(h),r})),r&&this.forEachDegenerateObject(h)}_intersectsNode(e,t){return j(t.bounds,2*-t.halfSize,C),j(t.bounds,2*t.halfSize,y),p(e.origin,e.direction,C,y)}_intersectsNodeWithOffset(e,t,o){return j(t.bounds,2*-t.halfSize,C),j(t.bounds,2*t.halfSize,y),o.applyToMinMax(C,y),p(e.origin,e.direction,C,y)}_intersectsObject(e,t){const o=this.objectToBoundingSphere(t);return!(o[3]>0)||m(o,e)}_intersectsObjectWithOffset(e,t,o){const n=this.objectToBoundingSphere(t);return!(n[3]>0)||m(o.applyToBoundingSphere(n),e)}_forEachNode(e,t){let o=g.acquire().init(e);const n=[o];for(;0!==n.length;){if(o=n.pop(),t(o)&&!o.isLeaf())for(let e=0;e<o.node.children.length;e++){o.node.children[e]&&n.push(g.acquire().init(o).advance(e))}g.release(o)}}_forEachNodeDepthOrdered(e,t,o,n=b.DepthOrder.FRONT_TO_BACK){let i=g.acquire().init(e);const s=[i];for(N(o,n,K);0!==s.length;){if(i=s.pop(),t(i)&&!i.isLeaf())for(let e=7;e>=0;--e){const t=K[e];i.node.children[t]&&s.push(g.acquire().init(i).advance(t))}g.release(i)}}_remove(e,t,o){P.clear();const n=o.advanceTo(t,((e,t)=>{P.push(e.node),P.push(t)}))?o.node.terminals:o.node.residents;if(n.removeUnordered(e),0===n.length)for(let i=P.length-2;i>=0;i-=2){const e=P.data[i],t=P.data[i+1];if(!this._purge(e,t))break}}_nodeIsEmpty(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(let t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}_purge(e,o){return o>=0&&(e.children[o]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new t({shrink:!0})),!0)}_add(e,t){t.advanceTo(this.objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}_split(e){const t=e.node.residents;e.node.residents=null;for(let o=0;o<t.length;o++){const n=g.acquire().init(e);this._add(t.at(o),n),g.release(n)}}_grow(e,t){if(0!==t&&(x(e,t,(e=>this.objectToBoundingSphere(e)),k),E(k[3])&&!this._fitsInsideTree(k)))if(this._nodeIsEmpty(this._root.node))u(k,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{const e=this._rootBoundsForRootAsSubNode(k);this._placingRootViolatesMaxDepth(e)?this._rebuildTree(k,e):this._growRootAsSubNode(e),g.release(e)}}_rebuildTree(e,t){s(q,t.bounds),q[3]=t.halfSize,x([e,q],2,(e=>e),I);const o=g.acquire().init(this._root);this._root.initFrom(null,I,I[3]),this._root.increaseHalfSize(1.25),this._forEachNode(o,(e=>(this.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&this.add(e.node.residents.data,e.node.residents.length),!0))),g.release(o)}_placingRootViolatesMaxDepth(e){const t=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E;let o=0;return this._forEachNode(this._root,(e=>(o=Math.max(o,e.depth),o+t<=this._maximumDepth))),o+t>this._maximumDepth}_rootBoundsForRootAsSubNode(e){const t=e[3],o=e;let n=-1/0;const i=this._root.bounds,s=this._root.halfSize;for(let h=0;h<3;h++){const e=i[h]-s-(o[h]-t),r=o[h]+t-(i[h]+s),a=Math.max(0,Math.ceil(e/(2*s))),d=Math.max(0,Math.ceil(r/(2*s)))+1,l=2**Math.ceil(Math.log(a+d)*Math.LOG2E);n=Math.max(n,l),L[h].min=a,L[h].max=d}for(let h=0;h<3;h++){let e=L[h].min,t=L[h].max;const o=(n-(e+t))/2;e+=Math.ceil(o),t+=Math.floor(o);const r=i[h]-s-e*s*2;F[h]=r+(t+e)*s}const r=n*s;return F[3]=r*A,g.acquire().initFrom(null,F,r,0)}_growRootAsSubNode(e){const t=this._root.node;s(k,this._root.bounds),k[3]=this._root.halfSize,this._root.init(e),e.advanceTo(k,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}_shrink(){for(;;){const e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let e=null;const t=this._root.node.children;let o=0,n=0;for(;n<t.length&&null==e;)o=n++,e=t[o];for(;n<t.length;)if(t[n++])return-1;return o}_isDegenerate(e){return!E(this.objectToBoundingSphere(e)[3])}_fitsInsideTree(e){const t=this._root.bounds,o=this._root.halfSize;return e[3]<=o&&e[0]>=t[0]-o&&e[0]<=t[0]+o&&e[1]>=t[1]-o&&e[1]<=t[1]+o&&e[2]>=t[2]-o&&e[2]<=t[2]+o}toJSON(){const{maximumDepth:e,maximumObjectsPerNode:t,_objectCount:o}=this,n=this._nodeToJSON(this._root.node);return{maximumDepth:e,maximumObjectsPerNode:t,objectCount:o,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:n}}}_nodeToJSON(e){const t=e.children.map((e=>e?this._nodeToJSON(e):null)),o=e.residents?.map((e=>this.objectToBoundingSphere(e))),n=e.terminals?.map((e=>this.objectToBoundingSphere(e)));return{children:t,residents:o,terminals:n}}static fromJSON(e){const t=new b((e=>e),{maximumDepth:e.maximumDepth,maximumObjectsPerNode:e.maximumObjectsPerNode});return t._objectCount=e.objectCount,t._root.initFrom(e.root.node,e.root.bounds,e.root.halfSize,e.root.depth),t}}class g{constructor(){this.bounds=_(),this.halfSize=0,this.initFrom(null,null,0,0)}init(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}initFrom(e,t,o,n=this.depth){return this.node=null!=e?e:g.createEmptyNode(),null!=t&&u(t,this.bounds),this.halfSize=o,this.depth=n,this}increaseHalfSize(e){this.halfSize*=e,this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*A}advance(e){let t=this.node.children[e];t||(t=g.createEmptyNode(),this.node.children[e]=t),this.node=t,this.halfSize/=2,this.depth++;const o=M[e];return this.bounds[0]+=o[0]*this.halfSize,this.bounds[1]+=o[1]*this.halfSize,this.bounds[2]+=o[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}advanceTo(e,t,o=!1){for(;;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!o)return t&&t(this,-1),!1;this.node.residents=null}const n=this._childIndex(e);t&&t(this,n),this.advance(n)}}isLeaf(){return null!=this.node.residents}isTerminalFor(e){return e[3]>this.halfSize/2}_childIndex(e){const t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new t({shrink:!0}),residents:new t({shrink:!0})}}static acquire(){return g._pool.acquire()}static release(e){g._pool.release(e)}static clearPool(){g._pool.prune()}}function S(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function O(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function j(e,t,o){o[0]=e[0]+t,o[1]=e[1]+t,o[2]=e[2]+t}function x(e,t,o,n){if(1===t){const t=o(e[0]);u(t,n)}else{C[0]=1/0,C[1]=1/0,C[2]=1/0,y[0]=-1/0,y[1]=-1/0,y[2]=-1/0;for(let n=0;n<t;n++){const t=o(e[n]);E(t[3])&&(S(C,t),O(y,t))}r(n,C,y,.5),n[3]=Math.max(y[0]-C[0],y[1]-C[1],y[2]-C[2])/2}}function N(e,t,o){if(!H.length)for(let n=0;n<8;++n)H.push({index:0,distance:0});for(let n=0;n<8;++n){const o=M[n];H.data[n].index=n,H.data[n].distance=z(e,t,o)}H.sort(((e,t)=>e.distance-t.distance));for(let n=0;n<8;++n)o[n]=H.data[n].index}function T(e,t){let o,n=1/0;for(let i=0;i<8;++i){const s=z(e,t,D[i]);s<n&&(n=s,o=D[i])}return o}function z(e,t,o){return t*(e[0]*o[0]+e[1]*o[1]+e[2]*o[2])}function E(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}g._pool=new e(g),function(e){var t;(t=e.DepthOrder||(e.DepthOrder={}))[t.FRONT_TO_BACK=1]=\"FRONT_TO_BACK\",t[t.BACK_TO_FRONT=-1]=\"BACK_TO_FRONT\"}(b||(b={}));const M=[a(-1,-1,-1),a(1,-1,-1),a(-1,1,-1),a(1,1,-1),a(-1,-1,1),a(1,-1,1),a(-1,1,1),a(1,1,1)],D=[a(-1,-1,-1),a(-1,-1,1),a(-1,1,-1),a(-1,1,1),a(1,-1,-1),a(1,-1,1),a(1,1,-1),a(1,1,1)],A=Math.sqrt(3),B=[null];function R(e){return B[0]=e,B}const F=_(),v=h(),C=h(),y=h(),P=new t,w=_(),k=_(),q=_(),I=_(),L=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],H=new t,K=[0,0,0,0,0,0,0,0],W=b;export{W as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{A as s,i as o,a as r}from\"../../../../../chunks/vec3.js\";import{c,g as n}from\"../../../../../chunks/sphere.js\";const t=1e3;function a(t,a,e){const i=c(),m=n(i);return s(m,m,t,.5),s(m,m,a,.5),i[3]=o(m,t),r(m,m,e),i}export{t as MAX_CANDIDATE_COUNT,a as boundsFromEdge};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{throwIfAborted as t}from\"../../../../../core/promiseUtils.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Error.js\";import{subclass as s}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{a as o,i as n}from\"../../../../../chunks/vec3.js\";import{c as i,a as r}from\"../../../../../chunks/vec3f64.js\";import{create as d,fromPoints as c,projectPoint as a}from\"../../../../../geometry/support/lineSegment.js\";import{g as p,l as u}from\"../../../../../chunks/sphere.js\";import h from\"../../../../3d/webgl-engine/lib/Octree.js\";import{extractComponentsEdgeLocationsLayout as m}from\"../../../../3d/webgl-engine/lib/edgeRendering/edgeProcessing.js\";import{MAX_CANDIDATE_COUNT as g,boundsFromEdge as l}from\"./sceneLayerSnappingUtils.js\";let _=class{constructor(){this._idToComponent=new Map,this._components=new h((e=>e.bounds)),this._edges=new h((e=>e.bounds)),this._tmpLineSegment=d(),this._tmpP1=i(),this._tmpP2=i(),this._tmpP3=i(),this.remoteClient=null}async fetchCandidates(e,s){await Promise.resolve(),t(s),await this._ensureEdgeLocations(e,s);const o=[];return this._edges.forEachNeighbor((t=>(this._addCandidates(e,t,o),o.length<g)),e.bounds),{result:{candidates:o}}}async _ensureEdgeLocations(e,t){const s=[];if(this._components.forEachNeighbor((e=>{if(null==e.info){const{id:t,uid:o}=e;s.push({id:t,uid:o})}return!0}),e.bounds),!s.length)return;const o={components:s},n=await this.remoteClient.invoke(\"fetchAllEdgeLocations\",o,t??{});for(const i of n.components)this._setFetchEdgeLocations(i)}async add(e){const t=new b(e.id,e.bounds);return this._idToComponent.set(t.id,t),this._components.add([t]),{result:{}}}async remove(e){const t=this._idToComponent.get(e.id);if(t){const e=[];this._edges.forEachNeighbor((s=>(s.component===t&&e.push(s),!0)),t.bounds),this._edges.remove(e),this._components.remove([t]),this._idToComponent.delete(t.id)}return{result:{}}}_setFetchEdgeLocations(e){const t=this._idToComponent.get(e.id);if(null==t||e.uid!==t.uid)return;const s=m.createView(e.locations),o=new Array(s.count),n=i(),r=i();for(let i=0;i<s.count;i++){s.position0.getVec(i,n),s.position1.getVec(i,r);const d=l(n,r,e.origin),c=new j(t,i,d);o[i]=c}this._edges.add(o);const{objectIds:d,origin:c}=e;t.info={locations:s,objectIds:d,origin:c}}_addCandidates(e,t,s){const{info:n}=t.component,{origin:i,objectIds:r}=n,d=n.locations,c=d.position0.getVec(t.index,this._tmpP1),a=d.position1.getVec(t.index,this._tmpP2);o(c,c,i),o(a,a,i);const p=r[d.componentIndex.get(t.index)];this._addEdgeCandidate(e,p,c,a,s),this._addVertexCandidate(e,p,c,s),this._addVertexCandidate(e,p,a,s)}_addEdgeCandidate(e,t,s,o,i){if(!e.returnEdge)return;const d=p(e.bounds),h=c(s,o,this._tmpLineSegment),m=a(h,d,this._tmpP3);u(e.bounds,m)&&i.push({type:\"edge\",objectId:t,target:r(m),distance:n(d,m),start:r(s),end:r(o)})}_addVertexCandidate(e,t,s,o){if(!e.returnVertex)return;const i=p(e.bounds);u(e.bounds,s)&&o.push({type:\"vertex\",objectId:t,target:r(s),distance:n(i,s)})}};_=e([s(\"esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker\")],_);const f=_;class b{constructor(e,t){this.id=e,this.bounds=t,this.info=null,this.uid=++b.uid}}b.uid=0;class j{constructor(e,t,s){this.component=e,this.index=t,this.bounds=s}}export{f as default};\n"],"sourceRoot":""}
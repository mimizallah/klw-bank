{"version":3,"sources":["../node_modules/@arcgis/core/layers/support/Sublayer.js","../node_modules/@arcgis/core/layers/mixins/ArcGISMapService.js","../node_modules/@arcgis/core/layers/mixins/SublayersOwner.js","../node_modules/@arcgis/core/layers/support/imageBitmapUtils.js","../node_modules/@arcgis/core/layers/support/sublayerUtils.js"],"names":["B","J","e","type","$","r","t","_t$layer","i","this","originIdOf","E","origin","ignoreOrigin","allowNull","enabled","layer","writeSublayerStructure","G","_t$layer2","_isOverridden","H","z","K","W","Set","add","X","_n","_inherits","_super","_createSuper","_this","_classCallCheck","call","capabilities","fields","fullExtent","geometryType","globalIdField","legendEnabled","objectIdField","parent","popupEnabled","popupTemplate","sourceJSON","title","typeIdField","types","_lastParsedUrl","_createClass","key","value","_load","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","_this2","wrap","_context2","prev","next","abrupt","addResolvingPromise","_callee","_context","url","l","sublayer","fetchSublayerInfo","t0","sent","o","_objectSpread","responseType","query","f","data","read","layerDefinition","stop","_x","apply","arguments","_N","N","_N$operations","operations","supportsQuery","supportsQueryAttachments","supportsFormatPBF","s","supportsAttachment","exportMap","supportsModification","canModifyLayer","get","createPopupTemplate","set","_setAndNotifyLayer","minScale","maxScale","T","_step","_iterator","_createForOfIteratorHelper","n","done","name","err","_get","_this$layer","supportsDynamicLayers","_set","_logLockedError","length","drawingInfo","labelingInfo","map","write","sublayers","forEach","_step2","_iterator2","_ref2","_t$drawingInfo","transparency","parentLayerId","w","id","_t$operations$support","_t$operations","spatialReference","gdbVersion","fieldsIndex","has","P","pbfSupported","sourceSpatialReference","queryAttachmentsSupported","_step3","_iterator3","getSymbols","u","getLogger","warn","q","mapLayerId","_handleSublayersChange","v","a","ofType","_this$sublayers","toArray","reverse","toLowerCase","find","_this$layer$parsedUrl","_this$layer2","parsedUrl","source","concat","path","JSON","stringify","m","_overrideIfSome","getAtOrigin","F","store","clone","commitProperty","C","k","returnGeometry","where","definitionExpression","_createFeatureLayer","_callee3","_this$source","_context3","hasOwnProperty","default","t1","layerId","dynamicDataSource","refreshInterval","floorInfo","y","L","SERVICE","DEFAULTS","labelsVisible","visible","opacity","renderer","customParameters","attributes","some","toString","feature","getFeatureType","domains","_getLayerDomain","_queryAttachments","_callee4","_t$data","_t$operations2","_e2","p","_context4","load","U","from","attachmentTypes","objectIds","globalIds","num","size","start","queryTask","executeAttachmentQuery","_x2","_x3","_queryFeatures","_callee5","_this$layer3","_this$layer4","_iterator4","_step4","_args5","_context5","undefined","createQuery","execute","token","apiKey","features","sourceLayer","_this$source2","_this3","toJSON","reduce","Object","keys","showLabels","loaded","labelPlacement","warnOnce","A","Q","filter","_assignDefaultSymbolColors","_forEachSimpleMarkerSymbols","color","style","outline","_ref3","_step5","uniqueValueInfos","classBreakInfos","_iterator5","symbol","defaultSymbol","getDefaultOrigin","_this$layer5","_this$capabilities","loadStatus","emit","propertyName","target","_this4","handles","removeAll","on","_ref4","item","_ref5","_this4$layer","supportsSublayersChanges","error","preventDefault","declaredClass","String","reason","domain","c","d","test","isMapImageLayerOverridePolicy","isTileImageLayerOverridePolicy","h","readOnly","prototype","g","json","overridePolicy","O","origins","service","V","R","apiValues","reader","j","_","I","Boolean","Number","writerEnsuresNonNull","disablePopup","writer","base","typeMap","M","cast","D","b","x","Y","S","_f","copyright","version","_allLayersAndTablesMap","_d$since","_d$since2","split","trim","supportsExportMap","supportsExportTiles","supportsIdentify","supportsTileMap","exportTiles","includes","exportTilesAllowed","tileInfo","cimVersion","parse","since","supportsArcadeExpressionForLabeling","supportsSublayerVisibility","supportsSublayerDefinitionExpression","supportsCIMSymbols","maxExportTilesCount","currentVersion","_fetchRelatedService","portalItem","_relatedFeatureServicePromise","fetchRelatedItems","relationshipType","direction","then","_e$find","itemId","_fetchSublayerInfo","_r","_r2","fetchRelatedService","layerItemId","_fetchAllLayersAndTablesFromService","fetchAllLayersAndTables","_fetchAllLayersAndTables","_this$parsedUrl","_x4","_fetchAllLayersAndTablesFromService2","Map","layers","result","_x5","_x6","_o","_this$sublayersSource","_len","Array","_key","allSublayers","getCollections","getChildrenFunction","sublayersSourceJSON","_defineProperty","PORTAL_ITEM","WEB_SCENE","WEB_MAP","addHandles","destroy","context","visibleLayers","createSublayersForOrigin","_this$createSublayers","setDefaultOrigin","_a","_this$sublayersSource2","unshift","defaultVisibility","items","_getPrototypeOf","readSublayers","removeHandles","_ref","_t","createImageBitmap","_x7","_x8","level","row","col","flatten","slice"],"mappings":"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","file":"static/js/58.041e54e5.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import r from\"../../PopupTemplate.js\";import\"../../renderers/ClassBreaksRenderer.js\";import\"../../renderers/DictionaryRenderer.js\";import\"../../renderers/DotDensityRenderer.js\";import\"../../renderers/HeatmapRenderer.js\";import\"../../renderers/PieChartRenderer.js\";import\"../../renderers/Renderer.js\";import\"../../renderers/SimpleRenderer.js\";import\"../../renderers/UniqueValueRenderer.js\";import\"../../renderers/support/jsonUtils.js\";import{rendererTypes as t,webSceneRendererTypes as i}from\"../../renderers/support/types.js\";import o from\"../../request.js\";import{isSymbol3D as s}from\"../../symbols.js\";import a from\"../../core/Collection.js\";import l from\"../../core/Error.js\";import{HandleOwnerMixin as n}from\"../../core/HandleOwner.js\";import has from\"../../core/has.js\";import{IdentifiableMixin as p}from\"../../core/Identifiable.js\";import{clone as y}from\"../../core/lang.js\";import d from\"../../core/Loadable.js\";import u from\"../../core/Logger.js\";import{MultiOriginJSONMixin as c}from\"../../core/MultiOriginJSONSupport.js\";import{sqlAnd as f}from\"../../core/sql.js\";import{objectToQuery as m}from\"../../core/urlUtils.js\";import{property as h}from\"../../core/accessorSupport/decorators/property.js\";import{cast as b}from\"../../core/accessorSupport/decorators/cast.js\";import{reader as g}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as S}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as I}from\"../../core/accessorSupport/decorators/writer.js\";import{ensureInteger as w,ensureType as v,Integer as j,ensureClass as D}from\"../../core/accessorSupport/ensureType.js\";import{OriginId as L,nameToId as E}from\"../../core/accessorSupport/PropertyOrigin.js\";import{getProperties as F}from\"../../core/accessorSupport/utils.js\";import P from\"../graphics/sources/support/QueryTask.js\";import x from\"./FeatureType.js\";import O from\"./Field.js\";import T from\"./FieldsIndex.js\";import _ from\"./LabelClass.js\";import{validateLabelingInfo as A}from\"./labelingInfo.js\";import V from\"./LayerFloorInfo.js\";import{getFeatureLayerCapabilities as N}from\"./serviceCapabilitiesUtils.js\";import{DataLayerSource as M}from\"./source/DataLayerSource.js\";import{MapLayerSource as q}from\"./source/MapLayerSource.js\";import U from\"../../rest/support/AttachmentQuery.js\";import k from\"../../rest/support/Query.js\";import{createPopupTemplate as C}from\"../../support/popupUtils.js\";import R from\"../../geometry/Extent.js\";import{featureGeometryTypeKebabDictionary as Q}from\"../../geometry/support/typeUtils.js\";var B;function J(e){return null!=e&&\"esriSMS\"===e.type}function $(e,r,t){const i=this.originIdOf(r)>=E(t.origin);return{ignoreOrigin:!0,allowNull:i,enabled:!!t&&(\"map-image\"===t.layer?.type&&(t.writeSublayerStructure||i))}}function G(e,r,t){return{enabled:!!t&&(\"tile\"===t.layer?.type&&(t.origin&&this.originIdOf(r)>=E(t.origin)||this._isOverridden(r)))}}function H(e,r,t){return{ignoreOrigin:!0,enabled:t&&t.writeSublayerStructure||!1}}function z(e,r,t){return{ignoreOrigin:!0,enabled:!!t&&(t.writeSublayerStructure||this.originIdOf(r)>=E(t.origin))}}let K=0;const W=new Set;W.add(\"layer\"),W.add(\"parent\"),W.add(\"loaded\"),W.add(\"loadStatus\"),W.add(\"loadError\"),W.add(\"loadWarnings\");let X=B=class extends(n(c(p(d)))){constructor(e){super(e),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null,this._lastParsedUrl=null}async load(e){return this.addResolvingPromise((async()=>{const{layer:r,url:t}=this;if(!r&&!t)throw new l(\"sublayer:missing-layer\",\"Sublayer can't be loaded without being part of a layer\",{sublayer:this});const i=r?await r.fetchSublayerInfo(this,e):(await o(t,{responseType:\"json\",query:{f:\"json\"},...e})).data;i&&(this.sourceJSON=i,this.read({layerDefinition:i},{origin:\"service\"}))})()),this}readCapabilities(e,r){r=r.layerDefinition||r;const{operations:{supportsQuery:t,supportsQueryAttachments:i},query:{supportsFormatPBF:o},data:{supportsAttachment:s}}=N(r,this.url);return{exportMap:{supportsModification:!!r.canModifyLayer},operations:{supportsQuery:t,supportsQueryAttachments:i},data:{supportsAttachment:s},query:{supportsFormatPBF:o}}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(e){this._setAndNotifyLayer(\"definitionExpression\",e)}get effectiveScaleRange(){const{minScale:e,maxScale:r}=this;return{minScale:e,maxScale:r}}get fieldsIndex(){return new T(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer(\"floorInfo\",e)}readGlobalIdFieldFromService(e,r){if((r=r.layerDefinition||r).globalIdField)return r.globalIdField;if(r.fields)for(const t of r.fields)if(\"esriFieldTypeGlobalID\"===t.type)return t.name}get id(){const e=this._get(\"id\");return e??K++}set id(e){this._get(\"id\")!==e&&(!1!==this.layer?.capabilities?.exportMap?.supportsDynamicLayers?this._set(\"id\",e):this._logLockedError(\"id\",\"capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'\"))}set labelingInfo(e){this._setAndNotifyLayer(\"labelingInfo\",e)}writeLabelingInfo(e,r,t,i){e&&e.length&&(r.layerDefinition={drawingInfo:{labelingInfo:e.map((e=>e.write({},i)))}})}set labelsVisible(e){this._setAndNotifyLayer(\"labelsVisible\",e)}set layer(e){this._set(\"layer\",e),this.sublayers&&this.sublayers.forEach((r=>r.layer=e))}set listMode(e){this._set(\"listMode\",e)}set minScale(e){this._setAndNotifyLayer(\"minScale\",e)}readMinScale(e,r){return r.minScale||r.layerDefinition&&r.layerDefinition.minScale||0}set maxScale(e){this._setAndNotifyLayer(\"maxScale\",e)}readMaxScale(e,r){return r.maxScale||r.layerDefinition&&r.layerDefinition.maxScale||0}readObjectIdFieldFromService(e,r){if((r=r.layerDefinition||r).objectIdField)return r.objectIdField;if(r.fields)for(const t of r.fields)if(\"esriFieldTypeOID\"===t.type)return t.name}set opacity(e){this._setAndNotifyLayer(\"opacity\",e)}readOpacity(e,r){const t=r.layerDefinition;return 1-.01*((null!=t?.transparency?t.transparency:t?.drawingInfo?.transparency)??0)}writeOpacity(e,r,t,i){r.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,r){this.parent&&this.parent!==this.layer?r.parentLayerId=w(this.parent.id):r.parentLayerId=-1}get queryTask(){if(!this.layer)return null;const{spatialReference:e}=this.layer,r=\"gdbVersion\"in this.layer?this.layer.gdbVersion:void 0,{capabilities:t,fieldsIndex:i}=this,o=has(\"featurelayer-pbf\")&&t?.query.supportsFormatPBF,s=t?.operations?.supportsQueryAttachments??!1;return new P({url:this.url,pbfSupported:o,fieldsIndex:i,gdbVersion:r,sourceSpatialReference:e,queryAttachmentsSupported:s})}set renderer(e){if(e)for(const r of e.getSymbols())if(s(r)){u.getLogger(this).warn(\"Sublayer renderer should use 2D symbols\");break}this._setAndNotifyLayer(\"renderer\",e)}get source(){return this._get(\"source\")||new q({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer(\"source\",e)}set sublayers(e){this._handleSublayersChange(e,this._get(\"sublayers\")),this._set(\"sublayers\",e)}castSublayers(e){return v(a.ofType(B),e)}writeSublayers(e,r,t){this.sublayers?.length&&(r[t]=this.sublayers.map((e=>e.id)).toArray().reverse())}readTypeIdField(e,r){let t=(r=r.layerDefinition||r).typeIdField;if(t&&r.fields){t=t.toLowerCase();const e=r.fields.find((e=>e.name.toLowerCase()===t));e&&(t=e.name)}return t}get url(){const e=this.layer?.parsedUrl??this._lastParsedUrl,r=this.source;if(!e)return null;if(this._lastParsedUrl=e,\"map-layer\"===r?.type)return`${e.path}/${r.mapLayerId}`;const t={layer:JSON.stringify({source:this.source})};return`${e.path}/dynamicLayer?${m(t)}`}set url(e){this._overrideIfSome(\"url\",e)}set visible(e){this._setAndNotifyLayer(\"visible\",e)}writeVisible(e,r,t,i){r[t]=this.getAtOrigin(\"defaultVisibility\",\"service\")||e}clone(){const{store:e}=F(this),r=new B;return F(r).store=e.clone(W),this.commitProperty(\"url\"),r._lastParsedUrl=this._lastParsedUrl,r}createPopupTemplate(e){return C(this,e)}createQuery(){return new k({returnGeometry:!0,where:this.definitionExpression||\"1=1\"})}async createFeatureLayer(){if(this.hasOwnProperty(\"sublayers\"))return null;const{layer:e}=this,r=e?.parsedUrl,t=new(0,(await import(\"../FeatureLayer.js\")).default)({url:r?.path});return r&&this.source&&(\"map-layer\"===this.source.type?t.layerId=this.source.mapLayerId:t.dynamicDataSource=this.source),null!=e?.refreshInterval&&(t.refreshInterval=e.refreshInterval),this.definitionExpression&&(t.definitionExpression=this.definitionExpression),this.floorInfo&&(t.floorInfo=y(this.floorInfo)),this.originIdOf(\"labelingInfo\")>L.SERVICE&&(t.labelingInfo=y(this.labelingInfo)),this.originIdOf(\"labelsVisible\")>L.DEFAULTS&&(t.labelsVisible=this.labelsVisible),this.originIdOf(\"legendEnabled\")>L.DEFAULTS&&(t.legendEnabled=this.legendEnabled),this.originIdOf(\"visible\")>L.DEFAULTS&&(t.visible=this.visible),this.originIdOf(\"minScale\")>L.DEFAULTS&&(t.minScale=this.minScale),this.originIdOf(\"maxScale\")>L.DEFAULTS&&(t.maxScale=this.maxScale),this.originIdOf(\"opacity\")>L.DEFAULTS&&(t.opacity=this.opacity),this.originIdOf(\"popupTemplate\")>L.DEFAULTS&&(t.popupTemplate=y(this.popupTemplate)),this.originIdOf(\"renderer\")>L.SERVICE&&(t.renderer=y(this.renderer)),\"data-layer\"===this.source?.type&&(t.dynamicDataSource=this.source.clone()),this.originIdOf(\"title\")>L.DEFAULTS&&(t.title=this.title),\"map-image\"===e?.type&&e.originIdOf(\"customParameters\")>L.DEFAULTS&&(t.customParameters=e.customParameters),\"tile\"===e?.type&&e.originIdOf(\"customParameters\")>L.DEFAULTS&&(t.customParameters=e.customParameters),t}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){const{typeIdField:r,types:t}=this;if(!r||!e)return null;const i=e.attributes?e.attributes[r]:void 0;if(null==i)return null;let o=null;return t?.some((e=>{const{id:r}=e;return null!=r&&(r.toString()===i.toString()&&(o=e),!!o)})),o}getFieldDomain(e,r){const t=r&&r.feature,i=this.getFeatureType(t);if(i){const r=i.domains&&i.domains[e];if(r&&\"inherited\"!==r.type)return r}return this._getLayerDomain(e)}async queryAttachments(e,r){await this.load(),e=U.from(e);const t=this.capabilities;if(!t?.data?.supportsAttachment)throw new l(\"queryAttachments:not-supported\",\"this layer doesn't support attachments\");const{attachmentTypes:i,objectIds:o,globalIds:s,num:a,size:n,start:p,where:y}=e;if(!t?.operations?.supportsQueryAttachments){if(i?.length>0||s?.length>0||n?.length>0||a||p||y)throw new l(\"queryAttachments:option-not-supported\",\"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported\",e)}if(!(o?.length||s?.length||y))throw new l(\"queryAttachments:invalid-query\",\"'objectIds', 'globalIds', or 'where' are required to perform attachment query\",e);return this.queryTask.executeAttachmentQuery(e,r)}async queryFeatures(e=this.createQuery(),r){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new l(\"queryFeatures:not-supported\",\"this layer doesn't support queries.\");if(!this.url)throw new l(\"queryFeatures:not-supported\",\"this layer has no url.\");const t=await this.queryTask.execute(e,{...r,query:{...this.layer?.customParameters,token:this.layer?.apiKey}});if(t?.features)for(const i of t.features)i.sourceLayer=this;return t}toExportImageJSON(e){const r={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,type:\"mapLayer\"}},t=f(e,this.definitionExpression);null!=t&&(r.definitionExpression=t);const i=[\"renderer\",\"labelingInfo\",\"opacity\",\"labelsVisible\"].reduce(((e,r)=>(e[r]=this.originIdOf(r),e)),{}),o=Object.keys(i).some((e=>i[e]>L.SERVICE));if(o){const e=r.drawingInfo={};if(i.renderer>L.SERVICE&&(e.renderer=this.renderer?this.renderer.toJSON():null),i.labelsVisible>L.SERVICE&&(e.showLabels=this.labelsVisible),this.labelsVisible&&i.labelingInfo>L.SERVICE){!this.loaded&&this.labelingInfo.some((e=>!e.labelPlacement))&&u.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let r=this.labelingInfo;null!=this.geometryType&&(r=A(this.labelingInfo,Q.toJSON(this.geometryType))),e.labelingInfo=r.filter((e=>e.labelPlacement)).map((e=>e.toJSON({origin:\"service\",layer:this.layer}))),e.showLabels=!0}i.opacity>L.SERVICE&&(e.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(e.renderer)}return r}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,(e=>{e.color||\"esriSMSX\"!==e.style&&\"esriSMSCross\"!==e.style||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])}))}_forEachSimpleMarkerSymbols(e,r){if(e){const t=(\"uniqueValueInfos\"in e?e.uniqueValueInfos:\"classBreakInfos\"in e?e.classBreakInfos:null)??[];for(const e of t)J(e.symbol)&&r(e.symbol);\"symbol\"in e&&J(e.symbol)&&r(e.symbol),\"defaultSymbol\"in e&&J(e.defaultSymbol)&&r(e.defaultSymbol)}}_setAndNotifyLayer(e,r){const t=this.layer,i=this._get(e);let o,s;switch(e){case\"definitionExpression\":case\"floorInfo\":o=\"supportsSublayerDefinitionExpression\";break;case\"minScale\":case\"maxScale\":case\"visible\":o=\"supportsSublayerVisibility\";break;case\"labelingInfo\":case\"labelsVisible\":case\"opacity\":case\"renderer\":case\"source\":o=\"supportsDynamicLayers\",s=\"supportsModification\"}const a=F(this).getDefaultOrigin();if(\"service\"!==a){if(o&&!1===this.layer?.capabilities?.exportMap?.[o])return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${o}'`);if(s&&!1===this.capabilities?.exportMap[s])return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${s}'`)}\"source\"!==e||\"not-loaded\"===this.loadStatus?(this._set(e,r),\"service\"!==a&&i!==r&&t&&t.emit&&t.emit(\"sublayer-update\",{propertyName:e,target:this})):this._logLockedError(e,\"'source' can't be changed after calling sublayer.load()\")}_handleSublayersChange(e,r){r&&(r.forEach((e=>{e.parent=null,e.layer=null})),this.handles.removeAll()),e&&(e.forEach((e=>{e.parent=this,e.layer=this.layer})),this.handles.add([e.on(\"after-add\",(({item:e})=>{e.parent=this,e.layer=this.layer})),e.on(\"after-remove\",(({item:e})=>{e.parent=null,e.layer=null})),e.on(\"before-changes\",(e=>{const r=this.layer?.capabilities?.exportMap?.supportsSublayersChanges;null==r||r||(u.getLogger(this).error(new l(\"sublayer:sublayers-non-modifiable\",\"Sublayer can't be added, moved, or removed from the layer's sublayers\",{sublayer:this,layer:this.layer})),e.preventDefault())}))]))}_logLockedError(e,r){const{layer:t,declaredClass:i}=this;u.getLogger(i).error(new l(\"sublayer:locked\",`Property '${String(e)}' can't be changed on Sublayer from the layer '${t?.id}'`,{reason:r,sublayer:this,layer:t}))}_getLayerDomain(e){const r=this.fieldsIndex.get(e);return r?r.domain:null}};X.test={isMapImageLayerOverridePolicy:e=>e===H||e===$,isTileImageLayerOverridePolicy:e=>e===G},e([h({readOnly:!0})],X.prototype,\"capabilities\",void 0),e([g(\"service\",\"capabilities\",[\"layerDefinition.canModifyLayer\",\"layerDefinition.capabilities\"])],X.prototype,\"readCapabilities\",null),e([h()],X.prototype,\"defaultPopupTemplate\",null),e([h({type:String,value:null,json:{name:\"layerDefinition.definitionExpression\",write:{allowNull:!0,overridePolicy:$}}})],X.prototype,\"definitionExpression\",null),e([h({readOnly:!0})],X.prototype,\"effectiveScaleRange\",null),e([h({type:[O],json:{origins:{service:{read:{source:\"layerDefinition.fields\"}}}}})],X.prototype,\"fields\",void 0),e([h({readOnly:!0})],X.prototype,\"fieldsIndex\",null),e([h({type:V,value:null,json:{name:\"layerDefinition.floorInfo\",read:{source:\"layerDefinition.floorInfo\"},write:{target:\"layerDefinition.floorInfo\",overridePolicy:$},origins:{\"web-scene\":{read:!1,write:!1}}}})],X.prototype,\"floorInfo\",null),e([h({type:R,json:{read:{source:\"layerDefinition.extent\"}}})],X.prototype,\"fullExtent\",void 0),e([h({type:Q.apiValues,json:{origins:{service:{name:\"layerDefinition.geometryType\",read:{reader:Q.read}}}}})],X.prototype,\"geometryType\",void 0),e([h({type:String})],X.prototype,\"globalIdField\",void 0),e([g(\"service\",\"globalIdField\",[\"layerDefinition.globalIdField\",\"layerDefinition.fields\"])],X.prototype,\"readGlobalIdFieldFromService\",null),e([h({type:j,json:{write:{ignoreOrigin:!0}}})],X.prototype,\"id\",null),e([h({value:null,type:[_],json:{read:{source:\"layerDefinition.drawingInfo.labelingInfo\"},write:{target:\"layerDefinition.drawingInfo.labelingInfo\",overridePolicy:H}}})],X.prototype,\"labelingInfo\",null),e([I(\"labelingInfo\")],X.prototype,\"writeLabelingInfo\",null),e([h({type:Boolean,value:!0,json:{read:{source:\"layerDefinition.drawingInfo.showLabels\"},write:{target:\"layerDefinition.drawingInfo.showLabels\",overridePolicy:H}}})],X.prototype,\"labelsVisible\",null),e([h({value:null})],X.prototype,\"layer\",null),e([h({type:String,json:{write:{overridePolicy:G}}})],X.prototype,\"layerItemId\",void 0),e([h({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:\"showLegend\"},write:{target:\"showLegend\",overridePolicy:z}}})],X.prototype,\"legendEnabled\",void 0),e([h({type:[\"show\",\"hide\",\"hide-children\"],value:\"show\",json:{read:!1,write:!1,origins:{\"web-scene\":{read:!0,write:!0}}}})],X.prototype,\"listMode\",null),e([h({type:Number,value:0,json:{write:{overridePolicy:H}}})],X.prototype,\"minScale\",null),e([g(\"minScale\",[\"minScale\",\"layerDefinition.minScale\"])],X.prototype,\"readMinScale\",null),e([h({type:Number,value:0,json:{write:{overridePolicy:H}}})],X.prototype,\"maxScale\",null),e([g(\"maxScale\",[\"maxScale\",\"layerDefinition.maxScale\"])],X.prototype,\"readMaxScale\",null),e([h({type:String})],X.prototype,\"objectIdField\",void 0),e([g(\"service\",\"objectIdField\",[\"layerDefinition.objectIdField\",\"layerDefinition.fields\"])],X.prototype,\"readObjectIdFieldFromService\",null),e([h({type:Number,value:1,json:{write:{target:\"layerDefinition.drawingInfo.transparency\",overridePolicy:H}}})],X.prototype,\"opacity\",null),e([g(\"opacity\",[\"layerDefinition.drawingInfo.transparency\",\"layerDefinition.transparency\"])],X.prototype,\"readOpacity\",null),e([I(\"opacity\")],X.prototype,\"writeOpacity\",null),e([h({json:{type:j,write:{target:\"parentLayerId\",writerEnsuresNonNull:!0,overridePolicy:H}}})],X.prototype,\"parent\",void 0),e([I(\"parent\")],X.prototype,\"writeParent\",null),e([h({type:Boolean,value:!0,json:{read:{source:\"disablePopup\",reader:(e,r)=>!r.disablePopup},write:{target:\"disablePopup\",overridePolicy:z,writer(e,r,t){r[t]=!e}}}})],X.prototype,\"popupEnabled\",void 0),e([h({type:r,json:{read:{source:\"popupInfo\"},write:{target:\"popupInfo\",overridePolicy:z}}})],X.prototype,\"popupTemplate\",void 0),e([h({readOnly:!0})],X.prototype,\"queryTask\",null),e([h({types:t,value:null,json:{name:\"layerDefinition.drawingInfo.renderer\",write:{overridePolicy:H},origins:{\"web-scene\":{types:i,name:\"layerDefinition.drawingInfo.renderer\",write:{overridePolicy:H}}}}})],X.prototype,\"renderer\",null),e([h({types:{key:\"type\",base:null,typeMap:{\"data-layer\":M,\"map-layer\":q}},cast(e){if(e){if(\"mapLayerId\"in e)return D(q,e);if(\"dataSource\"in e)return D(M,e)}return e},json:{name:\"layerDefinition.source\",write:{overridePolicy:H}}})],X.prototype,\"source\",null),e([h()],X.prototype,\"sourceJSON\",void 0),e([h({value:null,json:{type:[j],write:{target:\"subLayerIds\",allowNull:!0,overridePolicy:H}}})],X.prototype,\"sublayers\",null),e([b(\"sublayers\")],X.prototype,\"castSublayers\",null),e([I(\"sublayers\")],X.prototype,\"writeSublayers\",null),e([h({type:String,json:{name:\"name\",write:{overridePolicy:z}}})],X.prototype,\"title\",void 0),e([h({type:String})],X.prototype,\"typeIdField\",void 0),e([g(\"typeIdField\",[\"layerDefinition.typeIdField\"])],X.prototype,\"readTypeIdField\",null),e([h({type:[x],json:{origins:{service:{read:{source:\"layerDefinition.types\"}}}}})],X.prototype,\"types\",void 0),e([h({type:String,json:{name:\"layerUrl\",write:{overridePolicy:G}}})],X.prototype,\"url\",null),e([h({type:Boolean,value:!0,json:{read:{source:\"defaultVisibility\"},write:{target:\"defaultVisibility\",overridePolicy:H}}})],X.prototype,\"visible\",null),e([I(\"visible\")],X.prototype,\"writeVisible\",null),X=B=e([S(\"esri.layers.support.Sublayer\")],X);const Y=X;export{Y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../request.js\";import{getOrCreateMapValue as t}from\"../../core/MapUtils.js\";import{throwIfAborted as s}from\"../../core/promiseUtils.js\";import{join as o}from\"../../core/urlUtils.js\";import{Version as i}from\"../../core/Version.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{reader as p}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import{OriginId as n}from\"../../core/accessorSupport/PropertyOrigin.js\";import c from\"../../geometry/Extent.js\";import u from\"../../geometry/SpatialReference.js\";import{parse as y}from\"../support/arcgisLayerUrl.js\";import{id as m,popupEnabled as d}from\"../support/commonProperties.js\";import{isHostedLayer as h}from\"../../portal/support/portalItemUtils.js\";const f=f=>{let b=class extends f{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(e,r){const t=r.capabilities&&r.capabilities.split(\",\").map((e=>e.toLowerCase().trim()));if(!t)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const s=this.type,o=\"tile\"!==s&&!!r.supportsDynamicLayers,a=t.includes(\"query\"),p=t.includes(\"map\"),l=!!r.exportTilesAllowed,n=t.includes(\"tilemap\"),c=t.includes(\"data\"),u=\"tile\"!==s&&(!r.tileInfo||o),y=\"tile\"!==s&&(!r.tileInfo||o),m=\"tile\"!==s,d=r.cimVersion&&i.parse(r.cimVersion),h=d?.since(1,4)??!1,f=d?.since(2,0)??!1;return{operations:{supportsExportMap:p,supportsExportTiles:l,supportsIdentify:a,supportsQuery:c,supportsTileMap:n},exportMap:p?{supportsArcadeExpressionForLabeling:h,supportsSublayersChanges:m,supportsDynamicLayers:o,supportsSublayerVisibility:u,supportsSublayerDefinitionExpression:y,supportsCIMSymbols:f}:null,exportTiles:l?{maxExportTilesCount:+r.maxExportTilesCount}:null}}readVersion(e,r){let t=r.currentVersion;return t||(t=r.hasOwnProperty(\"capabilities\")||r.hasOwnProperty(\"tables\")?10:r.hasOwnProperty(\"supportedImageFormatTypes\")?9.31:9.3),t}async fetchRelatedService(e){const r=this.portalItem;if(!r||!h(r))return null;this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=r.fetchRelatedItems({relationshipType:\"Service2Service\",direction:\"reverse\"},e).then((e=>e.find((e=>\"Feature Service\"===e.type))??null),(()=>null)));const t=await this._relatedFeatureServicePromise;return s(e),t?{itemId:t.id,url:t.url}:null}async fetchSublayerInfo(e,t){const{source:s}=e;if(this?.portalItem&&\"tile\"===this.type&&\"map-layer\"===s?.type&&h(this.portalItem)&&e.originIdOf(\"url\")<n.SERVICE){const r=await this.fetchRelatedService(t);r&&(e.url=o(r.url,s.mapLayerId.toString()),e.layerItemId=r.itemId)}const{url:i}=e;let a;if(\"data-layer\"===s.type){a=(await r(i,{responseType:\"json\",query:{f:\"json\",...this.customParameters,token:this.apiKey},...t})).data}else if(i&&e.originIdOf(\"url\")>n.SERVICE)try{a=(await this._fetchAllLayersAndTablesFromService(i)).get(s.mapLayerId)}catch{}else{let r=e.id;\"map-layer\"===s?.type&&(r=s.mapLayerId);try{a=(await this.fetchAllLayersAndTables(t)).get(r)}catch{}}return a}async fetchAllLayersAndTables(e){return this._fetchAllLayersAndTablesFromService(this.parsedUrl?.path,e)}async _fetchAllLayersAndTablesFromService(e,i){await this.load(i),this._allLayersAndTablesMap||=new Map;const a=y(e),p=t(this._allLayersAndTablesMap,a?.url.path,(()=>r(o(a?.url.path,\"/layers\"),{responseType:\"json\",query:{f:\"json\",...this.customParameters,token:this.apiKey}}).then((e=>{const r=new Map;for(const t of e.data.layers)r.set(t.id,t);return{result:r}}),(e=>({error:e}))))),l=await p;if(s(i),\"result\"in l)return l.result;throw l.error}};return e([a({readOnly:!0})],b.prototype,\"capabilities\",void 0),e([p(\"service\",\"capabilities\",[\"capabilities\",\"exportTilesAllowed\",\"maxExportTilesCount\",\"supportsDynamicLayers\",\"tileInfo\"])],b.prototype,\"readCapabilities\",null),e([a({json:{read:{source:\"copyrightText\"}}})],b.prototype,\"copyright\",void 0),e([a({type:c})],b.prototype,\"fullExtent\",void 0),e([a(m)],b.prototype,\"id\",void 0),e([a({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:\"showLegend\"},write:{target:\"showLegend\"}}})],b.prototype,\"legendEnabled\",void 0),e([a(d)],b.prototype,\"popupEnabled\",void 0),e([a({type:u})],b.prototype,\"spatialReference\",void 0),e([a({readOnly:!0})],b.prototype,\"version\",void 0),e([p(\"version\",[\"currentVersion\",\"capabilities\",\"tables\",\"supportedImageFormatTypes\"])],b.prototype,\"readVersion\",null),b=e([l(\"esri.layers.mixins.ArcGISMapService\")],b),b};export{f as ArcGISMapService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Collection.js\";import s from\"../../core/CollectionFlattener.js\";import t from\"../../core/Error.js\";import o from\"../../core/Logger.js\";import{watch as a,sync as l}from\"../../core/reactiveUtils.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{getProperties as n}from\"../../core/accessorSupport/utils.js\";import{subclass as y}from\"../../core/accessorSupport/decorators/subclass.js\";import{OriginId as u,nameToId as c,idToName as b}from\"../../core/accessorSupport/PropertyOrigin.js\";import p from\"../support/Sublayer.js\";import{isSublayerOverhaul as d}from\"../support/sublayerUtils.js\";const f=o.getLogger(\"esri.layers.TileLayer\");function S(e,r){const s=[],t={};return e?(e.forEach((e=>{const o=new p;if(o.read(e,r),t[o.id]=o,null!=e.parentLayerId&&-1!==e.parentLayerId){const r=t[e.parentLayerId];r.sublayers||(r.sublayers=[]),r.sublayers.unshift(o)}else s.unshift(o)})),s):s}const h=r.ofType(p);function m(e,r){e&&e.forEach((e=>{r(e),e.sublayers&&e.sublayers.length&&m(e.sublayers,r)}))}const E=o=>{let E=class extends o{constructor(...e){super(...e),this.allSublayers=new s({getCollections:()=>[this.sublayers],getChildrenFunction:e=>e.sublayers}),this.sublayersSourceJSON={[u.SERVICE]:{},[u.PORTAL_ITEM]:{},[u.WEB_SCENE]:{},[u.WEB_MAP]:{}},this.addHandles(a((()=>this.sublayers),((e,r)=>this._handleSublayersChange(e,r)),l))}destroy(){this.allSublayers.destroy()}readSublayers(e,r){if(!r||!e)return;const{sublayersSourceJSON:s}=this,t=c(r.origin);if(t<u.SERVICE)return;if(s[t]={context:r,visibleLayers:e.visibleLayers||s[t].visibleLayers,layers:e.layers||s[t].layers},t>u.SERVICE)return;this._set(\"serviceSublayers\",this.createSublayersForOrigin(\"service\").sublayers);const{sublayers:o,origin:a}=this.createSublayersForOrigin(\"web-document\"),l=n(this);l.setDefaultOrigin(a),this._set(\"sublayers\",new h(o)),l.setDefaultOrigin(\"user\")}findSublayerById(e){return this.allSublayers.find((r=>r.id===e))}createServiceSublayers(){return this.createSublayersForOrigin(\"service\").sublayers}createSublayersForOrigin(e){const r=c(\"web-document\"===e?\"web-map\":e);let s=u.SERVICE,t=this.sublayersSourceJSON[u.SERVICE].layers,o=this.sublayersSourceJSON[u.SERVICE].context,a=null;const l=[u.PORTAL_ITEM,u.WEB_SCENE,u.WEB_MAP].filter((e=>e<=r));for(const u of l){const e=this.sublayersSourceJSON[u];d(e.layers)&&(s=u,t=e.layers,o=e.context,e.visibleLayers&&(a={visibleLayers:e.visibleLayers,context:e.context}))}const i=[u.PORTAL_ITEM,u.WEB_SCENE,u.WEB_MAP].filter((e=>e>s&&e<=r));let n=null;for(const u of i){const{layers:e,visibleLayers:r,context:s}=this.sublayersSourceJSON[u];e&&(n={layers:e,context:s}),r&&(a={visibleLayers:r,context:s})}const y=S(t,o),p=new Map,f=new Set;if(n)for(const u of n.layers)p.set(u.id,u);if(a?.visibleLayers)for(const u of a.visibleLayers)f.add(u);return m(y,(e=>{n&&e.read(p.get(e.id),n.context),a&&e.read({defaultVisibility:f.has(e.id)},a.context)})),{origin:b(s),sublayers:new h({items:y})}}read(e,r){super.read(e,r),this.readSublayers(e,r)}_handleSublayersChange(e,r){r&&(r.forEach((e=>{e.parent=null,e.layer=null})),this.removeHandles(\"sublayers-owner\")),e&&(e.forEach((e=>{e.parent=this,e.layer=this})),this.addHandles([e.on(\"after-add\",(({item:e})=>{e.parent=this,e.layer=this})),e.on(\"after-remove\",(({item:e})=>{e.parent=null,e.layer=null}))],\"sublayers-owner\"),\"tile\"===this.type&&this.addHandles(e.on(\"before-changes\",(e=>{f.error(new t(\"tilelayer:sublayers-non-modifiable\",\"ISublayer can't be added, moved, or removed from the layer's sublayers\",{layer:this})),e.preventDefault()})),\"sublayers-owner\"))}};return e([i({readOnly:!0})],E.prototype,\"allSublayers\",void 0),e([i({readOnly:!0,type:r.ofType(p)})],E.prototype,\"serviceSublayers\",void 0),e([i({value:null,type:h,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],E.prototype,\"sublayers\",void 0),e([i({readOnly:!0})],E.prototype,\"sublayersSourceJSON\",void 0),E=e([y(\"esri.layers.mixins.SublayersOwner\")],E),E};export{E as SublayersOwner,m as forEachSublayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport r from\"../../core/Error.js\";import{throwIfAborted as e}from\"../../core/promiseUtils.js\";async function t(t,o,a){let c;try{c=await createImageBitmap(t)}catch(l){throw new r(\"request:server\",`Unable to load ${o}`,{url:o,error:l})}return e(a),c}async function o(t,o,a,c,l){let n;try{n=await createImageBitmap(t)}catch(i){throw new r(\"request:server\",`Unable to load tile ${o}/${a}/${c}`,{error:i,level:o,row:a,col:c})}return e(l),n}export{t as createBitmap,o as createTileBitmap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{OriginId as r}from\"../../core/accessorSupport/PropertyOrigin.js\";function e(r,e,n){const o=e.flatten((({sublayers:r})=>r)).length;if(o!==r.length)return!0;return!!r.some((r=>r.originIdOf(\"minScale\")>n||r.originIdOf(\"maxScale\")>n||r.originIdOf(\"renderer\")>n||r.originIdOf(\"labelingInfo\")>n||r.originIdOf(\"opacity\")>n||r.originIdOf(\"labelsVisible\")>n||r.originIdOf(\"source\")>n))||!i(r,e)}function n(e,n,o){return!!e.some((e=>{const n=e.source;return!(!n||\"map-layer\"===n.type&&n.mapLayerId===e.id&&(null==n.gdbVersion||n.gdbVersion===o))||e.originIdOf(\"renderer\")>r.SERVICE||e.originIdOf(\"labelingInfo\")>r.SERVICE||e.originIdOf(\"opacity\")>r.SERVICE||e.originIdOf(\"labelsVisible\")>r.SERVICE}))||!i(e,n)}function i(r,e){if(!r||!r.length||null==e)return!0;const n=e.slice().reverse().flatten((({sublayers:r})=>r&&r.toArray().reverse())).map((r=>r.id)).toArray();if(r.length>n.length)return!1;let i=0;const o=n.length;for(const{id:t}of r){for(;i<o&&n[i]!==t;)i++;if(i>=o)return!1}return!0}function o(r){return!!r&&r.some((r=>null!=r.minScale||r.layerDefinition&&null!=r.layerDefinition.minScale))}export{n as isExportDynamic,o as isSublayerOverhaul,e as shouldWriteSublayerStructure};\n"],"sourceRoot":""}
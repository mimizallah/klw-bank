(this["webpackJsonpklw-bank"]=this["webpackJsonpklw-bank"]||[]).push([[70],{1787:function(e,r,a){"use strict";a.r(r),a.d(r,"populateOperationalLayers",(function(){return b}));var t=a(4),n=a(92),i=a(1),y=a(12),c=a(145),u=(a(93),a(110)),o=a(1027),l=a(496);function L(e){return S(e,"notes")}function s(e){return S(e,"markup")}function p(e){return S(e,"route")}function S(e,r){return!(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)&&e.featureCollectionType===r}var d=a(1877),f=a(724);function b(e,r,a){return v.apply(this,arguments)}function v(){return(v=Object(y.a)(Object(t.a)().mark((function e(r,a,i){var y,c,o,l,L,s,p,S,d;return Object(t.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:y=[],c=Object(n.a)(a);try{for(c.s();!(o=c.n()).done;)l=o.value,L=k(l,i),"GroupLayer"===l.layerType?y.push(D(L,l,i)):y.push(L)}catch(t){c.e(t)}finally{c.f()}return e.next=7,Object(u.e)(y);case 7:s=e.sent,p=Object(n.a)(s);try{for(p.s();!(S=p.n()).done;)(d=S.value).value&&r.add(d.value)}catch(t){p.e(t)}finally{p.f()}case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer",LineOfSightLayer:"LineOfSightLayer"},T={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},g={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",DefaultTileLayer:"TileLayer"},G={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},O={ArcGISFeatureLayer:"FeatureLayer"},m={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"},M=Object(i.a)(Object(i.a)({},G),{},{LinkChartLayer:"LinkChartLayer"}),h=Object(i.a)({},O),A=Object(i.a)({},m);function k(e,r){return w.apply(this,arguments)}function w(){return(w=Object(y.a)(Object(t.a)().mark((function e(r,a){return Object(t.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=j,e.next=3,W(r,a);case 3:return e.t1=e.sent,e.t2=r,e.t3=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,r,a){return x.apply(this,arguments)}function x(){return(x=Object(y.a)(Object(t.a)().mark((function e(r,a,n){var i;return Object(t.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=new r).read(a,n.context),e.t0="group"===i.type&&F(a),!e.t0){e.next=6;break}return e.next=6,R(i,a,n.context);case 6:return e.next=8,Object(f.a)(i,n.context);case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,r){return C.apply(this,arguments)}function C(){return(C=Object(y.a)(Object(t.a)().mark((function e(r,a){var n,i,y,c,u,S,f,b,v;return Object(t.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.context,y=B(i),!(c=r.layerType||r.type)&&a&&a.defaultLayerType&&(c=a.defaultLayerType),u=y[c],S=u?o.a[u]:o.a.UnknownLayer,!V(r)){e.next=20;break}if(f=null===i||void 0===i?void 0:i.portal,!r.itemId){e.next=18;break}return b=new l.default({id:r.itemId,portal:f}),e.next=11,b.load();case 11:return e.next=13,Object(d.selectLayerClassPath)(b);case 13:if(e.t0=e.sent.className,e.t0){e.next=16;break}e.t0="UnknownLayer";case 16:v=e.t0,S=o.a[v];case 18:e.next=21;break;case 20:"ArcGISFeatureLayer"===c?L(r)||s(r)?S=o.a.MapNotesLayer:p(r)?S=o.a.RouteLayer:F(r)&&(S=o.a.GroupLayer):r.wmtsInfo&&r.wmtsInfo.url&&r.wmtsInfo.layerIdentifier?S=o.a.WMTSLayer:"WFS"===c&&"2.0.0"!==(null===(n=r.wfsInfo)||void 0===n?void 0:n.version)&&(S=o.a.UnsupportedLayer);case 21:return e.abrupt("return",S());case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){var r,a;return"ArcGISFeatureLayer"===e.layerType&&!V(e)&&(null!==(r=null===(a=e.featureCollection)||void 0===a||null===(a=a.layers)||void 0===a?void 0:a.length)&&void 0!==r?r:0)>1}function V(e){return"Feature Collection"===e.type}function B(e){var r;switch(e.origin){case"web-scene":switch(e.layerContainerType){case"basemap":r=g;break;case"ground":r=T;break;default:r=I}break;case"link-chart":switch(e.layerContainerType){case"basemap":r=A;break;case"tables":r=h;break;default:r=M}break;default:switch(e.layerContainerType){case"basemap":r=m;break;case"tables":r=O;break;default:r=G}}return r}function D(e,r,a){return U.apply(this,arguments)}function U(){return(U=Object(y.a)(Object(t.a)().mark((function e(r,a,i){var y,u,o,l,L;return Object(t.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y=new c.a,u=b(y,Array.isArray(a.layers)?a.layers:[],i),e.prev=1,e.next=4,r;case 4:return o=e.sent,e.prev=5,e.next=8,u;case 8:if("group"!==o.type){e.next=10;break}return e.abrupt("return",(o.layers.addMany(y),o));case 10:e.next=18;break;case 12:e.prev=12,e.t0=e.catch(5),o.destroy(),l=Object(n.a)(y);try{for(l.s();!(L=l.n()).done;)L.value.destroy()}catch(t){l.e(t)}finally{l.f()}throw e.t0;case 18:e.next=23;break;case 20:throw e.prev=20,e.t1=e.catch(1),e.t1;case 23:case"end":return e.stop()}}),e,null,[[1,20],[5,12]])})))).apply(this,arguments)}function R(e,r,a){return E.apply(this,arguments)}function E(){return(E=Object(y.a)(Object(t.a)().mark((function e(r,a,n){var y,c,u,l,L,s;return Object(t.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=o.a.FeatureLayer,e.next=3,c();case 3:u=e.sent,l=a.featureCollection,L=null===l||void 0===l?void 0:l.showLegend,s=null===l||void 0===l||null===(y=l.layers)||void 0===y?void 0:y.map((function(e,t){var y,c,o=new u;o.read(e,n);var l=Object(i.a)(Object(i.a)({},n),{},{ignoreDefaults:!0});return o.read({id:"".concat(r.id,"-sublayer-").concat(t),visibility:null===(y=null===(c=a.visibleLayers)||void 0===c?void 0:c.includes(t))||void 0===y||y},l),null!=L&&o.read({showLegend:L},l),o})),r.layers.addMany(null!==s&&void 0!==s?s:[]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=70.c77add61.chunk.js.map
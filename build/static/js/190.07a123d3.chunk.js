(this["webpackJsonpklw-bank"]=this["webpackJsonpklw-bank"]||[]).push([[190],{2266:function(e,t,r){"use strict";r.r(t),r.d(t,"destroyContext",(function(){return D})),r.d(t,"dracoDecompressPointCloudData",(function(){return B})),r.d(t,"filterObbsForModifications",(function(){return L})),r.d(t,"filterObbsForModificationsSync",(function(){return H})),r.d(t,"initialize",(function(){return q})),r.d(t,"interpretObbModificationResults",(function(){return G})),r.d(t,"process",(function(){return A})),r.d(t,"project",(function(){return U})),r.d(t,"setLegacySchema",(function(){return _})),r.d(t,"setModifications",(function(){return P})),r.d(t,"setModificationsSync",(function(){return z})),r.d(t,"test",(function(){return K})),r.d(t,"transformNormals",(function(){return T}));var n,o,i,a=r(99),c=r(4),u=r(12),f=r(125),s=r(812),l=r(599),d=r(735),b=r(736),p=r(528);(i=n||(n={}))[i.None=0]="None",i[i.Int16=1]="Int16",i[i.Int32=2]="Int32",function(e){e[e.Replace=0]="Replace",e[e.Outside=1]="Outside",e[e.Inside=2]="Inside",e[e.Finished=3]="Finished"}(o||(o={}));var h,y=r(288);function v(e){return Object(y.a)("esri/libs/i3s/".concat(e))}var m,g,O,j,w,x;r(90),r(91),r(88),r(89),r(725);(x=m||(m={}))[x.Unmodified=0]="Unmodified",x[x.Culled=1]="Culled",x[x.NotChecked=2]="NotChecked",function(e){e[e.Unmodified=0]="Unmodified",e[e.PotentiallyModified=1]="PotentiallyModified",e[e.Culled=2]="Culled",e[e.Unknown=3]="Unknown",e[e.NotChecked=4]="NotChecked"}(g||(g={}));!function(e){e[e.Unknown=0]="Unknown",e[e.Uncached=1]="Uncached",e[e.Cached=2]="Cached"}(O||(O={})),function(e){e[e.None=0]="None",e[e.MaxScreenThreshold=1]="MaxScreenThreshold",e[e.ScreenSpaceRelative=2]="ScreenSpaceRelative",e[e.RemovedFeatureDiameter=3]="RemovedFeatureDiameter",e[e.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"}(j||(j={})),function(e){e[e.Hole=0]="Hole",e[e.Leaf=1]="Leaf"}(w||(w={}));var S,E;function A(e){return M.apply(this,arguments)}function M(){return M=Object(u.a)(Object(c.a)().mark((function e(t){var r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:return r=[t.geometryBuffer],e.abrupt("return",{result:V(t,r),transferList:r});case 4:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function B(e){return R.apply(this,arguments)}function R(){return R=Object(u.a)(Object(c.a)().mark((function e(t){var r,n,o,i,a,u,f,s,l;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:if(n=[t.geometryBuffer],o=t.geometryBuffer,i=o.byteLength,a=E._malloc(i),(u=new Uint8Array(E.HEAPU8.buffer,a,i)).set(new Uint8Array(o)),f=E.dracoDecompressPointCloudData(a,u.byteLength),E._free(a),!(f.error.length>0)){e.next=7;break}throw new Error("i3s.wasm: ".concat(f.error));case 7:return s=(null===(r=f.featureIds)||void 0===r?void 0:r.length)>0?f.featureIds.slice():null,l=f.positions.slice(),e.abrupt("return",(s&&n.push(s.buffer),n.push(l.buffer),{result:{positions:l,featureIds:s},transferList:n}));case 9:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function L(e){return k.apply(this,arguments)}function k(){return k=Object(u.a)(Object(c.a)().mark((function e(t){var r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:return H(t),r={buffer:t.buffer},e.abrupt("return",{result:r,transferList:[r.buffer]});case 5:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function P(e){return F.apply(this,arguments)}function F(){return F=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:z(t);case 3:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function _(e){return I.apply(this,arguments)}function I(){return I=Object(u.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:E.setLegacySchema(t.context,t.jsonSchema);case 3:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function U(e){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(Object(c.a)().mark((function e(t){var n,o,i,u,p,h,y,v,m,g,O,j,w,x,S,E,A,M,B,R;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.localMatrix,o=t.origin,i=t.positions,u=t.vertexSpace,p=t.local,h=f.a.fromJSON(t.inSpatialReference),y=f.a.fromJSON(t.outSpatialReference),"georeferenced"!==(v={georeferenced:d.a,georeferencedRelative:l.a,local:b.a}[u.type].fromJSON(u)).type){e.next=13;break}return e.next=4,Promise.resolve().then(r.bind(null,206));case 4:return g=e.sent,O=g.projectBuffer,j=g.initializeProjection,e.next=9,j(h,y);case 9:m=new Float64Array(i.length),O(i,h,0,m,y,0,m.length/3),e.next=18;break;case 13:return e.next=15,Promise.all([r.e(11),r.e(194)]).then(r.bind(null,682));case 15:w=e.sent,x=w.project,m=Object(s.e)(x({positions:i,transform:n?{localMatrix:n}:void 0,vertexSpace:v,inSpatialReference:h,outSpatialReference:y,local:p}));case 18:for(S=m.length,E=Object(a.a)(o,3),A=E[0],M=E[1],B=E[2],R=0;R<S;R+=3)m[R]-=A,m[R+1]-=M,m[R+2]-=B;return e.abrupt("return",{result:{projected:m,original:i},transferList:[m.buffer,i.buffer]});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return C.apply(this,arguments)}function C(){return C=Object(u.a)(Object(c.a)().mark((function e(t){var r,n,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.normalMatrix,n=t.normals,o=new Float32Array(n.length),e.abrupt("return",(Object(p.a)(o,n,r),Object(p.f)(o,o),{result:{transformed:o,original:n},transferList:[o.buffer,n.buffer]}));case 3:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function D(e){Y(e)}function z(e){for(var t=e.modifications,r=E._malloc(8*t.length),n=new Float64Array(E.HEAPU8.buffer,r,t.length),o=0;o<t.length;++o)n[o]=t[o];E.setModifications(e.context,r,t.length,e.isGeodetic),E._free(r)}function V(e,t){if(!E)return null;var r=e.context,o=e.localOrigin,i=e.globalTrafo,a=e.mbs,c=e.obb,u=e.elevationOffset,f=e.geometryBuffer,s=e.geometryDescriptor,l=e.indexToVertexProjector,d=e.vertexToRenderProjector,b=E._malloc(f.byteLength),p=E._malloc(33*Float64Array.BYTES_PER_ELEMENT),h=new Uint8Array(E.HEAPU8.buffer,b,f.byteLength);h.set(new Uint8Array(f));var y=new Float64Array(E.HEAPU8.buffer,p,33);J(y,o);var v=y.byteOffset+3*y.BYTES_PER_ELEMENT,m=new Float64Array(y.buffer,v);J(m,i),v+=16*y.BYTES_PER_ELEMENT,J(m=new Float64Array(y.buffer,v),a),v+=4*y.BYTES_PER_ELEMENT,null!=c&&(J(m=new Float64Array(y.buffer,v),c.center),v+=3*y.BYTES_PER_ELEMENT,J(m=new Float64Array(y.buffer,v),c.halfSize),v+=3*y.BYTES_PER_ELEMENT,J(m=new Float64Array(y.buffer,v),c.quaternion));var g=s,O={isDraco:!1,isLegacy:!1,color:e.layouts.some((function(e){return e.some((function(e){return"color"===e.name}))})),normal:e.needNormals&&e.layouts.some((function(e){return e.some((function(e){return"normalCompressed"===e.name}))})),uv0:e.layouts.some((function(e){return e.some((function(e){return"uv0"===e.name}))})),uvRegion:e.layouts.some((function(e){return e.some((function(e){return"uvRegion"===e.name}))})),featureIndex:g.featureIndex},j=E.process(r,!!e.obb,b,h.byteLength,g,O,p,u,l,d,e.normalReferenceFrame);if(E._free(p),E._free(b),j.error.length>0)throw new Error("i3s.wasm: ".concat(j.error));if(j.discarded)return null;var w=j.componentOffsets.length>0?j.componentOffsets.slice():null,x=j.featureIds.length>0?j.featureIds.slice():null,S=j.anchorIds.length>0?Array.from(j.anchorIds):null,A=j.anchors.length>0?Array.from(j.anchors):null,M=j.interleavedVertedData.slice().buffer,B=j.indicesType===n.Int16?new Uint16Array(j.indices.buffer,j.indices.byteOffset,j.indices.byteLength/2).slice():new Uint32Array(j.indices.buffer,j.indices.byteOffset,j.indices.byteLength/4).slice(),R=j.positions.slice(),L=j.positionIndicesType===n.Int16?new Uint16Array(j.positionIndices.buffer,j.positionIndices.byteOffset,j.positionIndices.byteLength/2).slice():new Uint32Array(j.positionIndices.buffer,j.positionIndices.byteOffset,j.positionIndices.byteLength/4).slice(),k={layout:e.layouts[0],interleavedVertexData:M,indices:B,hasColors:j.hasColors,hasModifications:j.hasModifications,positionData:{data:R,indices:L}};return x&&t.push(x.buffer),w&&t.push(w.buffer),t.push(M),t.push(B.buffer),t.push(R.buffer),t.push(L.buffer),{componentOffsets:w,featureIds:x,anchorIds:S,anchors:A,transformedGeometry:k,obb:j.obb}}function G(e){return 0===e?g.Unmodified:1===e?g.PotentiallyModified:2===e?g.Culled:g.Unknown}function H(e){var t=e.context,r=e.buffer,n=E._malloc(r.byteLength),o=r.byteLength/Float64Array.BYTES_PER_ELEMENT,i=new Float64Array(E.HEAPU8.buffer,n,o),a=new Float64Array(r);i.set(a),E.filterOBBs(t,n,o),a.set(i),E._free(n)}function Y(e){E&&(E.destroy(e),E=null)}function J(e,t){for(var r=0;r<t.length;++r)e[r]=t[r]}function q(){return E?Promise.resolve():(S||(S=(h||(h=new Promise((function(e){return r.e(288).then(r.bind(null,2226)).then((function(e){return e.i})).then((function(t){var r=(0,t.default)({locateFile:v,onRuntimeInitialized:function(){return e(r)}});delete r.then}))})).catch((function(e){throw e}))),h).then((function(e){E=e,S=null}))),S)}var K={transform:V,destroy:Y}},528:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return l})),r.d(t,"g",(function(){return f})),r.d(t,"h",(function(){return i}));var n=r(636);function o(e,t,r){i(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function i(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o;if(e.length/o!==Math.ceil(t.length/i))return n.a.error("source and destination buffers need to have the same number of elements"),e;for(var a=e.length/o,c=r[0],u=r[1],f=r[2],s=r[4],l=r[5],d=r[6],b=r[8],p=r[9],h=r[10],y=r[12],v=r[13],m=r[14],g=0,O=0,j=0;j<a;j++){var w=t[g],x=t[g+1],S=t[g+2];e[O]=c*w+s*x+b*S+y,e[O+1]=u*w+l*x+p*S+v,e[O+2]=f*w+d*x+h*S+m,g+=i,O+=o}return e}function a(e,t,r){c(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function c(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o;if(e.length/o===Math.ceil(t.length/i))for(var a=e.length/o,c=r[0],u=r[1],f=r[2],s=r[3],l=r[4],d=r[5],b=r[6],p=r[7],h=r[8],y=0,v=0,m=0;m<a;m++){var g=t[y],O=t[y+1],j=t[y+2];e[v]=c*g+s*O+b*j,e[v+1]=u*g+l*O+p*j,e[v+2]=f*g+d*O+h*j,y+=i,v+=o}else n.a.error("source and destination buffers need to have the same number of elements")}function u(e,t,r){f(e.typedBuffer,t,r,e.typedBufferStride)}function f(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=Math.min(e.length/n,t.count),i=t.typedBuffer,a=t.typedBufferStride,c=0,u=0,f=0;f<o;f++)e[u]=r*i[c],e[u+1]=r*i[c+1],e[u+2]=r*i[c+2],c+=a,u+=n}function s(e,t){l(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function l(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,o=Math.min(e.length/r,t.length/n),i=0,a=0,c=0;c<o;c++){var u=t[i],f=t[i+1],s=t[i+2],l=u*u+f*f+s*s;if(l>0){var d=1/Math.sqrt(l);e[a]=d*u,e[a+1]=d*f,e[a+2]=d*s}i+=n,a+=r}}Object.freeze(Object.defineProperty({__proto__:null,normalize:l,normalizeView:s,scale:f,scaleView:u,shiftRight:function(e,t,r){for(var n=Math.min(e.count,t.count),o=e.typedBuffer,i=e.typedBufferStride,a=t.typedBuffer,c=t.typedBufferStride,u=0,f=0,s=0;s<n;s++)o[f]=a[u]>>r,o[f+1]=a[u+1]>>r,o[f+2]=a[u+2]>>r,u+=c,f+=i},transformMat3:c,transformMat3View:a,transformMat4:i,transformMat4View:o},Symbol.toStringTag,{value:"Module"}))},599:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(99),o=r(89),i=r(88),a=r(90),c=r(91),u=r(94),f=r(165),s=r(105),l=r(97),d=(r(96),r(98),r(93),r(138)),b=r(95),p=r(157),h=r(135),y=function(e){Object(a.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).type="georeferenced-relative",n.isRelative=!0,n.isGeoreferenced=!0,n.origin=Object(p.f)(),n}return Object(i.a)(r,[{key:"getOriginPoint",value:function(e){var t=Object(n.a)(this.origin,3),r=t[0],o=t[1],i=t[2];return new h.a({x:r,y:o,z:i,spatialReference:e})}},{key:"setOriginFormPoint",value:function(e){var t=e.x,r=e.y,n=e.z;this.origin=Object(p.i)(t,r,null!==n&&void 0!==n?n:0)}}]),r}(Object(f.b)(s.a));Object(u.a)([Object(d.a)({georeferencedRelative:"georeferenced-relative"},{readOnly:!0})],y.prototype,"type",void 0),Object(u.a)([Object(l.b)({type:[Number],nonNullable:!0,json:{write:!0}})],y.prototype,"origin",void 0);var v=y=Object(u.a)([Object(b.a)("esri.geometry.support.MeshGeoreferencedRelativeVertexSpace")],y)},636:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=r(102).a.getLogger("esri.views.3d.support.buffer.math")},735:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(88),o=r(89),i=r(90),a=r(91),c=r(94),u=r(165),f=r(105),s=(r(102),r(96),r(98),r(93),r(101),r(138)),l=r(95),d=function(e){Object(i.a)(r,e);var t=Object(a.a)(r);function r(){var e;return Object(o.a)(this,r),(e=t.call(this,{})).type="georeferenced",e.isRelative=!1,e.isGeoreferenced=!0,e}return Object(n.a)(r)}(Object(u.b)(f.a));Object(c.a)([Object(s.a)({georeferenced:"georeferenced"},{readOnly:!0})],d.prototype,"type",void 0);var b=d=Object(c.a)([Object(l.a)("esri.geometry.support.MeshGeoreferencedVertexSpace")],d)},736:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(99),o=r(89),i=r(88),a=r(90),c=r(91),u=r(94),f=r(165),s=r(105),l=r(97),d=(r(96),r(98),r(93),r(138)),b=r(95),p=r(157),h=r(135),y=function(e){Object(a.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).type="local",n.isRelative=!0,n.isGeoreferenced=!1,n.origin=Object(p.f)(),n}return Object(i.a)(r,[{key:"getOriginPoint",value:function(e){var t=Object(n.a)(this.origin,3),r=t[0],o=t[1],i=t[2];return new h.a({x:r,y:o,z:i,spatialReference:e})}},{key:"setOriginFormPoint",value:function(e){var t=e.x,r=e.y,n=e.z;this.origin=Object(p.i)(t,r,null!==n&&void 0!==n?n:0)}}]),r}(Object(f.b)(s.a));Object(u.a)([Object(d.a)({local:"local"},{readOnly:!0})],y.prototype,"type",void 0),Object(u.a)([Object(l.b)({type:[Number],nonNullable:!0,json:{write:!0}})],y.prototype,"origin",void 0);var v=y=Object(u.a)([Object(b.a)("esri.geometry.support.MeshLocalVertexSpace")],y)},812:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return u}));var n=r(312);function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e<=n.a?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function i(e){return(Object(n.c)(e)?e.length:e.byteLength/8)<=n.a?Array.from(e):new Float64Array(e)}function a(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}function c(e,t){for(var r=0;r<t.length;++r)e[r]=t[r];return e}function u(e){return Array.isArray(e)?new Float64Array(e):e}}}]);
//# sourceMappingURL=190.07a123d3.chunk.js.map
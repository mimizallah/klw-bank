{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/sources/geojson/GeoJSONSourceWorker.js","../node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js","../node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js"],"names":["O","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","C","_this","_classCallCheck","this","_queryEngine","_snapshotFeatures","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","t","wrap","_context","prev","next","_fetch","sent","abrupt","_createFeatures","stop","_x","apply","arguments","_createClass","key","value","_this$_queryEngine","destroy","_fieldsIndex","_createDefaultAttributes","_load","_callee2","i","r","n","o","l","u","d","p","c","y","m","_iterator","_step","_a","_e5","_","_e","_e2","_e3","I","b","w","T","_yield$this$_queryEng","x","q","_e4","_t","_args2","_context2","length","undefined","_loadOptions","url","customParameters","_checkProjection","spatialReference","t0","signal","g","geometryType","fields","hasZ","objectIdField","objectIdFieldName","a","timeInfo","unknownFields","push","name","message","details","S","get","type","editable","nullable","alias","objectIdFieldType","unshift","_createForOfIteratorHelper","s","done","field","R","jsonValues","includes","concat","k","t1","f","finish","requiredFields","indexOf","splice","startTimeField","endTimeField","trackIdField","j","warnings","featureErrors","layerDefinition","_objectSpread","drawingInfo","templates","F","extent","hasM","featureStore","h","cacheSpatialQueries","E","_objectIdGenerator","_createObjectIdGenerator","_normalizeFeatures","addMany","fetchRecomputedExtents","fullExtent","timeExtent","start","end","_x2","_applyEdits2","_callee3","_this$_queryEngine2","_context3","Promise","all","adds","updates","_waitSnapshotComplete","_applyEdits","_x3","_queryFeatures","_callee4","_args4","_context4","executeQuery","_queryFeatureCount","_callee5","_args5","_context5","executeQueryForCount","_queryObjectIds","_callee6","_args6","_context6","executeQueryForIds","_queryExtent","_callee7","_args7","_context7","executeQueryForExtent","_querySnapping","_callee8","_args8","_context8","executeQueryForSnapping","_x4","_refresh","_callee9","_this$_snapshotTask","_yield$this$_queryEng2","_this2","_context9","_snapshotTask","abort","promise","then","clear","getLogger","error","_x5","_createFeatures2","_callee10","_this$_queryEngine3","_iterator2","_step2","_n","_context10","geometry","err","_x6","_waitSnapshotComplete2","_callee11","_context11","finished","_fetch2","_callee12","_this$_loadOptions","_context12","responseType","query","data","_x7","_step3","_iterator3","attributes","_assignObjectId","objectId","_applyEdits3","_callee13","_iterator4","_step4","_e7","_yield$this$_queryEng3","_context13","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","removeManyById","featureEditResults","_x8","_step5","_this$_queryEngine4","_iterator5","uid","_d$geometry$spatialRe","_ref2","_step6","_this$_queryEngine5","_iterator6","has","getFeature","_d2$spatialReference","add","fieldsIndex","Date","now","toString","_step7","Number","NEGATIVE_INFINITY","_iterator7","Math","max","_checkProjection2","_callee14","_context14","_x9","renderer","symbol","_defineProperty","test","JSON","stringify","Function","description","prototype","analytics","supportsCacheHint","attachment","isVersioned","supportsAttachment","supportsM","supportsZ","metadata","supportsAdvancedFieldProperties","operations","supportsCalculate","supportsTruncate","supportsValidateSql","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsQueryAnalytics","supportsQueryTopFeatures","supportsResizeAttachments","supportsSync","supportsUpdate","supportsExceedsLimitStatistics","supportsAsyncConvert3D","queryRelated","supportsCount","queryTopFeatures","editing","supportsGeometryUpdate","supportsGlobalId","supportsReturnServiceEditsInSourceSpatialReference","supportsRollbackOnFailure","supportsUpdateWithoutM","supportsUploadWithItemId","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsUpdateByAnonymous","supportsUpdateByOthers","supportsAsyncApplyEdits","_marked2","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","features","t2","_marked","_t2","_t3","coordinates","delegateYield","t3","t5","t6","G","_step8","_iterator8","P","M","_step9","_iterator9","lengths","_t6","_slicedToArray","coords","crs","properties","code","RegExp","L","_o6","_p","_step10","Set","_t$geometryType","_iterator10","_loop","id","Object","keys","filter","delete","_step11","_iterator11","Array","from","_a2","_c","_u","_l","_f","_y"],"mappings":"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","file":"static/js/241.e2881326.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import{createTask as t}from\"../../../../core/asyncUtils.js\";import s from\"../../../../core/Error.js\";import i from\"../../../../core/Logger.js\";import{isAbortError as r}from\"../../../../core/promiseUtils.js\";import{getJsonType as n}from\"../../../../geometry/support/jsonUtils.js\";import{WGS84 as a,equals as o}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as l,convertToGeometry as u,convertFromFeatures as d,convertToFeature as p,convertFromFeature as c}from\"../../featureConversionUtils.js\";import h from\"../../data/FeatureStore.js\";import{checkProjectionSupport as y,project as m}from\"../../data/projectionSupport.js\";import{QueryEngine as f}from\"../../data/QueryEngine.js\";import{inferLayerProperties as g,createOptimizedFeatures as _,validateGeoJSON as I}from\"./geojson.js\";import{createDrawingInfo as j,createDefaultTemplate as F,createDefaultAttributesFunction as E}from\"../support/clientSideDefaults.js\";import{loadGeometryEngineForSimplify as b,mixAttributes as w,createFeatureEditSuccessResult as T,createFeatureEditErrorResult as x,simplify as q}from\"../support/sourceUtils.js\";import S from\"../../../support/FieldsIndex.js\";import{kebabDict as R}from\"../../../support/fieldType.js\";import{getFieldDefaultValue as k}from\"../../../support/fieldUtils.js\";const O={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};class C{constructor(){this._queryEngine=null,this._snapshotFeatures=async e=>{const t=await this._fetch(e);return this._createFeatures(t)}}destroy(){this._queryEngine?.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}async load(e,t={}){this._loadOptions={url:e.url,customParameters:e.customParameters};const i=[];await this._checkProjection(e.spatialReference);let r=null;e.url&&(r=await this._fetch(t?.signal));const n=g(r,{geometryType:e.geometryType}),o=e.fields||n.fields||[],l=null!=e.hasZ?e.hasZ:n.hasZ,u=n.geometryType;let d=e.objectIdField||n.objectIdFieldName||\"__OBJECTID\";const p=e.spatialReference||a;let c=e.timeInfo;o===n.fields&&n.unknownFields.length>0&&i.push({name:\"geojson-layer:unknown-field-types\",message:\"Some fields types couldn't be inferred from the features and were dropped\",details:{unknownFields:n.unknownFields}});let y=new S(o).get(d);y?(\"esriFieldTypeString\"!==y.type&&(y.type=\"esriFieldTypeOID\"),y.editable=!1,y.nullable=!1,d=y.name):(y={alias:d,name:d,type:\"string\"===n.objectIdFieldType?\"esriFieldTypeString\":\"esriFieldTypeOID\",editable:!1,nullable:!1},o.unshift(y));const m={};for(const a of o){if(null==a.name&&(a.name=a.alias),null==a.alias&&(a.alias=a.name),!a.name)throw new s(\"geojson-layer:invalid-field-name\",\"field name is missing\",{field:a});if(!R.jsonValues.includes(a.type))throw new s(\"geojson-layer:invalid-field-type\",`invalid type for field \"${a.name}\"`,{field:a});if(a.name!==y.name){const e=k(a);void 0!==e&&(m[a.name]=e)}}this._fieldsIndex=new S(o);const _=this._fieldsIndex.requiredFields.indexOf(y);if(_>-1&&this._fieldsIndex.requiredFields.splice(_,1),c){if(c.startTimeField){const e=this._fieldsIndex.get(c.startTimeField);e?(c.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):c.startTimeField=null}if(c.endTimeField){const e=this._fieldsIndex.get(c.endTimeField);e?(c.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):c.endTimeField=null}if(c.trackIdField){const e=this._fieldsIndex.get(c.trackIdField);e?c.trackIdField=e.name:(c.trackIdField=null,i.push({name:\"geojson-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:c}}))}c.startTimeField||c.endTimeField||(i.push({name:\"geojson-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing\",details:{timeInfo:c}}),c=null)}const I=u?j(u):void 0,b={warnings:i,featureErrors:[],layerDefinition:{...O,drawingInfo:I??void 0,templates:F(m),extent:void 0,geometryType:u,objectIdField:d,fields:o,hasZ:!!l,timeInfo:c}};this._queryEngine=new f({fields:o,geometryType:u,hasM:!1,hasZ:l,objectIdField:d,spatialReference:p,timeInfo:c,featureStore:new h({geometryType:u,hasM:!1,hasZ:l}),cacheSpatialQueries:!0}),this._createDefaultAttributes=E(m,d);const w=await this._createFeatures(r);this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,w);const T=this._normalizeFeatures(w,b.warnings,b.featureErrors);this._queryEngine.featureStore.addMany(T);const{fullExtent:x,timeExtent:q}=await this._queryEngine.fetchRecomputedExtents();if(b.layerDefinition.extent=x,q){const{start:e,end:t}=q;b.layerDefinition.timeInfo.timeExtent=[e,t]}return b}async applyEdits(e){const{spatialReference:t,geometryType:s}=this._queryEngine;return await Promise.all([b(t,s),y(e.adds,t),y(e.updates,t)]),await this._waitSnapshotComplete(),this._applyEdits(e)}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(e){this._loadOptions.customParameters=e,this._snapshotTask?.abort(),this._snapshotTask=t(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,e);const t=this._normalizeFeatures(e);t&&this._queryEngine.featureStore.addMany(t)}),(e=>{this._queryEngine.featureStore.clear(),r(e)||i.getLogger(\"esri.layers.GeoJSONLayer\").error(new s(\"geojson-layer:refresh\",\"An error occurred during refresh\",{error:e}))})),await this._waitSnapshotComplete();const{fullExtent:n,timeExtent:a}=await this._queryEngine.fetchRecomputedExtents();return{extent:n,timeExtent:a}}async _createFeatures(e){if(null==e)return[];const{geometryType:t,hasZ:s,objectIdField:i}=this._queryEngine,r=_(e,{geometryType:t,hasZ:s,objectIdField:i});if(!o(this._queryEngine.spatialReference,a))for(const n of r)null!=n.geometry&&(n.geometry=l(m(u(n.geometry,this._queryEngine.geometryType,this._queryEngine.hasZ,!1),a,this._queryEngine.spatialReference)));return r}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _fetch(t){const{url:s,customParameters:i}=this._loadOptions,r=(await e(s,{responseType:\"json\",query:{...i},signal:t})).data;return await I(r),r}_normalizeFeatures(e,t,s){const{objectIdField:i}=this._queryEngine,r=[];for(const n of e){const e=this._createDefaultAttributes(),a=w(this._fieldsIndex,e,n.attributes,!0,t);a?s?.push(a):(this._assignObjectId(e,n.attributes,!0),n.attributes=e,n.objectId=e[i],r.push(n))}return r}async _applyEdits(e){const{adds:t,updates:s,deletes:i}=e,r={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(r,t),s&&s.length&&this._applyUpdateEdits(r,s),i&&i.length){for(const e of i)r.deleteResults.push(T(e));this._queryEngine.featureStore.removeManyById(i)}const{fullExtent:n,timeExtent:a}=await this._queryEngine.fetchRecomputedExtents();return{extent:n,timeExtent:a,featureEditResults:r}}_applyAddEdits(e,t){const{addResults:s}=e,{geometryType:i,hasM:r,hasZ:a,objectIdField:o,spatialReference:l,featureStore:u}=this._queryEngine,p=[];for(const d of t){if(d.geometry&&i!==n(d.geometry)){s.push(x(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),r=w(this._fieldsIndex,t,d.attributes);if(r)s.push(r);else{if(this._assignObjectId(t,d.attributes),d.attributes=t,null!=d.uid){const t=d.attributes[o];e.uidToObjectId[d.uid]=t}if(null!=d.geometry){const e=d.geometry.spatialReference??l;d.geometry=m(q(d.geometry,e),e,l)}p.push(d),s.push(T(d.attributes[o]))}}u.addMany(d([],p,i,a,r,o))}_applyUpdateEdits({updateResults:e},t){const{geometryType:s,hasM:i,hasZ:r,objectIdField:a,spatialReference:o,featureStore:l}=this._queryEngine;for(const u of t){const{attributes:t,geometry:d}=u,h=t&&t[a];if(null==h){e.push(x(`Identifier field ${a} missing`));continue}if(!l.has(h)){e.push(x(`Feature with object id ${h} missing`));continue}const y=p(l.getFeature(h),s,r,i);if(null!=d){if(s!==n(d)){e.push(x(\"Incorrect geometry type.\"));continue}const t=d.spatialReference??o;y.geometry=m(q(d,t),t,o)}if(t){const s=w(this._fieldsIndex,y.attributes,t);if(s){e.push(s);continue}}l.add(c(y,s,r,i,a)),e.push(T(h))}}_createObjectIdGenerator(e,t){const s=e.fieldsIndex.get(e.objectIdField);if(\"esriFieldTypeString\"===s.type)return()=>s.name+\"-\"+Date.now().toString(16);let i=Number.NEGATIVE_INFINITY;for(const r of t)r.objectId&&(i=Math.max(i,r.objectId));return i=Math.max(0,i)+1,()=>i++}_assignObjectId(e,t,s=!1){const i=this._queryEngine.objectIdField;e[i]=s&&i in t?t[i]:this._objectIdGenerator()}async _checkProjection(e){try{await y(a,e)}catch{throw new s(\"geojson-layer\",\"Projection not supported\")}}}export{C as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{clone as t}from\"../../../../core/lang.js\";import{queryCapabilities as s}from\"../../data/QueryEngineCapabilities.js\";import{defaultPointSymbolJSON as r,defaultPolylineSymbolJSON as e,defaultPolygonSymbolJSON as p}from\"../../../../symbols/support/defaultsJSON.js\";function o(t){return{renderer:{type:\"simple\",symbol:\"esriGeometryPoint\"===t||\"esriGeometryMultipoint\"===t?r:\"esriGeometryPolyline\"===t?e:p}}}const u=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let n=1;function i(t,s){if(has(\"esri-csp-restrictions\"))return()=>({[s]:null,...t});try{let r=`this.${s} = null;`;for(const s in t){r+=`this${u.test(s)?`.${s}`:`[\"${s}\"]`} = ${JSON.stringify(t[s])};`}const e=new Function(`\\n      return class AttributesClass$${n++} {\\n        constructor() {\\n          ${r};\\n        }\\n      }\\n    `)();return()=>new e}catch(r){return()=>({[s]:null,...t})}}function a(s={}){return[{name:\"New Feature\",description:\"\",prototype:{attributes:t(s)}}]}function c(t,r){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:r,supportsDelete:r,supportsEditing:r,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:r,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:s,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:r,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1}}}export{c as createCapabilities,i as createDefaultAttributesFunction,a as createDefaultTemplate,o as createDrawingInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{OptimizedFeature as t}from\"../../OptimizedFeature.js\";import n from\"../../OptimizedGeometry.js\";import{normalizeFieldName as o,isNumericField as r}from\"../../../support/fieldUtils.js\";const i={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function s(e){return i[e]}function*c(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*u(e){if(e)switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*l(e,o={}){const{geometryType:r,objectIdField:i}=o;for(const c of e){const{geometry:e,properties:u,id:l}=c;if(e&&s(e.type)!==r)continue;const f=u||{};let a;i&&(a=f[i],null==l||a||(f[i]=a=l));const y=new t(e?g(new n,e,o):null,f,null,a??void 0);yield y}}function f(e){for(const t of e)if(t.length>2)return!0;return!1}function a(e){return!p(e)}function y(e){return p(e)}function p(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function d(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function g(e,t,n){switch(t.type){case\"LineString\":return m(e,t,n);case\"MultiLineString\":return h(e,t,n);case\"MultiPoint\":return w(e,t,n);case\"MultiPolygon\":return P(e,t,n);case\"Point\":return b(e,t,n);case\"Polygon\":return j(e,t,n)}}function m(e,t,n){return G(e,t.coordinates,n),e}function h(e,t,n){for(const o of t.coordinates)G(e,o,n);return e}function w(e,t,n){return G(e,t.coordinates,n),e}function P(e,t,n){for(const o of t.coordinates){S(e,o[0],n);for(let t=1;t<o.length;t++)F(e,o[t],n)}return e}function b(e,t,n){return k(e,t.coordinates,n),e}function j(e,t,n){const o=t.coordinates;S(e,o[0],n);for(let r=1;r<o.length;r++)F(e,o[r],n);return e}function S(e,t,n){const o=d(t);a(o)?M(e,o,n):G(e,o,n)}function F(e,t,n){const o=d(t);y(o)?M(e,o,n):G(e,o,n)}function G(e,t,n){for(const o of t)k(e,o,n);e.lengths.push(t.length)}function M(e,t,n){for(let o=t.length-1;o>=0;o--)k(e,t[o],n);e.lengths.push(t.length)}function k(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function O(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function T(t){if(!t)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:\"EPSG\"===n.type?n.properties.code:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function L(e,t={}){const n=[],i=new Set,l=new Set;let a,y=!1,p=null,d=!1,{geometryType:g=null}=t,m=!1;for(const r of c(e)){const{geometry:e,properties:t,id:c}=r;if(!e||(g||(g=s(e.type)),s(e.type)===g)){if(!y){y=f(u(e))}if(d||(d=null!=c,d&&(a=typeof c,t&&(p=Object.keys(t).filter((e=>t[e]===c))))),t&&p&&d&&null!=c&&(p.length>1?p=p.filter((e=>t[e]===c)):1===p.length&&(p=t[p[0]]===c?p:[])),!m&&t){let e=!0;for(const r in t){if(i.has(r))continue;const s=t[r];if(null==s){e=!1,l.add(r);continue}const c=O(s);if(\"unknown\"===c){l.add(r);continue}l.delete(r),i.add(r);const u=o(r);u&&n.push({name:u,alias:r,type:c})}m=e}}}const h=o(1===p?.length&&p[0]||null)??void 0;if(h)for(const o of n)if(o.name===h&&r(o)){o.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:g,hasZ:y,objectIdFieldName:h,objectIdFieldType:a,unknownFields:Array.from(l)}}function I(e,t){return Array.from(l(c(e),t))}export{I as createOptimizedFeatures,s as getGeometryType,L as inferLayerProperties,T as validateGeoJSON};\n"],"sourceRoot":""}
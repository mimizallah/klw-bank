(this["webpackJsonpklw-bank"]=this["webpackJsonpklw-bank"]||[]).push([[228],{1019:function(e,n,a){"use strict";a.d(n,"a",(function(){return w})),a.d(n,"b",(function(){return N})),a.d(n,"c",(function(){return x})),a.d(n,"d",(function(){return y})),a.d(n,"e",(function(){return h})),a.d(n,"f",(function(){return z})),a.d(n,"g",(function(){return F})),a.d(n,"h",(function(){return V})),a.d(n,"i",(function(){return M})),a.d(n,"j",(function(){return b})),a.d(n,"k",(function(){return p})),a.d(n,"l",(function(){return T})),a.d(n,"m",(function(){return D}));var t=a(92),r=a(112),i=a(809),l=a(810),u="<Null>",o="equal-interval",s=1,c=5,f=10,d=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,v=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),m=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function p(e){return null==e||"string"==typeof e&&!e?u:e}function b(e){var n=null!=e.normalizationField||null!=e.normalizationType,a=null!=e.minValue||null!=e.maxValue,t=!!e.sqlExpression&&e.supportsSQLExpression;return!n&&!a&&!t}function h(e){var n=e.returnDistinct?Object(r.a)(new Set(e.values)):e.values,a=n.filter((function(e){return null!=e})).sort(),t=a.length,i={count:t,min:a[0],max:a[t-1]};return e.supportsNullCount&&(i.nullcount=n.length-t),e.percentileParams&&(i.median=x(n,e.percentileParams)),i}function y(e){var n,a=e.values,r=e.useSampleStdDev,i=e.supportsNullCount,l=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,o=null,s=null,c=null,f=null,d=0,v=null==e.minValue?-1/0:e.minValue,m=null==e.maxValue?1/0:e.maxValue,p=Object(t.a)(a);try{for(p.s();!(n=p.n()).done;){var b=n.value;Number.isFinite(b)?b>=v&&b<=m&&(o=null===o?b:o+b,l=Math.min(l,b),u=Math.max(u,b),d++):"string"==typeof b&&d++}}catch(g){p.e(g)}finally{p.f()}if(d&&null!=o){s=o/d;var h,y=0,V=Object(t.a)(a);try{for(V.s();!(h=V.n()).done;){var j=h.value;Number.isFinite(j)&&j>=v&&j<=m&&(y+=Math.pow(j-s,2))}}catch(g){V.e(g)}finally{V.f()}f=r?d>1?y/(d-1):0:d>0?y/d:0,c=Math.sqrt(f)}else l=null,u=null;var O={avg:s,count:d,max:u,min:l,stddev:c,sum:o,variance:f};return i&&(O.nullcount=a.length-d),e.percentileParams&&(O.median=x(a,e.percentileParams)),O}function x(e,n){var a=n.fieldType,t=n.value,i=n.orderBy,l=n.isDiscrete,u=V(a,"desc"===i);if(0===(e=Object(r.a)(e).filter((function(e){return null!=e})).sort((function(e,n){return u(e,n)}))).length)return null;if(t<=0)return e[0];if(t>=1)return e[e.length-1];var o=(e.length-1)*t,s=Math.floor(o),c=s+1,f=o%1,d=e[s],v=e[c];return c>=e.length||l||"string"==typeof d||"string"==typeof v?d:d*(1-f)+v*f}function V(e,n){var a=n?1:-1,t=function(e){return e?function(e,n){var a=j(e,n,!0);return null!=a?a:n-e}:function(e,n){var a=j(e,n,!1);return null!=a?a:e-n}}(n),i=O(n);if(!e||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID"].concat(Object(r.a)(v)).includes(e))return function(e,n){return"number"==typeof e&&"number"==typeof n?t(e,n):"string"==typeof e&&"string"==typeof n?i(e,n):a};if("esriFieldTypeDate"===e)return function(e,n){var r=new Date(e).getTime(),i=new Date(n).getTime();return isNaN(r)||isNaN(i)?a:t(r,i)};if(v.has(e))return function(e,n){return t(e,n)};if("esriFieldTypeString"===e)return function(e,n){return i(e,n)};if("esriFieldTypeGUID"===e||"esriFieldTypeGlobalID"===e){var l=O(n);return function(e,n){return l(g(e),g(n))}}return n?function(e,n){return 1}:function(e,n){return-1}}function j(e,n,a){if(a){if(null==e)return null==n?0:1;if(null==n)return-1}else{if(null==e)return null==n?0:-1;if(null==n)return 1}return null}function O(e){return e?function(e,n){var a=j(e,n,!0);return null!=a?a:(e=e.toUpperCase())>(n=n.toUpperCase())?-1:e<n?1:0}:function(e,n){var a=j(e,n,!1);return null!=a?a:(e=e.toUpperCase())<(n=n.toUpperCase())?-1:e>n?1:0}}function g(e){return e.substr(24,12)+e.substr(19,4)+e.substr(16,2)+e.substr(14,2)+e.substr(11,2)+e.substr(9,2)+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2)}function T(e,n){var a;for(a in e)m.includes(a)&&(Number.isFinite(e[a])||(e[a]=null));return n?(["avg","stddev","variance"].forEach((function(n){var a;null!=e[n]&&(e[n]=Math.ceil(null!==(a=e[n])&&void 0!==a?a:0))})),e):e}function z(e){var n,a={},r=Object(t.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;(null==i||"string"==typeof i&&""===i.trim())&&(i=null),null==a[i]?a[i]={count:1,data:i}:a[i].count++}}catch(l){r.e(l)}finally{r.f()}return{count:a}}function I(e){return"coded-value"!==(null===e||void 0===e?void 0:e.type)?[]:e.codedValues.map((function(e){return e.code}))}function F(e,n,a,r){var i=e.count,l=[];if(a&&n){var u,o=[],s=I(n[0]),c=Object(t.a)(s);try{for(c.s();!(u=c.n()).done;){var f=u.value;if(n[1]){var d,v=I(n[1]),m=Object(t.a)(v);try{for(m.s();!(d=m.n()).done;){var b=d.value;if(n[2]){var h,y=I(n[2]),x=Object(t.a)(y);try{for(x.s();!(h=x.n()).done;){var V=h.value;o.push("".concat(p(f)).concat(r).concat(p(b)).concat(r).concat(p(V)))}}catch(F){x.e(F)}finally{x.f()}}else o.push("".concat(p(f)).concat(r).concat(p(b)))}}catch(F){m.e(F)}finally{m.f()}}else o.push(f)}}catch(F){c.e(F)}finally{c.f()}for(var j=0,O=o;j<O.length;j++){var g=O[j];i.hasOwnProperty(g)||(i[g]={data:g,count:0})}}for(var T in i){var z=i[T];l.push({value:z.data,count:z.count,label:z.label})}return{uniqueValueInfos:l}}function M(e,n,a,t){var r=null;switch(n){case"log":0!==e&&(r=Math.log(e)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(t)&&0!==t&&(r=e/t*100);break;case"field":Number.isFinite(a)&&0!==a&&(r=e/a);break;case"natural-log":e>0&&(r=Math.log(e));break;case"square-root":e>0&&(r=Math.pow(e,.5))}return r}function w(e,n){var a=k({field:n.field,normalizationType:n.normalizationType,normalizationField:n.normalizationField,classificationMethod:n.classificationMethod,standardDeviationInterval:n.standardDeviationInterval,breakCount:n.numClasses||c});return e=function(e,n,a){var t=null!==n&&void 0!==n?n:-1/0,r=null!==a&&void 0!==a?a:1/0;return e.filter((function(e){return Number.isFinite(e)&&e>=t&&e<=r}))}(e,n.minValue,n.maxValue),Object(l.a)({definition:a,values:e,normalizationTotal:n.normalizationTotal})}function k(e){var n=e.breakCount,a=e.field,t=e.normalizationField,r=e.normalizationType,l=e.classificationMethod||o,u="standard-deviation"===l?e.standardDeviationInterval||s:void 0;return new i.a({breakCount:n,classificationField:a,classificationMethod:l,normalizationField:"field"===r?t:void 0,normalizationType:r,standardDeviationInterval:u})}function D(e,n){var a,t,r=e.classBreaks,i=r.length,l=null===(a=r[0])||void 0===a?void 0:a.minValue,u=null===(t=r[i-1])||void 0===t?void 0:t.maxValue,o="standard-deviation"===n,s=d;return r=r.map((function(e){var n=e.label,a={minValue:e.minValue,maxValue:e.maxValue,label:n};if(o&&n){var t,r=n.match(s),i=null!==(t=null===r||void 0===r?void 0:r.map((function(e){return+e.trim()})))&&void 0!==t?t:[];2===i.length?(a.minStdDev=i[0],a.maxStdDev=i[1],i[0]<0&&i[1]>0&&(a.hasAvg=!0)):1===i.length&&(n.includes("<")?(a.minStdDev=null,a.maxStdDev=i[0]):n.includes(">")&&(a.minStdDev=i[0],a.maxStdDev=null))}return a})),{minValue:l,maxValue:u,classBreakInfos:r,normalizationTotal:e.normalizationTotal}}function N(e,n){var a,r,i=S(e,n);if(null==i.min&&null==i.max)return{bins:[],minValue:i.min,maxValue:i.max,normalizationTotal:n.normalizationTotal};var l,u=i.intervals,o=null!==(a=i.min)&&void 0!==a?a:0,s=null!==(r=i.max)&&void 0!==r?r:0,c=u.map((function(e,n){return{minValue:u[n][0],maxValue:u[n][1],count:0}})),f=Object(t.a)(e);try{for(f.s();!(l=f.n()).done;){var d=l.value;if(null!=d&&d>=o&&d<=s){var v=C(u,d);v>-1&&c[v].count++}}}catch(m){f.e(m)}finally{f.f()}return{bins:c,minValue:o,maxValue:s,normalizationTotal:n.normalizationTotal}}function S(e,n){var a=n.field,t=n.classificationMethod,r=n.standardDeviationInterval,i=n.normalizationType,l=n.normalizationField,u=n.normalizationTotal,o=n.minValue,s=n.maxValue,c=n.numBins||f,d=null,v=null,m=null;if(t&&"equal-interval"!==t||i){var p=w(e,{field:a,normalizationType:i,normalizationField:l,normalizationTotal:u,classificationMethod:t,standardDeviationInterval:r,minValue:o,maxValue:s,numClasses:c}).classBreaks;d=p[0].minValue,v=p[p.length-1].maxValue,m=p.map((function(e){return[e.minValue,e.maxValue]}))}else{var h,x;if(null!=o&&null!=s)d=o,v=s;else{var V,j,O=y({values:e,minValue:o,maxValue:s,useSampleStdDev:!i,supportsNullCount:b({normalizationType:i,normalizationField:l,minValue:o,maxValue:s})});d=null!==(V=O.min)&&void 0!==V?V:null,v=null!==(j=O.max)&&void 0!==j?j:null}m=function(e,n,a){for(var t,r=(n-e)/a,i=[],l=e,u=1;u<=a;u++)t=l+r,t=Number(t.toFixed(16)),i.push([l,u===a?n:t]),l=t;return i}(null!==(h=d)&&void 0!==h?h:0,null!==(x=v)&&void 0!==x?x:0,c)}return{min:d,max:v,intervals:m}}function C(e,n){for(var a=-1,t=e.length-1;t>=0;t--)if(n>=e[t][0]){a=t;break}return a}},2282:function(e,n,a){"use strict";a.r(n),a.d(n,"classBreaks",(function(){return T})),a.d(n,"heatmapStatistics",(function(){return M})),a.d(n,"histogram",(function(){return I})),a.d(n,"summaryStatistics",(function(){return V})),a.d(n,"uniqueValues",(function(){return O}));var t=a(4),r=a(12),i=a(1),l=a(92),u=(a(119),a(101),a(108)),o=a(125),s=a(327),c=a(132),f=(a(195),a(307)),d=a(1019),v=a(207),m=a(135),p=null;function b(e,n,a,t){var r=Object(c.q)(a)?Object(c.e)(a):null,i=r?Math.round((r.valid[1]-r.valid[0])/n.scale[0]):null;return e.map((function(e){var a=new m.a(e.geometry);return Object(s.b)(n,a,a,a.hasZ,a.hasM),e.geometry=r?function(e,n,a){return e.x<0?e.x+=n:e.x>a&&(e.x-=n),e}(a,null!==i&&void 0!==i?i:0,t[0]):a,e}))}function h(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,a=arguments.length>2?arguments[2]:void 0,t=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=new Float64Array(r*i);n=Math.round(Object(u.c)(n));var s,c=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,v=0,m=0,p=0,b=0,h=Object(f.c)(t,a),y=Object(l.a)(e);try{for(y.s();!(s=y.n()).done;)for(var x=s.value,V=x.geometry,j=x.attributes,O=V.x,g=V.y,T=Math.max(0,O-n),z=Math.max(0,g-n),I=Math.min(i,g+n),F=Math.min(r,O+n),M=+h(j),w=z;w<I;w++)for(var k=T;k<F;k++){var D=w*r+k,N=Object(f.e)(k-O,w-g,n),S=o[D],C=(v=o[D]+=N*M)-S;m+=C,p+=C*C,v<c&&(c=v),v>d&&(d=v),b++}}catch(q){y.e(q)}finally{y.f()}if(!b)return{mean:0,stddev:0,min:0,max:0,mid:0,count:0};var E=(d-c)/2;return{mean:m/b,stdDev:Math.sqrt((p-m*m/b)/b),min:c,max:d,mid:E,count:b}}function y(e,n){return x.apply(this,arguments)}function x(){return(x=Object(r.a)(Object(t.a)().mark((function e(n,a){var r,l,u,s,c,f,m,b,h,y,x,V,j,O,g,T;return Object(t.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",[]);case 2:if(r=n.field,l=n.field2,u=n.field3,s=n.fieldDelimiter,c=n.valueExpression,f=n.normalizationType,m=n.normalizationField,b=n.normalizationTotal,h=[],y=n.viewInfoParams,x=null,V=null,!c){e.next=17;break}if(p){e.next=11;break}return e.next=8,Object(v.e)();case 8:j=e.sent,O=j.arcadeUtils,p=O;case 11:if(e.t0=p.hasGeometryOperations(c),!e.t0){e.next=15;break}return e.next=15,p.enableGeometryOperations();case 15:x=p.createFunction(c),V=y&&p.getViewInfo({viewingMode:y.viewingMode,scale:y.scale,spatialReference:new o.a(y.spatialReference)});case 17:return g=n.fieldInfos,T=a[0]&&"declaredClass"in a[0]&&"esri.Graphic"===a[0].declaredClass||!g?null:{fields:g},e.abrupt("return",(a.forEach((function(e){var n,a=e.attributes;if(c){var t=T?Object(i.a)(Object(i.a)({},e),{},{layer:T}):e,o=p.createExecContext(t,V);n=p.executeFunction(x,o)}else a&&(n=a[r],l&&(n="".concat(Object(d.k)(n)).concat(s).concat(Object(d.k)(a[l])),u&&(n="".concat(n).concat(s).concat(Object(d.k)(a[u])))));if(f&&"number"==typeof n&&isFinite(n)){var v=a&&parseFloat(a[m]);n=Object(d.i)(n,f,v,b)}h.push(n)})),h));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return j.apply(this,arguments)}function j(){return(j=Object(r.a)(Object(t.a)().mark((function e(n){var a,r,i,l,u,o,s,c,f,v,m;return Object(t.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.attribute,r=n.features,i=a.normalizationType,l=a.normalizationField,u=a.minValue,o=a.maxValue,s=a.fieldType,e.next=9,y({field:a.field,valueExpression:a.valueExpression,normalizationType:i,normalizationField:l,normalizationTotal:a.normalizationTotal,viewInfoParams:a.viewInfoParams,fieldInfos:a.fieldInfos},r);case 9:return c=e.sent,f=Object(d.j)({normalizationType:i,normalizationField:l,minValue:u,maxValue:o}),v={value:.5,fieldType:s},m="esriFieldTypeString"===s?Object(d.e)({values:c,supportsNullCount:f,percentileParams:v}):Object(d.d)({values:c,minValue:u,maxValue:o,useSampleStdDev:!i,supportsNullCount:f,percentileParams:v}),e.abrupt("return",Object(d.l)(m,"esriFieldTypeDate"===s));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return g.apply(this,arguments)}function g(){return(g=Object(r.a)(Object(t.a)().mark((function e(n){var a,r,i,l;return Object(t.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.attribute,r=n.features,e.next=4,y({field:a.field,field2:a.field2,field3:a.field3,fieldDelimiter:a.fieldDelimiter,valueExpression:a.valueExpression,viewInfoParams:a.viewInfoParams,fieldInfos:a.fieldInfos},r);case 4:return i=e.sent,l=Object(d.f)(i),e.abrupt("return",Object(d.g)(l,a.domains,a.returnAllCodedValues,a.fieldDelimiter));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return z.apply(this,arguments)}function z(){return(z=Object(r.a)(Object(t.a)().mark((function e(n){var a,r,i,l,u,o,s,c,f;return Object(t.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.attribute,r=n.features,i=a.field,l=a.normalizationType,u=a.normalizationField,o=a.normalizationTotal,s=a.classificationMethod,e.next=9,y({field:i,valueExpression:a.valueExpression,normalizationType:l,normalizationField:u,normalizationTotal:o,viewInfoParams:a.viewInfoParams,fieldInfos:a.fieldInfos},r);case 9:return c=e.sent,f=Object(d.a)(c,{field:i,normalizationType:l,normalizationField:u,normalizationTotal:o,classificationMethod:s,standardDeviationInterval:a.standardDeviationInterval,numClasses:a.numClasses,minValue:a.minValue,maxValue:a.maxValue}),e.abrupt("return",Object(d.m)(f,s));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return F.apply(this,arguments)}function F(){return(F=Object(r.a)(Object(t.a)().mark((function e(n){var a,r,i,l,u,o,s,c;return Object(t.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.attribute,r=n.features,i=a.field,l=a.normalizationType,u=a.normalizationField,o=a.normalizationTotal,s=a.classificationMethod,e.next=9,y({field:i,valueExpression:a.valueExpression,normalizationType:l,normalizationField:u,normalizationTotal:o,viewInfoParams:a.viewInfoParams,fieldInfos:a.fieldInfos},r);case 9:return c=e.sent,e.abrupt("return",Object(d.b)(c,{field:i,normalizationType:l,normalizationField:u,normalizationTotal:o,classificationMethod:s,standardDeviationInterval:a.standardDeviationInterval,numBins:a.numBins,minValue:a.minValue,maxValue:a.maxValue}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return w.apply(this,arguments)}function w(){return(w=Object(r.a)(Object(t.a)().mark((function e(n){var a,r,i,l,u,o,s,c,f,d,v,m,p,y,x,V;return Object(t.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.attribute,i=n.features,l=r.field,u=r.radius,o=r.fieldOffset,s=r.transform,c=r.spatialReference,f=null!==(a=r.size)&&void 0!==a?a:[0,0],d=b(null!==i&&void 0!==i?i:[],s,c,f),v=h(d,null!==u&&void 0!==u?u:void 0,o,l,f[0],f[1]),m=v.count,p=v.min,y=v.max,x=v.mean,V=v.stdDev,e.abrupt("return",{count:m,min:p,max:y,avg:x,stddev:V});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},809:function(e,n,a){"use strict";a.d(n,"a",(function(){return b}));var t=a(89),r=a(88),i=a(90),l=a(91),u=a(94),o=a(146),s=a(105),c=a(97),f=(a(96),a(98),a(93),a(138)),d=a(95),v=new o.a({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),m=new o.a({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),p=function(e){Object(i.a)(a,e);var n=Object(l.a)(a);function a(e){var r;return Object(t.a)(this,a),(r=n.call(this,e)).type="class-breaks-definition",r.breakCount=null,r.classificationField=null,r.classificationMethod=null,r.normalizationField=null,r.normalizationType=null,r}return Object(r.a)(a,[{key:"standardDeviationInterval",set:function(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}},{key:"definedInterval",set:function(e){"defined-interval"===this.classificationMethod&&this._set("definedInterval",e)}}]),a}(s.a);Object(u.a)([Object(f.a)({classBreaksDef:"class-breaks-definition"})],p.prototype,"type",void 0),Object(u.a)([Object(c.b)({json:{write:!0}})],p.prototype,"breakCount",void 0),Object(u.a)([Object(c.b)({json:{write:!0}})],p.prototype,"classificationField",void 0),Object(u.a)([Object(c.b)({type:String,json:{read:v.read,write:v.write}})],p.prototype,"classificationMethod",void 0),Object(u.a)([Object(c.b)({json:{write:!0}})],p.prototype,"normalizationField",void 0),Object(u.a)([Object(c.b)({json:{read:m.read,write:m.write}})],p.prototype,"normalizationType",void 0),Object(u.a)([Object(c.b)({value:null,json:{write:!0}})],p.prototype,"standardDeviationInterval",null),Object(u.a)([Object(c.b)({value:null,json:{write:!0}})],p.prototype,"definedInterval",null);var b=p=Object(u.a)([Object(d.a)("esri.rest.support.ClassBreaksDefinition")],p)},810:function(e,n,a){"use strict";a.d(n,"a",(function(){return i}));var t=a(102).a.getLogger("esri.rest.support.generateRendererUtils");function r(e,n){return Number(e.toFixed(n))}function i(e){var n=e.normalizationTotal;return{classBreaks:l(e),normalizationTotal:n}}function l(e){var n,a=e.definition,t=a.classificationMethod,i=a.normalizationType,l=a.definedInterval,c=null!==(n=a.breakCount)&&void 0!==n?n:1,f=[],d=e.values;if(0===d.length)return[];d=d.sort((function(e,n){return e-n}));var v=d[0],m=d[d.length-1];if("equal-interval"===t)if(d.length>=c){for(var p=(m-v)/c,b=v,h=1;h<c;h++){var y=r(v+h*p,6);f.push({minValue:b,maxValue:y,label:u(b,y,i)}),b=y}f.push({minValue:b,maxValue:m,label:u(b,m,i)})}else d.forEach((function(e){f.push({minValue:e,maxValue:e,label:u(e,e,i)})}));else if("natural-breaks"===t){for(var x=o(d),V=e.valueFrequency||x.valueFrequency,j=s(x.uniqueValues,V,c),O=v,g=1;g<c;g++)if(x.uniqueValues.length>g){var T=r(x.uniqueValues[j[g]],6);f.push({minValue:O,maxValue:T,label:u(O,T,i)}),O=T}f.push({minValue:O,maxValue:m,label:u(O,m,i)})}else if("quantile"===t)if(d.length>=c&&v!==m){for(var z=v,I=Math.ceil(d.length/c),F=0,M=1;M<c;M++){var w=I+F-1;w>d.length&&(w=d.length-1),w<0&&(w=0),f.push({minValue:z,maxValue:d[w],label:u(z,d[w],i)}),z=d[w],F+=I,I=Math.ceil((d.length-F)/(c-M))}f.push({minValue:z,maxValue:m,label:u(z,m,i)})}else for(var k=-1,D=0;D<d.length;D++){var N=d[D];N!==k&&(k=N,f.push({minValue:k,maxValue:N,label:u(k,N,i)}),k=N)}else if("standard-deviation"===t){var S=function(e){for(var n=0,a=0;a<e.length;a++)n+=e[a];return n/=e.length,n}(d),C=function(e,n){for(var a=0,t=0;t<e.length;t++){var r=e[t];a+=(r-n)*(r-n)}return a/=e.length,Math.sqrt(a)}(d,S);if(0===C)f.push({minValue:d[0],maxValue:d[0],label:u(d[0],d[0],i)});else{for(var E=function(e,n,a,t,r){var i=Math.max(t-e,n-t)/r/a;return i=i>=1?1:i>=.5?.5:.25,i}(v,m,c,S,C)*C,q=0,P=v,B=c;B>=1;B--){var G=r(S-(B-.5)*E,6);f.push({minValue:P,maxValue:G,label:u(P,G,i)}),P=G,q++}var U=r(S+.5*E,6);f.push({minValue:P,maxValue:U,label:u(P,U,i)}),P=U,q++;for(var _=1;_<=c;_++)U=q===2*c?m:r(S+(_+.5)*E,6),f.push({minValue:P,maxValue:U,label:u(P,U,i)}),P=U,q++}}else if("defined-interval"===t){if(!l)return f;for(var A=d[0],L=d[d.length-1],R=Math.ceil((L-A)/l),Y=A,J=1;J<R;J++){var Q=r(A+J*l,6);f.push({minValue:Y,maxValue:Q,label:u(Y,Q,i)}),Y=Q}f.push({minValue:Y,maxValue:L,label:u(Y,L,i)})}return f}function u(e,n,a){return e===n?a&&"percent-of-total"===a?e+"%":e.toString():a&&"percent-of-total"===a?e+"% - "+n+"%":e+" - "+n}function o(e){for(var n=[],a=[],t=Number.MIN_VALUE,r=1,i=-1,l=0;l<e.length;l++){var u=e[l];u===t?(r++,a[i]=r):null!==u&&(n.push(u),t=u,r=1,a.push(r),i++)}return{uniqueValues:n,valueFrequency:a}}function s(e,n,a){var t=e.length,r=[];a>t&&(a=t);for(var i=0;i<a;i++)r.push(Math.round(i*t/a-1));r.push(t-1);var l=c(r,e,n,a);return function(e,n,a,t,r,i){for(var l=0,u=0,o=0,s=0,c=!0,d=0;d<2&&c;d++){0===d&&(c=!1);for(var v=0;v<i-1;v++)for(;a[v+1]+1!==a[v+2];){a[v+1]=a[v+1]+1;var m=f(v,a,t,r);o=m.sbMean,l=m.sbSdcm;var p=f(v+1,a,t,r);if(s=p.sbMean,!(l+(u=p.sbSdcm)<n[v]+n[v+1])){a[v+1]=a[v+1]-1;break}n[v]=l,n[v+1]=u,e[v]=o,e[v+1]=s,c=!0}for(var b=i-1;b>0;b--)for(;a[b]!==a[b-1]+1;){a[b]=a[b]-1;var h=f(b-1,a,t,r);o=h.sbMean,l=h.sbSdcm;var y=f(b,a,t,r);if(s=y.sbMean,!(l+(u=y.sbSdcm)<n[b-1]+n[b])){a[b]=a[b]+1;break}n[b-1]=l,n[b]=u,e[b-1]=o,e[b]=s,c=!0}}return c}(l.mean,l.sdcm,r,e,n,a)&&(l=c(r,e,n,a)),r}function c(e,n,a,t){for(var r=[],i=[],l=[],u=0,o=[],s=[],c=0;c<t;c++){var d=f(c,e,n,a);o.push(d.sbMean),s.push(d.sbSdcm),u+=s[c]}for(var v,m=u,p=!0;p||u<m;){p=!1,r=[];for(var b=0;b<t;b++)r.push(e[b]);for(var h=0;h<t;h++)for(var y=e[h]+1;y<=e[h+1];y++)if(v=n[y],h>0&&y!==e[h+1]&&Math.abs(v-o[h])>Math.abs(v-o[h-1]))e[h]=y;else if(h<t-1&&e[h]!==y-1&&Math.abs(v-o[h])>Math.abs(v-o[h+1])){e[h+1]=y-1;break}m=u,u=0,i=[],l=[];for(var x=0;x<t;x++){i.push(o[x]),l.push(s[x]);var V=f(x,e,n,a);o[x]=V.sbMean,s[x]=V.sbSdcm,u+=s[x]}}if(u>m){for(var j=0;j<t;j++)e[j]=r[j],o[j]=i[j],s[j]=l[j];u=m}return{mean:o,sdcm:s}}function f(e,n,a,r){for(var i=0,l=0,u=n[e]+1;u<=n[e+1];u++){var o=r[u];i+=a[u]*o,l+=o}l<=0&&t.warn("Exception in Natural Breaks calculation");for(var s=i/l,c=0,f=n[e]+1;f<=n[e+1];f++)c+=r[f]*Math.pow(a[f]-s,2);return{sbMean:s,sbSdcm:c}}}}]);
//# sourceMappingURL=228.a0723c4a.chunk.js.map